"use strict";var IU=Object.defineProperty,DU=Object.defineProperties,CU=Object.getOwnPropertyDescriptors,B1=Object.getOwnPropertySymbols,TU=Object.prototype.hasOwnProperty,AU=Object.prototype.propertyIsEnumerable,j1=(ot,Te,x)=>Te in ot?IU(ot,Te,{enumerable:!0,configurable:!0,writable:!0,value:x}):ot[Te]=x,$1=(ot,Te)=>{for(var x in Te||(Te={}))TU.call(Te,x)&&j1(ot,x,Te[x]);if(B1)for(var x of B1(Te))AU.call(Te,x)&&j1(ot,x,Te[x]);return ot},H1=(ot,Te)=>DU(ot,CU(Te));(self.webpackChunkrepaso_1_parcial=self.webpackChunkrepaso_1_parcial||[]).push([[179],{2011:(ot,Te,x)=>{x.d(Te,{Dh:()=>le,GT:()=>we,Ot:()=>he,cc:()=>Ae,hO:()=>Ge,on:()=>q,pX:()=>pe,xv:()=>me});var c=x(5e3),k=x(127),M=x(880);ot=x.hmd(ot);const se=["ngOnDestroy"],pe=(De,et,Ze,ke={})=>new Proxy(De,{get:(Ne,Ce)=>Ze.runOutsideAngular(()=>{var Je;if(De[Ce])return(null===(Je=null==ke?void 0:ke.spy)||void 0===Je?void 0:Je.get)&&ke.spy.get(Ce,De[Ce]),De[Ce];if(se.indexOf(Ce)>-1)return()=>{};const J=et.toPromise().then(fe=>{const V=fe&&fe[Ce];return"function"==typeof V?V.bind(fe):V&&V.then?V.then(ne=>Ze.run(()=>ne)):Ze.run(()=>V)});return new Proxy(()=>{},{get:(fe,V)=>J[V],apply:(fe,V,ne)=>J.then(ue=>{var ce;const Pe=ue&&ue(...ne);return(null===(ce=null==ke?void 0:ke.spy)||void 0===ce?void 0:ce.apply)&&ke.spy.apply(Ce,ne,Pe),Pe})})})}),we=(De,et)=>{et.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(ke=>{Object.defineProperty(De.prototype,ke,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,ke))})})};class he{constructor(et){return et}}const le=new c.OlP("angularfire2.app.options"),me=new c.OlP("angularfire2.app.name");function q(De,et,Ze){const Ne="object"==typeof Ze&&Ze||{};Ne.name=Ne.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Je=k.Z.apps.filter(J=>J&&J.name===Ne.name)[0]||et.runOutsideAngular(()=>k.Z.initializeApp(De,Ne));try{JSON.stringify(De)!==JSON.stringify(Je.options)&&$("error",`${Je.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(J){}return new he(Je)}const $=(De,...et)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[De](...et)},oe={provide:he,useFactory:q,deps:[le,c.R0b,[new c.FiY,me]]};let Ge=(()=>{class De{constructor(Ze){k.Z.registerVersion("angularfire",M.q4.full,"core"),k.Z.registerVersion("angularfire",M.q4.full,"app-compat"),k.Z.registerVersion("angular",c.q4F.full,Ze.toString())}static initializeApp(Ze,ke){return{ngModule:De,providers:[{provide:le,useValue:Ze},{provide:me,useValue:ke}]}}}return De.\u0275fac=function(Ze){return new(Ze||De)(c.LFG(c.Lbi))},De.\u0275mod=c.oAB({type:De}),De.\u0275inj=c.cJS({providers:[oe]}),De})();function Ae(De,et,Ze,ke,Ne){const[,Ce,Je]=globalThis.\u0275AngularfireInstanceCache.find(J=>J[0]===De)||[];if(Ce)return function Be(De,et){try{return De.toString()===et.toString()}catch(Ze){return De===et}}(Ne,Je)||(ye("error",`${et} was already initialized on the ${Ze} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Ne,was:Je})),Ce;{const J=ke();return globalThis.\u0275AngularfireInstanceCache.push([De,J,Ne]),J}}const qe=!!ot.hot,ye=(De,...et)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[De](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(ot,Te,x)=>{x.d(Te,{q4:()=>ds,iC:()=>vr,fc:()=>Eo,HU:()=>la,vb:()=>uu,JM:()=>ua,nk:()=>aa,u3:()=>Ni});var c=x(5e3),k=x(5867),M=x(5861),se=x(9681),pe=x(2090),we=x(4859),he=x(1877);x(2833);const me="@firebase/remote-config",q="0.3.8",Ae=new pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rt{constructor(P,Y,ge,He){this.client=P,this.storage=Y,this.storageCache=ge,this.logger=He}isCachedDataFresh(P,Y){if(!Y)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-Y,He=ge<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${He}.`),He}fetch(P){var Y=this;return(0,M.Z)(function*(){const[ge,He]=yield Promise.all([Y.storage.getLastSuccessfulFetchTimestampMillis(),Y.storage.getLastSuccessfulFetchResponse()]);if(He&&Y.isCachedDataFresh(P.cacheMaxAgeMillis,ge))return He;P.eTag=He&&He.eTag;const Xe=yield Y.client.fetch(P),Mt=[Y.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Xe.status&&Mt.push(Y.storage.setLastSuccessfulFetchResponse(Xe)),yield Promise.all(Mt),Xe})()}}function En(R=navigator){return R.languages&&R.languages[0]||R.language}class it{constructor(P,Y,ge,He,Xe,Mt){this.firebaseInstallations=P,this.sdkVersion=Y,this.namespace=ge,this.projectId=He,this.apiKey=Xe,this.appId=Mt}fetch(P){var Y=this;return(0,M.Z)(function*(){const[ge,He]=yield Promise.all([Y.firebaseInstallations.getId(),Y.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Y.projectId}/namespaces/${Y.namespace}:fetch?key=${Y.apiKey}`,ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},Nn={sdk_version:Y.sdkVersion,app_instance_id:ge,app_instance_id_token:He,app_id:Y.appId,language_code:En()},In={method:"POST",headers:ut,body:JSON.stringify(Nn)},Dn=fetch(Mt,In),Wt=new Promise((jt,Oi)=>{P.signal.addEventListener(()=>{const Cn=new Error("The operation was aborted.");Cn.name="AbortError",Oi(Cn)})});let hs;try{yield Promise.race([Dn,Wt]),hs=yield Dn}catch(jt){let Oi="fetch-client-network";throw"AbortError"===jt.name&&(Oi="fetch-timeout"),Ae.create(Oi,{originalErrorMessage:jt.message})}let fi=hs.status;const ha=hs.headers.get("ETag")||void 0;let es,Fe;if(200===hs.status){let jt;try{jt=yield hs.json()}catch(Oi){throw Ae.create("fetch-client-parse",{originalErrorMessage:Oi.message})}es=jt.entries,Fe=jt.state}if("INSTANCE_STATE_UNSPECIFIED"===Fe?fi=500:"NO_CHANGE"===Fe?fi=304:("NO_TEMPLATE"===Fe||"EMPTY_CONFIG"===Fe)&&(es={}),304!==fi&&200!==fi)throw Ae.create("fetch-status",{httpStatus:fi});return{status:fi,eTag:ha,config:es}})()}}class ln{constructor(P,Y){this.client=P,this.storage=Y}fetch(P){var Y=this;return(0,M.Z)(function*(){const ge=(yield Y.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Y.attemptFetch(P,ge)})()}attemptFetch(P,{throttleEndTimeMillis:Y,backoffCount:ge}){var He=this;return(0,M.Z)(function*(){yield function dt(R,P){return new Promise((Y,ge)=>{const He=Math.max(P-Date.now(),0),Xe=setTimeout(Y,He);R.addEventListener(()=>{clearTimeout(Xe),ge(Ae.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,Y);try{const Xe=yield He.client.fetch(P);return yield He.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function yn(R){if(!(R instanceof pe.ZR&&R.customData))return!1;const P=Number(R.customData.httpStatus);return 429===P||500===P||503===P||504===P}(Xe))throw Xe;const Mt={throttleEndTimeMillis:Date.now()+(0,pe.$s)(ge),backoffCount:ge+1};return yield He.storage.setThrottleMetadata(Mt),He.attemptFetch(P,Mt)}})()}}class zt{constructor(P,Y,ge,He,Xe){this.app=P,this._client=Y,this._storageCache=ge,this._storage=He,this._logger=Xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pt(R,P){const Y=R.target.error||void 0;return Ae.create(P,{originalErrorMessage:Y&&Y.message})}const sn="app_namespace_store";class Rn{constructor(P,Y,ge,He=function fn(){return new Promise((R,P)=>{try{const Y=indexedDB.open("firebase_remote_config",1);Y.onerror=ge=>{P(Pt(ge,"storage-open"))},Y.onsuccess=ge=>{R(ge.target.result)},Y.onupgradeneeded=ge=>{0===ge.oldVersion&&ge.target.result.createObjectStore(sn,{keyPath:"compositeKey"})}}catch(Y){P(Ae.create("storage-open",{originalErrorMessage:Y}))}})}()){this.appId=P,this.appName=Y,this.namespace=ge,this.openDbPromise=He}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var Y=this;return(0,M.Z)(function*(){const ge=yield Y.openDbPromise;return new Promise((He,Xe)=>{const ut=ge.transaction([sn],"readonly").objectStore(sn),Nn=Y.createCompositeKey(P);try{const In=ut.get(Nn);In.onerror=Dn=>{Xe(Pt(Dn,"storage-get"))},In.onsuccess=Dn=>{const Wt=Dn.target.result;He(Wt?Wt.value:void 0)}}catch(In){Xe(Ae.create("storage-get",{originalErrorMessage:In&&In.message}))}})})()}set(P,Y){var ge=this;return(0,M.Z)(function*(){const He=yield ge.openDbPromise;return new Promise((Xe,Mt)=>{const Nn=He.transaction([sn],"readwrite").objectStore(sn),In=ge.createCompositeKey(P);try{const Dn=Nn.put({compositeKey:In,value:Y});Dn.onerror=Wt=>{Mt(Pt(Wt,"storage-set"))},Dn.onsuccess=()=>{Xe()}}catch(Dn){Mt(Ae.create("storage-set",{originalErrorMessage:Dn&&Dn.message}))}})})()}delete(P){var Y=this;return(0,M.Z)(function*(){const ge=yield Y.openDbPromise;return new Promise((He,Xe)=>{const ut=ge.transaction([sn],"readwrite").objectStore(sn),Nn=Y.createCompositeKey(P);try{const In=ut.delete(Nn);In.onerror=Dn=>{Xe(Pt(Dn,"storage-delete"))},In.onsuccess=()=>{He()}}catch(In){Xe(Ae.create("storage-delete",{originalErrorMessage:In&&In.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class zn{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,M.Z)(function*(){const Y=P.storage.getLastFetchStatus(),ge=P.storage.getLastSuccessfulFetchTimestampMillis(),He=P.storage.getActiveConfig(),Xe=yield Y;Xe&&(P.lastFetchStatus=Xe);const Mt=yield ge;Mt&&(P.lastSuccessfulFetchTimestampMillis=Mt);const ut=yield He;ut&&(P.activeConfig=ut)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function vt(){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,M.Z)(function*(){if(!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch(R){return!1}})).apply(this,arguments)}!function Xn(){(0,se._registerComponent)(new we.wA("remote-config",function R(P,{instanceIdentifier:Y}){const ge=P.getProvider("app").getImmediate(),He=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ae.create("registration-window");if(!(0,pe.hl)())throw Ae.create("indexed-db-unavailable");const{projectId:Xe,apiKey:Mt,appId:ut}=ge.options;if(!Xe)throw Ae.create("registration-project-id");if(!Mt)throw Ae.create("registration-api-key");if(!ut)throw Ae.create("registration-app-id");const Nn=new Rn(ut,ge.name,Y=Y||"firebase"),In=new zn(Nn),Dn=new he.Yd(me);Dn.logLevel=he.in.ERROR;const Wt=new it(He,se.SDK_VERSION,Y,Xe,Mt,ut),hs=new ln(Wt,Nn),fi=new Rt(hs,Nn,In,Dn),ha=new zt(ge,fi,In,Nn,Dn);return function Je(R){const P=(0,pe.m9)(R);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(ha),ha},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(me,q),(0,se.registerVersion)(me,q,"esm2017")}();var nn=x(8766);const Jt="/firebase-messaging-sw.js",Ln="/firebase-cloud-messaging-push-scope",jn="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pn="google.c.a.c_id",Un="google.c.a.c_l",Mr="google.c.a.ts",Ft="google.c.a.e";var nt=(()=>{return(R=nt||(nt={})).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",nt;var R})();function wn(R){const P=new Uint8Array(R);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rr(R){const Y=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ge=atob(Y),He=new Uint8Array(ge.length);for(let Xe=0;Xe<ge.length;++Xe)He[Xe]=ge.charCodeAt(Xe);return He}const Lt="fcm_token_details_db",_n="fcm_token_object_Store";function on(R){return L.apply(this,arguments)}function L(){return L=(0,M.Z)(function*(R){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Xe=>Xe.name).includes(Lt))return null;let P=null;return(yield(0,nn.X3)(Lt,5,{upgrade:(ge=(0,M.Z)(function*(He,Xe,Mt,ut){var Nn;if(Xe<2||!He.objectStoreNames.contains(_n))return;const In=ut.objectStore(_n),Dn=yield In.index("fcmSenderId").get(R);if(yield In.clear(),Dn)if(2===Xe){const Wt=Dn;if(!Wt.auth||!Wt.p256dh||!Wt.endpoint)return;P={token:Wt.fcmToken,createTime:null!==(Nn=Wt.createTime)&&void 0!==Nn?Nn:Date.now(),subscriptionOptions:{auth:Wt.auth,p256dh:Wt.p256dh,endpoint:Wt.endpoint,swScope:Wt.swScope,vapidKey:"string"==typeof Wt.vapidKey?Wt.vapidKey:wn(Wt.vapidKey)}}}else if(3===Xe){const Wt=Dn;P={token:Wt.fcmToken,createTime:Wt.createTime,subscriptionOptions:{auth:wn(Wt.auth),p256dh:wn(Wt.p256dh),endpoint:Wt.endpoint,swScope:Wt.swScope,vapidKey:wn(Wt.vapidKey)}}}else if(4===Xe){const Wt=Dn;P={token:Wt.fcmToken,createTime:Wt.createTime,subscriptionOptions:{auth:wn(Wt.auth),p256dh:wn(Wt.p256dh),endpoint:Wt.endpoint,swScope:Wt.swScope,vapidKey:wn(Wt.vapidKey)}}}}),function(Xe,Mt,ut,Nn){return ge.apply(this,arguments)})})).close(),yield(0,nn.Lj)(Lt),yield(0,nn.Lj)("fcm_vapid_details_db"),yield(0,nn.Lj)("undefined"),z(P)?P:null;var ge}),L.apply(this,arguments)}function z(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:P}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const B="firebase-messaging-store";let X=null;function j(){return X||(X=(0,nn.X3)("firebase-messaging-database",1,{upgrade:(R,P)=>{0===P&&R.createObjectStore(B)}})),X}function ee(R){return ve.apply(this,arguments)}function ve(){return(ve=(0,M.Z)(function*(R){const P=Q(R),ge=yield(yield j()).transaction(B).objectStore(B).get(P);if(ge)return ge;{const He=yield on(R.appConfig.senderId);if(He)return yield Ve(R,He),He}})).apply(this,arguments)}function Ve(R,P){return We.apply(this,arguments)}function We(){return(We=(0,M.Z)(function*(R,P){const Y=Q(R),He=(yield j()).transaction(B,"readwrite");return yield He.objectStore(B).put(P,Y),yield He.done,P})).apply(this,arguments)}function ze(R){return pt.apply(this,arguments)}function pt(){return(pt=(0,M.Z)(function*(R){const P=Q(R),ge=(yield j()).transaction(B,"readwrite");yield ge.objectStore(B).delete(P),yield ge.done})).apply(this,arguments)}function Q({appConfig:R}){return R.appId}const U=new pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Se(R,P){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,M.Z)(function*(R,P){const Y=yield cr(R),ge=Vn(P),He={method:"POST",headers:Y,body:JSON.stringify(ge)};let Xe;try{Xe=yield(yield fetch(xn(R.appConfig),He)).json()}catch(Mt){throw U.create("token-subscribe-failed",{errorInfo:Mt})}if(Xe.error)throw U.create("token-subscribe-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw U.create("token-subscribe-no-token");return Xe.token})).apply(this,arguments)}function at(R,P){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,M.Z)(function*(R,P){const Y=yield cr(R),ge=Vn(P.subscriptionOptions),He={method:"PATCH",headers:Y,body:JSON.stringify(ge)};let Xe;try{Xe=yield(yield fetch(`${xn(R.appConfig)}/${P.token}`,He)).json()}catch(Mt){throw U.create("token-update-failed",{errorInfo:Mt})}if(Xe.error)throw U.create("token-update-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw U.create("token-update-no-token");return Xe.token})).apply(this,arguments)}function Yt(R,P){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,M.Z)(function*(R,P){const ge={method:"DELETE",headers:yield cr(R)};try{const Xe=yield(yield fetch(`${xn(R.appConfig)}/${P}`,ge)).json();if(Xe.error)throw U.create("token-unsubscribe-failed",{errorInfo:Xe.error.message})}catch(He){throw U.create("token-unsubscribe-failed",{errorInfo:He})}})).apply(this,arguments)}function xn({projectId:R}){return`https://fcmregistrations.googleapis.com/v1/projects/${R}/registrations`}function cr(R){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,M.Z)(function*({appConfig:R,installations:P}){const Y=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R.apiKey,"x-goog-firebase-installations-auth":`FIS ${Y}`})})).apply(this,arguments)}function Vn({p256dh:R,auth:P,endpoint:Y,vapidKey:ge}){const He={web:{endpoint:Y,auth:P,p256dh:R}};return ge!==jn&&(He.web.applicationPubKey=ge),He}const Pr=6048e5;function Zn(R){return us.apply(this,arguments)}function us(){return(us=(0,M.Z)(function*(R){const P=yield Bt(R.swRegistration,R.vapidKey),Y={vapidKey:R.vapidKey,swScope:R.swRegistration.scope,endpoint:P.endpoint,auth:wn(P.getKey("auth")),p256dh:wn(P.getKey("p256dh"))},ge=yield ee(R.firebaseDependencies);if(ge){if(Vt(ge.subscriptionOptions,Y))return Date.now()>=ge.createTime+Pr?Z(R,{token:ge.token,createTime:Date.now(),subscriptionOptions:Y}):ge.token;try{yield Yt(R.firebaseDependencies,ge.token)}catch(He){console.warn(He)}return Ue(R.firebaseDependencies,Y)}return Ue(R.firebaseDependencies,Y)})).apply(this,arguments)}function Dr(R){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,M.Z)(function*(R){const P=yield ee(R.firebaseDependencies);P&&(yield Yt(R.firebaseDependencies,P.token),yield ze(R.firebaseDependencies));const Y=yield R.swRegistration.pushManager.getSubscription();return!Y||Y.unsubscribe()})).apply(this,arguments)}function Z(R,P){return de.apply(this,arguments)}function de(){return(de=(0,M.Z)(function*(R,P){try{const Y=yield at(R.firebaseDependencies,P),ge=Object.assign(Object.assign({},P),{token:Y,createTime:Date.now()});return yield Ve(R.firebaseDependencies,ge),Y}catch(Y){throw yield Dr(R),Y}})).apply(this,arguments)}function Ue(R,P){return gt.apply(this,arguments)}function gt(){return(gt=(0,M.Z)(function*(R,P){const ge={token:yield Se(R,P),createTime:Date.now(),subscriptionOptions:P};return yield Ve(R,ge),ge.token})).apply(this,arguments)}function Bt(R,P){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,M.Z)(function*(R,P){return(yield R.pushManager.getSubscription())||R.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rr(P)})})).apply(this,arguments)}function Vt(R,P){return P.vapidKey===R.vapidKey&&P.endpoint===R.endpoint&&P.auth===R.auth&&P.p256dh===R.p256dh}function Pn(R){const P={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function yr(R,P){if(!P.notification)return;R.notification={};const Y=P.notification.title;Y&&(R.notification.title=Y);const ge=P.notification.body;ge&&(R.notification.body=ge);const He=P.notification.image;He&&(R.notification.image=He)}(P,R),function Ct(R,P){!P.data||(R.data=P.data)}(P,R),function Ki(R,P){if(!P.fcmOptions)return;R.fcmOptions={};const Y=P.fcmOptions.link;Y&&(R.fcmOptions.link=Y);const ge=P.fcmOptions.analytics_label;ge&&(R.fcmOptions.analyticsLabel=ge)}(P,R),P}function ks(R){return"object"==typeof R&&!!R&&pn in R}function Fs(R,P){const Y=[];for(let ge=0;ge<R.length;ge++)Y.push(R.charAt(ge)),ge<P.length&&Y.push(P.charAt(ge));return Y.join("")}function Mn(R){return U.create("missing-app-config-values",{valueName:R})}Fs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ri{constructor(P,Y,ge){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const He=function Ls(R){if(!R||!R.options)throw Mn("App Configuration Object");if(!R.name)throw Mn("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:Y}=R;for(const ge of P)if(!Y[ge])throw Mn(ge);return{appName:R.name,projectId:Y.projectId,apiKey:Y.apiKey,appId:Y.appId,senderId:Y.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:He,installations:Y,analyticsProvider:ge}}_delete(){return Promise.resolve()}}function Yi(R){return nr.apply(this,arguments)}function nr(){return(nr=(0,M.Z)(function*(R){try{R.swRegistration=yield navigator.serviceWorker.register(Jt,{scope:Ln}),R.swRegistration.update().catch(()=>{})}catch(P){throw U.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function hn(R,P){return na.apply(this,arguments)}function na(){return(na=(0,M.Z)(function*(R,P){if(!P&&!R.swRegistration&&(yield Yi(R)),P||!R.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw U.create("invalid-sw-registration");R.swRegistration=P}})).apply(this,arguments)}function co(R,P){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,M.Z)(function*(R,P){P?R.vapidKey=P:R.vapidKey||(R.vapidKey=jn)})).apply(this,arguments)}function ho(){return(ho=(0,M.Z)(function*(R,P){if(!navigator)throw U.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw U.create("permission-blocked");return yield co(R,null==P?void 0:P.vapidKey),yield hn(R,null==P?void 0:P.serviceWorkerRegistration),Zn(R)})).apply(this,arguments)}function fo(R,P,Y){return ls.apply(this,arguments)}function ls(){return(ls=(0,M.Z)(function*(R,P,Y){const ge=Wr(P);(yield R.firebaseDependencies.analyticsProvider.get()).logEvent(ge,{message_id:Y[pn],message_name:Y[Un],message_time:Y[Mr],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wr(R){switch(R){case nt.NOTIFICATION_CLICKED:return"notification_open";case nt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ra(){return(ra=(0,M.Z)(function*(R,P){const Y=P.data;if(!Y.isFirebaseMessaging)return;R.onMessageHandler&&Y.messageType===nt.PUSH_RECEIVED&&("function"==typeof R.onMessageHandler?R.onMessageHandler(Pn(Y)):R.onMessageHandler.next(Pn(Y)));const ge=Y.data;ks(ge)&&"1"===ge[Ft]&&(yield fo(R,Y.messageType,ge))})).apply(this,arguments)}const po="@firebase/messaging",gl=R=>{const P=new Ri(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Y=>function Hc(R,P){return ra.apply(this,arguments)}(P,Y)),P},Ef=R=>{const P=R.getProvider("messaging").getImmediate();return{getToken:ge=>function Or(R,P){return ho.apply(this,arguments)}(P,ge)}};function Gc(){return go.apply(this,arguments)}function go(){return(go=(0,M.Z)(function*(){try{yield(0,pe.eu)()}catch(R){return!1}return"undefined"!=typeof window&&(0,pe.hl)()&&(0,pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pi(){(0,se._registerComponent)(new we.wA("messaging",gl,"PUBLIC")),(0,se._registerComponent)(new we.wA("messaging-internal",Ef,"PRIVATE")),(0,se.registerVersion)(po,"0.9.13"),(0,se.registerVersion)(po,"0.9.13","esm2017")}();var If=x(7982),yl=x(4408),um=x(7565);const Qi=new class su extends um.v{}(class cs extends yl.o{constructor(P,Y){super(P,Y),this.scheduler=P,this.work=Y}schedule(P,Y=0){return Y>0?super.schedule(P,Y):(this.delay=Y,this.state=P,this.scheduler.flush(this),this)}execute(P,Y){return Y>0||this.closed?super.execute(P,Y):this._execute(P,Y)}requestAsyncId(P,Y,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(P,Y,ge):P.flush(this)}});var yo=x(4986),Us=x(8306),sa=x(8505),ou=x(5363),Wc=x(9468);const ds=new c.GfV("7.3.0"),_o="__angularfire_symbol__analyticsIsSupportedValue",Vs="__angularfire_symbol__analyticsIsSupported",vo="__angularfire_symbol__remoteConfigIsSupportedValue",oa="__angularfire_symbol__remoteConfigIsSupported",_r="__angularfire_symbol__messagingIsSupportedValue",rr="__angularfire_symbol__messagingIsSupported";globalThis[Vs]||(globalThis[Vs]=(0,If.Gb)().then(R=>globalThis[_o]=R).catch(()=>globalThis[_o]=!1)),globalThis[rr]||(globalThis[rr]=Gc().then(R=>globalThis[_r]=R).catch(()=>globalThis[_r]=!1)),globalThis[oa]||(globalThis[oa]=vt().then(R=>globalThis[vo]=R).catch(()=>globalThis[vo]=!1));const aa={async:()=>globalThis[Vs],sync:()=>{const R=globalThis[_o];if(void 0===R)throw new Error((R=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${R} in the constructor, first ensure that ${R} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${R})\`.`)("Analytics"));return R}};function ua(R,P,Y){if(P){if(1===P.length)return P[0];const Xe=P.filter(Mt=>Mt.app===Y);if(1===Xe.length)return Xe[0]}return Y.container.getProvider(R).getImmediate({optional:!0})}const uu=(R,P)=>{const Y=P?[P]:(0,k.C6)(),ge=[];return Y.forEach(He=>{He.container.getProvider(R).instances.forEach(Mt=>{ge.includes(Mt)||ge.push(Mt)})}),ge};function Ji(){}class _l{constructor(P,Y=Qi){this.zone=P,this.delegate=Y}now(){return this.delegate.now()}schedule(P,Y,ge){const He=this.zone;return this.delegate.schedule(function(Mt){He.runGuarded(()=>{P.apply(this,[Mt])})},Y,ge)}}class bn{constructor(P){this.zone=P,this.task=null}call(P,Y){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji)),Y.pipe((0,sa.b)({next:ge,complete:ge,error:ge})).subscribe(P).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let la=(()=>{class R{constructor(Y){this.ngZone=Y,this.outsideAngular=Y.runOutsideAngular(()=>new _l(Zone.current)),this.insideAngular=Y.run(()=>new _l(Zone.current,yo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(Y){return new(Y||R)(c.LFG(c.R0b))},R.\u0275prov=c.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function ei(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function vn(R){return ei().ngZone.runOutsideAngular(()=>R())}function Xi(R){return ei().ngZone.run(()=>R())}function Eo(R){return R.pipe((0,ou.Q)(ei().outsideAngular))}function vr(R){return ei(),function da(R){return function(Y){return(Y=Y.lift(new bn(R.ngZone))).pipe((0,Wc.R)(R.outsideAngular),(0,ou.Q)(R.insideAngular))}}(ei())(R)}const wo=(R,P)=>function(){const ge=arguments;return P&&setTimeout(()=>{"scheduled"===P.state&&P.invoke()},10),Xi(()=>R.apply(void 0,ge))},Ni=(R,P)=>function(){let Y;const ge=arguments;for(let Xe=0;Xe<arguments.length;Xe++)"function"==typeof ge[Xe]&&(P&&(Y||(Y=Xi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji)))),ge[Xe]=wo(ge[Xe],Y));const He=vn(()=>R.apply(this,ge));if(!P){if(He instanceof Us.y){const Xe=ei();return He.pipe((0,Wc.R)(Xe.outsideAngular),(0,ou.Q)(Xe.insideAngular))}return Xi(()=>He)}return He instanceof Us.y?He.pipe(vr):He instanceof Promise?Xi(()=>new Promise((Xe,Mt)=>He.then(ut=>Xi(()=>Xe(ut)),ut=>Xi(()=>Mt(ut))))):"function"==typeof He&&Y?function(){return setTimeout(()=>{Y&&"scheduled"===Y.state&&Y.invoke()},10),He.apply(this,arguments)}:Xi(()=>He)}},198:(ot,Te,x)=>{x.d(Te,{$:()=>Xe,A:()=>$,B:()=>Ae,G:()=>de,H:()=>Vt,J:()=>Pi,L:()=>We,M:()=>su,N:()=>Us,P:()=>zs,Q:()=>sa,R:()=>Vf,T:()=>ou,U:()=>yo,V:()=>Vs,W:()=>vo,X:()=>Zc,Y:()=>da,Z:()=>Ni,_:()=>P,a:()=>Dl,a0:()=>Dn,a1:()=>hs,a2:()=>ha,a3:()=>Fe,a4:()=>Oi,a5:()=>Df,a6:()=>ts,a7:()=>Yc,a8:()=>lm,a9:()=>cm,aA:()=>Ia,aB:()=>Iu,aC:()=>yd,aD:()=>xl,aE:()=>Ke,aI:()=>ga,aL:()=>ds,aa:()=>fs,ab:()=>fa,ac:()=>dm,af:()=>Jc,ag:()=>Tf,ah:()=>Af,ak:()=>Ji,al:()=>gm,an:()=>Il,ao:()=>Gv,ap:()=>xn,aq:()=>V,ar:()=>Ut,as:()=>at,at:()=>Ze,au:()=>Ll,av:()=>Da,aw:()=>ke,ax:()=>J,ay:()=>ue,az:()=>ze,b:()=>ym,c:()=>Eu,d:()=>Cm,e:()=>pd,f:()=>Gf,g:()=>qf,h:()=>vd,i:()=>Co,j:()=>xo,k:()=>Qf,l:()=>is,m:()=>Pm,n:()=>Cd,o:()=>le,r:()=>Im,s:()=>bm,u:()=>_u});var c=x(5861),k=x(2090),M=x(9681),se=x(655),pe=x(1877),we=x(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new pe.Yd("@firebase/auth");function et(v,...p){De.logLevel<=pe.in.ERROR&&De.error(`Auth (${M.SDK_VERSION}): ${v}`,...p)}function Ze(v,...p){throw Je(v,...p)}function ke(v,...p){return Je(v,...p)}function Ne(v,p,m){const w=Object.assign(Object.assign({},Be()),{[p]:m});return new k.LL("auth","Firebase",w).create(p,{appName:v.name})}function Ce(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ze(v,"argument-error"),Ne(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(v,...p){if("string"!=typeof v){const m=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return qe.create(v,...p)}function J(v,p,...m){if(!v)throw Je(p,...m)}function fe(v){const p="INTERNAL ASSERTION FAILED: "+v;throw et(p),new Error(p)}function V(v,p){v||fe(p)}const ne=new Map;function ue(v){V(v instanceof Function,"Expected a class definition");let p=ne.get(v);return p?(V(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ne.set(v,p),p)}function ae(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function _t(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class dt{constructor(p,m){this.shortDelay=p,this.longDelay=m,V(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function En(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yn(v,p){V(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ln{static initialize(p,m,w){this.fetchImpl=p,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new dt(3e4,6e4);function zt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Pt(v,p,m,w){return sn.apply(this,arguments)}function sn(){return(sn=(0,c.Z)(function*(v,p,m,w,C={}){return An(v,C,(0,c.Z)(function*(){let N={},ie={};w&&("GET"===p?ie=w:N={body:JSON.stringify(w)});const Le=(0,k.xO)(Object.assign({key:v.config.apiKey},ie)).slice(1),lt=yield v._getAdditionalHeaders();return lt["Content-Type"]="application/json",v.languageCode&&(lt["X-Firebase-Locale"]=v.languageCode),ln.fetch()(zn(v,v.config.apiHost,m,Le),Object.assign({method:p,headers:lt,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function An(v,p,m){return xr.apply(this,arguments)}function xr(){return(xr=(0,c.Z)(function*(v,p,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},mr),p);try{const C=new Xn(v),N=yield Promise.race([m(),C.promise]);C.clearNetworkTimeout();const ie=yield N.json();if("needConfirmation"in ie)throw Sn(v,"account-exists-with-different-credential",ie);if(N.ok&&!("errorMessage"in ie))return ie;{const Le=N.ok?ie.errorMessage:ie.error.message,[lt,It]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw Sn(v,"credential-already-in-use",ie);if("EMAIL_EXISTS"===lt)throw Sn(v,"email-already-in-use",ie);const Qt=w[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(It)throw Ne(v,Qt,It);Ze(v,Qt)}}catch(C){if(C instanceof k.ZR)throw C;Ze(v,"network-request-failed")}})).apply(this,arguments)}function fn(v,p,m,w){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(v,p,m,w,C={}){const N=yield Pt(v,p,m,w,C);return"mfaPendingCredential"in N&&Ze(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function zn(v,p,m,w){const C=`${p}${m}?${w}`;return v.config.emulator?yn(v.config,C):`${v.config.apiScheme}://${C}`}class Xn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(ke(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(v,p,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const C=ke(v,p,w);return C.customData._tokenResponse=m,C}function vt(){return(vt=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Wn(v,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Jt(v,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function jn(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Un(){return(Un=(0,c.Z)(function*(v,p=!1){const m=(0,k.m9)(v),w=yield m.getIdToken(p),C=Ft(w);J(C&&C.exp&&C.auth_time&&C.iat,m.auth,"internal-error");const N="object"==typeof C.firebase?C.firebase:void 0,ie=null==N?void 0:N.sign_in_provider;return{claims:C,token:w,authTime:jn(Mr(C.auth_time)),issuedAtTime:jn(Mr(C.iat)),expirationTime:jn(Mr(C.exp)),signInProvider:ie||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Mr(v){return 1e3*Number(v)}function Ft(v){const[p,m,w]=v.split(".");if(void 0===p||void 0===m||void 0===w)return et("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,k.tV)(m);return C?JSON.parse(C):(et("Failed to decode base64 JWT payload"),null)}catch(C){return et("Caught error parsing JWT payload as JSON",C),null}}function nt(v,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,c.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(w){throw w instanceof k.ZR&&Rr(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Rr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Lt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const C=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),w)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class lr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _n(v){return on.apply(this,arguments)}function on(){return(on=(0,c.Z)(function*(v){var p;const m=v.auth,w=yield v.getIdToken(),C=yield nt(v,Jt(m,{idToken:w}));J(null==C?void 0:C.users.length,m,"internal-error");const N=C.users[0];v._notifyReloadListener(N);const ie=(null===(p=N.providerUserInfo)||void 0===p?void 0:p.length)?Ie(N.providerUserInfo):[],Le=K(v.providerData,ie),Qt=!!v.isAnonymous&&!(v.email&&N.passwordHash||(null==Le?void 0:Le.length)),Gn={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Le,metadata:new lr(N.createdAt,N.lastLoginAt),isAnonymous:Qt};Object.assign(v,Gn)})).apply(this,arguments)}function z(){return(z=(0,c.Z)(function*(v){const p=(0,k.m9)(v);yield _n(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function K(v,p){return[...v.filter(w=>!p.some(C=>C.providerId===w.providerId)),...p]}function Ie(v){return v.map(p=>{var{providerId:m}=p,w=(0,se._T)(p,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function X(){return(X=(0,c.Z)(function*(v,p){const m=yield An(v,{},(0,c.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:C,apiKey:N}=v.config,ie=zn(v,C,"/v1/token",`key=${N}`),Le=yield v._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",ln.fetch()(ie,{method:"POST",headers:Le,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class j{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){J(p.idToken,"internal-error"),J(void 0!==p.idToken,"internal-error"),J(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function ft(v){const p=Ft(v);return J(p,"internal-error"),J(void 0!==p.exp,"internal-error"),J(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var w=this;return(0,c.Z)(function*(){return J(!w.accessToken||w.refreshToken,p,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var w=this;return(0,c.Z)(function*(){const{accessToken:C,refreshToken:N,expiresIn:ie}=yield function B(v,p){return X.apply(this,arguments)}(p,m);w.updateTokensAndExpiration(C,N,Number(ie))})()}updateTokensAndExpiration(p,m,w){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,m){const{refreshToken:w,accessToken:C,expirationTime:N}=m,ie=new j;return w&&(J("string"==typeof w,"internal-error",{appName:p}),ie.refreshToken=w),C&&(J("string"==typeof C,"internal-error",{appName:p}),ie.accessToken=C),N&&(J("number"==typeof N,"internal-error",{appName:p}),ie.expirationTime=N),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new j,this.toJSON())}_performRefresh(){return fe("not implemented")}}function ee(v,p){J("string"==typeof v||void 0===v,"internal-error",{appName:p})}class ve{constructor(p){var{uid:m,auth:w,stsTokenManager:C}=p,N=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new lr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,c.Z)(function*(){const w=yield nt(m,m.stsTokenManager.getToken(m.auth,p));return J(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(p){return function pn(v){return Un.apply(this,arguments)}(this,p)}reload(){return function L(v){return z.apply(this,arguments)}(this)}_assign(p){this!==p&&(J(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ve(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var w=this;return(0,c.Z)(function*(){let C=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),C=!0),m&&(yield _n(w)),yield w.auth._persistUserIfCurrent(w),C&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,c.Z)(function*(){const m=yield p.getIdToken();return yield nt(p,function er(v,p){return vt.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var w,C,N,ie,Le,lt,It,Qt;const Gn=null!==(w=m.displayName)&&void 0!==w?w:void 0,ri=null!==(C=m.email)&&void 0!==C?C:void 0,Ii=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,ko=null!==(ie=m.photoURL)&&void 0!==ie?ie:void 0,Fm=null!==(Le=m.tenantId)&&void 0!==Le?Le:void 0,Td=null!==(lt=m._redirectEventId)&&void 0!==lt?lt:void 0,ws=null!==(It=m.createdAt)&&void 0!==It?It:void 0,ep=null!==(Qt=m.lastLoginAt)&&void 0!==Qt?Qt:void 0,{uid:Ul,emailVerified:tp,isAnonymous:Ad,providerData:Vl,stsTokenManager:Su}=m;J(Ul&&Su,p,"internal-error");const xu=j.fromJSON(this.name,Su);J("string"==typeof Ul,p,"internal-error"),ee(Gn,p.name),ee(ri,p.name),J("boolean"==typeof tp,p,"internal-error"),J("boolean"==typeof Ad,p,"internal-error"),ee(Ii,p.name),ee(ko,p.name),ee(Fm,p.name),ee(Td,p.name),ee(ws,p.name),ee(ep,p.name);const Aa=new ve({uid:Ul,auth:p,email:ri,emailVerified:tp,displayName:Gn,isAnonymous:Ad,photoURL:ko,phoneNumber:Ii,tenantId:Fm,stsTokenManager:xu,createdAt:ws,lastLoginAt:ep});return Vl&&Array.isArray(Vl)&&(Aa.providerData=Vl.map(Lm=>Object.assign({},Lm))),Td&&(Aa._redirectEventId=Td),Aa}static _fromIdTokenResponse(p,m,w=!1){return(0,c.Z)(function*(){const C=new j;C.updateFromServerResponse(m);const N=new ve({uid:m.localId,auth:p,stsTokenManager:C,isAnonymous:w});return yield _n(N),N})()}}const We=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,w){var C=this;return(0,c.Z)(function*(){C.storage[m]=w})()}_get(m){var w=this;return(0,c.Z)(function*(){const C=w.storage[m];return void 0===C?null:C})()}_remove(m){var w=this;return(0,c.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function ze(v,p,m){return`firebase:${v}:${p}:${m}`}class pt{constructor(p,m,w){this.persistence=p,this.auth=m,this.userKey=w;const{config:C,name:N}=this.auth;this.fullUserKey=ze(this.userKey,C.apiKey,N),this.fullPersistenceKey=ze("persistence",C.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?ve._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,c.Z)(function*(){if(m.persistence===p)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,w="authUser"){return(0,c.Z)(function*(){if(!m.length)return new pt(ue(We),p,w);const C=(yield Promise.all(m.map(function(){var It=(0,c.Z)(function*(Qt){if(yield Qt._isAvailable())return Qt});return function(Qt){return It.apply(this,arguments)}}()))).filter(It=>It);let N=C[0]||ue(We);const ie=ze(w,p.config.apiKey,p.name);let Le=null;for(const It of m)try{const Qt=yield It._get(ie);if(Qt){const Gn=ve._fromJSON(p,Qt);It!==N&&(Le=Gn),N=It;break}}catch(Qt){}const lt=C.filter(It=>It._shouldAllowMigration);return N._shouldAllowMigration&&lt.length?(N=lt[0],Le&&(yield N._set(ie,Le.toJSON())),yield Promise.all(m.map(function(){var It=(0,c.Z)(function*(Qt){if(Qt!==N)try{yield Qt._remove(ie)}catch(Gn){}});return function(Qt){return It.apply(this,arguments)}}())),new pt(N,p,w)):new pt(N,p,w)})()}}function Q(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Qe(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(H(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Dt(p))return"Blackberry";if(Yt(p))return"Webos";if(U(p))return"Safari";if((p.includes("chrome/")||Se(p))&&!p.includes("edge/"))return"Chrome";if(at(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function H(v=(0,k.z$)()){return/firefox\//i.test(v)}function U(v=(0,k.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Se(v=(0,k.z$)()){return/crios\//i.test(v)}function Qe(v=(0,k.z$)()){return/iemobile/i.test(v)}function at(v=(0,k.z$)()){return/android/i.test(v)}function Dt(v=(0,k.z$)()){return/blackberry/i.test(v)}function Yt(v=(0,k.z$)()){return/webos/i.test(v)}function Ut(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)}function xn(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Vn(v=(0,k.z$)()){return Ut(v)||at(v)||Yt(v)||Dt(v)||/windows phone/i.test(v)||Qe(v)}function Zn(v,p=[]){let m;switch(v){case"Browser":m=Q((0,k.z$)());break;case"Worker":m=`${Q((0,k.z$)())}-${v}`;break;default:m=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${M.SDK_VERSION}/${w}`}class us{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const w=N=>new Promise((ie,Le)=>{try{ie(p(N))}catch(lt){Le(lt)}});w.onAbort=m,this.queue.push(w);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,c.Z)(function*(){if(m.auth.currentUser===p)return;const w=[];try{for(const C of m.queue)yield C(p),C.onAbort&&w.push(C.onAbort)}catch(C){w.reverse();for(const N of w)try{N()}catch(ie){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:C.message})}})()}}class Dr{constructor(p,m,w){this.app=p,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z(this),this.idTokenSubscription=new Z(this),this.beforeStateQueue=new us(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,m){var w=this;return m&&(this._popupRedirectResolver=ue(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var C,N;if(!w._deleted&&(w.persistenceManager=yield pt.create(w,p),!w._deleted)){if(null===(C=w._popupRedirectResolver)||void 0===C?void 0:C._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(ie){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,c.Z)(function*(){var w;const C=yield m.assertedPersistence.getCurrentUser();let N=C,ie=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Le=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,lt=null==N?void 0:N._redirectEventId,It=yield m.tryRedirectSignIn(p);(!Le||Le===lt)&&(null==It?void 0:It.user)&&(N=It.user,ie=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(ie)try{yield m.beforeStateQueue.runMiddleware(N)}catch(Le){N=C,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Le))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return J(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var m=this;return(0,c.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(C){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,c.Z)(function*(){try{yield _n(p)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function it(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,c.Z)(function*(){const w=p?(0,k.m9)(p):null;return w&&J(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(p,m=!1){var w=this;return(0,c.Z)(function*(){if(!w._deleted)return p&&J(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,c.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(ue(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new k.LL("auth","Firebase",p())}onAuthStateChanged(p,m,w){return this.registerStateListener(this.authStateSubscription,p,m,w)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,w){return this.registerStateListener(this.idTokenSubscription,p,m,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var w=this;return(0,c.Z)(function*(){const C=yield w.getOrInitRedirectPersistenceManager(m);return null===p?C.removeCurrentUser():C.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const w=p&&ue(p)||m._popupRedirectResolver;J(w,m,"argument-error"),m.redirectPersistenceManager=yield pt.create(m,[ue(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,c.Z)(function*(){var w,C;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===p?m._currentUser:(null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,c.Z)(function*(){if(p===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,w,C){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return J(ie,this,"internal-error"),ie.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,w,C):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var m;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const C=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return C&&(w["X-Firebase-Client"]=C),w})()}}function Ke(v){return(0,k.m9)(v)}class Z{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function de(v,p,m){const w=Ke(v);J(w._canInitEmulator,w,"emulator-config-failed"),J(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const C=!!(null==m?void 0:m.disableWarnings),N=Ue(p),{host:ie,port:Le}=function gt(v){const p=Ue(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(w);if(C){const N=C[1];return{host:N,port:Bt(w.substr(N.length+1))}}{const[N,ie]=w.split(":");return{host:N,port:Bt(ie)}}}(p);w.config.emulator={url:`${N}//${ie}${null===Le?"":`:${Le}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ie,port:Le,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function Xt(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ue(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Bt(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Vt{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return fe("not implemented")}_getIdTokenResponse(p){return fe("not implemented")}_linkToIdToken(p,m){return fe("not implemented")}_getReauthenticationResolver(p){return fe("not implemented")}}function Pn(v,p){return yr.apply(this,arguments)}function yr(){return(yr=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:resetPassword",zt(v,p))})).apply(this,arguments)}function Ct(v,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ks(v,p){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:update",zt(v,p))})).apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signInWithPassword",zt(v,p))})).apply(this,arguments)}function Ri(v,p){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:sendOobCode",zt(v,p))})).apply(this,arguments)}function nr(v,p){return hn.apply(this,arguments)}function hn(){return(hn=(0,c.Z)(function*(v,p){return Ri(v,p)})).apply(this,arguments)}function na(v,p){return co.apply(this,arguments)}function co(){return(co=(0,c.Z)(function*(v,p){return Ri(v,p)})).apply(this,arguments)}function Nr(v,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,c.Z)(function*(v,p){return Ri(v,p)})).apply(this,arguments)}function ho(v,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,c.Z)(function*(v,p){return Ri(v,p)})).apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signInWithEmailLink",zt(v,p))})).apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signInWithEmailLink",zt(v,p))})).apply(this,arguments)}class po extends Vt{constructor(p,m,w,C=null){super("password",w),this._email=p,this._password=m,this._tenantId=C}static _fromEmailAndPassword(p,m){return new po(p,m,"password")}static _fromEmailAndCode(p,m,w=null){return new po(p,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,c.Z)(function*(){switch(m.signInMethod){case"password":return function Ls(v,p){return Mn.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function ls(v,p){return Wr.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ze(p,"internal-error")}})()}_linkToIdToken(p,m){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return Ct(p,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Hc(v,p){return ra.apply(this,arguments)}(p,{idToken:m,email:w._email,oobCode:w._password});default:Ze(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function $n(v,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signInWithIdp",zt(v,p))})).apply(this,arguments)}class Pi extends Vt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Pi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ze("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:C}=m,N=(0,se._T)(m,["providerId","signInMethod"]);if(!w||!C)return null;const ie=new Pi(w,C);return ie.idToken=N.idToken||void 0,ie.accessToken=N.accessToken||void 0,ie.secret=N.secret,ie.nonce=N.nonce,ie.pendingToken=N.pendingToken||null,ie}_getIdTokenResponse(p){return $n(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,$n(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,$n(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,k.xO)(m)}return p}}function Gc(v,p){return go.apply(this,arguments)}function go(){return(go=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:sendVerificationCode",zt(v,p))})).apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signInWithPhoneNumber",zt(v,p))})).apply(this,arguments)}function qc(){return(qc=(0,c.Z)(function*(v,p){const m=yield fn(v,"POST","/v1/accounts:signInWithPhoneNumber",zt(v,p));if(m.temporaryProof)throw Sn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const am={USER_NOT_FOUND:"user-not-found"};function zc(){return(zc=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signInWithPhoneNumber",zt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),am)})).apply(this,arguments)}class mo extends Vt{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new mo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new mo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function wf(v,p){return ia.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function bf(v,p){return qc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ml(v,p){return zc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:w,verificationCode:C}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:w,code:C}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:w,phoneNumber:C,temporaryProof:N}=p;return w||m||C||N?new mo({verificationId:m,verificationCode:w,phoneNumber:C,temporaryProof:N}):null}}class cs{constructor(p){var m,w,C,N,ie,Le;const lt=(0,k.zd)((0,k.pd)(p)),It=null!==(m=lt.apiKey)&&void 0!==m?m:null,Qt=null!==(w=lt.oobCode)&&void 0!==w?w:null,Gn=function If(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=lt.mode)&&void 0!==C?C:null);J(It&&Qt&&Gn,"argument-error"),this.apiKey=It,this.operation=Gn,this.code=Qt,this.continueUrl=null!==(N=lt.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(ie=lt.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Le=lt.tenantId)&&void 0!==Le?Le:null}static parseLink(p){const m=function yl(v){const p=(0,k.zd)((0,k.pd)(v)).link,m=p?(0,k.zd)((0,k.pd)(p)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||m||p||v}(p);try{return new cs(m)}catch(w){return null}}}let su=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return po._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const C=cs.parseLink(w);return J(C,"argument-error"),po._fromEmailAndCode(m,C.code,C.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Qi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class hi extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class yo extends hi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return J("providerId"in m&&"signInMethod"in m,"argument-error"),Pi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return J(p.idToken||p.accessToken,"argument-error"),Pi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return yo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return yo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:C,pendingToken:N,nonce:ie,providerId:Le}=p;if(!w&&!C&&!m&&!N||!Le)return null;try{return new yo(Le)._credential({idToken:m,accessToken:w,nonce:ie,pendingToken:N})}catch(lt){return null}}}let Us=(()=>{class v extends hi{constructor(){super("facebook.com")}static credential(m){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),sa=(()=>{class v extends hi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:C}=m;if(!w&&!C)return null;try{return v.credential(w,C)}catch(N){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ou=(()=>{class v extends hi{constructor(){super("github.com")}static credential(m){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ds extends Vt{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return $n(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,$n(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,$n(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:C,pendingToken:N}=m;return w&&C&&N&&w===C?new ds(w,N):null}static _create(p,m){return new ds(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vs extends Qi{constructor(p){J(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Vs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Vs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=ds.fromJSON(p);return J(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:w}=p;if(!m||!w)return null;try{return ds._create(w,m)}catch(C){return null}}}let vo=(()=>{class v extends hi{constructor(){super("twitter.com")}static credential(m,w){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:C}=m;if(!w||!C)return null;try{return v.credential(w,C)}catch(N){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function oa(v,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signUp",zt(v,p))})).apply(this,arguments)}class rr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,w,C=!1){return(0,c.Z)(function*(){const N=yield ve._fromIdTokenResponse(p,w,C),ie=au(w);return new rr({user:N,providerId:ie,_tokenResponse:w,operationType:m})})()}static _forOperation(p,m,w){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const C=au(w);return new rr({user:p,providerId:C,_tokenResponse:w,operationType:m})})()}}function au(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Zc(v){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,c.Z)(function*(v){var p;const m=Ke(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new rr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield oa(m,{returnSecureToken:!0}),C=yield rr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(C.user),C})).apply(this,arguments)}class aa extends k.ZR{constructor(p,m,w,C){var N;super(m.code,m.message),this.operationType=w,this.user=C,Object.setPrototypeOf(this,aa.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,m,w,C){return new aa(p,m,w,C)}}function ua(v,p,m,w){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?aa._fromErrorAndOperation(v,N,p,w):N})}function uu(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Ji(v,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,c.Z)(function*(v,p){const m=(0,k.m9)(v);yield ei(!0,m,p);const{providerUserInfo:w}=yield Wn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),C=uu(w||[]);return m.providerData=m.providerData.filter(N=>C.has(N.providerId)),C.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function bn(v,p){return la.apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(v,p,m=!1){const w=yield nt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return rr._forOperation(v,"link",w)})).apply(this,arguments)}function ei(v,p,m){return vn.apply(this,arguments)}function vn(){return(vn=(0,c.Z)(function*(v,p,m){yield _n(p);const C=!1===v?"provider-already-linked":"no-such-provider";J(uu(p.providerData).has(m)===v,p.auth,C)})).apply(this,arguments)}function Xi(v,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,c.Z)(function*(v,p,m=!1){const{auth:w}=v,C="reauthenticate";try{const N=yield nt(v,ua(w,C,p,v),m);J(N.idToken,w,"internal-error");const ie=Ft(N.idToken);J(ie,w,"internal-error");const{sub:Le}=ie;return J(v.uid===Le,w,"user-mismatch"),rr._forOperation(v,C,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ze(w,"user-mismatch"),N}})).apply(this,arguments)}function ca(v,p){return vr.apply(this,arguments)}function vr(){return(vr=(0,c.Z)(function*(v,p,m=!1){const w="signIn",C=yield ua(v,w,p),N=yield rr._fromIdTokenResponse(v,w,C);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function da(v,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,c.Z)(function*(v,p){return ca(Ke(v),p)})).apply(this,arguments)}function Ni(v,p){return R.apply(this,arguments)}function R(){return(R=(0,c.Z)(function*(v,p){const m=(0,k.m9)(v);return yield ei(!1,m,p.providerId),bn(m,p)})).apply(this,arguments)}function P(v,p){return Y.apply(this,arguments)}function Y(){return(Y=(0,c.Z)(function*(v,p){return Xi((0,k.m9)(v),p)})).apply(this,arguments)}function ge(v,p){return He.apply(this,arguments)}function He(){return(He=(0,c.Z)(function*(v,p){return fn(v,"POST","/v1/accounts:signInWithCustomToken",zt(v,p))})).apply(this,arguments)}function Xe(v,p){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,c.Z)(function*(v,p){const m=Ke(v),w=yield ge(m,{token:p,returnSecureToken:!0}),C=yield rr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(C.user),C})).apply(this,arguments)}class ut{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Nn._fromServerResponse(p,m):Ze(p,"internal-error")}}class Nn extends ut{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Nn(m)}}function In(v,p,m){var w;J((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),J(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(J(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(J(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Dn(v,p,m){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v),C={requestType:"PASSWORD_RESET",email:p};m&&In(w,C,m),yield na(w,C)})).apply(this,arguments)}function hs(v,p,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,c.Z)(function*(v,p,m){yield Pn((0,k.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function ha(v,p){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(v,p){yield ks((0,k.m9)(v),{oobCode:p})})).apply(this,arguments)}function Fe(v,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,c.Z)(function*(v,p){const m=(0,k.m9)(v),w=yield Pn(m,{oobCode:p}),C=w.requestType;switch(J(C,m,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(w.mfaInfo,m,"internal-error");default:J(w.email,m,"internal-error")}let N=null;return w.mfaInfo&&(N=ut._fromServerResponse(Ke(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:C}})).apply(this,arguments)}function Oi(v,p){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,c.Z)(function*(v,p){const{data:m}=yield Fe((0,k.m9)(v),p);return m.email})).apply(this,arguments)}function Df(v,p,m){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(v,p,m){const w=Ke(v),C=yield oa(w,{returnSecureToken:!0,email:p,password:m}),N=yield rr._fromIdTokenResponse(w,"signIn",C);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function ts(v,p,m){return da((0,k.m9)(v),su.credential(p,m))}function Yc(v,p,m){return lu.apply(this,arguments)}function lu(){return(lu=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v),C={requestType:"EMAIL_SIGNIN",email:p};J(m.handleCodeInApp,w,"argument-error"),m&&In(w,C,m),yield Nr(w,C)})).apply(this,arguments)}function lm(v,p){const m=cs.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function cm(v,p,m){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v),C=su.credentialWithLink(p,m||ae());return J(C._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),da(w,C)})).apply(this,arguments)}function cu(v,p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:createAuthUri",zt(v,p))})).apply(this,arguments)}function fs(v,p){return vl.apply(this,arguments)}function vl(){return(vl=(0,c.Z)(function*(v,p){const w={identifier:p,continueUri:_t()?ae():"http://localhost"},{signinMethods:C}=yield cu((0,k.m9)(v),w);return C||[]})).apply(this,arguments)}function fa(v,p){return ki.apply(this,arguments)}function ki(){return(ki=(0,c.Z)(function*(v,p){const m=(0,k.m9)(v),C={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&In(m.auth,C,p);const{email:N}=yield nr(m.auth,C);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function dm(v,p,m){return El.apply(this,arguments)}function El(){return(El=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&In(w.auth,N,m);const{email:ie}=yield ho(w.auth,N);ie!==v.email&&(yield v.reload())})).apply(this,arguments)}function hm(v,p){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,c.Z)(function*(v,p){return Pt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Jc(v,p){return wl.apply(this,arguments)}function wl(){return(wl=(0,c.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const w=(0,k.m9)(v),N={idToken:yield w.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},ie=yield nt(w,hm(w.auth,N));w.displayName=ie.displayName||null,w.photoURL=ie.photoUrl||null;const Le=w.providerData.find(({providerId:lt})=>"password"===lt);Le&&(Le.displayName=w.displayName,Le.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ie)})).apply(this,arguments)}function Tf(v,p){return Sf((0,k.m9)(v),p,null)}function Af(v,p){return Sf((0,k.m9)(v),null,p)}function Sf(v,p,m){return du.apply(this,arguments)}function du(){return(du=(0,c.Z)(function*(v,p,m){const{auth:w}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const ie=yield nt(v,Ct(w,N));yield v._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class bo{constructor(p,m,w={}){this.isNewUser=p,this.providerId=m,this.profile=w}}class xf extends bo{constructor(p,m,w,C){super(p,m,w),this.username=C}}class fm extends bo{constructor(p,m){super(p,"facebook.com",m)}}class Xc extends xf{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Fi extends bo{constructor(p,m){super(p,"google.com",m)}}class pm extends xf{constructor(p,m,w){super(p,"twitter.com",m,w)}}function gm(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function bl(v){var p,m;if(!v)return null;const{providerId:w}=v,C=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const ie=null===(m=null===(p=Ft(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(ie)return new bo(N,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!w)return null;switch(w){case"facebook.com":return new fm(N,C);case"github.com":return new Xc(N,C);case"google.com":return new Fi(N,C);case"twitter.com":return new pm(N,C,v.screenName||null);case"custom":case"anonymous":return new bo(N,null);default:return new bo(N,w,C)}}(m)}class ps{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new ps("enroll",p)}static _fromMfaPendingCredential(p){return new ps("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,w;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ps._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return ps._fromIdtoken(p.multiFactorSession.idToken)}return null}}class hu{constructor(p,m,w){this.session=p,this.hints=m,this.signInResolver=w}static _fromError(p,m){const w=Ke(p),C=m.customData._serverResponse,N=(C.mfaInfo||[]).map(Le=>ut._fromServerResponse(w,Le));J(C.mfaPendingCredential,w,"internal-error");const ie=ps._fromMfaPendingCredential(C.mfaPendingCredential);return new hu(ie,N,function(){var Le=(0,c.Z)(function*(lt){const It=yield lt._process(w,ie);delete C.mfaInfo,delete C.mfaPendingCredential;const Qt=Object.assign(Object.assign({},C),{idToken:It.idToken,refreshToken:It.refreshToken});switch(m.operationType){case"signIn":const Gn=yield rr._fromIdTokenResponse(w,m.operationType,Qt);return yield w._updateCurrentUser(Gn.user),Gn;case"reauthenticate":return J(m.user,w,"internal-error"),rr._forOperation(m.user,m.operationType,Qt);default:Ze(w,"internal-error")}});return function(lt){return Le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,c.Z)(function*(){return m.signInResolver(p)})()}}function Il(v,p){var m;const w=(0,k.m9)(v),C=p;return J(p.customData.operationType,w,"argument-error"),J(null===(m=C.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),hu._fromError(w,C)}function Rf(v,p){return Pt(v,"POST","/v2/accounts/mfaEnrollment:start",zt(v,p))}class gs{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>ut._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new gs(p)}getSession(){var p=this;return(0,c.Z)(function*(){return ps._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var w=this;return(0,c.Z)(function*(){const C=p,N=yield w.getSession(),ie=yield nt(w.user,C._process(w.user.auth,N,m));return yield w.user._updateTokensIfNecessary(ie),w.user.reload()})()}unenroll(p){var m=this;return(0,c.Z)(function*(){const w="string"==typeof p?p:p.uid,C=yield m.user.getIdToken(),N=yield nt(m.user,function Hv(v,p){return Pt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(v,p))}(m.user.auth,{idToken:C,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ie})=>ie!==w),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(ie){if("auth/user-token-expired"!==ie.code)throw ie}})()}}const pa=new WeakMap;function Gv(v){const p=(0,k.m9)(v);return pa.has(p)||pa.set(p,gs._fromUser(p)),pa.get(p)}const ed="__sak";class fu{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ed,"1"),this.storage.removeItem(ed),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ym=(()=>{class v extends fu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function td(){const v=(0,k.z$)();return U(v)||Ut(v)}()&&function Pr(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const C=this.storage.getItem(w),N=this.localCache[w];C!==N&&m(w,N,C)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Le,lt,It)=>{this.notifyListeners(Le,It)});const C=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(C);if(m.newValue!==Le)null!==m.newValue?this.storage.setItem(C,m.newValue):this.storage.removeItem(C);else if(this.localCache[C]===m.newValue&&!w)return}const N=()=>{const Le=this.storage.getItem(C);!w&&this.localCache[C]===Le||this.notifyListeners(C,Le)},ie=this.storage.getItem(C);!function Ht(){return(0,k.w1)()&&10===document.documentMode}()||ie===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,w){this.localCache[m]=w;const C=this.listeners[m];if(C)for(const N of Array.from(C))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var C=()=>super._set,N=this;return(0,c.Z)(function*(){yield C().call(N,m,w),N.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,C=this;return(0,c.Z)(function*(){const N=yield w().call(C,m);return C.localCache[m]=JSON.stringify(N),N})()}_remove(m){var w=()=>super._remove,C=this;return(0,c.Z)(function*(){yield w().call(C,m),delete C.localCache[m]})()}}return v.type="LOCAL",v})(),Dl=(()=>{class v extends fu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let pu=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(N=>N.isListeningto(m));if(w)return w;const C=new v(m);return this.receivers.push(C),C}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,c.Z)(function*(){const C=m,{eventId:N,eventType:ie,data:Le}=C.data,lt=w.handlersMap[ie];if(!(null==lt?void 0:lt.size))return;C.ports[0].postMessage({status:"ack",eventId:N,eventType:ie});const It=Array.from(lt).map(function(){var Gn=(0,c.Z)(function*(ri){return ri(C.origin,Le)});return function(ri){return Gn.apply(this,arguments)}}()),Qt=yield function rd(v){return Promise.all(v.map(function(){var p=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return p.apply(this,arguments)}}()))}(It);C.ports[0].postMessage({status:"done",eventId:N,eventType:ie,response:Qt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ga(v="",p=10){let m="";for(let w=0;w<p;w++)m+=Math.floor(10*Math.random());return v+m}class ma{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,w=50){var C=this;return(0,c.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let ie,Le;return new Promise((lt,It)=>{const Qt=ga("",20);N.port1.start();const Gn=setTimeout(()=>{It(new Error("unsupported_event"))},w);Le={messageChannel:N,onMessage(ri){const Ii=ri;if(Ii.data.eventId===Qt)switch(Ii.data.status){case"ack":clearTimeout(Gn),ie=setTimeout(()=>{It(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),lt(Ii.data.response);break;default:clearTimeout(Gn),clearTimeout(ie),It(new Error("invalid_response"))}}},C.handlers.add(Le),N.port1.addEventListener("message",Le.onMessage),C.target.postMessage({eventType:p,eventId:Qt,data:m},[N.port2])}).finally(()=>{Le&&C.removeMessageHandler(Le)})})()}}function gn(){return window}function Tt(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function ya(){return(ya=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const od="firebaseLocalStorageDb",ns="firebaseLocalStorage",Zr="fbase_key";class Io{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Do(v,p){return v.transaction([ns],p?"readwrite":"readonly").objectStore(ns)}function _a(){const v=indexedDB.open(od,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(ns,{keyPath:Zr})}catch(C){m(C)}}),v.addEventListener("success",(0,c.Z)(function*(){const w=v.result;w.objectStoreNames.contains(ns)?p(w):(w.close(),yield function Cl(){const v=indexedDB.deleteDatabase(od);return new Io(v).toPromise()}(),p(yield _a()))}))})}function Nf(v,p,m){return $s.apply(this,arguments)}function $s(){return($s=(0,c.Z)(function*(v,p,m){const w=Do(v,!0).put({[Zr]:p,value:m});return new Io(w).toPromise()})).apply(this,arguments)}function gu(){return(gu=(0,c.Z)(function*(v,p){const m=Do(v,!1).get(p),w=yield new Io(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Er(v,p){const m=Do(v,!0).delete(p);return new Io(m).toPromise()}const Co=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield _a()),m.db})()}_withRetries(m){var w=this;return(0,c.Z)(function*(){let C=0;for(;;)try{const N=yield w._openDb();return yield m(N)}catch(N){if(C++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return Tt()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=pu._getInstance(function sd(){return Tt()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(C,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(C,N){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(C,N){return["keyChanged"]});return function(C,N){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var w,C;if(m.activeServiceWorker=yield function id(){return ya.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ma(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(C=N[0])||void 0===C?void 0:C.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function _m(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(C){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield _a();return yield Nf(m,ed,"1"),yield Er(m,ed),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var C=this;return(0,c.Z)(function*(){return C._withPendingWrite((0,c.Z)(function*(){return yield C._withRetries(N=>Nf(N,m,w)),C.localCache[m]=w,C.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,c.Z)(function*(){const C=yield w._withRetries(N=>function ys(v,p){return gu.apply(this,arguments)}(N,m));return w.localCache[m]=C,C})()}_remove(m){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(C=>Er(C,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const w=yield m._withRetries(ie=>{const Le=Do(ie,!1).getAll();return new Io(Le).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const C=[],N=new Set;for(const{fbase_key:ie,value:Le}of w)N.add(ie),JSON.stringify(m.localCache[ie])!==JSON.stringify(Le)&&(m.notifyListeners(ie,Le),C.push(ie));for(const ie of Object.keys(m.localCache))m.localCache[ie]&&!N.has(ie)&&(m.notifyListeners(ie,null),C.push(ie));return C})()}notifyListeners(m,w){this.localCache[m]=w;const C=this.listeners[m];if(C)for(const N of Array.from(C))N(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Of(v,p){return Pt(v,"POST","/v2/accounts/mfaSignIn:start",zt(v,p))}function _s(){return(_s=(0,c.Z)(function*(v){return(yield Pt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mu(v){return new Promise((p,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=C=>{const N=ke("internal-error");N.customData=C,m(N)},w.type="text/javascript",w.charset="UTF-8",function ld(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function yu(v){return`__${v}${Math.floor(1e6*Math.random())}`}const rs=1e12;class cd{constructor(p){this.auth=p,this.counter=rs,this._widgets=new Map}render(p,m){const w=this.counter;return this._widgets.set(w,new Tl(p,this.auth.name,m||{})),this.counter++,w}reset(p){var m;const w=p||rs;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(p){var m;return(null===(m=this._widgets.get(p||rs))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,c.Z)(function*(){var w;return null===(w=m._widgets.get(p||rs))||void 0===w||w.execute(),""})()}}class Tl{constructor(p,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof p?document.getElementById(p):p;J(C,"argument-error",{appName:m}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function va(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dd=yu("rcb"),kf=new dt(3e4,6e4);class Ff{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(p,m=""){return J(function Lf(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(gn().grecaptcha):new Promise((w,C)=>{const N=gn().setTimeout(()=>{C(ke(p,"network-request-failed"))},kf.get());gn()[dd]=()=>{gn().clearTimeout(N),delete gn()[dd];const Le=gn().grecaptcha;if(!Le)return void C(ke(p,"internal-error"));const lt=Le.render;Le.render=(It,Qt)=>{const Gn=lt(It,Qt);return this.counter++,Gn},this.hostLanguage=m,w(Le)},mu(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:dd,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),C(ke(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!gn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Em{load(p){return(0,c.Z)(function*(){return new cd(p)})()}clearedOneInstance(){}}const Uf="recaptcha",wm={theme:"light",type:"image"};class Vf{constructor(p,m=Object.assign({},wm),w){this.parameters=m,this.type=Uf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ke(w),this.isInvisible="invisible"===this.parameters.size,J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof p?document.getElementById(p):p;J(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Em:new Ff,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(m)||new Promise(N=>{const ie=Le=>{!Le||(p.tokenChangeListeners.delete(ie),N(Le))};p.tokenChangeListeners.add(ie),p.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof p)p(m);else if("string"==typeof p){const w=gn()[p];"function"==typeof w&&w(m)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){J(_t()&&!Tt(),p.auth,"internal-error"),yield function hd(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ud(v){return _s.apply(this,arguments)}(p.auth);J(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gs{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=mo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function bm(v,p,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,c.Z)(function*(v,p,m){const w=Ke(v),C=yield ti(w,p,(0,k.m9)(m));return new Gs(C,N=>da(w,N))})).apply(this,arguments)}function is(v,p,m){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v);yield ei(!1,w,"phone");const C=yield ti(w.auth,p,(0,k.m9)(m));return new Gs(C,N=>Ni(w,N))})).apply(this,arguments)}function Im(v,p,m){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v),C=yield ti(w.auth,p,(0,k.m9)(m));return new Gs(C,N=>P(w,N))})).apply(this,arguments)}function ti(v,p,m){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(v,p,m){var w;const C=yield m.verify();try{let N;if(J("string"==typeof C,v,"argument-error"),J(m.type===Uf,v,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const ie=N.session;if("phoneNumber"in N)return J("enroll"===ie.type,v,"internal-error"),(yield Rf(v,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{J("signin"===ie.type,v,"internal-error");const Le=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return J(Le,v,"missing-multi-factor-info"),(yield Of(v,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield Gc(v,{phoneNumber:N.phoneNumber,recaptchaToken:C});return ie}}finally{m._reset()}})).apply(this,arguments)}function _u(v,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,c.Z)(function*(v,p){yield bn((0,k.m9)(v),p)})).apply(this,arguments)}let zs=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Ke(m)}verifyPhoneNumber(m,w){return ti(this.auth,m,(0,k.m9)(w))}static credential(m,w){return mo._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:C}=m;return w&&C?mo._fromTokenResponse(w,C):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ws(v,p){return p?ue(p):(J(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class vu extends Vt{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return $n(p,this._buildIdpRequest())}_linkToIdToken(p,m){return $n(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return $n(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Dm(v){return ca(v.auth,new vu(v),v.bypassAuthState)}function cI(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),Xi(m,new vu(v),v.bypassAuthState)}function dI(v){return fd.apply(this,arguments)}function fd(){return(fd=(0,c.Z)(function*(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),bn(m,new vu(v),v.bypassAuthState)})).apply(this,arguments)}class pi{constructor(p,m,w,C,N=!1){this.auth=p,this.resolver=w,this.user=C,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,c.Z)(function*(w,C){p.pendingPromise={resolve:w,reject:C};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(w,C){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:C,postBody:N,tenantId:ie,error:Le,type:lt}=p;if(Le)return void m.reject(Le);const It={auth:m.auth,requestUri:w,sessionId:C,tenantId:ie||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(lt)(It))}catch(Qt){m.reject(Qt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Dm;case"linkViaPopup":case"linkViaRedirect":return dI;case"reauthViaPopup":case"reauthViaRedirect":return cI;default:Ze(this.auth,"internal-error")}}resolve(p){V(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){V(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jf=new dt(2e3,1e4);function Eu(v,p,m){return $f.apply(this,arguments)}function $f(){return($f=(0,c.Z)(function*(v,p,m){const w=Ke(v);Ce(v,p,Qi);const C=Ws(w,m);return new Ea(w,"signInViaPopup",p,C).executeNotNull()})).apply(this,arguments)}function pd(v,p,m){return gd.apply(this,arguments)}function gd(){return(gd=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v);Ce(w.auth,p,Qi);const C=Ws(w.auth,m);return new Ea(w.auth,"reauthViaPopup",p,C,w).executeNotNull()})).apply(this,arguments)}function Cm(v,p,m){return md.apply(this,arguments)}function md(){return(md=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v);Ce(w.auth,p,Qi);const C=Ws(w.auth,m);return new Ea(w.auth,"linkViaPopup",p,C,w).executeNotNull()})).apply(this,arguments)}let Ea=(()=>{class v extends pi{constructor(m,w,C,N,ie){super(m,w,N,ie),this.provider=C,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const w=yield m.execute();return J(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,c.Z)(function*(){V(1===m.filter.length,"Popup operations only handle one event");const w=ga();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(C=>{m.reject(C)}),m.resolver._isIframeWebStorageSupported(m.auth,C=>{C||m.reject(ke(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,C;this.pollId=(null===(C=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===C?void 0:C.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,jf.get())};m()}}return v.currentPopupAction=null,v})();const Es=new Map;class wa extends pi{constructor(p,m,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,c.Z)(function*(){let w=Es.get(m.auth._key());if(!w){try{const N=(yield function Al(v,p){return Sl.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;w=()=>Promise.resolve(N)}catch(C){w=()=>Promise.reject(C)}Es.set(m.auth._key(),w)}return m.bypassAuthState||Es.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(w,p);if("unknown"!==p.type){if(p.eventId){const C=yield w.auth._redirectUserForId(p.eventId);if(C)return w.user=C,m().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Sl(){return(Sl=(0,c.Z)(function*(v,p){const m=_d(p),w=Hf(v);if(!(yield w._isAvailable()))return!1;const C="true"===(yield w._get(m));return yield w._remove(m),C})).apply(this,arguments)}function ss(v,p){return bu.apply(this,arguments)}function bu(){return(bu=(0,c.Z)(function*(v,p){return Hf(v)._set(_d(p),"true")})).apply(this,arguments)}function xl(){Es.clear()}function yd(v,p){Es.set(v._key(),p)}function Hf(v){return ue(v._redirectPersistence)}function _d(v){return ze("pendingRedirect",v.config.apiKey,v.name)}function Gf(v,p,m){return function zv(v,p,m){return Ao.apply(this,arguments)}(v,p,m)}function Ao(){return(Ao=(0,c.Z)(function*(v,p,m){const w=Ke(v);Ce(v,p,Qi);const C=Ws(w,m);return yield ss(C,w),C._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function vd(v,p,m){return function Wv(v,p,m){return Yn.apply(this,arguments)}(v,p,m)}function Yn(){return(Yn=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v);Ce(w.auth,p,Qi);const C=Ws(w.auth,m);yield ss(C,w.auth);const N=yield Zs(w);return C._openRedirect(w.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function qf(v,p,m){return function zf(v,p,m){return So.apply(this,arguments)}(v,p,m)}function So(){return(So=(0,c.Z)(function*(v,p,m){const w=(0,k.m9)(v);Ce(w.auth,p,Qi);const C=Ws(w.auth,m);yield ei(!1,w,p.providerId),yield ss(C,w.auth);const N=yield Zs(w);return C._openRedirect(w.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function xo(v,p){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,c.Z)(function*(v,p){return yield Ke(v)._initializationPromise,Iu(v,p,!1)})).apply(this,arguments)}function Iu(v,p){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,c.Z)(function*(v,p,m=!1){const w=Ke(v),C=Ws(w,p),ie=yield new wa(w,C,m).execute();return ie&&!m&&(delete ie.user._redirectEventId,yield w._persistUserIfCurrent(ie.user),yield w._setRedirectUser(null,p)),ie})).apply(this,arguments)}function Zs(v){return bi.apply(this,arguments)}function bi(){return(bi=(0,c.Z)(function*(v){const p=ga(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Ia{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(m=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Du(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rl(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var w;if(p.error&&!Rl(p)){const C=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(ke(this.auth,C))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const w=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ml(p))}saveEventToCache(p){this.cachedEventUids.add(Ml(p)),this.lastProcessedEventTime=Date.now()}}function Ml(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Rl({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Da(v){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,c.Z)(function*(v,p={}){return Pt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Ed=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pl=/^https?/;function Ks(){return(Ks=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Da(v);for(const m of p)try{if(Zf(m))return}catch(w){}Ze(v,"unauthorized-domain")})).apply(this,arguments)}function Zf(v){const p=ae(),{protocol:m,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const ie=new URL(v);return""===ie.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&ie.hostname===w}if(!Pl.test(m))return!1;if(Ed.test(v))return w===v;const C=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(w)}const Tm=new dt(3e4,6e4);function Cu(){const v=gn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Ca=null;function Kf(v){return Ca=Ca||function wd(v){return new Promise((p,m)=>{var w,C,N;function ie(){Cu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Cu(),m(ke(v,"network-request-failed"))},timeout:Tm.get()})}if(null===(C=null===(w=gn().gapi)||void 0===w?void 0:w.iframes)||void 0===C?void 0:C.Iframe)p(gapi.iframes.getContext());else{if(!(null===(N=gn().gapi)||void 0===N?void 0:N.load)){const Le=yu("iframefcb");return gn()[Le]=()=>{gapi.load?ie():m(ke(v,"network-request-failed"))},mu(`https://apis.google.com/js/api.js?onload=${Le}`).catch(lt=>m(lt))}ie()}}).catch(p=>{throw Ca=null,p})}(v),Ca}const Am=new dt(5e3,15e3),Nl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Au=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zv(v){const p=v.config;J(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?yn(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:M.SDK_VERSION},C=Au.get(v.config.apiHost);C&&(w.eid=C);const N=v._getFrameworks();return N.length&&(w.fw=N.join(",")),`${m}?${(0,k.xO)(w).slice(1)}`}function Sm(){return Sm=(0,c.Z)(function*(v){const p=yield Kf(v),m=gn().gapi;return J(m,v,"internal-error"),p.open({where:document.body,url:Zv(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nl,dontclear:!0},w=>new Promise(function(){var C=(0,c.Z)(function*(N,ie){yield w.restyle({setHideOnLeave:!1});const Le=ke(v,"network-request-failed"),lt=gn().setTimeout(()=>{ie(Le)},Am.get());function It(){gn().clearTimeout(lt),N(w)}w.ping(It).then(It,()=>{ie(Le)})});return function(N,ie){return C.apply(this,arguments)}}()))}),Sm.apply(this,arguments)}const Ol={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ta{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ll(v,p,m,w,C,N){J(v.config.authDomain,v,"auth-domain-config-required"),J(v.config.apiKey,v,"invalid-api-key");const ie={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:M.SDK_VERSION,eventId:C};if(p instanceof Qi){p.setDefaultLanguage(v.languageCode),ie.providerId=p.providerId||"",(0,k.xb)(p.getCustomParameters())||(ie.customParameters=JSON.stringify(p.getCustomParameters()));for(const[lt,It]of Object.entries(N||{}))ie[lt]=It}if(p instanceof hi){const lt=p.getScopes().filter(It=>""!==It);lt.length>0&&(ie.scopes=lt.join(","))}v.tenantId&&(ie.tid=v.tenantId);const Le=ie;for(const lt of Object.keys(Le))void 0===Le[lt]&&delete Le[lt];return`${function Ys({config:v}){return v.emulator?yn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,k.xO)(Le).slice(1)}`}const Qs="webStorageSupport",Qf=class Rm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dl,this._completeRedirectFn=Iu,this._overrideRedirectResult=yd}_openPopup(p,m,w,C){var N=this;return(0,c.Z)(function*(){var ie;V(null===(ie=N.eventManagers[p._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Le=Ll(p,m,w,ae(),C);return function xm(v,p,m,w=500,C=600){const N=Math.max((window.screen.availHeight-C)/2,0).toString(),ie=Math.max((window.screen.availWidth-w)/2,0).toString();let Le="";const lt=Object.assign(Object.assign({},Ol),{width:w.toString(),height:C.toString(),top:N,left:ie}),It=(0,k.z$)().toLowerCase();m&&(Le=Se(It)?"_blank":m),H(It)&&(p=p||"http://localhost",lt.scrollbars="yes");const Qt=Object.entries(lt).reduce((ri,[Ii,ko])=>`${ri}${Ii}=${ko},`,"");if(function cr(v=(0,k.z$)()){var p;return Ut(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(It)&&"_self"!==Le)return function Fl(v,p){const m=document.createElement("a");m.href=v,m.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(p||"",Le),new Ta(null);const Gn=window.open(p||"",Le,Qt);J(Gn,v,"popup-blocked");try{Gn.focus()}catch(ri){}return new Ta(Gn)}(p,Le,ga())})()}_openRedirect(p,m,w,C){var N=this;return(0,c.Z)(function*(){return yield N._originValidation(p),function Tr(v){gn().location.href=v}(Ll(p,m,w,ae(),C)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:C,promise:N}=this.eventManagers[m];return C?Promise.resolve(C):(V(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(p);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(p){var m=this;return(0,c.Z)(function*(){const w=yield function Kv(v){return Sm.apply(this,arguments)}(p),C=new Ia(p);return w.register("authEvent",N=>(J(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:C.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:C},m.iframes[p._key()]=w,C})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Qs,{type:Qs},C=>{var N;const ie=null===(N=null==C?void 0:C[0])||void 0===N?void 0:N[Qs];void 0!==ie&&m(!!ie),Ze(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Po(v){return Ks.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Vn()||U()||Ut()}};class Xf extends class Jf{constructor(p){this.factorId=p}_process(p,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,w);case"signin":return this._finalizeSignIn(p,m.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Xf(p)}_finalizeEnroll(p,m,w){return function mm(v,p){return Pt(v,"POST","/v2/accounts/mfaEnrollment:finalize",zt(v,p))}(p,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function ad(v,p){return Pt(v,"POST","/v2/accounts/mfaSignIn:finalize",zt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pm=(()=>{class v{constructor(){}static assertion(m){return Xf._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Nm="@firebase/auth";class Om{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(w=>{var C;p((null===(C=w)||void 0===C?void 0:C.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Cd(v=(0,M.getApp)()){const p=(0,M._getProvider)(v,"auth");return p.isInitialized()?p.getImmediate():function ce(v,p){const m=(0,M._getProvider)(v,"auth");if(m.isInitialized()){const C=m.getImmediate(),N=m.getOptions();if((0,k.vZ)(N,null!=p?p:{}))return C;Ze(C,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Qf,persistence:[Co,ym,Dl]})}!function km(v){(0,M._registerComponent)(new we.wA("auth",(p,{options:m})=>{const w=p.getProvider("app").getImmediate(),C=p.getProvider("heartbeat"),{apiKey:N,authDomain:ie}=w.options;return((Le,lt)=>{J(N&&!N.includes(":"),"invalid-api-key",{appName:Le.name}),J(!(null==ie?void 0:ie.includes(":")),"argument-error",{appName:Le.name});const It={apiKey:N,authDomain:ie,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zn(v)},Qt=new Dr(Le,lt,It);return function Pe(v,p){const m=(null==p?void 0:p.persistence)||[],w=(Array.isArray(m)?m:[m]).map(ue);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(Qt,m),Qt})(w,C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,w)=>{p.getProvider("auth-internal").initialize()})),(0,M._registerComponent)(new we.wA("auth-internal",p=>{const m=Ke(p.getProvider("auth").getImmediate());return new Om(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,M.registerVersion)(Nm,"0.20.1",function Dd(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,M.registerVersion)(Nm,"0.20.1","esm2017")}("Browser")},2090:(ot,Te,x)=>{x.d(Te,{$s:()=>Lt,BH:()=>Ge,G6:()=>J,L:()=>le,LL:()=>ae,Mn:()=>Ce,Sg:()=>Ae,UG:()=>ye,US:()=>we,ZB:()=>$,ZR:()=>Pe,b$:()=>Ze,d:()=>ke,eu:()=>V,hl:()=>fe,jU:()=>De,m9:()=>on,ne:()=>er,pd:()=>Xn,r3:()=>zt,ru:()=>et,tV:()=>me,uI:()=>qe,vZ:()=>xr,w1:()=>Ne,xO:()=>Rn,xb:()=>sn,z$:()=>Be,zI:()=>ne,zd:()=>zn});const se=function(L){const z=[];let K=0;for(let Ie=0;Ie<L.length;Ie++){let B=L.charCodeAt(Ie);B<128?z[K++]=B:B<2048?(z[K++]=B>>6|192,z[K++]=63&B|128):55296==(64512&B)&&Ie+1<L.length&&56320==(64512&L.charCodeAt(Ie+1))?(B=65536+((1023&B)<<10)+(1023&L.charCodeAt(++Ie)),z[K++]=B>>18|240,z[K++]=B>>12&63|128,z[K++]=B>>6&63|128,z[K++]=63&B|128):(z[K++]=B>>12|224,z[K++]=B>>6&63|128,z[K++]=63&B|128)}return z},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,z){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let B=0;B<L.length;B+=3){const X=L[B],j=B+1<L.length,ee=j?L[B+1]:0,ve=B+2<L.length,Ve=ve?L[B+2]:0;let pt=(15&ee)<<2|Ve>>6,Q=63&Ve;ve||(Q=64,j||(pt=64)),Ie.push(K[X>>2],K[(3&X)<<4|ee>>4],K[pt],K[Q])}return Ie.join("")},encodeString(L,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(L):this.encodeByteArray(se(L),z)},decodeString(L,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(L):function(L){const z=[];let K=0,Ie=0;for(;K<L.length;){const B=L[K++];if(B<128)z[Ie++]=String.fromCharCode(B);else if(B>191&&B<224){const X=L[K++];z[Ie++]=String.fromCharCode((31&B)<<6|63&X)}else if(B>239&&B<365){const ve=((7&B)<<18|(63&L[K++])<<12|(63&L[K++])<<6|63&L[K++])-65536;z[Ie++]=String.fromCharCode(55296+(ve>>10)),z[Ie++]=String.fromCharCode(56320+(1023&ve))}else{const X=L[K++],j=L[K++];z[Ie++]=String.fromCharCode((15&B)<<12|(63&X)<<6|63&j)}}return z.join("")}(this.decodeStringToByteArray(L,z))},decodeStringToByteArray(L,z){this.init_();const K=z?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let B=0;B<L.length;){const X=K[L.charAt(B++)],ee=B<L.length?K[L.charAt(B)]:0;++B;const Ve=B<L.length?K[L.charAt(B)]:64;++B;const ze=B<L.length?K[L.charAt(B)]:64;if(++B,null==X||null==ee||null==Ve||null==ze)throw Error();Ie.push(X<<2|ee>>4),64!==Ve&&(Ie.push(ee<<4&240|Ve>>2),64!==ze&&Ie.push(Ve<<6&192|ze))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},le=function(L){return function(L){const z=se(L);return we.encodeByteArray(z,!0)}(L).replace(/\./g,"")},me=function(L){try{return we.decodeString(L,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function $(L,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return z}for(const K in z)!z.hasOwnProperty(K)||!oe(K)||(L[K]=$(L[K],z[K]));return L}function oe(L){return"__proto__"!==L}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,K)=>{this.resolve=z,this.reject=K})}wrapCallback(z){return(K,Ie)=>{K?this.reject(K):this.resolve(Ie),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(K):z(K,Ie))}}}function Ae(L,z){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=z||"demo-project",B=L.iat||0,X=L.sub||L.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const j=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:B,exp:B+3600,auth_time:B,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},L);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(j)),""].join(".")}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function De(){return"object"==typeof self&&self.self===self}function et(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ke(){return Be().indexOf("Electron/")>=0}function Ne(){const L=Be();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ce(){return Be().indexOf("MSAppHost/")>=0}function J(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function V(){return new Promise((L,z)=>{try{let K=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",B=self.indexedDB.open(Ie);B.onsuccess=()=>{B.result.close(),K||self.indexedDB.deleteDatabase(Ie),L(!0)},B.onupgradeneeded=()=>{K=!1},B.onerror=()=>{var X;z((null===(X=B.error)||void 0===X?void 0:X.message)||"")}}catch(K){z(K)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Pe extends Error{constructor(z,K,Ie){super(K),this.code=z,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(z,K,Ie){this.service=z,this.serviceName=K,this.errors=Ie}create(z,...K){const Ie=K[0]||{},B=`${this.service}/${z}`,X=this.errors[z],j=X?function _t(L,z){return L.replace(Rt,(K,Ie)=>{const B=z[Ie];return null!=B?String(B):`<${Ie}?>`})}(X,Ie):"Error";return new Pe(B,`${this.serviceName}: ${j} (${B}).`,Ie)}}const Rt=/\{\$([^}]+)}/g;function zt(L,z){return Object.prototype.hasOwnProperty.call(L,z)}function sn(L){for(const z in L)if(Object.prototype.hasOwnProperty.call(L,z))return!1;return!0}function xr(L,z){if(L===z)return!0;const K=Object.keys(L),Ie=Object.keys(z);for(const B of K){if(!Ie.includes(B))return!1;const X=L[B],j=z[B];if(fn(X)&&fn(j)){if(!xr(X,j))return!1}else if(X!==j)return!1}for(const B of Ie)if(!K.includes(B))return!1;return!0}function fn(L){return null!==L&&"object"==typeof L}function Rn(L){const z=[];for(const[K,Ie]of Object.entries(L))Array.isArray(Ie)?Ie.forEach(B=>{z.push(encodeURIComponent(K)+"="+encodeURIComponent(B))}):z.push(encodeURIComponent(K)+"="+encodeURIComponent(Ie));return z.length?"&"+z.join("&"):""}function zn(L){const z={};return L.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[B,X]=Ie.split("=");z[decodeURIComponent(B)]=decodeURIComponent(X)}}),z}function Xn(L){const z=L.indexOf("?");if(!z)return"";const K=L.indexOf("#",z);return L.substring(z,K>0?K:void 0)}function er(L,z){const K=new vt(L,z);return K.subscribe.bind(K)}class vt{constructor(z,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{z(this)}).catch(Ie=>{this.error(Ie)})}next(z){this.forEachObserver(K=>{K.next(z)})}error(z){this.forEachObserver(K=>{K.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,K,Ie){let B;if(void 0===z&&void 0===K&&void 0===Ie)throw new Error("Missing Observer.");B=function nn(L,z){if("object"!=typeof L||null===L)return!1;for(const K of z)if(K in L&&"function"==typeof L[K])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:K,complete:Ie},void 0===B.next&&(B.next=Jt),void 0===B.error&&(B.error=Jt),void 0===B.complete&&(B.complete=Jt);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?B.error(this.finalError):B.complete()}catch(j){}}),this.observers.push(B),X}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,z)}sendOne(z,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{K(this.observers[z])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jt(){}function Lt(L,z=1e3,K=2){const Ie=z*Math.pow(K,L),B=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+B)}function on(L){return L&&L._delegate?L._delegate:L}},7125:(ot,Te,x)=>{var c=x(5e3);let k=null;function M(){return k}const he=new c.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function me(){return(0,c.LFG)($)}()},providedIn:"platform"}),n})();const q=new c.OlP("Location Initialized");let $=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M().getBaseHref(this._doc)}onPopState(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){oe()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){oe()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ge(){return new $((0,c.LFG)(he))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function De(n){const e=(0,c.LFG)(he).location;return new Ze((0,c.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const et=new c.OlP("appBaseHref");let Ze=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+qe(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+qe(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(le),c.LFG(et,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+qe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+qe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(le),c.LFG(et,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Be(J(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,J(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Ae,n.stripTrailingSlash=Be,n.\u0275fac=function(t){return new(t||n)(c.LFG(ye),c.LFG(le))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ce(){return new Ne((0,c.LFG)(ye),(0,c.LFG)(le))}()},providedIn:"root"}),n})();function J(n){return n.replace(/\/index.html$/,"")}class Ls{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ls(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,h),Ri(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ri(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ri(n,e){n.context.$implicit=e.item}let nr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new hn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){na("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){na("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class hn{constructor(){this.$implicit=null,this.ngIf=null}}function na(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class gl{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ef{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Pi=new Ef,Gc=new gl;let go=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return Pi;if((0,c.F4k)(t))return Gc;throw function $n(n,e){return new c.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),ds=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const _o="browser";function rr(n){return"server"===n}let aa=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new ua((0,c.LFG)(he),window)}),n})();class ua{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ji(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=uu(this.window.history)||uu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function uu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ei extends class la extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function pe(n){k||(k=n)}(new ei)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xi(){return vn=vn||document.querySelector("base"),vn?vn.getAttribute("href"):null}();return null==t?null:function ca(n){Eo=Eo||document.createElement("a"),Eo.setAttribute("href",n);const e=Eo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ki(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Eo,vn=null;const vr=new c.OlP("TRANSITION_ID"),wo=[{provide:c.ip1,useFactory:function da(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=M(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[vr,he,c.zs3],multi:!0}];class Ni{static init(){(0,c.VLi)(new Ni)}addToWindow(e){c.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const o=c.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const g=function(_){h=h||_,u--,0==u&&r(h)};o.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?M().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let R=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const P=new c.OlP("EventManagerPlugins");let Y=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(P),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ge{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=M().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let He=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n extends He{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Mt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Mt))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Mt(n){M().remove(n)}const ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nn=/%COMP%/g;function es(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?es(n,o,t):(o=o.replace(Nn,n),t.push(o))}return t}function Fe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Oi=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Cn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ts(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case c.ifc.ShadowDom:return new Yc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=es(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Y),c.LFG(Xe),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Cn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ut[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ut[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ut[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,o&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Fe(r)):this.eventManager.addEventListener(e,t,Fe(r))}}class ts extends Cn{constructor(e,t,r,o){super(e),this.component=r;const u=es(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function fi(n){return"_ngcontent-%COMP%".replace(Nn,n)}(o+"-"+r.id),this.hostAttr=function ha(n){return"_nghost-%COMP%".replace(Nn,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Yc extends Cn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=es(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const g=document.createElement("style");g.textContent=u[h],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let lu=(()=>{class n extends ge{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const lm=["alt","control","meta","shift"],Cf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fs=(()=>{class n extends ge{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>M().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(lm.forEach(_=>{const I=r.indexOf(_);I>-1&&(r.splice(I,1),h+=_+".")}),h+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=h,g}static getEventFullKey(t){let r="",o=function vl(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&cu.hasOwnProperty(e)&&(e=cu[e]))}return Cf[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),lm.forEach(u=>{u!=o&&Cr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const hm=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:_o},{provide:c.g9A,useValue:function fa(){ei.makeCurrent(),Ni.init()},multi:!0},{provide:he,useFactory:function dm(){return(0,c.RDi)(document),document},deps:[]}]),Qc=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function ki(){return new c.qLn},deps:[]},{provide:P,useClass:lu,multi:!0,deps:[he,c.R0b,c.Lbi]},{provide:P,useClass:fs,multi:!0,deps:[he]},{provide:Oi,useClass:Oi,deps:[Y,Xe,c.AFp]},{provide:c.FYo,useExisting:Oi},{provide:He,useExisting:Xe},{provide:Xe,useClass:Xe,deps:[he]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Y,useClass:Y,deps:[P,c.R0b]},{provide:class bn{},useClass:R,deps:[]}];let Jc=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:vr,useExisting:c.AFp},wo]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Qc,imports:[ds,c.hGG]}),n})(),du=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Sf(){return new du((0,c.LFG)(he))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;var Tn=x(8996),ms=x(8306);const{isArray:ym}=Array,{getPrototypeOf:nd,prototype:Dl,keys:rd}=Object;function pu(n){if(1===n.length){const e=n[0];if(ym(e))return{args:e,keys:null};if(function ga(n){return n&&"object"==typeof n&&nd(n)===Dl}(e)){const t=rd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ma=x(8421),gn=x(7669),Tr=x(5403),Tt=x(4004);const{isArray:id}=Array;function _m(n){return(0,Tt.U)(e=>function ya(n,e){return id(e)?n(...e):n(e)}(n,e))}function sd(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Pf=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),ns=(()=>{class n extends Pf{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Zr=new c.OlP("NgValueAccessor"),Cl={provide:Zr,useExisting:(0,c.Gpc)(()=>$s),multi:!0},Nf=new c.OlP("CompositionEventMode");let $s=(()=>{class n extends Pf{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _a(){const n=M()?M().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Nf,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([Cl]),c.qOj]}),n})();function ys(n){return null==n||0===n.length}function gu(n){return null!=n&&"number"==typeof n.length}const Er=new c.OlP("NgValidators"),Hs=new c.OlP("NgAsyncValidators"),vm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Li{static min(e){return function Co(n){return e=>{if(ys(e.value)||ys(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Of(n){return e=>{if(ys(e.value)||ys(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return ad(e)}static requiredTrue(e){return function ud(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function _s(n){return ys(n.value)||vm.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ld(n){return e=>ys(e.value)||!gu(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function mu(n){return e=>gu(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function yu(n){if(!n)return vs;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ys(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return kf(e)}static composeAsync(e){return Ff(e)}}function ad(n){return ys(n.value)?{required:!0}:null}function vs(n){return null}function To(n){return null!=n}function rs(n){const e=(0,c.QGY)(n)?(0,Tn.D)(n):n;return(0,c.CqO)(e),e}function cd(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Tl(n,e){return e.map(t=>t(n))}function dd(n){return n.map(e=>function va(n){return!n.validate}(e)?e:t=>e.validate(t))}function kf(n){if(!n)return null;const e=n.filter(To);return 0==e.length?null:function(t){return cd(Tl(t,e))}}function On(n){return null!=n?kf(dd(n)):null}function Ff(n){if(!n)return null;const e=n.filter(To);return 0==e.length?null:function(t){return function od(...n){const e=(0,gn.jO)(n),{args:t,keys:r}=pu(n),o=new ms.y(u=>{const{length:h}=t;if(!h)return void u.complete();const g=new Array(h);let _=h,I=h;for(let T=0;T<h;T++){let S=!1;(0,ma.Xf)(t[T]).subscribe((0,Tr.x)(u,F=>{S||(S=!0,I--),g[T]=F},()=>_--,void 0,()=>{(!_||!S)&&(I||u.next(r?sd(r,g):g),u.complete())}))}});return e?o.pipe(_m(e)):o}(Tl(t,e).map(rs)).pipe((0,Tt.U)(cd))}}function Lf(n){return null!=n?Ff(dd(n)):null}function Em(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Uf(n){return n._rawValidators}function wm(n){return n._rawAsyncValidators}function Vf(n){return n?Array.isArray(n)?n:[n]:[]}function hd(n,e){return Array.isArray(n)?n.includes(e):n===e}function Gs(n,e){const t=Vf(e);return Vf(n).forEach(o=>{hd(t,o)||t.push(o)}),t}function bm(n,e){return Vf(e).filter(t=>!hd(n,t))}class Hn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=On(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Lf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class is extends Hn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kn extends Hn{get formDirective(){return null}get path(){return null}}class Im{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let ni=(()=>{class n extends Im{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(is,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),_u=(()=>{class n extends Im{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Kn,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function wu(n,e){Sl(n,e),e.valueAccessor.writeValue(n.value),function bu(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yd(n,e)})}(n,e),function Hf(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xl(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yd(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Al(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Es(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ss(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Sl(n,e){const t=Uf(n);null!==e.validator?n.setValidators(Em(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=wm(n);null!==e.asyncValidator?n.setAsyncValidators(Em(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();wa(e._rawValidators,o),wa(e._rawAsyncValidators,o)}function ss(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Uf(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=wm(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return wa(e._rawValidators,r),wa(e._rawAsyncValidators,r),t}function yd(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _d(n,e){Sl(n,e)}function zf(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function xo(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Mo="VALID",Zs="INVALID",bi="PENDING",ba="DISABLED";function Ml(n){return(Ro(n)?n.validators:n)||null}function Rl(n){return Array.isArray(n)?On(n):n||null}function Du(n,e){return(Ro(e)?e.asyncValidators:n)||null}function Da(n){return Array.isArray(n)?Lf(n):n||null}function Ro(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Ed=n=>n instanceof wd,Pl=n=>n instanceof Ca,Po=n=>n instanceof Kf;function Ks(n){return Ed(n)?n.value:n.getRawValue()}function Zf(n,e){const t=Pl(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function Tm(n,e){Pl(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new c.vHH(1002,"")})}class Cu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Rl(this._rawValidators),this._composedAsyncValidatorFn=Da(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Mo}get invalid(){return this.status===Zs}get pending(){return this.status==bi}get disabled(){return this.status===ba}get enabled(){return this.status!==ba}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Rl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Da(e)}addValidators(e){this.setValidators(Gs(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gs(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bm(e,this._rawAsyncValidators))}hasValidator(e){return hd(this._rawValidators,e)}hasAsyncValidator(e){return hd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ba,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mo,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mo||this.status===bi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ba:Mo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bi,this._hasOwnPendingAsyncValidator=!0;const t=rs(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Ia(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Pl(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:Po(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?ba:this.errors?Zs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bi)?bi:this._anyControlsHaveStatus(Zs)?Zs:Mo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ro(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wd extends Cu{constructor(e=null,t,r){super(Ml(t),Du(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ro(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xo(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xo(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ca extends Cu{constructor(e,t,r){super(Ml(t),Du(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Tm(this,e),Object.keys(e).forEach(r=>{Zf(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Ks(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Kf extends Cu{constructor(e,t,r){super(Ml(t),Du(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Tm(this,e),e.forEach((r,o)=>{Zf(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Ks(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Am={provide:Kn,useExisting:(0,c.Gpc)(()=>No)},Tu=(()=>Promise.resolve(null))();let No=(()=>{class n extends Kn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new Ca({},On(t),Lf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wu(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tu.then(()=>{const r=this._findContainer(t.path),o=new Ca({});_d(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Tu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,zf(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Er,10),c.Y36(Hs,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Am]),c.qOj]}),n})(),Ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const xm={provide:Zr,useExisting:(0,c.Gpc)(()=>Fl),multi:!0};let Fl=(()=>{class n extends ns{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([xm]),c.qOj]}),n})(),Ll=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Jf=new c.OlP("NgModelWithFormControlWarning"),Nm={provide:Kn,useExisting:(0,c.Gpc)(()=>Oo)};let Oo=(()=>{class n extends Kn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ss(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wu(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Es(t.control||null,t,!1),xo(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,zf(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Es(r||null,t),Ed(o)&&(wu(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);_d(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Gf(n,e){return ss(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sl(this.form,this),this._oldForm&&ss(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Er,10),c.Y36(Hs,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Nm]),c.qOj,c.TTD]}),n})();const p={provide:is,useExisting:(0,c.Gpc)(()=>m)};let m=(()=>{class n extends is{constructor(t,r,o,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function So(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===$s?t=u:function qf(n){return Object.getPrototypeOf(n.constructor)===ns}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Yn(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Ea(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Kn,13),c.Y36(Er,10),c.Y36(Hs,10),c.Y36(Zr,10),c.Y36(Jf,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([p]),c.qOj,c.TTD]}),n})();const w={provide:Zr,useExisting:(0,c.Gpc)(()=>ie),multi:!0};function C(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ie=(()=>{class n extends ns{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=C(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function N(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([w]),c.qOj]}),n})(),Le=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(C(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(ie,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const lt={provide:Zr,useExisting:(0,c.Gpc)(()=>ri),multi:!0};function It(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ri=(()=>{class n extends ns{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,h)=>{u._setSelected(o.indexOf(h.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const h=u;for(let g=0;g<h.length;g++){const I=this._getOptionValue(h[g].value);o.push(I)}}else{const h=r.options;for(let g=0;g<h.length;g++){const _=h[g];if(_.selected){const I=this._getOptionValue(_.value);o.push(I)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Qt(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([lt]),c.qOj]}),n})(),Ii=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(It(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(It(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(ri,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ws=(()=>{class n{constructor(){this._validator=vs}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):vs,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const Vl={provide:Er,useExisting:(0,c.Gpc)(()=>xu),multi:!0};let xu=(()=>{class n extends ws{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Fm(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>ad}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([Vl]),c.qOj]}),n})(),pI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ll]]}),n})(),LS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[pI]}),n})(),Bl=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Jf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[pI]}),n})(),np=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let g,u=null,h=null;return null!=r&&(function gi(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,g=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new Ca(o,{asyncValidators:h,updateOn:g,validators:u})}control(t,r,o){return new wd(t,r,o)}array(t,r,o){const u=t.map(h=>this._createControl(h));return new Kf(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return Ed(t)||Pl(t)||Po(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:Bl}),n})();var wr=x(2011),Kr=x(655);function wt(...n){const e=(0,gn.yG)(n);return(0,Tn.D)(n,e)}var Fo=x(515),Sd=x(5363),mi=x(4482);function sr(n,e){return(0,mi.e)((t,r)=>{let o=null,u=0,h=!1;const g=()=>h&&!o&&r.complete();t.subscribe((0,Tr.x)(r,_=>{null==o||o.unsubscribe();let I=0;const T=u++;(0,ma.Xf)(n(_,T)).subscribe(o=(0,Tr.x)(r,S=>r.next(e?e(_,S,T,I++):S),()=>{o=null,g()}))},()=>{h=!0,g()}))})}var Lo=x(7579),Xv=x(6063);class mI extends Lo.x{constructor(e=1/0,t=1/0,r=Xv.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=h;_+=2)g=_;g&&r.splice(0,g+1)}}}var e0=x(3099);function Bm(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,e0.B)({connector:()=>new mI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var Gt=x(880),jm=x(7982);class bs extends Lo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var xd=x(4671),$m=x(9672);function Md(n,e,t){n?(0,$m.f)(t,n,e):e()}var Hm=x(576);function rp(n,e){const t=(0,Hm.m)(n)?n:()=>n,r=o=>o.error(t());return new ms.y(e?o=>e.schedule(r,0,o):r)}const ip=(0,x(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var sp=x(8189);function Gm(...n){return function t0(){return(0,sp.J)(1)}()((0,Tn.D)(n,(0,gn.yG)(n)))}function n0(n){return new ms.y(e=>{(0,ma.Xf)(n()).subscribe(e)})}var r0=x(727);function s0(){return(0,mi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Tr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class EI extends ms.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,mi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new r0.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Tr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=r0.w0.EMPTY)}return e}refCount(){return s0()(this)}}var qm=x(5698);function Rd(...n){const e=(0,gn.yG)(n);return(0,mi.e)((t,r)=>{(e?Gm(n,t,e):Gm(n,t)).subscribe(r)})}function wI(n,e,t,r,o){return(u,h)=>{let g=t,_=e,I=0;u.subscribe((0,Tr.x)(h,T=>{const S=I++;_=g?n(_,T,S):(g=!0,T),r&&h.next(_)},o&&(()=>{g&&h.next(_),h.complete()})))}}function Js(n,e){return(0,mi.e)(wI(n,e,arguments.length>=2,!0))}function hr(n,e){return(0,mi.e)((t,r)=>{let o=0;t.subscribe((0,Tr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Mu(n){return(0,mi.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Tr.x)(t,void 0,void 0,h=>{u=(0,ma.Xf)(n(h,Mu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var ii=x(5577);function Ru(n,e){return(0,Hm.m)(e)?(0,ii.z)(n,e,1):(0,ii.z)(n,1)}function o0(n){return n<=0?()=>Fo.E:(0,mi.e)((e,t)=>{let r=[];e.subscribe((0,Tr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Is(n=zm){return(0,mi.e)((e,t)=>{let r=!1;e.subscribe((0,Tr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function zm(){return new ip}function op(n){return(0,mi.e)((e,t)=>{let r=!1;e.subscribe((0,Tr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Sa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hr((o,u)=>n(o,u,r)):xd.y,(0,qm.q)(1),t?op(e):Is(()=>new ip))}var Yr=x(8505);class Xs{constructor(e,t){this.id=e,this.url=t}}class Pd extends Xs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pu extends Xs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wm extends Xs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class US extends Xs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jl extends Xs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zm extends Xs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u0 extends Xs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class II extends Xs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Km extends Xs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l0{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class c0{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class DI{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CI{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TI{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d0{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ym{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const en="primary";class h0{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xa(n){return new h0(n)}const f0="ngNavigationCancelingError";function Qm(n){const e=Error("NavigationCancelingError: "+n);return e[f0]=!0,e}function g0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],g=n[u];if(h.startsWith(":"))o[h.substring(1)]=g;else if(h!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ds(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Jm(n[o],e[o]))return!1;return!0}function Jm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function m0(n){return Array.prototype.concat.apply([],n)}function Nd(n){return n.length>0?n[n.length-1]:null}function Fr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Cs(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):wt(n)}const Xm={exact:function ty(n,e,t){if(!Ra(n.segments,e.segments)||!Ma(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ty(n.children[r],e.children[r],t))return!1;return!0},subset:ry},ey={exact:function ap(n,e){return Ds(n,e)},subset:function ny(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jm(n[t],e[t]))},ignored:()=>!0};function Od(n,e,t){return Xm[t.paths](n.root,e.root,t.matrixParams)&&ey[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ry(n,e,t){return up(n,e,e.segments,t)}function up(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ra(o,t)||e.hasChildren()||!Ma(o,t,r))}if(n.segments.length===t.length){if(!Ra(n.segments,t)||!Ma(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ry(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ra(n.segments,o)&&Ma(n.segments,o,r)&&n.children[en])&&up(n.children[en],e,u,r)}}function Ma(n,e,t){return e.every((r,o)=>ey[t](n[o].parameters,r.parameters))}class Ou{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xa(this.queryParams)),this._queryParamMap}toString(){return _0.serialize(this)}}class an{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Fr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lp(this)}}class kd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xa(this.parameters)),this._parameterMap}toString(){return w0(this)}}function Ra(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class sy{}class SI{parse(e){const t=new D0(e);return new Ou(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$l(e.root,!0)}`,r=function MI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${cp(t)}=${cp(o)}`).join("&"):`${cp(t)}=${cp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ts(n){return encodeURI(n)}(e.fragment)}`:""}`}}const _0=new SI;function lp(n){return n.segments.map(e=>w0(e)).join("/")}function $l(n,e){if(!n.hasChildren())return lp(n);if(e){const t=n.children[en]?$l(n.children[en],!1):"",r=[];return Fr(n.children,(o,u)=>{u!==en&&r.push(`${u}:${$l(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function iy(n,e){let t=[];return Fr(n.children,(r,o)=>{o===en&&(t=t.concat(e(r,o)))}),Fr(n.children,(r,o)=>{o!==en&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===en?[$l(n.children[en],!1)]:[`${o}:${$l(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[en]?`${lp(n)}/${t[0]}`:`${lp(n)}/(${t.join("//")})`}}function v0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cp(n){return v0(n).replace(/%3B/gi,";")}function oy(n){return v0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fd(n){return decodeURIComponent(n)}function E0(n){return Fd(n.replace(/\+/g,"%20"))}function w0(n){return`${oy(n.path)}${function xI(n){return Object.keys(n).map(e=>`;${oy(e)}=${oy(n[e])}`).join("")}(n.parameters)}`}const b0=/^[^\/()?;=#]+/;function dp(n){const e=n.match(b0);return e?e[0]:""}const RI=/^[^=?&#]+/,qt=/^[^&#]+/;class D0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[en]=new an(e,t)),r}parseSegment(){const e=dp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new kd(Fd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=dp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=dp(this.remaining);o&&(r=o,this.capture(r))}e[Fd(t)]=Fd(r)}parseQueryParam(e){const t=function PI(n){const e=n.match(RI);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function I0(n){const e=n.match(qt);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=E0(t),u=E0(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=dp(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=en);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[en]:new an([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ay{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Hl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Hl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ui(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ui(e,this._root).map(t=>t.value)}}function Hl(n,e){if(n===e.value)return e;for(const t of e.children){const r=Hl(n,t);if(r)return r}return null}function Ui(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ui(n,t);if(r.length)return r.unshift(e),r}return[]}class eo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hp extends ay{constructor(e,t){super(e),this.snapshot=t,ql(this,e)}toString(){return this.snapshot.toString()}}function to(n,e){const t=function uy(n,e){const h=new Ld([],{},{},"",{},en,e,null,n.root,-1,{});return new NI("",new eo(h,[]))}(n,e),r=new bs([new kd("",{})]),o=new bs({}),u=new bs({}),h=new bs({}),g=new bs(""),_=new ku(r,o,h,g,u,en,e,t.root);return _.snapshot=t.root,new hp(new eo(_,[]),t)}class ku{constructor(e,t,r,o,u,h,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=g,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>xa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>xa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function BS(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ld{constructor(e,t,r,o,u,h,g,_,I,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=g,this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class NI extends ay{constructor(e,t){super(t),this.url=e,ql(this,t)}toString(){return Ud(this._root)}}function ql(n,e){e.value._routerState=n,e.children.forEach(t=>ql(n,t))}function Ud(n){const e=n.children.length>0?` { ${n.children.map(Ud).join(", ")} } `:"";return`${n.value}${e}`}function Vd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ds(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ds(e.params,t.params)||n.params.next(t.params),function Nu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ds(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ds(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bd(n,e){const t=Ds(n.params,e.params)&&function AI(n,e){return Ra(n,e)&&n.every((t,r)=>Ds(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Bd(n.parent,e.parent))}function pp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function OI(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return pp(n,r,o);return pp(n,r)})}(n,e,t);return new eo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(g=>pp(n,g)),h}}const r=function kI(n){return new ku(new bs(n.url),new bs(n.params),new bs(n.queryParams),new bs(n.fragment),new bs(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>pp(n,u));return new eo(r,o)}}function gp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function zl(n){return"object"==typeof n&&null!=n&&n.outlets}function C0(n,e,t,r,o){let u={};if(r&&Fr(r,(g,_)=>{u[_]=Array.isArray(g)?g.map(I=>`${I}`):`${g}`}),n===e)return new Ou(t,u,o);const h=T0(n,e,t);return new Ou(h,u,o)}function T0(n,e,t){const r={};return Fr(n.children,(o,u)=>{r[u]=o===e?t:T0(o,e,t)}),new an(n.segments,r)}class LI{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gp(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(zl);if(o&&o!==Nd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function VI(n,e,t){if(n||(n=new an([],{})),0===n.segments.length&&n.hasChildren())return dy(n,e,t);const r=function $S(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],g=t[r];if(zl(g))break;const _=`${g}`,I=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!jI(_,I,h))return u;r+=2}else{if(!jI(_,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new an(n.segments.slice(0,r.pathIndex),{});return u.children[en]=new an(n.segments.slice(r.pathIndex),n.children),dy(u,0,o)}return r.match&&0===o.length?new an(n.segments,{}):r.match&&!n.hasChildren()?S0(n,e,t):r.match?dy(n,0,o):S0(n,e,t)}function dy(n,e,t){if(0===t.length)return new an(n.segments,{});{const r=function jS(n){return zl(n[0])?n[0].outlets:{[en]:n}}(t),o={};return Fr(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=VI(n.children[h],e,u))}),Fr(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new an(n.segments,o)}}function S0(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(zl(u)){const _=HS(u.outlets);return new an(r,_)}if(0===o&&gp(t[0])){r.push(new kd(n.segments[e].path,BI(t[0]))),o++;continue}const h=zl(u)?u.outlets[en]:`${u}`,g=o<t.length-1?t[o+1]:null;h&&g&&gp(g)?(r.push(new kd(h,BI(g))),o+=2):(r.push(new kd(h,{})),o++)}return new an(r,{})}function HS(n){const e={};return Fr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=S0(new an([],{}),0,t))}),e}function BI(n){const e={};return Fr(n,(t,r)=>e[r]=`${t}`),e}function jI(n,e,t){return n==t.path&&Ds(e,t.parameters)}class qS{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Gl(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Fr(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Gl(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Gl(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Gl(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new d0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new CI(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Vd(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(g.contexts),h.attachRef=g.componentRef,h.route=g.route.value,h.outlet&&h.outlet.attach(g.componentRef,g.route.value),Vd(g.route.value),this.activateChildRoutes(e,null,h.children)}else{const g=function Pa(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),_=g?g.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=_,h.outlet&&h.outlet.activateWith(o,_),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class jd{constructor(e,t){this.routes=e,this.module=t}}function Na(n){return"function"==typeof n}function Uo(n){return n instanceof Ou}const Wl=Symbol("INITIAL_VALUE");function $d(){return sr(n=>function yI(...n){const e=(0,gn.yG)(n),t=(0,gn.jO)(n),{args:r,keys:o}=pu(n);if(0===r.length)return(0,Tn.D)([],e);const u=new ms.y(function _I(n,e,t=xd.y){return r=>{Md(e,()=>{const{length:o}=n,u=new Array(o);let h=o,g=o;for(let _=0;_<o;_++)Md(e,()=>{const I=(0,Tn.D)(n[_],e);let T=!1;I.subscribe((0,Tr.x)(r,S=>{u[_]=S,T||(T=!0,g--),g||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>sd(o,h):xd.y));return t?u.pipe(_m(t)):u}(n.map(e=>e.pipe((0,qm.q)(1),Rd(Wl)))).pipe(Js((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==Wl?o:(u===Wl&&(r=!0),r||!1!==u&&h!==t.length-1&&!Uo(u)?o:u),e)},Wl),hr(e=>e!==Wl),(0,Tt.U)(e=>Uo(e)?e:!0===e),(0,qm.q)(1)))}class fy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hd,this.attachRef=null}}class Hd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new fy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let yp=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||en,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,_=new HI(t,g,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Hd),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class HI{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ku?this.route:e===Hd?this.childContexts:this.parent.get(e,t)}}let py=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[yp],encapsulation:2}),n})();function Zl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Kl(r,gy(e,r))}}function Kl(n,e){n.children&&Zl(n.children,e)}function gy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ka(n){const e=n.children&&n.children.map(ka),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==en&&(t.component=py),t}function si(n){return n.outlet||en}function Fu(n,e){const t=n.filter(r=>si(r)===e);return t.push(...n.filter(r=>si(r)!==e)),t}const R0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},R0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||g0)(t,n,e);if(!u)return Object.assign({},R0);const h={};Fr(u.posParams,(_,I)=>{h[I]=_.path});const g=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function qd(n,e,t,r,o="corrected"){if(t.length>0&&function P0(n,e,t){return t.some(r=>vp(n,e,r)&&si(r)!==en)}(n,t,r)){const h=new an(e,function yy(n,e,t,r){const o={};o[en]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&si(u)!==en){const h=new an([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[si(u)]=h}return o}(n,e,r,new an(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function _p(n,e,t){return t.some(r=>vp(n,e,r))}(n,t,r)){const h=new an(n.segments,function my(n,e,t,r,o,u){const h={};for(const g of r)if(vp(n,t,g)&&!o[si(g)]){const _=new an([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[si(g)]=_}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new an(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function vp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function _y(n,e,t,r){return!!(si(n)===r||r!==en&&vp(e,t,n))&&("**"===n.path||Gd(e,n,t).matched)}function GI(n,e,t){return 0===e.length&&!n.children[t]}class zd{constructor(e){this.segmentGroup=e||null}}class vy{constructor(e){this.urlTree=e}}function Wd(n){return rp(new zd(n))}function Ey(n){return rp(new vy(n))}class WI{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=qd(this.urlTree.root,[],[],this.config).segmentGroup,t=new an(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,en).pipe((0,Tt.U)(u=>this.createUrlTree(N0(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Mu(u=>{if(u instanceof vy)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof zd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,en).pipe((0,Tt.U)(o=>this.createUrlTree(N0(o),e.queryParams,e.fragment))).pipe(Mu(o=>{throw o instanceof zd?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new an([],{[en]:e}):e;return new Ou(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(u=>new an([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Tn.D)(o).pipe(Ru(u=>{const h=r.children[u],g=Fu(t,u);return this.expandSegmentGroup(e,g,h,u).pipe((0,Tt.U)(_=>({segment:_,outlet:u})))}),Js((u,h)=>(u[h.outlet]=h.segment,u),{}),function bI(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hr((o,u)=>n(o,u,r)):xd.y,o0(1),t?op(e):Is(()=>new ip))}())}expandSegment(e,t,r,o,u,h){return(0,Tn.D)(r).pipe(Ru(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,h).pipe(Mu(I=>{if(I instanceof zd)return wt(null);throw I}))),Sa(g=>!!g),Mu((g,_)=>{if(g instanceof ip||"EmptyError"===g.name)return GI(t,o,u)?wt(new an([],{})):Wd(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,h,g){return _y(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):Wd(t):Wd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ey(u):this.lineralizeSegments(r,u).pipe((0,ii.z)(h=>{const g=new an(h,{});return this.expandSegment(e,g,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:g,consumedSegments:_,remainingSegments:I,positionalParamSegments:T}=Gd(t,o,u);if(!g)return Wd(t);const S=this.applyRedirectCommands(_,o.redirectTo,T);return o.redirectTo.startsWith("/")?Ey(S):this.lineralizeSegments(o,S).pipe((0,ii.z)(F=>this.expandSegment(e,t,r,F.concat(I),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?wt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Tt.U)(S=>(r._loadedConfig=S,new an(o,{})))):wt(new an(o,{}));const{matched:h,consumedSegments:g,remainingSegments:_}=Gd(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,ii.z)(T=>{const S=T.module,F=T.routes,{segmentGroup:W,slicedSegments:te}=qd(t,g,_,F),Me=new an(W.segments,W.children);if(0===te.length&&Me.hasChildren())return this.expandChildren(S,F,Me).pipe((0,Tt.U)(xt=>new an(g,xt)));if(0===F.length&&0===te.length)return wt(new an(g,{}));const je=si(r)===u;return this.expandSegment(S,Me,F,te,je?en:u,!0).pipe((0,Tt.U)(At=>new an(g.concat(At.segments),At.children)))})):Wd(t)}getChildConfig(e,t,r){return t.children?wt(new jd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?wt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ii.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Tt.U)(u=>(t._loadedConfig=u,u))):function zI(n){return rp(Qm(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):wt(new jd([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?wt(o.map(h=>{const g=e.get(h);let _;if(function M0(n){return n&&Na(n.canLoad)}(g))_=g.canLoad(t,r);else{if(!Na(g))throw new Error("Invalid CanLoad guard");_=g(t,r)}return Cs(_)})).pipe($d(),(0,Yr.b)(h=>{if(!Uo(h))return;const g=Qm(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw g.url=h,g}),(0,Tt.U)(h=>!0===h)):wt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return wt(r);if(o.numberOfChildren>1||!o.children[en])return rp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[en]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ou(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Fr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Fr(t.children,(g,_)=>{h[_]=this.createSegmentGroup(e,g,r,o)}),new an(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function N0(n){const e={};for(const r of Object.keys(n.children)){const u=N0(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ZI(n){if(1===n.numberOfChildren&&n.children[en]){const e=n.children[en];return new an(n.segments.concat(e.segments),e.children)}return n}(new an(n.segments,e))}class wy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class by{constructor(e,t){this.component=e,this.route=t}}function KI(n,e,t){const r=n._root;return Kd(r,e?e._root:null,t,[r.value])}function Zd(n,e,t){const r=function YI(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Kd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Gl(e);return n.children.forEach(h=>{(function QI(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const _=function O0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ra(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ra(n.url,e.url)||!Ds(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bd(n,e)||!Ds(n.queryParams,e.queryParams);default:return!Bd(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new wy(r)):(u.data=h.data,u._resolvedData=h._resolvedData),Kd(n,e,u.component?g?g.children:null:t,r,o),_&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new by(g.outlet.component,h))}else h&&Yd(e,g,o),o.canActivateChecks.push(new wy(r)),Kd(n,null,u.component?g?g.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Fr(u,(h,g)=>Yd(h,t.getContext(g),o)),o}function Yd(n,e,t){const r=Gl(n),o=n.value;Fr(r,(u,h)=>{Yd(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new by(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class tD{}function U0(n){return new ms.y(e=>e.error(n))}class V0{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=qd(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,en);if(null===t)return null;const r=new Ld([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},en,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new eo(r,t),u=new NI(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=fp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],g=Fu(e,u),_=this.processSegmentGroup(g,h,u);if(null===_)return null;r.push(..._)}const o=Ep(r);return function nD(n){n.sort((e,t)=>e.value.outlet===en?-1:t.value.outlet===en?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return GI(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!_y(e,t,r,o))return null;let u,h=[],g=[];if("**"===e.path){const W=r.length>0?Nd(r).parameters:{};u=new Ld(r,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wp(e),si(e),e.component,e,B0(t),Qd(t)+r.length,j0(e))}else{const W=Gd(t,e,r);if(!W.matched)return null;h=W.consumedSegments,g=W.remainingSegments,u=new Ld(h,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wp(e),si(e),e.component,e,B0(t),Qd(t)+h.length,j0(e))}const _=function rD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:T}=qd(t,h,g,_.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===T.length&&I.hasChildren()){const W=this.processChildren(_,I);return null===W?null:[new eo(u,W)]}if(0===_.length&&0===T.length)return[new eo(u,[])];const S=si(e)===o,F=this.processSegment(_,I,T,S?en:o);return null===F?null:[new eo(u,F)]}}function iD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ep(n){const e=[],t=new Set;for(const r of n){if(!iD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Ep(r.children);e.push(new eo(r.value,o))}return e.filter(r=>!t.has(r))}function B0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Qd(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function wp(n){return n.data||{}}function j0(n){return n.resolve||{}}function sD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function H0(n){return sr(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,Tt.U)(()=>e)):wt(e)})}class q0 extends class G0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bp=new c.OlP("ROUTES");class Sy{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Tt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new jd(m0(h.injector.get(bp,void 0,c.XFs.Self|c.XFs.Optional)).map(ka),h)}),Mu(u=>{throw t._loader$=void 0,u}));return t._loader$=new EI(o,()=>new Lo.x).pipe(s0()),t._loader$}loadModuleFactory(e){return Cs(e()).pipe((0,ii.z)(t=>t instanceof c.YKP?wt(t):(0,Tn.D)(this.compiler.compileModuleAsync(t))))}}class Vo{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ip(n){throw n}function aD(n,e,t){return e.parse("/")}function W0(n,e){return wt(null)}const YS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yi=(()=>{class n{constructor(t,r,o,u,h,g,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Lo.x,this.errorHandler=Ip,this.malformedUriErrorHandler=aD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:W0,afterPreactivation:W0},this.urlHandlingStrategy=new Vo,this.routeReuseStrategy=new q0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(c.h0i),this.console=h.get(c.c2e);const S=h.get(c.R0b);this.isNgZoneEnabled=S instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function y0(){return new Ou(new an([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sy(h,g,F=>this.triggerEvent(new l0(F)),F=>this.triggerEvent(new c0(F))),this.routerState=to(this.currentUrlTree,this.rootComponentType),this.transitions=new bs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(hr(o=>0!==o.id),(0,Tt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),sr(o=>{let u=!1,h=!1;return wt(o).pipe((0,Yr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),sr(g=>{const _=this.browserUrlTree.toString(),I=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Yl(g.source)&&(this.browserUrlTree=g.extractedUrl),wt(g).pipe(sr(S=>{const F=this.transitions.getValue();return r.next(new Pd(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),F!==this.transitions.getValue()?Fo.E:Promise.resolve(S)}),function zS(n,e,t,r){return sr(o=>function Vi(n,e,t,r,o){return new WI(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Tt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function Cy(n,e,t,r,o){return(0,ii.z)(u=>function WS(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new V0(n,e,t,r,o,u).recognize();return null===h?U0(new tD):wt(h)}catch(h){return U0(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Tt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(W,S)}this.browserUrlTree=S.urlAfterRedirects}const F=new jl(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(F)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:W,source:te,restoredState:Me,extras:je}=g,St=new Pd(F,this.serializeUrl(W),te,Me);r.next(St);const At=to(W,this.rootComponentType).snapshot;return wt(Object.assign(Object.assign({},g),{targetSnapshot:At,urlAfterRedirects:W,extras:Object.assign(Object.assign({},je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Fo.E}),H0(g=>{const{targetSnapshot:_,id:I,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:F,replaceUrl:W}}=g;return this.hooks.beforePreactivation(_,{navigationId:I,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!F,replaceUrl:!!W})}),(0,Yr.b)(g=>{const _=new Zm(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,Tt.U)(g=>Object.assign(Object.assign({},g),{guards:KI(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function k0(n,e){return(0,ii.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?wt(Object.assign(Object.assign({},t),{guardsResult:!0})):function JI(n,e,t,r){return(0,Tn.D)(n).pipe((0,ii.z)(o=>function Dy(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?wt(u.map(g=>{const _=Zd(g,e,o);let I;if(function Oa(n){return n&&Na(n.canDeactivate)}(_))I=Cs(_.canDeactivate(n,e,t,r));else{if(!Na(_))throw new Error("Invalid CanDeactivate guard");I=Cs(_(n,e,t,r))}return I.pipe(Sa())})).pipe($d()):wt(!0)}(o.component,o.route,t,e,r)),Sa(o=>!0!==o,!0))}(h,r,o,n).pipe((0,ii.z)(g=>g&&function x0(n){return"boolean"==typeof n}(g)?function XI(n,e,t,r){return(0,Tn.D)(e).pipe(Ru(o=>Gm(function L0(n,e){return null!==n&&e&&e(new DI(n)),wt(!0)}(o.route.parent,r),function F0(n,e){return null!==n&&e&&e(new TI(n)),wt(!0)}(o.route,r),function no(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function Iy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>n0(()=>wt(h.guards.map(_=>{const I=Zd(_,h.node,t);let T;if(function $I(n){return n&&Na(n.canActivateChild)}(I))T=Cs(I.canActivateChild(r,n));else{if(!Na(I))throw new Error("Invalid CanActivateChild guard");T=Cs(I(r,n))}return T.pipe(Sa())})).pipe($d())));return wt(u).pipe($d())}(n,o.path,t),function eD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return wt(!0);const o=r.map(u=>n0(()=>{const h=Zd(u,e,t);let g;if(function hy(n){return n&&Na(n.canActivate)}(h))g=Cs(h.canActivate(e,n));else{if(!Na(h))throw new Error("Invalid CanActivate guard");g=Cs(h(e,n))}return g.pipe(Sa())}));return wt(o).pipe($d())}(n,o.route,t))),Sa(o=>!0!==o,!0))}(r,u,n,e):wt(g)),(0,Tt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Yr.b)(g=>{if(Uo(g.guardsResult)){const I=Qm(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw I.url=g.guardsResult,I}const _=new u0(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),hr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),H0(g=>{if(g.guards.canActivateChecks.length)return wt(g).pipe((0,Yr.b)(_=>{const I=new II(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),sr(_=>{let I=!1;return wt(_).pipe(function Ty(n,e){return(0,ii.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return wt(t);let u=0;return(0,Tn.D)(o).pipe(Ru(h=>function $0(n,e,t,r){return function KS(n,e,t,r){const o=sD(n);if(0===o.length)return wt({});const u={};return(0,Tn.D)(o).pipe((0,ii.z)(h=>function Ay(n,e,t,r){const o=Zd(n,e,r);return Cs(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Yr.b)(g=>{u[h]=g}))),o0(1),(0,ii.z)(()=>sD(u).length===o.length?wt(u):Fo.E))}(n._resolve,n,e,r).pipe((0,Tt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),fp(n,t).resolve),null)))}(h.route,r,n,e)),(0,Yr.b)(()=>u++),o0(1),(0,ii.z)(h=>u===o.length?wt(t):Fo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yr.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Yr.b)(_=>{const I=new Km(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}))}),H0(g=>{const{targetSnapshot:_,id:I,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:F,replaceUrl:W}}=g;return this.hooks.afterPreactivation(_,{navigationId:I,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!F,replaceUrl:!!W})}),(0,Tt.U)(g=>{const _=function ly(n,e,t){const r=pp(n,e._root,t?t._root:void 0);return new hp(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:_})}),(0,Yr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new qS(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Yr.b)({next(){u=!0},complete(){u=!0}}),function a0(n){return(0,mi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Mu(g=>{if(h=!0,function p0(n){return n&&n[f0]}(g)){const _=Uo(g.url);_||(this.navigated=!0,this.restoreHistory(o,!0));const I=new Wm(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(I),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yl(o.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const _=new US(o.id,this.serializeUrl(o.extractedUrl),g);r.next(_);try{o.resolve(this.errorHandler(g))}catch(I){o.reject(I)}}return Fo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const _=Object.assign({},h);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Zl(t),this.config=t.map(ka),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:g,preserveFragment:_}=r,I=o||this.routerState.root,T=_?this.currentUrlTree.fragment:h;let S=null;switch(g){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function FI(n,e,t,r,o){if(0===t.length)return C0(e.root,e.root,e.root,r,o);const u=function A0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new LI(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Fr(u.outlets,(_,I)=>{g[I]="string"==typeof _?_.split("/"):_}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new LI(t,e,r)}(t);if(u.toRoot())return C0(e.root,e.root,new an([],{}),r,o);const h=function UI(n,e,t){if(n.isAbsolute)return new mp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new mp(u,u===e.root,0)}const r=gp(n.commands[0])?0:1;return function cy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new mp(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=h.processChildren?dy(h.segmentGroup,h.index,u.commands):VI(h.segmentGroup,h.index,u.commands);return C0(e.root,h.segmentGroup,g,r,o)}(I,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Uo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function My(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},YS):!1===r?Object.assign({},xy):r,Uo(t))return Od(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Od(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var g,_;if(this.disposed)return Promise.resolve(!1);let I,T,S;h?(I=h.resolve,T=h.reject,S=h.promise):S=new Promise((te,Me)=>{I=te,T=Me});const F=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),W=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):W=0,this.setTransition({id:F,targetPageId:W,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:T,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(te=>Promise.reject(te))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Wm(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Yl(n){return"imperative"!==n}let Lu=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Lo.x,this.subscription=t.events.subscribe(u=>{u instanceof Pu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,h){if(0!==t||r||o||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const g={skipLocationChange:Uu(this.skipLocationChange),replaceUrl:Uu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Uu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(yi),c.Y36(ku),c.Y36(ye))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Uu(n){return""===n||!!n}class Y0{}class Q0{preload(e,t){return wt(null)}}let J0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Sy(o,r,_=>t.triggerEvent(new l0(_)),_=>t.triggerEvent(new c0(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(hr(t=>t instanceof Pu),Ru(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Tn.D)(o).pipe((0,sp.J)(),(0,Tt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?wt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ii.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(yi),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Y0))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Dp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ym&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ym(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=new c.OlP("ROUTER_CONFIGURATION"),X0=new c.OlP("ROUTER_FORROOT_GUARD"),uD=[Ne,{provide:sy,useClass:SI},{provide:yi,useFactory:function Ny(n,e,t,r,o,u,h={},g,_){const I=new yi(null,n,e,t,r,o,m0(u));return g&&(I.urlHandlingStrategy=g),_&&(I.routeReuseStrategy=_),function tE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,I),h.enableTracing&&I.events.subscribe(T=>{var S,F;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(F=console.groupEnd)||void 0===F||F.call(console)}),I},deps:[sy,Hd,Ne,c.zs3,c.Sil,bp,Fa,[class z0{},new c.FiY],[class oD{},new c.FiY]]},Hd,{provide:ku,useFactory:function nE(n){return n.routerState.root},deps:[yi]},J0,Q0,class Py{preload(e,t){return t().pipe(Mu(()=>wt(null)))}},{provide:Fa,useValue:{enableTracing:!1}}];function Ql(){return new c.PXZ("Router",yi)}let eE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[uD,As(t),{provide:X0,useFactory:dD,deps:[[yi,new c.FiY,new c.tp0]]},{provide:Fa,useValue:r||{}},{provide:ye,useFactory:cD,deps:[le,[new c.tBr(et),new c.FiY],Fa]},{provide:Dp,useFactory:lD,deps:[yi,aa,Fa]},{provide:Y0,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Q0},{provide:c.PXZ,multi:!0,useFactory:Ql},[Cp,{provide:c.ip1,multi:!0,useFactory:rE,deps:[Cp]},{provide:iE,useFactory:hD,deps:[Cp]},{provide:c.tb,multi:!0,useExisting:iE}]]}}static forChild(t){return{ngModule:n,providers:[As(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(X0,8),c.LFG(yi,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function lD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Dp(n,e,t)}function cD(n,e,t={}){return t.useHash?new ke(n,e):new Ze(n,e)}function dD(n){return"guarded"}function As(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:bp,multi:!0,useValue:n}]}let Cp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Lo.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(yi),h=this.injector.get(Fa);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?wt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Fa),o=this.injector.get(J0),u=this.injector.get(Dp),h=this.injector.get(yi),g=this.injector.get(c.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function rE(n){return n.appInitializer.bind(n)}function hD(n){return n.bootstrapListener.bind(n)}const iE=new c.OlP("Router Initializer");var sE=x(6451);function pD(n,e){return(0,Hm.m)(e)?sr(()=>n,e):sr(()=>n)}var Tp=x(9468),La=x(5867);class Vu{constructor(e){return e}}class oE{constructor(){return(0,La.C6)()}}const ky=new c.OlP("angularfire2._apps"),aE={provide:Vu,useFactory:function Oy(n){return n&&1===n.length?n[0]:new Vu((0,La.Mq)())},deps:[[new c.FiY,ky]]},uE={provide:oE,deps:[[new c.FiY,ky]]};function JS(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Vu(r)}}let Ss=(()=>{class n{constructor(t){(0,La.KN)("angularfire",Gt.q4.full,"core"),(0,La.KN)("angularfire",Gt.q4.full,"app"),(0,La.KN)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[aE,uE]}),n})();function XS(n,...e){return{ngModule:Ss,providers:[{provide:ky,useFactory:JS(n),multi:!0,deps:[c.R0b,c.zs3,Gt.HU,...e]}]}}const lE=(0,Gt.u3)(La.ZF,!0);var Ee=x(5861),Bi=x(9681),Ua=x(4859),Ot=x(2090),Va=x(1877);const cE=new Map,_D={activated:!1,tokenObservers:[]},vD={initialized:!1,enabled:!1};function Lr(n){return cE.get(n)||_D}function Di(n,e){cE.set(n,e)}function Bo(){return vD}class eh{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function oi(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ur=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Sp(n){if(!Lr(n).activated)throw Ur.create("use-before-activation",{appName:n.name})}function ja(n,e){return $a.apply(this,arguments)}function $a(){return($a=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const S=yield o.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,g;try{h=yield fetch(n,u)}catch(S){throw Ur.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==h.status)throw Ur.create("fetch-status-error",{httpStatus:h.status});try{g=yield h.json()}catch(S){throw Ur.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Ur.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(_[1]),T=Date.now();return{token:g.token,expireTimeMillis:T+I,issuedAtTimeMillis:T}})).apply(this,arguments)}function tc(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const rc="firebase-app-check-store";let th=null;function Uy(){return th||(th=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ur.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(rc,{keyPath:"compositeKey"})}}catch(t){e(Ur.create("storage-open",{originalErrorMessage:t.message}))}}),th)}function xp(){return(xp=(0,Ee.Z)(function*(n,e){const r=(yield Uy()).transaction(rc,"readwrite"),u=r.objectStore(rc).put({compositeKey:n,value:e});return new Promise((h,g)=>{u.onsuccess=_=>{h()},r.onerror=_=>{var I;g(Ur.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const nh=new Va.Yd("@firebase/app-check");function _E(n,e){return(0,Ot.hl)()?function fE(n,e){return function mE(n,e){return xp.apply(this,arguments)}(function By(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{nh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function EE(){return Bo().enabled}function ID(){return $y.apply(this,arguments)}function $y(){return($y=(0,Ee.Z)(function*(){const n=Bo();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Gy={error:"UNKNOWN_ERROR"};function DD(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function qy(n){return wE.apply(this,arguments)}function wE(){return(wE=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Sp(t);const r=Lr(t);let u,o=r.token;if(!o){const _=yield r.cachedTokenPromise;_&&$o(_)&&(o=_)}if(!e&&o&&$o(o))return{token:o.token};let g,h=!1;if(EE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ja(tc(t,yield ID()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),h=!0);const _=yield r.exchangeTokenPromise;return yield _E(t,_),Di(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),h=!0),o=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?nh.warn(_.message):nh.error(_),u=_}return o?(g={token:o.token},Di(t,Object.assign(Object.assign({},r),{token:o})),yield _E(t,o)):g=CD(u),h&&IE(t,g),g})).apply(this,arguments)}function zy(n,e){const t=Lr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Di(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Wy(n){const{app:e}=n,t=Lr(e);let r=t.tokenRefresher;r||(r=function tx(n){const{app:e}=n;return new eh((0,Ee.Z)(function*(){let r;if(r=Lr(e).token?yield qy(n,!0):yield qy(n),r.error)throw r.error}),()=>!0,()=>{const t=Lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Di(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function IE(n,e){const t=Lr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function $o(n){return n.expireTimeMillis-Date.now()>0}function CD(n){return{token:DD(Gy),error:n}}class DE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Lr(this.app);for(const t of e)zy(this.app,t.next);return Promise.resolve()}}const OD="app-check-internal";!function kD(){(0,Bi._registerComponent)(new Ua.wA("app-check",n=>function TD(n,e){return new DE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OD).initialize()})),(0,Bi._registerComponent)(new Ua.wA(OD,n=>function CE(n){return{getToken:e=>qy(n,e),addTokenListener:e=>function bE(n,e,t,r){const{app:o}=n,u=Lr(o),h={next:t,error:r,type:e};if(Di(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&$o(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),Wy(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Wy(n))}(n,"INTERNAL",e),removeTokenListener:e=>zy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bi.registerVersion)("@firebase/app-check","0.5.8")}();class ju{constructor(){return(0,Gt.vb)("app-check")}}"undefined"!=typeof window&&window;var $u=x(127);const t_=new c.OlP("angularfire2.auth.use-emulator"),n_=new c.OlP("angularfire2.auth.settings"),r_=new c.OlP("angularfire2.auth.tenant-id"),i_=new c.OlP("angularfire2.auth.langugage-code"),s_=new c.OlP("angularfire2.auth.use-device-language"),o_=new c.OlP("angularfire.auth.persistence"),a_=(n,e,t,r,o,u,h,g)=>(0,wr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),h)for(const[I,T]of Object.entries(h))_.settings[I]=T;return g&&_.setPersistence(g),_},[t,r,o,u,h,g]);let FE=(()=>{class n{constructor(t,r,o,u,h,g,_,I,T,S,F,W){const te=new Lo.x,Me=wt(void 0).pipe((0,Sd.Q)(h.outsideAngular),sr(()=>u.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,5881)))),(0,Tt.U)(()=>(0,wr.on)(t,u,r)),(0,Tt.U)(je=>a_(je,u,g,I,T,S,_,F)),Bm({bufferSize:1,refCount:!1}));if(rr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=wt(null);else{Me.pipe(Sa()).subscribe();const St=Me.pipe(sr(Et=>Et.getRedirectResult().then(Kt=>Kt,()=>null)),Gt.iC,Bm({bufferSize:1,refCount:!1})),At=Me.pipe(sr(Et=>new ms.y(Kt=>({unsubscribe:u.runOutsideAngular(()=>Et.onAuthStateChanged(un=>Kt.next(un),un=>Kt.error(un),()=>Kt.complete()))})))),xt=Me.pipe(sr(Et=>new ms.y(Kt=>({unsubscribe:u.runOutsideAngular(()=>Et.onIdTokenChanged(un=>Kt.next(un),un=>Kt.error(un),()=>Kt.complete()))}))));this.authState=St.pipe(pD(At),(0,Tp.R)(h.outsideAngular),(0,Sd.Q)(h.insideAngular)),this.user=St.pipe(pD(xt),(0,Tp.R)(h.outsideAngular),(0,Sd.Q)(h.insideAngular)),this.idToken=this.user.pipe(sr(Et=>Et?(0,Tn.D)(Et.getIdToken()):wt(null))),this.idTokenResult=this.user.pipe(sr(Et=>Et?(0,Tn.D)(Et.getIdTokenResult()):wt(null))),this.credential=(0,sE.T)(St,te,this.authState.pipe(hr(Et=>!Et))).pipe((0,Tt.U)(Et=>(null==Et?void 0:Et.user)?Et:null),(0,Tp.R)(h.outsideAngular),(0,Sd.Q)(h.insideAngular))}return(0,wr.pX)(this,Me,u,{spy:{apply:(je,St,At)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&At.then(xt=>te.next(xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wr.Dh),c.LFG(wr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Gt.HU),c.LFG(t_,8),c.LFG(n_,8),c.LFG(r_,8),c.LFG(i_,8),c.LFG(s_,8),c.LFG(o_,8),c.LFG(ju,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function u_(n,e=xd.y){return n=null!=n?n:GD,(0,mi.e)((t,r)=>{let o,u=!0;t.subscribe((0,Tr.x)(r,h=>{const g=e(h);(u||!n(o,g))&&(u=!1,o=g,r.next(h))}))})}function GD(n,e){return n===e}function or(){return(0,mi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Tr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}const xs="firebase_screen_id",ji="outlet",oh="screen_class",jE="screen_name";let ah=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const d_={},$E=n=>{const e=[n[oh],n[ji]].join("#");if(d_.hasOwnProperty(e))return d_[e];{const t=ah++;return d_[e]=t,t}},HE=new c.OlP("angularfire2.analytics.analyticsCollectionEnabled"),GE=new c.OlP("angularfire2.analytics.appVersion"),qE=new c.OlP("angularfire2.analytics.appName"),zE=new c.OlP("angularfire2.analytics.debugMode"),WE=new c.OlP("angularfire2.analytics.config"),Up="dataLayer";let uh=(()=>{class n{constructor(t,r,o,u,h,g,_,I,T){if(this.analyticsInitialized=new Promise(()=>{}),function _r(n){return n===_o}(_)){window[Up]=window[Up]||[];const F=(...Me)=>"config"===Me[0]&&"firebase"===Me[2].origin&&(this.measurementId=Me[1],!0),W=Me=>{window.gtag=(...je)=>{Me&&Me(...je),"event"===je[0]&&je[2].send_to===this.measurementId&&(u&&(je[2].app_name=u),o&&(je[2].app_version=o)),h&&"undefined"!=typeof console&&console.info(...je),function(...St){window[Up].push(arguments)}(...je)}};window[Up].some(F)?(this.analyticsInitialized=Promise.resolve(),W()):this.analyticsInitialized=new Promise(Me=>{W((...je)=>{F(...je)&&Me()})}),g&&this.updateConfig(g),h&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const S=wt(void 0).pipe((0,Sd.Q)(T.outsideAngular),sr(jm.Gb),sr(F=>F?I.runOutsideAngular(()=>x.e(643).then(x.bind(x,8643))):Fo.E),(0,Tt.U)(()=>(0,wr.cc)("analytics","AngularFireAnalytics",t.name,()=>{const F=t.analytics();return!1===r&&F.setAnalyticsCollectionEnabled(!1),F},[t,r,g,h])),Bm({bufferSize:1,refCount:!1}));return(0,wr.pX)(this,S,I)}updateConfig(t){return(0,Kr.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wr.Ot),c.LFG(HE,8),c.LFG(GE,8),c.LFG(qE,8),c.LFG(zE,8),c.LFG(WE,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Gt.HU))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QE=(()=>{class n{constructor(t,r,o,u){if(this.disposables=[],$u.Z.registerVersion("angularfire",Gt.q4.full,"compat-user-tracking"),rr(r))this.initialized=Promise.resolve();else{let h;this.initialized=u.runOutsideAngular(()=>new Promise(g=>h=g)),this.disposables=[o.authState.subscribe(g=>{t.setUserId(null==g?void 0:g.uid),h()}),o.credential.subscribe(g=>{if(g){const _=g.user.isAnonymous?"anonymous":g.additionalUserInfo.providerId;g.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:_}),t.logEvent("login",{method:_})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(uh),c.LFG(c.Lbi),c.LFG(FE),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),lC=(()=>{class n{constructor(t,r,o,u,h,g){if($u.Z.registerVersion("angularfire",Gt.q4.full,"compat-screen-tracking"),!r||!t)return this;h.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(hr(o=>o instanceof d0)).pipe(sr(o=>{var u;const g=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,W=>W.replace("://",":///"))).root.children[o.snapshot.outlet])||void 0===u?void 0:u.toString())||"",_=n.routerState.root.children.map(W=>W).find(W=>W.outlet===o.snapshot.outlet);if(!_)return wt(null);let I=_;for(;I.firstChild;)I=I.firstChild;const T=I.pathFromRoot.map(W=>{var te;return null===(te=W.routeConfig)||void 0===te?void 0:te.path}).filter(W=>W).join("/")||"/",S={[jE]:T,page_path:`/${g}`,firebase_event_origin:"auto",firebase_screen:T,[ji]:o.snapshot.outlet};e&&(S.page_title=e.getTitle());let F=_.component;if(F){if(F===py){let W=o.snapshot;for(;W.firstChild;)W=W.firstChild;F=W.component}}else F=o.snapshot.component;if("string"==typeof F)return wt(Object.assign(Object.assign({},S),{[oh]:F}));if(F){const W=t.resolveComponentFactory(F);return wt(Object.assign(Object.assign({},S),{[oh]:W.selector}))}return wt(null)}),hr(o=>!!o),(0,Tt.U)(o=>Object.assign({firebase_screen_class:o[oh],[xs]:$E(o)},o)),function HD(n,e,t,r){return(0,mi.e)((o,u)=>{let h;e&&"function"!=typeof e?({duration:t,element:h,connector:r}=e):h=e;const g=new Map,_=te=>{g.forEach(te),te(u)},I=te=>_(Me=>Me.error(te));let T=0,S=!1;const F=new Tr.Q(u,te=>{try{const Me=n(te);let je=g.get(Me);if(!je){g.set(Me,je=r?r():new Lo.x);const St=function W(te,Me){const je=new ms.y(St=>{T++;const At=Me.subscribe(St);return()=>{At.unsubscribe(),0==--T&&S&&F.unsubscribe()}});return je.key=te,je}(Me,je);if(u.next(St),t){const At=(0,Tr.x)(je,()=>{je.complete(),null==At||At.unsubscribe()},void 0,void 0,()=>g.delete(Me));F.add((0,ma.Xf)(t(St)).subscribe(At))}}je.next(h?h(te):te)}catch(Me){I(Me)}},()=>_(te=>te.complete()),I,()=>g.clear(),()=>(S=!0,0===T));o.subscribe(F)})}(o=>o[ji]),(0,ii.z)(o=>o.pipe(u_((u,h)=>JSON.stringify(u)===JSON.stringify(h)),Rd(void 0),or(),(0,Tt.U)(([u,h])=>u?Object.assign({firebase_previous_class:u[oh],firebase_previous_screen:u[jE],firebase_previous_id:u[xs]},h):h)))))(r,o,u).pipe(sr(_=>(0,Kr.mG)(this,void 0,void 0,function*(){return g&&(yield g.initialized),yield t.logEvent("screen_view",_)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(uh),c.LFG(yi,8),c.LFG(du,8),c.LFG(c._Vd),c.LFG(c.R0b),c.LFG(QE,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),cC=(()=>{class n{constructor(t,r,o){$u.Z.registerVersion("angularfire",Gt.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(uh),c.LFG(lC,8),c.LFG(QE,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[uh]}),n})();var mt,JE=x(4986),XE=(x(5881),x(3942)),dC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ho={},g_=g_||{},$t=dC||self;function lh(){}function Vp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function oc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Bp="closure_uid_"+(1e9*Math.random()>>>0),tw=0;function nw(n,e,t){return n.call.apply(n.bind,arguments)}function rw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Vr(n,e,t){return(Vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nw:rw).apply(null,arguments)}function ch(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Br(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),g=2;g<arguments.length;g++)h[g-2]=arguments[g];return e.prototype[o].apply(r,h)}}function Ci(){this.s=this.s,this.o=this.o}var fC={};Ci.prototype.s=!1,Ci.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ew(n){return Object.prototype.hasOwnProperty.call(n,Bp)&&n[Bp]||(n[Bp]=++tw)}(this);delete fC[n]}},Ci.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hu=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},pC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function gC(n){return Array.prototype.concat.apply([],arguments)}function jp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function dh(n){return/^[\s\xa0]*$/.test(n)}var vi,mC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yt(n,e){return-1!=n.indexOf(e)}function y_(n,e){return n<e?-1:n>e?1:0}e:{var iw=$t.navigator;if(iw){var hh=iw.userAgent;if(hh){vi=hh;break e}}vi=""}function __(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function fh(n){const e={};for(const t in n)e[t]=n[t];return e}var ph="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qn(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<ph.length;u++)t=ph[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sw(n){return sw[" "](n),n}sw[" "]=lh;var Hp,n,yC=yt(vi,"Opera"),ac=yt(vi,"Trident")||yt(vi,"MSIE"),v_=yt(vi,"Edge"),$p=v_||ac,E_=yt(vi,"Gecko")&&!(yt(vi.toLowerCase(),"webkit")&&!yt(vi,"Edge"))&&!(yt(vi,"Trident")||yt(vi,"MSIE"))&&!yt(vi,"Edge"),aw=yt(vi.toLowerCase(),"webkit")&&!yt(vi,"Edge");function uw(){var n=$t.document;return n?n.documentMode:void 0}e:{var w_="",Gu=(n=vi,E_?/rv:([^\);]+)(\)|;)/.exec(n):v_?/Edge\/([\d\.]+)/.exec(n):ac?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):aw?/WebKit\/(\S+)/.exec(n):yC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gu&&(w_=Gu?Gu[1]:""),ac){var b_=uw();if(null!=b_&&b_>parseFloat(w_)){Hp=String(b_);break e}}Hp=w_}var _C={};var lw=$t.document&&ac&&(uw()||parseInt(Hp,10))||void 0,cw=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",lh,e),$t.removeEventListener("test",lh,e)}catch(t){}return n}();function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Go(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(E_){e:{try{sw(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gh[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Go.Z.h.call(this)}}ai.prototype.h=function(){this.defaultPrevented=!0},Br(Go,ai);var gh={2:"touch",3:"pen",4:"mouse"};Go.prototype.h=function(){Go.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var mh="closure_listenable_"+(1e6*Math.random()|0),EC=0;function wC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++EC,this.ca=this.fa=!1}function yh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _h(n){this.src=n,this.g={},this.h=0}function Gp(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Hu(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(yh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function D_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}_h.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=D_(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new wC(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var qp="closure_lm_"+(1e6*Math.random()|0),C_={};function dw(n,e,t,r,o){if(r&&r.once)return IC(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)dw(n,e[u],t,r,o);return null}return t=qu(t),n&&n[mh]?n.N(e,t,oc(r)?!!r.capture:!!r,o):bC(n,e,t,!1,r,o)}function bC(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=oc(o)?!!o.capture:!!o,g=T_(n);if(g||(n[qp]=g=new _h(n)),(t=g.add(e,t,r,h,u)).proxy)return t;if(r=function fx(){var e=CC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cw||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(vh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function IC(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)IC(n,e[u],t,r,o);return null}return t=qu(t),n&&n[mh]?n.O(e,t,oc(r)?!!r.capture:!!r,o):bC(n,e,t,!0,r,o)}function DC(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)DC(n,e[u],t,r,o);else r=oc(r)?!!r.capture:!!r,t=qu(t),n&&n[mh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=D_(u=n.g[e],t,r,o))&&(yh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=T_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=D_(e,t,r,o)),(t=-1<n?e[n]:null)&&zp(t))}function zp(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[mh])Gp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(vh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=T_(e))?(Gp(t,n),0==t.h&&(t.src=null,e[qp]=null)):yh(n)}}}function vh(n){return n in C_?C_[n]:C_[n]="on"+n}function CC(n,e){if(n.ca)n=!0;else{e=new Go(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&zp(n),n=t.call(r,e)}return n}function T_(n){return(n=n[qp])instanceof _h?n:null}var Wp="__closure_events_fn_"+(1e9*Math.random()>>>0);function qu(n){return"function"==typeof n?n:(n[Wp]||(n[Wp]=function(e){return n.handleEvent(e)}),n[Wp])}function jr(){Ci.call(this),this.i=new _h(this),this.P=this,this.I=null}function Qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var o=e;Qn(e=new ai(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=Zp(h,r,!0,e)&&o}if(o=Zp(h=e.g=n,r,!0,e)&&o,o=Zp(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Zp(h=e.g=t[u],r,!1,e)&&o}function Zp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var g=h.listener,_=h.ia||h.src;h.fa&&Gp(n.i,h),o=!1!==g.call(_,r)&&o}}return o&&!r.defaultPrevented}Br(jr,Ci),jr.prototype[mh]=!0,jr.prototype.removeEventListener=function(n,e,t,r){DC(this,n,e,t,r)},jr.prototype.M=function(){if(jr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)yh(t[r]);delete n.g[e],n.h--}}this.I=null},jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var A_=$t.JSON.stringify;function TC(){var n=pw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Kp,fw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new AC,n=>n.reset());class AC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lc(n){$t.setTimeout(()=>{throw n},0)}function S_(n,e){Kp||function SC(){var n=$t.Promise.resolve(void 0);Kp=function(){n.then(gw)}}(),Yp||(Kp(),Yp=!0),pw.add(n,e)}var Yp=!1,pw=new class hw{constructor(){this.h=this.g=null}add(e,t){const r=fw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function gw(){for(var n;n=TC();){try{n.h.call(n.g)}catch(t){lc(t)}var e=fw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yp=!1}function Qp(n,e){jr.call(this),this.h=n||1,this.g=e||$t,this.j=Vr(this.kb,this),this.l=Date.now()}function Eh(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function x_(n,e,t){if("function"==typeof n)t&&(n=Vr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vr(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function M_(n){n.g=x_(()=>{n.g=null,n.i&&(n.i=!1,M_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Br(Qp,jr),(mt=Qp.prototype).da=!1,mt.S=null,mt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(Eh(this),this.start()))}},mt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){Qp.Z.M.call(this),Eh(this),delete this.g};class mw extends Ci{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:M_(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wh(n){Ci.call(this),this.h=n,this.g={}}Br(wh,Ci);var yw=[];function _w(n,e,t,r){Array.isArray(t)||(t&&(yw[0]=t.toString()),t=yw);for(var o=0;o<t.length;o++){var u=dw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Jp(n){__(n.g,function(e,t){this.g.hasOwnProperty(t)&&zp(e)},n),n.g={}}function Xp(){this.g=!0}function cc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function RC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return A_(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}wh.prototype.M=function(){wh.Z.M.call(this),Jp(this)},wh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xp.prototype.Aa=function(){this.g=!1},Xp.prototype.info=function(){};var zu={},Ew=null;function eg(){return Ew=Ew||new jr}function ww(n){ai.call(this,zu.Ma,n)}function dc(n){const e=eg();Qr(e,new ww(e,n))}function R_(n,e){ai.call(this,zu.STAT_EVENT,n),this.stat=e}function Ei(n){const e=eg();Qr(e,new R_(e,n))}function bw(n,e){ai.call(this,zu.Na,n),this.size=e}function hc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}zu.Ma="serverreachability",Br(ww,ai),zu.STAT_EVENT="statevent",Br(R_,ai),zu.Na="timingevent",Br(bw,ai);var tg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Iw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function P_(){}function rg(){}P_.prototype.h=null;var O_,fc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bh(){ai.call(this,"d")}function N_(){ai.call(this,"c")}function pc(){}function Ih(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new wh(this),this.P=PC,this.W=new Qp(n=$p?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new k_}function k_(){this.i=null,this.g="",this.h=!1}Br(bh,ai),Br(N_,ai),Br(pc,P_),pc.prototype.g=function(){return new XMLHttpRequest},pc.prototype.i=function(){return{}},O_=new pc;var PC=45e3,ig={},sg={};function og(n,e,t){n.K=1,n.v=fg(qo(e)),n.s=t,n.U=!0,NC(n,null)}function NC(n,e){n.F=Date.now(),so(n),n.A=qo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),V_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new k_,n.g=J_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new mw(Vr(n.Ia,n,n.g),n.O)),_w(n.V,n.g,"readystatechange",n.gb),e=n.H?fh(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),dc(1),function vw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",g=u.split("&"),_=0;_<g.length;_++){var I=g[_].split("=");if(1<I.length){var T=I[0];I=I[1];var S=T.split("_");h=2<=S.length&&"type"==S[1]?h+(T+"=")+I+"&":h+(T+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Dw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Dh(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=OC(n,t),o==sg){4==e&&(n.o=4,Ei(14),r=!1),cc(n.j,n.m,null,"[Incomplete Response]");break}if(o==ig){n.o=4,Ei(15),cc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cc(n.j,n.m,o,null),F_(n,o)}Dw(n)&&o!=sg&&o!=ig&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ei(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Z_(e),e.L=!0,Ei(11))):(cc(n.j,n.m,t,"[Invalid Chunked Response]"),Ha(n),ug(n))}function OC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sg:(t=Number(e.substring(t,r)),isNaN(t)?ig:(r+=1)+t>e.length?sg:(e=e.substr(r,t),n.C=r+t,e))}function so(n){n.Y=Date.now()+n.P,gc(n,n.P)}function gc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hc(Vr(n.eb,n),e)}function ag(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function ug(n){0==n.l.G||n.I||Y_(n.l,n)}function Ha(n){ag(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Eh(n.W),Jp(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function F_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||B_(t.i,n)))if(t.I=n.N,!n.J&&B_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=hc(Vr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ec(t),_g(t)}W_(t),Ei(18)}if(1>=Mw(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else qa(t,11)}else if((n.J||t.g==n)&&Ec(t),!dh(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let I=o[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const T=I[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=I[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const F=I[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const te=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.i;!u.g&&(yt(te,"spdy")||yt(te,"quic")||yt(te,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(j_(u,u.h),u.h=null))}if(r.D){const Me=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.sa=Me,kn(r.F,r.D,Me))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Gw(r,r.H?r.la:null,r.W),h.J){_c(r.i,h);var g=h,_=r.K;_&&g.setTimeout(_),g.B&&(ag(g),so(g)),r.g=h}else $w(r);0<t.l.length&&vc(t)}else"stop"!=I[0]&&"close"!=I[0]||qa(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?qa(t,7):z_(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}dc(4)}catch(I){}}function L_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Vp(n)||"string"==typeof n)pC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Vp(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function kC(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Vp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function mc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof mc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function lg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ga(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ga(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ga(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(mt=Ih.prototype).setTimeout=function(n){this.P=n},mt.gb=function(n){n=n.target;const e=this.L;e&&3==zo(n)?e.l():this.Ia(n)},mt.Ia=function(n){try{if(n==this.g)e:{const T=zo(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||$p||this.g&&(this.h.h||this.g.ga()||Uw(this.g)))){this.I||4!=T||7==e||dc(8==e||0>=S?3:2),ag(this);var t=this.g.ba();this.N=t;t:if(Dw(this)){var r=Uw(this.g);n="";var o=r.length,u=4==zo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ha(this),ug(this);var h="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function xC(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dh(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Ei(12),Ha(this),ug(this);break e}cc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,F_(this,t)}this.U?(Dh(this,T,h),$p&&this.i&&3==T&&(_w(this.V,this.W,"tick",this.fb),this.W.start())):(cc(this.j,this.m,h,null),F_(this,h)),4==T&&Ha(this),this.i&&!this.I&&(4==T?Y_(this.l,this):(this.i=!1,so(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Ei(12)):(this.o=0,Ei(13)),Ha(this),ug(this)}}}catch(T){}},mt.fb=function(){if(this.g){var n=zo(this.g),e=this.g.ga();this.C<e.length&&(ag(this),Dh(this,n,e),this.i&&4!=n&&so(this))}},mt.cancel=function(){this.I=!0,Ha(this)},mt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function MC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(dc(3),Ei(17)),Ha(this),this.o=2,ug(this)):gc(this,this.Y-n)},(mt=mc.prototype).R=function(){lg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},mt.T=function(){return lg(this),this.g.concat()},mt.get=function(n,e){return Ga(this.h,n)?this.h[n]:e},mt.set=function(n,e){Ga(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},mt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var cg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rs(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Rs){this.g=void 0!==e?e:n.g,Ch(this,n.j),this.s=n.s,Th(this,n.i),hg(this,n.m),this.l=n.l,e=n.h;var t=new yc;t.i=e.i,e.g&&(t.g=new mc(e.g),t.h=e.h),Cw(this,t),this.o=n.o}else n&&(t=String(n).match(cg))?(this.g=!!e,Ch(this,t[1]||"",!0),this.s=Ah(t[2]||""),Th(this,t[3]||"",!0),hg(this,t[4]),this.l=Ah(t[5]||"",!0),Cw(this,t[6]||"",!0),this.o=Ah(t[7]||"")):(this.g=!!e,this.h=new yc(null,this.g))}function qo(n){return new Rs(n)}function Ch(n,e,t){n.j=t?Ah(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Th(n,e,t){n.i=t?Ah(e,!0):e}function hg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Cw(n,e,t){e instanceof yc?(n.h=e,function UC(n,e){e&&!n.j&&(Zu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(U_(this,r),V_(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=oo(e,LC)),n.h=new yc(e,n.g))}function kn(n,e,t){n.h.set(e,t)}function fg(n){return kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ah(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function oo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Tw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Tw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(oo(e,Wu,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(oo(e,Wu,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(oo(t,"/"==t.charAt(0)?Aw:gx,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",oo(t,mx)),n.join("")};var Wu=/[#\/\?@]/g,gx=/[#\?:]/g,Aw=/[#\?]/g,LC=/[#\?@]/g,mx=/#/g;function yc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Zu(n){n.g||(n.g=new mc,n.h=0,n.i&&function dg(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function U_(n,e){Zu(n),e=Ku(n,e),Ga(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ga((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&lg(n)))}function pg(n,e){return Zu(n),e=Ku(n,e),Ga(n.g.h,e)}function V_(n,e,t){U_(n,e),0<t.length&&(n.i=null,n.g.set(Ku(n,e),jp(t)),n.h+=t.length)}function Ku(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Sw(n){this.l=n||BC,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ea&&$t.g.Ea()&&$t.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=yc.prototype).add=function(n,e){Zu(this),this.i=null,n=Ku(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},mt.forEach=function(n,e){Zu(this),this.g.forEach(function(t,r){pC(t,function(o){n.call(e,o,r,this)},this)},this)},mt.T=function(){Zu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},mt.R=function(n){Zu(this);var e=[];if("string"==typeof n)pg(this,n)&&(e=gC(e,this.g.get(Ku(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=gC(e,n[t])}return e},mt.set=function(n,e){return Zu(this),this.i=null,pg(this,n=Ku(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},mt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var BC=10;function xw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Mw(n){return n.h?1:n.g?n.g.size:0}function B_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function j_(n,e){n.g?n.g.add(e):n.h=e}function _c(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return jp(n.i)}function gg(){}function Rw(){this.g=new gg}function Pw(n,e,t){const r=t||"";try{L_(n,function(o,u){let h=o;oc(o)&&(h=A_(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Sh(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function xh(n){this.l=n.$b||null,this.j=n.ib||!1}function Mh(n,e){jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=H_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sw.prototype.cancel=function(){if(this.i=$_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gg.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},gg.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},Br(xh,P_),xh.prototype.g=function(){return new Mh(this.l,this.j)},xh.prototype.i=function(n){return function(){return n}}({}),Br(Mh,jr);var H_=0;function Ow(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Rh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ph(n)}function Ph(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=Mh.prototype).open=function(n,e){if(this.readyState!=H_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ph(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rh(this)),this.readyState=H_},mt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ph(this)),this.g&&(this.readyState=3,Ph(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==$t.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ow(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},mt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rh(this):Ph(this),3==this.readyState&&Ow(this)}},mt.Ua=function(n){this.g&&(this.response=this.responseText=n,Rh(this))},mt.Ta=function(n){this.g&&(this.response=n,Rh(this))},mt.ha=function(){this.g&&Rh(this)},mt.setRequestHeader=function(n,e){this.v.append(n,e)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Mh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Nh=$t.JSON.parse;function br(n){jr.call(this),this.headers=new mc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=mg,this.K=this.L=!1}Br(br,jr);var mg="",ao=/^https?$/i,jC=["POST","PUT"];function Oh(n){return"content-type"==n.toLowerCase()}function kw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Fw(n),Yu(n)}function Fw(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function Lw(n){if(n.h&&void 0!==g_&&(!n.C[1]||4!=zo(n)||2!=n.ba()))if(n.v&&4==zo(n))x_(n.Fa,0,n);else if(Qr(n,"readystatechange"),4==zo(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(cg)[1]||null;if(!o&&$t.self&&$t.self.location){var u=$t.self.location.protocol;o=u.substr(0,u.length-1)}r=!ao.test(o?o.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var h=2<zo(n)?n.g.statusText:""}catch(_){h=""}n.j=h+" ["+n.ba()+"]",Fw(n)}}finally{Yu(n)}}}function Yu(n,e){if(n.g){kh(n);const t=n.g,r=n.C[0]?lh:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function kh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function zo(n){return n.g?n.g.readyState:0}function Uw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case mg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Vw(n){let e="";return __(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kn(n,e,t))}function Qu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function q_(n){this.za=0,this.l=[],this.h=new Xp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qu("baseRetryDelayMs",5e3,n),this.$a=Qu("retryDelaySeedMs",1e4,n),this.Ya=Qu("forwardChannelMaxRetries",2,n),this.ra=Qu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Sw(n&&n.concurrentRequestLimit),this.Ca=new Rw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function z_(n){if($C(n),3==n.G){var e=n.V++,t=qo(n.F);kn(t,"SID",n.J),kn(t,"RID",e),kn(t,"TYPE","terminate"),Ju(n,t),(e=new Ih(n,n.h,e,void 0)).K=2,e.v=fg(qo(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=J_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),so(e)}Q_(n)}function _g(n){n.g&&(Z_(n),n.g.cancel(),n.g=null)}function $C(n){_g(n),n.u&&($t.clearTimeout(n.u),n.u=null),Ec(n),n.i.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function Fh(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&vc(n)}function vc(n){xw(n.i)||n.m||(n.m=!0,S_(n.Ha,n),n.C=0)}function vg(n,e){var t;t=e?e.m:n.V++;const r=qo(n.F);kn(r,"SID",n.J),kn(r,"RID",t),kn(r,"AID",n.U),Ju(n,r),n.o&&n.s&&yg(r,n.o,n.s),t=new Ih(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=jw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),j_(n.i,t),og(t,r,e)}function Ju(n,e){n.j&&L_({},function(t,r){kn(e,r,t)})}function jw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Vr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let I=o[_].h;const T=o[_].g;if(I-=u,0>I)u=Math.max(0,o[_].h-100),g=!1;else try{Pw(T,h,"req"+I+"_")}catch(S){r&&r(T)}}if(g){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function $w(n){n.g||n.u||(n.Y=1,S_(n.Ga,n),n.A=0)}function W_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=hc(Vr(n.Ga,n),Hw(n,n.A)),n.A++,0))}function Z_(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function K_(n){n.g=new Ih(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=qo(n.oa);kn(e,"RID","rpc"),kn(e,"SID",n.J),kn(e,"CI",n.N?"0":"1"),kn(e,"AID",n.U),Ju(n,e),kn(e,"TYPE","xmlhttp"),n.o&&n.s&&yg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=fg(qo(e)),t.s=null,t.U=!0,NC(t,n)}function Ec(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function Y_(n,e){var t=null;if(n.g==e){Ec(n),Z_(n),n.g=null;var r=2}else{if(!B_(n.i,e))return;t=e.D,_c(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Qr(r=eg(),new bw(r,t,e,o)),vc(n)}else $w(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Bw(n,e){return!(Mw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=hc(Vr(n.Ha,n,e),Hw(n,n.C)),n.C++,0)))}(n,e)||2==r&&W_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:qa(n,5);break;case 4:qa(n,10);break;case 3:qa(n,6);break;default:qa(n,2)}}function Hw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function qa(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Vr(n.jb,n);t||(t=new Rs("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||Ch(t,"https"),fg(t)),function Nw(n,e){const t=new Xp;if($t.Image){const r=new Image;r.onload=ch(Sh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ch(Sh,t,r,"TestLoadImage: error",!1,e),r.onabort=ch(Sh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ch(Sh,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ei(2);n.G=0,n.j&&n.j.va(e),Q_(n),$C(n)}function Q_(n){n.G=0,n.I=-1,n.j&&((0!=$_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,jp(n.l),n.l.length=0),n.j.ua())}function Gw(n,e,t){let r=function px(n){return n instanceof Rs?qo(n):new Rs(n,void 0)}(t);if(""!=r.i)e&&Th(r,e+"."+r.i),hg(r,r.m);else{const o=$t.location;r=function FC(n,e,t,r){var o=new Rs(null,void 0);return n&&Ch(o,n),e&&Th(o,e),t&&hg(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&__(n.aa,function(o,u){kn(r,u,o)}),t=n.sa,(e=n.D)&&t&&kn(r,e,t),kn(r,"VER",n.ma),Ju(n,r),r}function J_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new br(t&&n.Ba&&!n.qa?new xh({ib:!0}):n.qa)).L=n.H,e}function X_(){}function Eg(){if(ac&&!(10<=Number(lw)))throw Error("Environmental error: no available transport.")}function Ti(n,e){jr.call(this),this.g=new q_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!dh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ps(this)}function qw(n){bh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ui(){N_.call(this),this.status=1}function Ps(n){this.g=n}(mt=br.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():O_.g(),this.C=function ng(n){return n.h||(n.h=n.i())}(this.u?this.u:O_),this.g.onreadystatechange=Vr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void kw(this,u)}n=t||"";const o=new mc(this.headers);r&&L_(r,function(u,h){o.set(h,u)}),r=function m_(n){e:{var e=Oh;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=$t.FormData&&n instanceof $t.FormData,!(0<=Hu(jC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kh(this),0<this.B&&((this.K=function G_(n){return ac&&function vC(){return function ow(n){var e=_C;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mC(String(Hp)).split("."),t=mC("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=y_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||y_(0==o[2].length,0==u[2].length)||y_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vr(this.pa,this)):this.A=x_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){kw(this,u)}},mt.pa=function(){void 0!==g_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),Yu(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yu(this,!0)),br.Z.M.call(this)},mt.Fa=function(){this.s||(this.F||this.v||this.l?Lw(this):this.cb())},mt.cb=function(){Lw(this)},mt.ba=function(){try{return 2<zo(this)?this.g.status:-1}catch(n){return-1}},mt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},mt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Nh(e)}},mt.Da=function(){return this.m},mt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=q_.prototype).ma=8,mt.G=1,mt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},mt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Ih(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=fh(u),Qn(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jw(this,o,e),kn(t=qo(this.F),"RID",n),kn(t,"CVER",22),this.D&&kn(t,"X-HTTP-Session-Id",this.D),Ju(this,t),this.o&&u&&yg(t,this.o,u),j_(this.i,o),this.Ra&&kn(t,"TYPE","init"),this.ja?(kn(t,"$req",e),kn(t,"SID","null"),o.$=!0,og(o,t,null)):og(o,t,e),this.G=2}}else 3==this.G&&(n?vg(this,n):0==this.l.length||xw(this.i)||vg(this))},mt.Ga=function(){if(this.u=null,K_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=hc(Vr(this.bb,this),n)}},mt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ei(10),_g(this),K_(this))},mt.ab=function(){null!=this.v&&(this.v=null,_g(this),W_(this),Ei(19))},mt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ei(2)):(this.h.info("Failed to ping google.com"),Ei(1))},(mt=X_.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Oa=function(){},Eg.prototype.g=function(n,e){return new Ti(n,e)},Br(Ti,jr),Ti.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),S_(Vr(n.hb,n,e))),Ei(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Gw(n,null,n.W),vc(n)},Ti.prototype.close=function(){z_(this.g)},Ti.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Fh(this.g,e)}else this.v?((e={}).__data__=A_(n),Fh(this.g,e)):Fh(this.g,n)},Ti.prototype.M=function(){this.g.j=null,delete this.j,z_(this.g),delete this.g,Ti.Z.M.call(this)},Br(qw,bh),Br(ui,N_),Br(Ps,X_),Ps.prototype.xa=function(){Qr(this.g,"a")},Ps.prototype.wa=function(n){Qr(this.g,new qw(n))},Ps.prototype.va=function(n){Qr(this.g,new ui(n))},Ps.prototype.ua=function(){Qr(this.g,"b")},Eg.prototype.createWebChannel=Eg.prototype.g,Ti.prototype.send=Ti.prototype.u,Ti.prototype.open=Ti.prototype.m,Ti.prototype.close=Ti.prototype.close,tg.NO_ERROR=0,tg.TIMEOUT=8,tg.HTTP_ERROR=6,Iw.COMPLETE="complete",rg.EventType=fc,fc.OPEN="a",fc.CLOSE="b",fc.ERROR="c",fc.MESSAGE="d",jr.prototype.listen=jr.prototype.N,br.prototype.listenOnce=br.prototype.O,br.prototype.getLastError=br.prototype.La,br.prototype.getLastErrorCode=br.prototype.Da,br.prototype.getStatus=br.prototype.ba,br.prototype.getResponseJson=br.prototype.Qa,br.prototype.getResponseText=br.prototype.ga,br.prototype.send=br.prototype.ea;var HC=Ho.createWebChannelTransport=function(){return new Eg},GC=Ho.getStatEventTarget=function(){return eg()},zw=Ho.ErrorCode=tg,Lh=Ho.EventType=Iw,qC=Ho.Event=zu,wg=Ho.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zC=Ho.FetchXmlHttpFactory=xh,Uh=Ho.WebChannel=rg,WC=Ho.XhrIo=br;const Ww="@firebase/firestore";class Ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let Xu="9.8.0";const Wo=new Va.Yd("@firebase/firestore");function wc(){return Wo.logLevel}function Ye(n,...e){if(Wo.logLevel<=Va.in.DEBUG){const t=e.map(bg);Wo.debug(`Firestore (${Xu}): ${n}`,...t)}}function fr(n,...e){if(Wo.logLevel<=Va.in.ERROR){const t=e.map(bg);Wo.error(`Firestore (${Xu}): ${n}`,...t)}}function Vh(n,...e){if(Wo.logLevel<=Va.in.WARN){const t=e.map(bg);Wo.warn(`Firestore (${Xu}): ${n}`,...t)}}function bg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${Xu}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function kt(n,e){n||ht()}function st(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ar.UNAUTHENTICATED))}shutdown(){}}class Yw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KC{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=I=>this.i!==o?(o=this.i,t(I)):Promise.resolve();let h=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new $r,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=h;e.enqueueRetryable((0,Ee.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new $r)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new Zw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new Ar(e)}}class Qw{constructor(e,t,r){this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Jw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Qw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Ye("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new Xw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class $i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function eb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}$i.A=-1;class tv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=eb(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function el(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function tb(n){return n+"\0"}class pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new pr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new pr(0,0))}static max(){return new Nt(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function nv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ig{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ig.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ig?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Ig{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new $e(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const yx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends Ig{construct(e,t,r){return new Hr(e,t,r)}static isValidIdentifier(e){return yx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new $e(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new $e(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new $e(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===g?(h=!h,o++):"."!==g||h?(r+=g,o++):(u(),o++)}if(u(),h)throw new $e(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(t)}static emptyPath(){return new Hr([])}}class Bh{constructor(e){this.fields=e,e.sort(Hr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ar(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const vx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zo(n){if(kt(!!n),"string"==typeof n){let e=0;const t=vx.exec(n);if(kt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function za(n){return"string"==typeof n?ar.fromBase64String(n):ar.fromUint8Array(n)}function Dg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XC(n){const e=n.mapValue.fields.__previous_value__;return Dg(e)?XC(e):e}function tl(n){const e=Zo(n.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}class nb{constructor(e,t,r,o,u,h,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class Ko{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ko("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ko&&e.projectId===this.projectId&&e.database===this.database}}function Ic(n){return null==n}function Cg(n){return 0===n&&1/n==-1/0}function rb(n){return"number"==typeof n&&Number.isInteger(n)&&!Cg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(cn.fromString(e))}static fromName(e){return new rt(cn.fromString(e).popFirst(5))}static empty(){return new rt(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new cn(e.slice()))}}const uo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tg={nullValue:"NULL_VALUE"};function Dc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dg(n)?4:ab(n)?9007199254740991:10:ht()}function Yo(n,e){if(n===e)return!0;const t=Dc(n);if(t!==Dc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tl(n).isEqual(tl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Zo(r.timestampValue),h=Zo(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,za(n.bytesValue).isEqual(za(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return qn(r.geoPointValue.latitude)===qn(o.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return qn(r.integerValue)===qn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=qn(r.doubleValue),h=qn(o.doubleValue);return u===h?Cg(u)===Cg(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return el(n.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(nv(u)!==nv(h))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===h[g]||!Yo(u[g],h[g])))return!1;return!0}(n,e);default:return ht()}var o}function Ag(n,e){return void 0!==(n.values||[]).find(t=>Yo(t,e))}function Wa(n,e){if(n===e)return 0;const t=Dc(n),r=Dc(e);if(t!==r)return Zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=qn(o.integerValue||o.doubleValue),g=qn(u.integerValue||u.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(n,e);case 3:return ib(n.timestampValue,e.timestampValue);case 4:return ib(tl(n),tl(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=za(o),g=za(u);return h.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),g=u.split("/");for(let _=0;_<h.length&&_<g.length;_++){const I=Zt(h[_],g[_]);if(0!==I)return I}return Zt(h.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Zt(qn(o.latitude),qn(u.latitude));return 0!==h?h:Zt(qn(o.longitude),qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],g=u.values||[];for(let _=0;_<h.length&&_<g.length;++_){const I=Wa(h[_],g[_]);if(I)return I}return Zt(h.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===uo.mapValue&&u===uo.mapValue)return 0;if(o===uo.mapValue)return 1;if(u===uo.mapValue)return-1;const h=o.fields||{},g=Object.keys(h),_=u.fields||{},I=Object.keys(_);g.sort(),I.sort();for(let T=0;T<g.length&&T<I.length;++T){const S=Zt(g[T],I[T]);if(0!==S)return S;const F=Wa(h[g[T]],_[I[T]]);if(0!==F)return F}return Zt(g.length,I.length)}(n.mapValue,e.mapValue);default:throw ht()}}function ib(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Zo(n),r=Zo(e),o=Zt(t.seconds,r.seconds);return 0!==o?o:Zt(t.nanos,r.nanos)}function Cc(n){return sb(n)}function sb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Zo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?za(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=sb(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const g of o)h?h=!1:u+=",",u+=`${g}:${sb(r.fields[g])}`;return u+"}"}(n.mapValue):ht();var e}function nl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jh(n){return!!n&&"integerValue"in n}function $h(n){return!!n&&"arrayValue"in n}function os(n){return!!n&&"nullValue"in n}function ob(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tc(n){return!!n&&"mapValue"in n}function Hh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ab(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rv(n){return"nullValue"in n?Tg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nl(Ko.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function ub(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nl(Ko.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?uo:ht()}function iv(n,e){const t=Wa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lb(n,e){const t=Wa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hh(t)}setAll(e){let t=Hr.emptyPath(),r={},o=[];e.forEach((h,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=g.popLast()}h?r[g.lastSegment()]=Hh(h):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){bc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Jr(Hh(this.value))}}function cb(n){const e=[];return bc(n.fields,(t,r)=>{const o=new Hr([t]);if(Tc(r)){const u=cb(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Bh(e)}class Bn{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Bn(e,0,Nt.min(),Nt.min(),Jr.empty(),0)}static newFoundDocument(e,t,r){return new Bn(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new Bn(e,2,t,Nt.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,Nt.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Gh(n){return n.fields.find(e=>2===e.kind)}function Hi(n){return n.fields.filter(e=>2!==e.kind)}Sg.UNKNOWN_ID=-1;class qh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ac{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ac(0,Ns.min())}}function db(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Nt.fromTimestamp(1e9===r?new pr(t+1,0):new pr(t,r));return new Ns(o,rt.empty(),e)}function Ex(n){return new Ns(n.readTime,n.key,-1)}class Ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ns(Nt.min(),rt.empty(),-1)}static max(){return new Ns(Nt.max(),rt.empty(),-1)}}function hb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Zt(n.largestBatchId,e.largestBatchId))}class gr{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Xr.RED,this.left=null!=o?o:Xr.EMPTY,this.right=null!=u?u:Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Xr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Xr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eT(this.data.getIterator())}getIteratorFrom(e){return new eT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class eT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Za(n){return n.hasNext()?n.getNext():void 0}class fb{constructor(e,t=null,r=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.P=null}}function pb(n,e=null,t=[],r=[],o=null,u=null,h=null){return new fb(n,e,t,r,o,u,h)}function rl(n){const e=st(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Cc(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cc(r)).join(",")),e.P=t}return e.P}function il(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!bx(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Yo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uT(n.startAt,e.startAt)&&uT(n.endAt,e.endAt)}function Sc(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Wh(n,e){return n.filters.filter(t=>t instanceof Gr&&t.field.isEqual(e))}function mb(n,e,t){let r=Tg,o=!0;for(const u of Wh(n,e)){let h=Tg,g=!0;switch(u.op){case"<":case"<=":h=rv(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,g=!1;break;case"!=":case"not-in":h=Tg}iv({value:r,inclusive:o},{value:h,inclusive:g})<0&&(r=h,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];iv({value:r,inclusive:o},{value:h,inclusive:t.inclusive})<0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}function sv(n,e,t){let r=uo,o=!0;for(const u of Wh(n,e)){let h=uo,g=!0;switch(u.op){case">=":case">":h=ub(u.value),g=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,g=!1;break;case"!=":case"not-in":h=uo}lb({value:r,inclusive:o},{value:h,inclusive:g})>0&&(r=h,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];lb({value:r,inclusive:o},{value:h,inclusive:t.inclusive})>0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}class Gr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new tT(e,t,r):"array-contains"===t?new yb(e,r):"in"===t?new iT(e,r):"not-in"===t?new sT(e,r):"array-contains-any"===t?new oT(e,r):new Gr(e,t,r)}static V(e,t,r){return"in"===t?new nT(e,r):new wx(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Wa(t,this.value)):null!==t&&Dc(this.value)===Dc(t)&&this.v(Wa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class tT extends Gr{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.v(t)}}class nT extends Gr{constructor(e,t){super(e,"in",t),this.keys=rT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wx extends Gr{constructor(e,t){super(e,"not-in",t),this.keys=rT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class yb extends Gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $h(t)&&Ag(t.arrayValue,this.value)}}class iT extends Gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ag(this.value.arrayValue,t)}}class sT extends Gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ag(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ag(this.value.arrayValue,t)}}class oT extends Gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$h(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ag(this.value.arrayValue,r))}}class sl{constructor(e,t){this.position=e,this.inclusive=t}}class Zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function bx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function aT(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?rt.comparator(rt.fromName(h.referenceValue),t.key):Wa(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function uT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yo(n.position[t],e.position[t]))return!1;return!0}class Qo{constructor(e,t=null,r=[],o=[],u=null,h="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=_,this.D=null,this.C=null}}function Kh(n,e,t,r,o,u,h,g){return new Qo(n,e,t,r,o,u,h,g)}function xc(n){return new Qo(n)}function xg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Jo(n){for(const e of n.filters)if(e.S())return e.field;return null}function Mg(n){return null!==n.collectionGroup}function Ka(n){const e=st(n);if(null===e.D){e.D=[];const t=Jo(e),r=xg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Zh(t)),e.D.push(new Zh(Hr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Zh(Hr.keyField(),u))}}}return e.D}function Ai(n){const e=st(n);if(!e.C)if("F"===e.limitType)e.C=pb(e.path,e.collectionGroup,Ka(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ka(e))t.push(new Zh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new sl(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new sl(e.startAt.position,e.startAt.inclusive):null;e.C=pb(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function _b(n,e,t){return new Qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ol(n,e){return il(Ai(n),Ai(e))&&n.limitType===e.limitType}function Rg(n){return`${rl(Ai(n))}|lt:${n.limitType}`}function Mc(n){return`Query(target=${function gb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Cc(r.value)}`;var r}).join(", ")}]`),Ic(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Cc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Cc(t)).join(",")),`Target(${e})`}(Ai(n))}; limitType=${n.limitType})`}function vb(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):rt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const g=aT(o,u,h);return o.inclusive?g<=0:g<0}(t.startAt,Ka(t),r)||t.endAt&&!function(o,u,h){const g=aT(o,u,h);return o.inclusive?g>=0:g>0}(t.endAt,Ka(t),r)));var t,r}function cT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dT(n){return(e,t)=>{let r=!1;for(const o of Ka(n)){const u=Ix(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Ix(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(o,u,h){const g=u.data.field(o),_=h.data.field(o);return null!==g&&null!==_?Wa(g,_):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function ov(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cg(e)?"-0":e}}function Eb(n){return{integerValue:""+n}}function wb(n,e){return rb(e)?Eb(e):ov(n,e)}class Pg{constructor(){this._=void 0}}function hT(n,e,t){return n instanceof al?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ul?Ib(n,e):n instanceof Ya?Ng(n,e):function(r,o){const u=av(r,o),h=uv(u)+uv(r.k);return jh(u)&&jh(r.k)?Eb(h):ov(r.M,h)}(n,e)}function bb(n,e,t){return n instanceof ul?Ib(n,e):n instanceof Ya?Ng(n,e):t}function av(n,e){return n instanceof Yh?jh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class al extends Pg{}class ul extends Pg{constructor(e){super(),this.elements=e}}function Ib(n,e){const t=Og(e);for(const r of n.elements)t.some(o=>Yo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ya extends Pg{constructor(e){super(),this.elements=e}}function Ng(n,e){let t=Og(e);for(const r of n.elements)t=t.filter(o=>!Yo(o,r));return{arrayValue:{values:t}}}class Yh extends Pg{constructor(e,t){super(),this.M=e,this.k=t}}function uv(n){return qn(n.integerValue||n.doubleValue)}function Og(n){return $h(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Qh{constructor(e,t){this.field=e,this.transform=t}}class Dx{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fg{}function Cx(n,e,t){n instanceof Jh?function(r,o,u){const h=r.value.clone(),g=yT(r.fieldTransforms,o,u.transformResults);h.setAll(g),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Rc?function(r,o,u){if(!kg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=yT(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(mT(r)),g.setAll(h),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Db(n,e,t){var o;n instanceof Jh?function(r,o,u){if(!kg(r.precondition,o))return;const h=r.value.clone(),g=_T(r.fieldTransforms,u,o);h.setAll(g),o.convertToFoundDocument(gT(o),h).setHasLocalMutations()}(n,e,t):n instanceof Rc?function(r,o,u){if(!kg(r.precondition,o))return;const h=_T(r.fieldTransforms,u,o),g=o.data;g.setAll(mT(r)),g.setAll(h),o.convertToFoundDocument(gT(o),g).setHasLocalMutations()}(n,e,t):kg(n.precondition,o=e)&&o.convertToNoDocument(Nt.min())}function Tx(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=av(r.transform,o||null);null!=u&&(null==t&&(t=Jr.empty()),t.set(r.field,u))}return t||null}function pT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&el(t,r,(o,u)=>function fT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ul&&r instanceof ul||t instanceof Ya&&r instanceof Ya?el(t.elements,r.elements,Yo):t instanceof Yh&&r instanceof Yh?Yo(t.k,r.k):t instanceof al&&r instanceof al);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function gT(n){return n.isFoundDocument()?n.version:Nt.min()}class Jh extends Fg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Rc extends Fg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function mT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yT(n,e,t){const r=new Map;kt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,g=e.data.field(u.field);r.set(u.field,bb(h,g,t[o]))}return r}function _T(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,hT(u,h,e))}return r}class i extends Fg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class s extends Fg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class a{constructor(e){this.count=e}}var l,d;function f(n){switch(n){default:return ht();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function y(n){if(void 0===n)return fr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case l.OK:return _e.OK;case l.CANCELLED:return _e.CANCELLED;case l.UNKNOWN:return _e.UNKNOWN;case l.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case l.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case l.INTERNAL:return _e.INTERNAL;case l.UNAVAILABLE:return _e.UNAVAILABLE;case l.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case l.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case l.NOT_FOUND:return _e.NOT_FOUND;case l.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case l.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case l.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case l.ABORTED:return _e.ABORTED;case l.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case l.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case l.DATA_LOSS:return _e.DATA_LOSS;default:return ht()}}(d=l||(l={}))[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS";class E{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return JC(this.inner)}size(){return this.innerSize}}const b=new gr(rt.comparator);function D(){return b}const A=new gr(rt.comparator);function O(...n){let e=A;for(const t of n)e=e.insert(t.key,t);return e}function G(){return new E(n=>n.toString(),(n,e)=>n.isEqual(e))}const re=new gr(rt.comparator),xe=new Fn(rt.comparator);function Re(...n){let e=xe;for(const t of n)e=e.add(t);return e}const tt=new Fn(Zt);function ct(){return tt}class Oe{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,bt.createSynthesizedTargetChangeForCurrentChange(e,t)),new Oe(Nt.min(),r,ct(),D(),Re())}}class bt{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new bt(ar.EMPTY_BYTE_STRING,t,Re(),Re(),Re())}}class tn{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class mn{constructor(e,t){this.targetId=e,this.$=t}}class Si{constructor(e,t,r=ar.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Qa{constructor(){this.B=0,this.L=Ug(),this.U=ar.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Re(),t=Re(),r=Re();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ht()}}),new bt(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ug()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class lv{constructor(e){this.nt=e,this.st=new Map,this.it=D(),this.rt=Lg(),this.ot=new Fn(Zt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Sc(u))if(0===r){const h=new rt(u.path);this.ct(t,h,Bn.newNoDocument(h,Nt.min()))}else kt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const g=this.wt(h);if(g){if(u.current&&Sc(g.target)){const _=new rt(g.target.path);null!==this.it.get(_)||this.It(h,_)||this.ct(h,_,Bn.newNoDocument(_,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=Re();this.rt.forEach((u,h)=>{let g=!0;h.forEachWhile(_=>{const I=this.wt(_);return!I||2===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new Oe(e,t,this.ot,this.it,r);return this.it=D(),this.rt=Lg(),this.ot=new Fn(Zt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Qa,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Fn(Zt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ye("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Qa),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Lg(){return new gr(rt.comparator)}function Ug(){return new gr(rt.comparator)}const cv={asc:"ASCENDING",desc:"DESCENDING"},dv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class hv{constructor(e,t){this.databaseId=e,this.N=t}}function ll(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vg(n,e){return n.N?e.toBase64():e.toUint8Array()}function fv(n,e){return ll(n,e.toTimestamp())}function li(n){return kt(!!n),Nt.fromTimestamp(function(e){const t=Zo(e);return new pr(t.seconds,t.nanos)}(n))}function vT(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ax(n){const e=cn.fromString(n);return kt(Fx(e)),e}function pv(n,e){return vT(n.databaseId,e.path)}function Ja(n,e){const t=Ax(e);if(t.get(1)!==n.databaseId.projectId)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(xx(t))}function ET(n,e){return vT(n.databaseId,e)}function Sx(n){const e=Ax(n);return 4===e.length?cn.emptyPath():xx(e)}function gv(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xx(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Mx(n,e,t){return{name:pv(n,e),fields:t.value.mapValue.fields}}function Rx(n,e,t){const r=Ja(n,e.name),o=li(e.updateTime),u=new Jr({mapValue:{fields:e.fields}}),h=Bn.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function mv(n,e){let t;if(e instanceof Jh)t={update:Mx(n,e.key,e.value)};else if(e instanceof i)t={delete:pv(n,e.key)};else if(e instanceof Rc)t={update:Mx(n,e.key,e.data),updateMask:nP(e.fieldMask)};else{if(!(e instanceof s))return ht();t={verify:pv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof al)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ul)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ya)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Yh)return{fieldPath:u.field.canonicalString(),increment:h.k};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:fv(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ht()),t;var o}function wT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Sr.updateTime(li(o.updateTime)):void 0!==o.exists?Sr.exists(o.exists):Sr.none():Sr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let g=null;"setToServerValue"in h?(kt("REQUEST_TIME"===h.setToServerValue),g=new al):"appendMissingElements"in h?g=new ul(h.appendMissingElements.values||[]):"removeAllFromArray"in h?g=new Ya(h.removeAllFromArray.values||[]):"increment"in h?g=new Yh(u,h.increment):ht();const _=Hr.fromServerFormat(h.fieldPath);return new Qh(_,g)}(n,o)):[];var o;if(e.update){const o=Ja(n,e.update.name),u=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Bh((e.updateMask.fieldPaths||[]).map(I=>Hr.fromServerFormat(I)));return new Rc(o,u,h,t,r)}return new Jh(o,u,t,r)}if(e.delete){const o=Ja(n,e.delete);return new i(o,t)}if(e.verify){const o=Ja(n,e.verify);return new s(o,t)}return ht()}function Px(n,e){return{documents:[ET(n,e.path)]}}function Nx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ET(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ET(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0===_.length)return;const I=_.map(T=>function(S){if("=="===S.op){if(ob(S.value))return{unaryFilter:{field:Bg(S.field),op:"IS_NAN"}};if(os(S.value))return{unaryFilter:{field:Bg(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(ob(S.value))return{unaryFilter:{field:Bg(S.field),op:"IS_NOT_NAN"}};if(os(S.value))return{unaryFilter:{field:Bg(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bg(S.field),op:X1(S.op),value:S.value}}}(T));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:Bg((T=I).field),direction:J1(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(I=e.limit,n.N||Ic(I)?I:{value:I});var I,g,_;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Ox(n){let e=Sx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){kt(1===r);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=kx(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(T=>{return new Zh(jg((S=T).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let g=null;t.limit&&(g=function(T){let S;return S="object"==typeof T?T.value:T,Ic(S)?null:S}(t.limit));let _=null;var T;t.startAt&&(_=new sl((T=t.startAt).values||[],!!T.before));let I=null;return t.endAt&&(I=function(T){return new sl(T.values||[],!T.before)}(t.endAt)),Kh(e,o,h,u,g,"F",_,I)}function kx(n){return n?void 0!==n.unaryFilter?[tP(n)]:void 0!==n.fieldFilter?[eP(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>kx(e)).reduce((e,t)=>e.concat(t)):ht():[]}function J1(n){return cv[n]}function X1(n){return dv[n]}function Bg(n){return{fieldPath:n.canonicalString()}}function jg(n){return Hr.fromServerFormat(n.fieldPath)}function eP(n){return Gr.create(jg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function tP(n){switch(n.unaryFilter.op){case"IS_NAN":const e=jg(n.unaryFilter.field);return Gr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=jg(n.unaryFilter.field);return Gr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jg(n.unaryFilter.field);return Gr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jg(n.unaryFilter.field);return Gr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function nP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lx(e)),e=rP(n.get(t),e);return Lx(e)}function rP(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Lx(n){return n+"\x01\x01"}function Xa(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&ht(),n.charAt(h+1)){case"\x01":const g=n.substring(u,h);let _;0===o.length?_=g:(o+=g,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:ht()}u=h+2}return new cn(r)}const Ux=["userId","batchId"];function Cb(n,e){return[n,Gi(e)]}function Vx(n,e,t){return[n,Gi(e),t]}const iP={},sP=["prefixPath","collectionGroup","readTime","documentId"],oP=["prefixPath","collectionGroup","documentId"],aP=["collectionGroup","readTime","prefixPath","documentId"],uP=["canonicalId","targetId"],lP=["targetId","path"],cP=["path","targetId"],dP=["collectionId","parent"],hP=["indexId","uid"],fP=["uid","sequenceNumber"],pP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gP=["indexId","uid","orderedDocumentKey"],mP=["userId","collectionPath","documentId"],yP=["userId","collectionPath","largestBatchId"],_P=["userId","collectionGroup","largestBatchId"],Bx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vP=[...Bx,"documentOverlays"],jx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EP=[...jx,"indexConfiguration","indexState","indexEntries"],$x="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):be.reject(t)}static resolve(e){return new be((t,r)=>{t(e)})}static reject(e){return new be((t,r)=>{r(e)})}static waitFor(e){return new be((t,r)=>{let o=0,u=0,h=!1;e.forEach(g=>{++o,g.next(()=>{++u,h&&u===o&&t()},_=>r(_))}),h=!0,u===o&&t()})}static or(e){let t=be.resolve(!1);for(const r of e)t=t.next(o=>o?be.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Tb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $r,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new yv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=bT(r.target.error);this.At.reject(new yv(e,o))}}static open(e,t,r,o){try{return new Tb(t,e.transaction(o,r))}catch(u){throw new yv(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ye("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bP(t)}}class Xo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Xo.Vt((0,Ot.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ye("SimpleDb","Removing database:",e),ef(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ot.hl)())return!1;if(Xo.St())return!0;const e=(0,Ot.z$)(),t=Xo.Vt(e),r=0<t&&t<10,o=Xo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ye("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new yv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const g=h.target.error;o("VersionError"===g.name?new $e(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new $e(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new yv(e,g))},u.onupgradeneeded=h=>{Ye("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Ye("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ee.Z)(function*(){const h="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const _=Tb.open(u.db,e,h?"readonly":"readwrite",r),I=o(_).next(T=>(_.bt(),T)).catch(T=>(_.abort(T),be.reject(T))).toPromise();return I.catch(()=>{}),yield _.Rt,I}catch(_){const I="FirebaseError"!==_.name&&g<3;if(Ye("SimpleDb","Transaction failed with error:",_.message,"Retrying:",I),u.close(),!I)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wP{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ef(this.Ft.delete())}}class yv extends $e{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xh(n){return"IndexedDbTransactionError"===n.name}class bP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ye("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ye("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ef(r)}add(e){return Ye("SimpleDb","ADD",this.store.name,e,e),ef(this.store.add(e))}get(e){return ef(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ye("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ye("SimpleDb","DELETE",this.store.name,e),ef(this.store.delete(e))}count(){return Ye("SimpleDb","COUNT",this.store.name),ef(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(h,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new be((u,h)=>{o.onerror=g=>{h(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new be((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Ye("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,h,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new be((r,o)=>{t.onerror=u=>{const h=bT(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(g=>{g?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new be((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const g=h.target.result;if(!g)return void o();const _=new wP(g),I=t(g.primaryKey,g.value,_);if(I instanceof be){const T=I.catch(S=>(_.done(),be.reject(S)));r.push(T)}_.isDone?o():null===_.Lt?g.continue():g.continue(_.Lt)}}).next(()=>be.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ef(n){return new be((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=bT(r.target.error);t(o)}})}let Gx=!1;function bT(n){const e=Xo.Vt((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new $e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gx||(Gx=!0,setTimeout(()=>{throw r},0)),r}}return n}class qx extends Hx{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ci(n,e){const t=st(n);return Xo.xt(t.Ht,e)}class IT{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Cx(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Db(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Db(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Nt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,(t,r)=>pT(t,r))&&el(this.baseMutations,e.baseMutations,(t,r)=>pT(t,r))}}class DT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){kt(e.mutations.length===r.length);let o=re;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new DT(e,t,r,o)}}class CT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pc{constructor(e,t,r,o,u=Nt.min(),h=Nt.min(),g=ar.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g}withSequenceNumber(e){return new Pc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Pc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class zx{constructor(e){this.Jt=e}}function Wx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ab(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:pv(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ll(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:tf(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:tf(e.version)}}var o,u;return r}function Ab(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nf(n){const e=new pr(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function $g(n,e){const t=(e.baseMutations||[]).map(u=>wT(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>wT(n.Jt,u)),o=pr.fromMillis(e.localWriteTimeMs);return new IT(e.batchId,o,t,r)}function _v(n){const e=nf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?nf(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var o;return void 0!==n.query.documents?(kt(1===(o=n.query).documents.length),r=Ai(xc(Sx(o.documents[0])))):r=Ai(Ox(n.query)),new Pc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ar.fromBase64String(n.resumeToken))}function Zx(n,e){const t=tf(e.snapshotVersion),r=tf(e.lastLimboFreeSnapshotVersion);let o;o=Sc(e.target)?Px(n.Jt,e.target):Nx(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function TT(n){const e=Ox({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?_b(e,e.limit,"L"):e}function AT(n,e){return new CT(e.largestBatchId,wT(n.Jt,e.overlayMutation))}function Kx(n,e){const t=e.path.lastSegment();return[n,Gi(e.path.popLast()),t]}class DP{getBundleMetadata(e,t){return Yx(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:nf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Yx(e).put({bundleId:(r=t).id,createTime:tf(li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Qx(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:TT(o.bundledQuery),readTime:nf(o.readTime)};var o})}saveNamedQuery(e,t){return Qx(e).put({name:(r=t).name,readTime:tf(li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Yx(n){return ci(n,"bundles")}function Qx(n){return ci(n,"namedQueries")}class ST{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ST(e,t.uid||"")}getOverlay(e,t){return vv(e).get(Kx(this.userId,t)).next(r=>r?AT(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const g=new CT(t,h);o.push(this.Xt(e,g))}),be.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Gi(h.getCollectionPath())));const u=[];return o.forEach(h=>{const g=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(vv(e).Qt("collectionPathOverlayIndex",g))}),be.waitFor(u)}getOverlaysForCollection(e,t,r){const o=G(),u=Gi(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return vv(e).qt("collectionPathOverlayIndex",h).next(g=>{for(const _ of g){const I=AT(this.M,_);o.set(I.getKey(),I)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=G();let h;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vv(e).Wt({index:"collectionGroupOverlayIndex",range:g},(_,I,T)=>{const S=AT(this.M,I);u.size()<o||S.largestBatchId===h?(u.set(S.getKey(),S),h=S.largestBatchId):T.done()}).next(()=>u)}Xt(e,t){return vv(e).put(function(r,o,u){const[h,g,_]=Kx(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:mv(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function vv(n){return ci(n,"documentOverlays")}class rf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Cg(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(za(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?ab(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ht()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),rt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function CP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Jx(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=CP(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}rf.fe=new rf;class TP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Jx(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Jx(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class AP{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class SP{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ev{constructor(){this.De=new TP,this.Ce=new AP(this.De),this.xe=new SP(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class sf{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sf(this.indexId,this.documentKey,this.arrayValue,r)}}function af(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xx(n.arrayValue,e.arrayValue),0!==t?t:(t=Xx(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function Xx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Gh(e);if(void 0!==t&&!this.Be(t))return!1;const r=Hi(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class MP{constructor(){this.qe=new xT}addToCollectionParentIndex(e,t){return this.qe.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(Ns.min())}updateCollectionGroup(e,t,r){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class xT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Fn(cn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Fn(cn.comparator)).toArray()}}const Sb=new Uint8Array(0);class RP{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new xT,this.Ge=new E(r=>rl(r),(r,o)=>il(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Gi(o)};return eM(e).put(u)}return be.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[tb(t),""],!1,!0);return eM(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(Xa(h.parent))}return r})}addFieldIndex(e,t){const r=xb(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=xb(e),o=Mb(e),u=wv(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=wv(e);let o=!0;const u=new Map;return be.forEach(this.Qe(t),h=>this.je(e,h).next(g=>{o&&(o=!!g),u.set(h,g)})).next(()=>{if(o){let h=Re();const g=[];return be.forEach(u,(_,I)=>{var T;Ye("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(xt=>`${xt.fieldPath}:${xt.kind}`).join(",")}`} to execute ${rl(t)}`);const S=function(xt,Et){const Kt=Gh(Et);if(void 0===Kt)return null;for(const un of Wh(xt,Kt.fieldPath))switch(un.op){case"array-contains-any":return un.value.arrayValue.values||[];case"array-contains":return[un.value]}return null}(I,_),F=function(xt,Et){const Kt=new Map;for(const un of Hi(Et))for(const zr of Wh(xt,un.fieldPath))switch(zr.op){case"==":case"in":Kt.set(un.fieldPath.canonicalString(),zr.value);break;case"not-in":case"!=":return Kt.set(un.fieldPath.canonicalString(),zr.value),Array.from(Kt.values())}return null}(I,_),W=function(xt,Et){const Kt=[];let un=!0;for(const zr of Hi(Et)){const ta=0===zr.kind?mb(xt,zr.fieldPath,xt.startAt):sv(xt,zr.fieldPath,xt.startAt);Kt.push(ta.value),un&&(un=ta.inclusive)}return new sl(Kt,un)}(I,_),te=function(xt,Et){const Kt=[];let un=!0;for(const zr of Hi(Et)){const ta=0===zr.kind?sv(xt,zr.fieldPath,xt.endAt):mb(xt,zr.fieldPath,xt.endAt);Kt.push(ta.value),un&&(un=ta.inclusive)}return new sl(Kt,un)}(I,_),Me=this.We(_,I,W),je=this.We(_,I,te),St=this.ze(_,I,F),At=this.He(_.indexId,S,Me,W.inclusive,je,te.inclusive,St);return be.forEach(At,xt=>r.Gt(xt,t.limit).next(Et=>{Et.forEach(Kt=>{const un=rt.fromSegments(Kt.documentKey);h.has(un)||(h=h.add(un),g.push(un))})}))}).next(()=>g)}return be.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,h,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),T=[];for(let S=0;S<_;++S){const F=t?this.Je(t[S/I]):Sb,W=this.Ye(e,F,r[S%I],o),te=this.Xe(e,F,u[S%I],h),Me=g.map(je=>this.Ye(e,F,je,!0));T.push(...this.createRange(W,te,Me))}return T}Ye(e,t,r,o){const u=new sf(e,rt.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new sf(e,rt.empty(),t,r);return o?u.ke():u}je(e,t){const r=new xP(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let h=null;for(const g of u)r.$e(g)&&(!h||g.fields.length>h.fields.length)&&(h=g);return h})}getIndexType(e,t){let r=2;return be.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(h){let g=new Fn(Hr.comparator),_=!1;for(const I of h.filters){const T=I;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:g=g.add(T.field))}for(const I of h.orderBy)I.field.isKeyField()||(g=g.add(I.field));return g.size+(_?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Ev;for(const o of Hi(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);rf.fe.Zt(u,h)}return r.Se()}Je(e){const t=new Ev;return rf.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Ev;return rf.fe.Zt(nl(this.databaseId,t),r.Ne(function(o){const u=Hi(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Ev);let u=0;for(const h of Hi(e)){const g=r[u++];for(const _ of o)if(this.en(t,h.fieldPath)&&$h(g))o=this.nn(o,h,g);else{const I=_.Ne(h.kind);rf.fe.Zt(g,I)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const g of o){const _=new Ev;_.seed(g.Se()),rf.fe.Zt(h,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Gr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=xb(e),o=Mb(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return be.forEach(u,g=>o.get([g.indexId,this.uid]).next(_=>{h.push(function(I,T){const S=T?new Ac(T.sequenceNumber,new Ns(nf(T.readTime),new rt(Xa(T.documentKey)),T.largestBatchId)):Ac.empty(),F=I.fields.map(([W,te])=>new qh(Hr.fromServerFormat(W),te));return new Sg(I.indexId,I.collectionGroup,F,S)}(g,_))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Zt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=xb(e),u=Mb(e);return this.rn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>be.forEach(g,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:tf((F=r).readTime),documentKey:Gi(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return be.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?be.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),be.forEach(g,_=>this.on(e,o,_).next(I=>{const T=this.un(u,_);return I.isEqual(T)?be.resolve():this.an(e,u,_,I,T)}))))})}cn(e,t,r,o){return wv(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return wv(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=wv(e);let u=new Fn(af);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,g)=>{u=u.add(new sf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}un(e,t){let r=new Fn(af);const o=this.Ze(t,e);if(null==o)return r;const u=Gh(t);if(null!=u){const h=e.data.field(u.fieldPath);if($h(h))for(const g of h.arrayValue.values||[])r=r.add(new sf(t.indexId,e.key,this.Je(g),o))}else r=r.add(new sf(t.indexId,e.key,Sb,o));return r}an(e,t,r,o,u){Ye("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(g,_,I,T,S){const F=g.getIterator(),W=_.getIterator();let te=Za(F),Me=Za(W);for(;te||Me;){let je=!1,St=!1;if(te&&Me){const At=I(te,Me);At<0?St=!0:At>0&&(je=!0)}else null!=te?St=!0:je=!0;je?(T(Me),Me=Za(W)):St?(S(te),te=Za(F)):(te=Za(F),Me=Za(W))}}(o,u,af,g=>{h.push(this.cn(e,t,r,g))},g=>{h.push(this.hn(e,t,r,g))}),be.waitFor(h)}rn(e){let t=1;return Mb(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,g)=>af(h,g)).filter((h,g,_)=>!g||0!==af(h,_[g-1]));const o=[];o.push(e);for(const h of r){const g=af(h,e),_=af(h,t);if(0===g)o[0]=e.ke();else if(g>0&&_<0)o.push(h),o.push(h.ke());else if(_>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,Sb,[]],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,Sb,[]]));return u}getMinOffset(e,t){let r;return be.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||hb(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Ns.min()})).next(()=>r)}}function eM(n){return ci(n,"collectionParents")}function wv(n){return ci(n,"indexEntries")}function xb(n){return ci(n,"indexConfiguration")}function Mb(n){return ci(n,"indexState")}const tM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class as{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new as(e,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let g=0;const _=r.Wt({range:h},(T,S,F)=>(g++,F.delete()));u.push(_.next(()=>{kt(1===g)}));const I=[];for(const T of t.mutations){const S=Vx(e,T.key.path,t.batchId);u.push(o.delete(S)),I.push(T.key)}return be.waitFor(u).next(()=>I)}function Rb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}as.DEFAULT_COLLECTION_PERCENTILE=10,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,as.DEFAULT=new as(41943040,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),as.DISABLED=new as(-1,0,0);class MT{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){kt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new MT(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nc(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Hg(e),h=Nc(e);return h.add({}).next(g=>{kt("number"==typeof g);const _=new IT(g,t,r,o),I=function(F,W,te){const Me=te.baseMutations.map(St=>mv(F.Jt,St)),je=te.mutations.map(St=>mv(F.Jt,St));return{userId:W,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Me,mutations:je}}(this.M,this.userId,_),T=[];let S=new Fn((F,W)=>Zt(F.canonicalString(),W.canonicalString()));for(const F of o){const W=Vx(this.userId,F.key.path,g);S=S.add(F.key.path.popLast()),T.push(h.put(I)),T.push(u.put(W,iP))}return S.forEach(F=>{T.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[g]=_.keys()}),be.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Nc(e).get(t).next(r=>r?(kt(r.userId===this.userId),$g(this.M,r)):null)}fn(e,t){return this.ln[t]?be.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Nc(e).Wt({index:"userMutationsIndex",range:o},(h,g,_)=>{g.userId===this.userId&&(kt(g.batchId>=r),u=$g(this.M,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nc(e).qt("userMutationsIndex",t).next(r=>r.map(o=>$g(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cb(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Hg(e).Wt({range:o},(h,g,_)=>{const[I,T,S]=h,F=Xa(T);if(I===this.userId&&t.path.isEqual(F))return Nc(e).get(S).next(W=>{if(!W)throw ht();kt(W.userId===this.userId),u.push($g(this.M,W))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Zt);const o=[];return t.forEach(u=>{const h=Cb(this.userId,u.path),g=IDBKeyRange.lowerBound(h),_=Hg(e).Wt({range:g},(I,T,S)=>{const[F,W,te]=I,Me=Xa(W);F===this.userId&&u.path.isEqual(Me)?r=r.add(te):S.done()});o.push(_)}),be.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Cb(this.userId,r),h=IDBKeyRange.lowerBound(u);let g=new Fn(Zt);return Hg(e).Wt({range:h},(_,I,T)=>{const[S,F,W]=_,te=Xa(F);S===this.userId&&r.isPrefixOf(te)?te.length===o&&(g=g.add(W)):T.done()}).next(()=>this.dn(e,g))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Nc(e).get(u).next(h=>{if(null===h)throw ht();kt(h.userId===this.userId),r.push($g(this.M,h))}))}),be.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return nM(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),be.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return be.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Hg(e).Wt({range:r},(u,h,g)=>{if(u[0]===this.userId){const _=Xa(u[1]);o.push(_)}else g.done()}).next(()=>{kt(0===o.length)})})}containsKey(e,t){return rM(e,this.userId,t)}wn(e){return iM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rM(n,e,t){const r=Cb(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Hg(n).Wt({range:u,jt:!0},(g,_,I)=>{const[T,S,F]=g;T===e&&S===o&&(h=!0),I.done()}).next(()=>h)}function Nc(n){return ci(n,"mutations")}function Hg(n){return ci(n,"documentMutations")}function iM(n){return ci(n,"mutationQueues")}class uf{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new uf(0)}static yn(){return new uf(-1)}}class PP{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new uf(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Nt.fromTimestamp(new pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gg(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Gg(e).Wt((h,g)=>{const _=_v(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>be.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Gg(e).Wt((r,o)=>{const u=_v(o);t(u)})}pn(e){return sM(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}In(e,t){return sM(e).put("targetGlobalKey",t)}Tn(e,t){return Gg(e).put(Zx(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Gg(e).Wt({range:o,index:"queryTargetsIndex"},(h,g,_)=>{const I=_v(g);il(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Oc(e);return t.forEach(h=>{const g=Gi(h.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,h))}),be.waitFor(o)}removeMatchingKeys(e,t,r){const o=Oc(e);return be.forEach(t,u=>{const h=Gi(u.path);return be.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Oc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Oc(e);let u=Re();return o.Wt({range:r,jt:!0},(h,g,_)=>{const I=Xa(h[1]),T=new rt(I);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Gi(t.path),o=IDBKeyRange.bound([r],[tb(r)],!1,!0);let u=0;return Oc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,g],_,I)=>{0!==h&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return Gg(e).get(t).next(r=>r?_v(r):null)}}function Gg(n){return ci(n,"targets")}function sM(n){return ci(n,"targetGlobal")}function Oc(n){return ci(n,"targetDocuments")}function lf(n){return RT.apply(this,arguments)}function RT(){return RT=(0,Ee.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==$x)throw n;Ye("LocalStore","Unexpectedly lost primary lease")}),RT.apply(this,arguments)}function oM([n,e],[t,r]){const o=Zt(n,t);return 0===o?Zt(e,r):o}class NP{constructor(e){this.An=e,this.buffer=new Fn(oM),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OP{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ye("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Xh(o)?Ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield lf(o)}yield t.Sn(e)}))}}class kP{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return be.resolve($i.A);const r=new NP(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(tM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tM):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,h,g,_,I;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,g=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(I=Date.now(),wc()<=Va.in.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-T}ms\n\tDetermined least recently used ${o} in `+(g-h)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${S} documents in `+(I-_)+`ms\nTotal Duration: ${I-T}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class FP{constructor(e,t){this.db=e,this.garbageCollector=new kP(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Pb(e,r)}removeReference(e,t,r){return Pb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pb(e,t)}On(e,t){return function(r,o){let u=!1;return iM(r).zt(h=>rM(r,h,o).next(g=>(g&&(u=!0),be.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(h,g)=>{if(g<=t){const _=this.On(e,h).next(I=>{if(!I)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,Nt.min()),Oc(e).delete([0,Gi(h.path)])))});o.push(_)}}).next(()=>be.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pb(e,t)}Mn(e,t){const r=Oc(e);let o,u=$i.A;return r.Wt({index:"documentTargetsIndex"},([h,g],{path:_,sequenceNumber:I})=>{0===h?(u!==$i.A&&t(new rt(Xa(o)),u),u=I,o=_):u=$i.A}).next(()=>{u!==$i.A&&t(new rt(Xa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pb(n,e){return Oc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Gi(e.path),sequenceNumber:r}));var r}class aM{constructor(){this.changes=new E(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?be.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LP{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cf(e).put(r)}removeEntry(e,t,r){return cf(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Ab(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return cf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(bv(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return cf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(bv(t))},(o,u)=>{r={document:this.$n(t,u),size:Rb(u)}}).next(()=>r)}getEntries(e,t){let r=D();return this.Ln(e,t,(o,u)=>{const h=this.$n(o,u);r=r.insert(o,h)}).next(()=>r)}Un(e,t){let r=D(),o=new gr(rt.comparator);return this.Ln(e,t,(u,h)=>{const g=this.$n(u,h);r=r.insert(u,g),o=o.insert(u,Rb(h))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return be.resolve();let o=new Fn(cM);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(bv(o.first()),bv(o.last())),h=o.getIterator();let g=h.getNext();return cf(e).Wt({index:"documentKeyIndex",range:u},(_,I,T)=>{const S=rt.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&cM(g,S)<0;)r(g,null),g=h.getNext();g&&g.isEqual(S)&&(r(g,I),g=h.hasNext()?h.getNext():null),g?T.Ut(bv(g)):T.done()}).next(()=>{for(;g;)r(g,null),g=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Ab(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cf(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let g=D();for(const _ of h){const I=this.$n(rt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(I.key,I)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=D();const h=lM(t,r),g=lM(t,Ns.max());return cf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,g,!0)},(_,I,T)=>{const S=this.$n(rt.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(S.key,S),u.size===o&&T.done()}).next(()=>u)}newChangeBuffer(e){return new UP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uM(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Fn(e,t){return uM(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function IP(n,e){let t;if(e.document)t=Rx(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),o=nf(e.noDocument.readTime);t=Bn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=rt.fromSegments(e.unknownDocument.path),o=nf(e.unknownDocument.version);t=Bn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new pr(r[0],r[1]);return Nt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return Bn.newInvalidDocument(e)}}class UP extends aM{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new E(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Fn((u,h)=>Zt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const g=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,g.readTime)),h.isValidDocument()){const _=Wx(this.Kn.M,h);o=o.add(u.path.popLast()),r+=Rb(_)-g.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=Wx(this.Kn.M,h.convertToNoDocument(Nt.min()));t.push(this.Kn.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),be.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function uM(n){return ci(n,"remoteDocumentGlobal")}function cf(n){return ci(n,"remoteDocumentsV14")}function bv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lM(n,e){const t=e.documentKey.path.toArray();return[n,Ab(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Zt(t[u],r[u]),o)return o;return o=Zt(t.length,r.length),o||(o=Zt(t[t.length-2],r[r.length-2]),o||Zt(t[t.length-1],r[r.length-1]))}class VP{constructor(e){this.M=e}kt(e,t,r,o){const u=new Tb("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ux,{unique:!0}),g.createObjectStore("documentMutations"),dM(e),function(g){g.createObjectStore("remoteDocuments")}(e));let h=be.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),dM(e)),h=h.next(()=>function(g){const _=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(g,_){return _.store("mutations").qt().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ux,{unique:!0});const T=_.store("mutations"),S=I.map(F=>T.put(F));return be.waitFor(S)})}(e,u))),h=h.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Qn(u))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(h=h.next(()=>this.Wn(u))),r<8&&o>=8&&(h=h.next(()=>this.zn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.Hn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:mP});_.createIndex("collectionPathOverlayIndex",yP,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",_P,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:sP});_.createIndex("documentKeyIndex",oP),_.createIndex("collectionGroupIndex",aP)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:hP}).createIndex("sequenceNumberIndex",fP,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:pP}).createIndex("documentKeyIndex",gP,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Rb(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>be.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(g=>be.forEach(g,_=>{kt(_.userId===u.userId);const I=$g(this.M,_);return nM(e,u.userId,I).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,g)=>{const _=new cn(h),I=[0,Gi(_)];u.push(t.get(I).next(T=>T?be.resolve():t.put({targetId:0,path:Gi(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>be.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:dP});const r=t.store("collectionParents"),o=new xT,u=h=>{if(o.add(h)){const g=h.lastSegment(),_=h.popLast();return r.put({collectionId:g,parent:Gi(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,g)=>{const _=new cn(h);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,g,_],I)=>{const T=Xa(g);return u(T.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=_v(o),h=Zx(this.M,u);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const g=t.store("remoteDocumentsV14"),_=(I=h,I.document?new rt(cn.fromString(I.document.name).popFirst(5)):I.noDocument?rt.fromSegments(I.noDocument.path):I.unknownDocument?rt.fromSegments(I.unknownDocument.path):ht()).path.toArray();var I;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(g.put(T))}).next(()=>be.waitFor(o))}}function dM(n){n.createObjectStore("targetDocuments",{keyPath:lP}).createIndex("documentTargetsIndex",cP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uP,{unique:!0}),n.createObjectStore("targetGlobal")}const PT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class NT{constructor(e,t,r,o,u,h,g,_,I,T,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=h,this.document=g,this.Xn=I,this.Zn=T,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!NT.vt())throw new $e(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FP(this,o),this.hs=t+"main",this.M=new zx(_),this.ls=new Xo(this.hs,this.ts,new VP(this.M)),this.fs=new PP(this.referenceDelegate,this.M),this.ds=new LP(this.M),this._s=new DP,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $e(_e.FAILED_PRECONDITION,PT);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new $i(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ee.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Xh(e))return Ye("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ye("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Iv(e).get("owner").next(t=>be.resolve(this.Ps(t)))}Vs(e){return Nb(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ci(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ds(u,18e5),g=u.filter(_=>-1===h.indexOf(_));return be.forEach(g,_=>o.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?be.resolve(!0):Iv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new $e(_e.FAILED_PRECONDITION,PT);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nb(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ye("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new qx(t,$i.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Nb(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return MT.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new RP(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return ST.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ye("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.ts)?EP:13===h?jx:12===h?vP:11===h?Bx:void ht();var h;let g;return this.ls.runTransaction(e,o,u,_=>(g=new qx(_,this.es?this.es.next():$i.A),"readwrite-primary"===t?this.Es(g).next(I=>!!I||this.As(g)).next(I=>{if(!I)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new $e(_e.FAILED_PRECONDITION,$x);return r(g)}).next(I=>this.bs(g).next(()=>I)):this.$s(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}$s(e){return Iv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $e(_e.FAILED_PRECONDITION,PT)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Iv(e).put("owner",t)}static vt(){return Xo.vt()}Rs(e){const t=Iv(e);return t.get("owner").next(r=>this.Ps(r)?(Ye("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):be.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ot.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ye("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Iv(n){return ci(n,"owner")}function Nb(n){return ci(n,"clientMetadata")}function OT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class BP{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return rt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Mg(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new rt(t)).next(r=>{let o=O();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=O();return this.indexManager.getCollectionParents(e,o).next(h=>be.forEach(h,g=>{const _=(I=t,T=g.child(o),new Qo(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,T;return this.zs(e,_,r).next(I=>{I.forEach((T,S)=>{u=u.insert(T,S)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const g of h.mutations){const _=g.key;let I=o.get(_);null==I&&(I=Bn.newInvalidDocument(_),o=o.insert(_,I)),Db(g,I,h.localWriteTime),I.isFoundDocument()||(o=o.remove(_))}}).next(()=>(o.forEach((u,h)=>{vb(t,h)||(o=o.remove(u))}),o))}}class kT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Re(),o=Re();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new kT(e,t.fromCache,r,o)}}class hM{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return be.resolve(null)}ei(e,t,r,o){return function lT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Nt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const h=this.si(t,u);return this.ii(t,h,r,o)?this.ni(e,t):(wc()<=Va.in.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Mc(t)),this.ri(e,h,t,db(o,-1)))})}si(e,t){let r=new Fn(dT(e));return t.forEach((o,u)=>{vb(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return wc()<=Va.in.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",Mc(t)),this.Zs.Qs(e,t,Ns.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}class jP{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new gr(Zt),this.ai=new E(u=>rl(u),il),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new BP(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function fM(n,e,t,r){return new jP(n,e,t,r)}function pM(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,Ee.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const h=[],g=[];let _=Re();for(const I of o){h.push(I.batchId);for(const T of I.mutations)_=_.add(T.key)}for(const I of u){g.push(I.batchId);for(const T of I.mutations)_=_.add(T.key)}return t.fi.Ks(r,_).next(I=>({di:I,removedBatchIds:h,addedBatchIds:g}))})})}),FT.apply(this,arguments)}function $P(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(h,g,_,I){const T=_.batch,S=T.keys();let F=be.resolve();return S.forEach(W=>{F=F.next(()=>I.getEntry(g,W)).next(te=>{const Me=_.docVersions.get(W);kt(null!==Me),te.version.compareTo(Me)<0&&(T.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),I.addEntry(te)))})}),F.next(()=>h.Bs.removeMutationBatch(g,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function gM(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function HP(n,e){const t=st(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const g=[];e.targetChanges.forEach((I,T)=>{const S=o.get(T);if(!S)return;g.push(t.fs.removeMatchingKeys(u,I.removedDocuments,T).next(()=>t.fs.addMatchingKeys(u,I.addedDocuments,T)));let F=S.withSequenceNumber(u.currentSequenceNumber);var W,te,Me;e.targetMismatches.has(T)?F=F.withResumeToken(ar.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):I.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(I.resumeToken,r)),o=o.insert(T,F),te=F,Me=I,(0===(W=S).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&g.push(t.fs.updateTargetData(u,F))});let _=D();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),g.push(mM(u,h,e.documentUpdates).next(I=>{_=I})),!r.isEqual(Nt.min())){const I=t.fs.getLastRemoteSnapshotVersion(u).next(T=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(I)}return be.waitFor(g).next(()=>h.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=o,u))}function mM(n,e,t){let r=Re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=D();return t.forEach((h,g)=>{const _=o.get(h);g.isNoDocument()&&g.version.isEqual(Nt.min())?(e.removeEntry(h,g.readTime),u=u.insert(h,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||0===g.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(g),u=u.insert(h,g)):Ye("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",g.version)}),u})}function GP(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function qg(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,be.resolve(o)):t.fs.allocateTargetId(r).next(h=>(o=new Pc(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function zg(n,e,t){return LT.apply(this,arguments)}function LT(){return LT=(0,Ee.Z)(function*(n,e,t){const r=st(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Xh(h))throw h;Ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),LT.apply(this,arguments)}function Ob(n,e,t){const r=st(n);let o=Nt.min(),u=Re();return r.persistence.runTransaction("Execute query","readonly",h=>function(g,_,I){const T=st(g),S=T.ai.get(I);return void 0!==S?be.resolve(T.ui.get(S)):T.fs.getTargetData(_,I)}(r,h,Ai(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,g.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(h,e,t?o:Nt.min(),t?u:Re())).next(g=>(vM(r,cT(e),g),{documents:g,_i:u})))}function yM(n,e){const t=st(n),r=st(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function _M(n,e){const t=st(n),r=t.ci.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,db(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(vM(t,e,o),o))}function vM(n,e,t){let r=Nt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function UT(){return UT=(0,Ee.Z)(function*(n,e,t,r){const o=st(n);let u=Re(),h=D();for(const I of t){const T=e.wi(I.metadata.name);I.document&&(u=u.add(T));const S=e.mi(I);S.setReadTime(e.gi(I.metadata.readTime)),h=h.insert(T,S)}const g=o.hi.newChangeBuffer({trackRemovals:!0}),_=yield qg(o,(I=r,Ai(xc(cn.fromString(`__bundle__/docs/${I}`)))));var I;return o.persistence.runTransaction("Apply bundle documents","readwrite",I=>mM(I,g,h).next(T=>(g.apply(I),T)).next(T=>o.fs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>o.fs.addMatchingKeys(I,u,_.targetId)).next(()=>o.fi.Gs(I,T)).next(()=>T)))}),UT.apply(this,arguments)}function zP(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,Ee.Z)(function*(n,e,t=Re()){const r=yield qg(n,Ai(TT(e.bundledQuery))),o=st(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=li(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o._s.saveNamedQuery(u,e);const g=r.withResumeToken(ar.EMPTY_BYTE_STRING,h);return o.ui=o.ui.insert(g.targetId,g),o.fs.updateTargetData(u,g).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),VT.apply(this,arguments)}class WP{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return be.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:li(r.createTime)}),be.resolve()}getNamedQuery(e,t){return be.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:TT(r.bundledQuery),readTime:li(r.readTime)}),be.resolve();var r}}class ZP{constructor(){this.overlays=new gr(rt.comparator),this.Ii=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),be.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),be.resolve()}getOverlaysForCollection(e,t,r){const o=G(),u=t.length+1,h=new rt(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const _=g.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return be.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new gr((I,T)=>I-T);const h=this.overlays.getIterator();for(;h.hasNext();){const I=h.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let T=u.get(I.largestBatchId);null===T&&(T=G(),u=u.insert(I.largestBatchId,T)),T.set(I.getKey(),I)}}const g=G(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,T)=>g.set(I,T)),!(g.size()>=o)););return be.resolve(g)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new CT(t,r));let u=this.Ii.get(t);void 0===u&&(u=Re(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class BT{constructor(){this.Ti=new Fn(di.Ei),this.Ai=new Fn(di.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new di(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new di(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new rt(new cn([])),r=new di(t,e),o=new di(t,e+1),u=[];return this.Ai.forEachInRange([r,o],h=>{this.Pi(h),u.push(h.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new rt(new cn([])),r=new di(t,e),o=new di(t,e+1);let u=Re();return this.Ai.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new di(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return rt.comparator(e.key,t.key)||Zt(e.Ci,t.Ci)}static Ri(e,t){return Zt(e.Ci,t.Ci)||rt.comparator(e.key,t.key)}}class KP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Fn(di.Ei)}checkEmpty(e){return be.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const h=new IT(u,t,r,o);this.Bs.push(h);for(const g of o)this.Ni=this.Ni.add(new di(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return be.resolve(h)}lookupMutationBatch(e,t){return be.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return be.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return be.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),o=new di(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],h=>{const g=this.ki(h.Ci);u.push(g)}),be.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Zt);return t.forEach(o=>{const u=new di(o,0),h=new di(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,h],g=>{r=r.add(g.Ci)})}),be.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const h=new di(new rt(u),0);let g=new Fn(Zt);return this.Ni.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===o&&(g=g.add(_.Ci)),!0)},h),be.resolve(this.Oi(g))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){kt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return be.forEach(t.mutations,o=>{const u=new di(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new di(t,0),o=this.Ni.firstAfterOrEqual(r);return be.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return be.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class YP{constructor(e){this.$i=e,this.docs=new gr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return be.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=D();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Bn.newInvalidDocument(o))}),be.resolve(r)}getAllFromCollection(e,t,r){let o=D();const u=new rt(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:g,value:{document:_}}=h.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||hb(Ex(_),r)<=0||(o=o.insert(_.key,_.mutableCopy()))}return be.resolve(o)}getAllFromCollectionGroup(e,t,r,o){ht()}Bi(e,t){return be.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new QP(this)}getSize(e){return be.resolve(this.size)}}class QP extends aM{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),be.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class JP{constructor(e){this.persistence=e,this.Li=new E(t=>rl(t),il),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new BT,this.targetCount=0,this.Ki=uf.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),be.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new uf(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Tn(t),be.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((h,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Li.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),be.waitFor(u).next(()=>o)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return be.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),be.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),be.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),be.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return be.resolve(r)}containsKey(e,t){return be.resolve(this.qi.containsKey(t))}}class XP{constructor(e,t){this.Gi={},this.overlays={},this.es=new $i(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new JP(this),this.indexManager=new MP,this.ds=new YP(r=>this.referenceDelegate.Qi(r)),this.M=new zx(t),this._s=new WP(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new KP(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ye("MemoryPersistence","Starting transaction:",e);const o=new eN(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return be.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class eN extends Hx{constructor(e){super(),this.currentSequenceNumber=e}}class jT{constructor(e){this.persistence=e,this.Hi=new BT,this.Ji=null}static Yi(e){return new jT(e)}get Xi(){if(this.Ji)return this.Ji;throw ht()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),be.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),be.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Xi,r=>{const o=rt.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,Nt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return be.or([()=>be.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function EM(n,e){return`firestore_clients_${n}_${e}`}function wM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $T(n,e){return`firestore_targets_${n}_${e}`}class kb{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new $e(o.error.code,o.error.message))),h?new kb(e,t,o.state,u):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new $e(r.error.code,r.error.message))),u?new Dv(e,r.state,o):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=ct();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=rb(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new Fb(e,u):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class HT{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new HT(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class GT{constructor(){this.activeTargetIds=ct()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qT{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new gr(Zt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=EM(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new GT),this.dr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(EM(e.persistenceKey,o));if(u){const h=Fb.tr(o,u);h&&(e.ar=e.ar.insert(h.clientId,h))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($T(this.persistenceKey,e));if(r){const o=Dv.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($T(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ye("SharedClientState","READ",e,t),t}setItem(e,t){Ye("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ye("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ye("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let h=$i.A;if(null!=u)try{const g=JSON.parse(u);kt("number"==typeof g),h=g}catch(g){fr("SharedClientState","Failed to read sequence number from WebStorage",g)}return h}(r.newValue);o!==$i.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new kb(this.currentUser,e,t,r),u=wM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=wM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=$T(this.persistenceKey,e),u=new Dv(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Fb.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return kb.tr(new Ar(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Dv.tr(o,t)}pr(e){return HT.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ye("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),h=[],g=[];return u.forEach(_=>{o.has(_)||h.push(_)}),o.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Lr(h,g).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=ct();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class bM{constructor(){this.Ur=new GT,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new GT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tN{Kr(e){}shutdown(){}}class IM{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const nN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class rN{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class iN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const h=this.ho(e,t);Ye("RestConnection","Sending: ",h,r);const g={};return this.lo(g,o,u),this.fo(e,h,g,r).then(_=>(Ye("RestConnection","Received: ",_),_),_=>{throw Vh("RestConnection",`${e} failed with error: `,_,"url: ",h,"request:",r),_})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${nN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,h)=>{const g=new WC;g.listenOnce(Lh.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case zw.NO_ERROR:const I=g.getResponseJson();Ye("Connection","XHR received:",JSON.stringify(I)),u(I);break;case zw.TIMEOUT:Ye("Connection",'RPC "'+e+'" timed out'),h(new $e(_e.DEADLINE_EXCEEDED,"Request time out"));break;case zw.HTTP_ERROR:const T=g.getStatus();if(Ye("Connection",'RPC "'+e+'" failed with status:',T,"response text:",g.getResponseText()),T>0){const S=g.getResponseJson().error;if(S&&S.status&&S.message){const F=function(W){const te=W.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(te)>=0?te:_e.UNKNOWN}(S.status);h(new $e(F,S.message))}else h(new $e(_e.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new $e(_e.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Ye("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(o);g.send(t,"POST",_,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=HC(),h=GC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new zC({})),this.lo(g.initMessageHeaders,t,r),(0,Ot.uI)()||(0,Ot.b$)()||(0,Ot.d)()||(0,Ot.w1)()||(0,Ot.Mn)()||(0,Ot.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const _=o.join("");Ye("Connection","Creating WebChannel: "+_,g);const I=u.createWebChannel(_,g);let T=!1,S=!1;const F=new rN({Jr:te=>{S?Ye("Connection","Not sending because WebChannel is closed:",te):(T||(Ye("Connection","Opening WebChannel transport."),I.open(),T=!0),Ye("Connection","WebChannel sending:",te),I.send(te))},Yr:()=>I.close()}),W=(te,Me,je)=>{te.listen(Me,St=>{try{je(St)}catch(At){setTimeout(()=>{throw At},0)}})};return W(I,Uh.EventType.OPEN,()=>{S||Ye("Connection","WebChannel transport opened.")}),W(I,Uh.EventType.CLOSE,()=>{S||(S=!0,Ye("Connection","WebChannel transport closed"),F.ro())}),W(I,Uh.EventType.ERROR,te=>{S||(S=!0,Vh("Connection","WebChannel transport errored:",te),F.ro(new $e(_e.UNAVAILABLE,"The operation could not be completed")))}),W(I,Uh.EventType.MESSAGE,te=>{var Me;if(!S){const je=te.data[0];kt(!!je);const St=je,At=St.error||(null===(Me=St[0])||void 0===Me?void 0:Me.error);if(At){Ye("Connection","WebChannel received error:",At);const xt=At.status;let Et=function(un){const zr=l[un];if(void 0!==zr)return y(zr)}(xt),Kt=At.message;void 0===Et&&(Et=_e.INTERNAL,Kt="Unknown error status: "+xt+" with message "+At.message),S=!0,F.ro(new $e(Et,Kt)),I.close()}else Ye("Connection","WebChannel received:",je),F.oo(je)}}),W(h,qC.STAT_EVENT,te=>{te.stat===wg.PROXY?Ye("Connection","Detected buffering proxy"):te.stat===wg.NOPROXY&&Ye("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.io()},0),F}}function DM(){return"undefined"!=typeof window?window:null}function Lb(){return"undefined"!=typeof document?document:null}function Cv(n){return new hv(n,!0)}class zT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class CM{constructor(e,t,r,o,u,h,g,_){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new zT(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ee.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new $e(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sN extends CM{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function K1(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ht(),o=e.targetChange.targetIds||[],u=function(_,I){return _.N?(kt(void 0===I||"string"==typeof I),ar.fromBase64String(I||"")):(kt(void 0===I||I instanceof Uint8Array),ar.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&function(_){const I=void 0===_.code?_e.UNKNOWN:y(_.code);return new $e(I,_.message||"")}(h);t=new Si(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Ja(n,r.document.name),u=li(r.document.updateTime),h=new Jr({mapValue:{fields:r.document.fields}}),g=Bn.newFoundDocument(o,u,h);t=new tn(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Ja(n,r.document),u=r.readTime?li(r.readTime):Nt.min(),h=Bn.newNoDocument(o,u);t=new tn([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Ja(n,r.document);t=new tn([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ht();{const r=e.filter,u=new a(r.count||0);t=new mn(r.targetId,u)}}var _;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Nt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Nt.min():u.readTime?li(u.readTime):Nt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=gv(this.M),t.addTarget=function(o,u){let h;const g=u.target;return h=Sc(g)?{documents:Px(o,g)}:{query:Nx(o,g)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=Vg(o,u.resumeToken):u.snapshotVersion.compareTo(Nt.min())>0&&(h.readTime=ll(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function Q1(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=gv(this.M),t.removeTarget=e,this.Lo(t)}}class oN extends CM{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Y1(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,o){let u=li(r.updateTime?r.updateTime:o);return u.isEqual(Nt.min())&&(u=li(o)),new Dx(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.tu(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=gv(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>mv(this.M,r))};this.Lo(t)}}class aN extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $e(_e.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $e(_e.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class uN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(fr(t),this.uu=!1):Ye("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class lN{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(g=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;kc(h)&&(Ye("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(I){const T=st(I);T.wu.add(4),yield Wg(T),T.yu.set("Unknown"),T.wu.delete(4),yield Tv(T)}),function(I){return _.apply(this,arguments)})(h))}))}),this.yu=new uN(r,o)}}function Tv(n){return WT.apply(this,arguments)}function WT(){return WT=(0,Ee.Z)(function*(n){if(kc(n))for(const e of n.mu)yield e(!0)}),WT.apply(this,arguments)}function Wg(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Ee.Z)(function*(n){for(const e of n.mu)yield e(!1)}),ZT.apply(this,arguments)}function Ub(n,e){const t=st(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),QT(t)?YT(t):Kg(t).Mo()&&KT(t,e))}function Av(n,e){const t=st(n),r=Kg(t);t._u.delete(e),r.Mo()&&TM(t,e),0===t._u.size&&(r.Mo()?r.$o():kc(t)&&t.yu.set("Unknown"))}function KT(n,e){n.pu.Z(e.targetId),Kg(n).Ho(e)}function TM(n,e){n.pu.Z(e),Kg(n).Jo(e)}function YT(n){n.pu=new lv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Kg(n).start(),n.yu.au()}function QT(n){return kc(n)&&!Kg(n).ko()&&n._u.size>0}function kc(n){return 0===st(n).wu.size}function AM(n){n.pu=void 0}function cN(n){return JT.apply(this,arguments)}function JT(){return JT=(0,Ee.Z)(function*(n){n._u.forEach((e,t)=>{KT(n,e)})}),JT.apply(this,arguments)}function dN(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,Ee.Z)(function*(n,e){AM(n),QT(n)?(n.yu.lu(e),YT(n)):n.yu.set("Unknown")}),XT.apply(this,arguments)}function hN(n,e,t){return eA.apply(this,arguments)}function eA(){return eA=(0,Ee.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Si&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(o,u){const h=u.cause;for(const g of u.targetIds)o._u.has(g)&&(yield o.remoteSyncer.rejectListen(g,h),o._u.delete(g),o.pu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Vb(n,r)}else if(e instanceof tn?n.pu.ut(e):e instanceof mn?n.pu._t(e):n.pu.ht(e),!t.isEqual(Nt.min()))try{const r=yield gM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.pu.yt(u);return h.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const I=o._u.get(_);I&&o._u.set(_,I.withResumeToken(g.resumeToken,u))}}),h.targetMismatches.forEach(g=>{const _=o._u.get(g);if(!_)return;o._u.set(g,_.withResumeToken(ar.EMPTY_BYTE_STRING,_.snapshotVersion)),TM(o,g);const I=new Pc(_.target,g,1,_.sequenceNumber);KT(o,I)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Ye("RemoteStore","Failed to raise snapshot:",r),yield Vb(n,r)}var r}),eA.apply(this,arguments)}function Vb(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,Ee.Z)(function*(n,e,t){if(!Xh(e))throw e;n.wu.add(1),yield Wg(n),n.yu.set("Offline"),t||(t=()=>gM(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ye("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Tv(n)}))}),tA.apply(this,arguments)}function SM(n,e){return e().catch(t=>Vb(n,t,e))}function Zg(n){return nA.apply(this,arguments)}function nA(){return nA=(0,Ee.Z)(function*(n){const e=st(n),t=Fc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;fN(e);)try{const o=yield GP(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,pN(e,o)}catch(o){yield Vb(e,o)}xM(e)&&MM(e)}),nA.apply(this,arguments)}function fN(n){return kc(n)&&n.du.length<10}function pN(n,e){n.du.push(e);const t=Fc(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function xM(n){return kc(n)&&!Fc(n).ko()&&n.du.length>0}function MM(n){Fc(n).start()}function gN(n){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n){Fc(n).nu()}),rA.apply(this,arguments)}function mN(n){return iA.apply(this,arguments)}function iA(){return iA=(0,Ee.Z)(function*(n){const e=Fc(n);for(const t of n.du)e.Zo(t.mutations)}),iA.apply(this,arguments)}function yN(n,e,t){return sA.apply(this,arguments)}function sA(){return sA=(0,Ee.Z)(function*(n,e,t){const r=n.du.shift(),o=DT.from(r,e,t);yield SM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Zg(n)}),sA.apply(this,arguments)}function _N(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,Ee.Z)(function*(n,e){var t;e&&Fc(n).Xo&&(yield(t=(0,Ee.Z)(function*(r,o){if(f(u=o.code)&&u!==_e.ABORTED){const h=r.du.shift();Fc(r).Fo(),yield SM(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Zg(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),xM(n)&&MM(n)}),oA.apply(this,arguments)}function RM(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,Ee.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ye("RemoteStore","RemoteStore received new credentials");const r=kc(t);t.wu.add(3),yield Wg(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Tv(t)}),aA.apply(this,arguments)}function uA(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,Ee.Z)(function*(n,e){const t=st(n);e?(t.wu.delete(2),yield Tv(t)):e||(t.wu.add(2),yield Wg(t),t.yu.set("Unknown"))}),lA.apply(this,arguments)}function Kg(n){return n.Iu||(n.Iu=function(e,t,r){const o=st(e);return o.iu(),new sN(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:cN.bind(null,n),eo:dN.bind(null,n),zo:hN.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Fo(),QT(n)?YT(n):n.yu.set("Unknown")):(yield n.Iu.stop(),AM(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Fc(n){return n.Tu||(n.Tu=function(e,t,r){const o=st(e);return o.iu(),new oN(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:gN.bind(null,n),eo:_N.bind(null,n),eu:mN.bind(null,n),tu:yN.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),yield Zg(n)):(yield n.Tu.stop(),n.du.length>0&&(Ye("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class cA{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,g=new cA(e,t,h,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $e(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(n,e){if(fr("AsyncQueue",`${e}: ${n}`),Xh(n))return new $e(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class Qg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=O(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new Qg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class PM{constructor(){this.Eu=new gr(rt.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ht():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jg{constructor(e,t,r,o,u,h,g,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Jg(e,t,Qg.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ol(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class vN{constructor(){this.Ru=void 0,this.listeners=[]}}class EN{constructor(){this.queries=new E(e=>Rg(e),ol),this.onlineState="Unknown",this.bu=new Set}}function dA(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,Ee.Z)(function*(n,e){const t=st(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new vN),o)try{u.Ru=yield t.onListen(r)}catch(h){const g=Yg(h,`Initialization of query '${Mc(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&gA(t)}),hA.apply(this,arguments)}function fA(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,Ee.Z)(function*(n,e){const t=st(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),pA.apply(this,arguments)}function wN(n,e){const t=st(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const g of h.listeners)g.Vu(o)&&(r=!0);h.Ru=o}}r&&gA(t)}function bN(n,e,t){const r=st(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function gA(n){n.bu.forEach(e=>{e.next()})}class mA{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Jg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Jg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class IN{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class NM{constructor(e){this.M=e}wi(e){return Ja(this.M,e)}mi(e){return e.metadata.exists?Rx(this.M,e.document,!1):Bn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return li(e)}}class DN{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=OM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new NM(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const h of o.metadata.queries){const g=(t.get(h)||Re()).add(u);t.set(h,g)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function qP(n,e,t,r){return UT.apply(this,arguments)}(e.localStore,new NM(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield zP(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function OM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kM{constructor(e){this.key=e}}class FM{constructor(e){this.key=e}}class LM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Re(),this.mutatedKeys=Re(),this.Gu=dT(e),this.Qu=new Qg(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new PM,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,I="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,S)=>{const F=o.get(T),W=vb(this.query,S)?S:null,te=!!F&&this.mutatedKeys.has(F.key),Me=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let je=!1;F&&W?F.data.isEqual(W.data)?te!==Me&&(r.track({type:3,doc:W}),je=!0):this.Hu(F,W)||(r.track({type:2,doc:W}),je=!0,(_&&this.Gu(W,_)>0||I&&this.Gu(W,I)<0)&&(g=!0)):!F&&W?(r.track({type:0,doc:W}),je=!0):F&&!W&&(r.track({type:1,doc:F}),je=!0,(_||I)&&(g=!0)),je&&(W?(h=h.add(W),u=Me?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const T="F"===this.query.limitType?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:h,zu:r,ii:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((I,T)=>function(S,F){const W=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return W(S)-W(F)}(I.type,T.type)||this.Gu(I.doc,T.doc)),this.Ju(r);const h=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.qu;return this.qu=g,0!==u.length||_?{snapshot:new Jg(this.query,e.Qu,o,u,e.mutatedKeys,0===g,_,!1),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new PM,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Re(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new FM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new kM(r))}),t}ta(e){this.Uu=e._i,this.Ku=Re();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Jg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class CN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TN{constructor(e){this.key=e,this.na=!1}}class AN{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.sa={},this.ia=new E(g=>Rg(g),ol),this.ra=new Map,this.oa=new Set,this.ua=new gr(rt.comparator),this.aa=new Map,this.ca=new BT,this.ha={},this.la=new Map,this.fa=uf.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function SN(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Ee.Z)(function*(n,e){const t=BA(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const h=yield qg(t.localStore,Ai(e));t.isPrimaryClient&&Ub(t.remoteStore,h);const g=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield _A(t,e,r,"current"===g)}return o}),yA.apply(this,arguments)}function _A(n,e,t,r){return vA.apply(this,arguments)}function vA(){return vA=(0,Ee.Z)(function*(n,e,t,r){n._a=(T,S,F)=>{return(W=(0,Ee.Z)(function*(te,Me,je,St){let At=Me.view.Wu(je);At.ii&&(At=yield Ob(te.localStore,Me.query,!1).then(({documents:Kt})=>Me.view.Wu(Kt,At)));const xt=St&&St.targetChanges.get(Me.targetId),Et=Me.view.applyChanges(At,te.isPrimaryClient,xt);return xA(te,Me.targetId,Et.Xu),Et.snapshot}),function(te,Me,je,St){return W.apply(this,arguments)})(n,T,S,F);var W};const o=yield Ob(n.localStore,e,!0),u=new LM(e,o._i),h=u.Wu(o.documents),g=bt.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(h,n.isPrimaryClient,g);xA(n,t,_.Xu);const I=new CN(e,t,u);return n.ia.set(e,I),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),vA.apply(this,arguments)}function xN(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,Ee.Z)(function*(n,e){const t=st(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!ol(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zg(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Av(t.remoteStore,r.targetId),Xg(t,r.targetId)}).catch(lf))):(Xg(t,r.targetId),yield zg(t.localStore,r.targetId,!0))}),EA.apply(this,arguments)}function wA(){return wA=(0,Ee.Z)(function*(n,e,t){const r=jA(n);try{const o=yield function(u,h){const g=st(u),_=pr.now(),I=h.reduce((S,F)=>S.add(F.key),Re());let T;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>g.fi.Ks(S,I).next(F=>{T=F;const W=[];for(const te of h){const Me=Tx(te,T.get(te.key));null!=Me&&W.push(new Rc(te.key,Me,cb(Me.value.mapValue),Sr.exists(!0)))}return g.Bs.addMutationBatch(S,_,W,h)})).then(S=>(S.applyToLocalDocumentSet(T),{batchId:S.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,g){let _=u.ha[u.currentUser.toKey()];_||(_=new gr(Zt)),_=_.insert(h,g),u.ha[u.currentUser.toKey()]=_}(r,o.batchId,t),yield cl(r,o.changes),yield Zg(r.remoteStore)}catch(o){const u=Yg(o,"Failed to persist write");t.reject(u)}}),wA.apply(this,arguments)}function UM(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,Ee.Z)(function*(n,e){const t=st(n);try{const r=yield HP(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.aa.get(u);h&&(kt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.na=!0:o.modifiedDocuments.size>0?kt(h.na):o.removedDocuments.size>0&&(kt(h.na),h.na=!1))}),yield cl(t,r,e)}catch(r){yield lf(r)}}),bA.apply(this,arguments)}function VM(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,h)=>{const g=h.view.Pu(e);g.snapshot&&o.push(g.snapshot)}),function(u,h){const g=st(u);g.onlineState=h;let _=!1;g.queries.forEach((I,T)=>{for(const S of T.listeners)S.Pu(h)&&(_=!0)}),_&&gA(g)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RN(n,e,t){return IA.apply(this,arguments)}function IA(){return IA=(0,Ee.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let h=new gr(rt.comparator);h=h.insert(u,Bn.newNoDocument(u,Nt.min()));const g=Re().add(u),_=new Oe(Nt.min(),new Map,new Fn(Zt),h,g);yield UM(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),MA(r)}else yield zg(r.localStore,e,!1).then(()=>Xg(r,e,t)).catch(lf)}),IA.apply(this,arguments)}function PN(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,Ee.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const o=yield $P(t.localStore,e);SA(t,r,null),AA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cl(t,o)}catch(o){yield lf(o)}}),DA.apply(this,arguments)}function NN(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,Ee.Z)(function*(n,e,t){const r=st(n);try{const o=yield function(u,h){const g=st(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return g.Bs.lookupMutationBatch(_,h).next(T=>(kt(null!==T),I=T.keys(),g.Bs.removeMutationBatch(_,T))).next(()=>g.Bs.performConsistencyCheck(_)).next(()=>g.fi.Ks(_,I))})}(r.localStore,e);SA(r,e,t),AA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cl(r,o)}catch(o){yield lf(o)}}),CA.apply(this,arguments)}function TA(){return TA=(0,Ee.Z)(function*(n,e){const t=st(n);kc(t.remoteStore)||Ye("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=st(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>h.Bs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Yg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),TA.apply(this,arguments)}function AA(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function SA(n,e,t){const r=st(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Xg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||BM(n,r)})}function BM(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Av(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),MA(n))}function xA(n,e,t){for(const r of t)r instanceof kM?(n.ca.addReference(r.key,e),kN(n,r)):r instanceof FM?(Ye("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||BM(n,r.key)):ht()}function kN(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ye("SyncEngine","New document in limbo: "+t),n.oa.add(r),MA(n))}function MA(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new rt(cn.fromString(e)),r=n.fa.next();n.aa.set(r,new TN(t)),n.ua=n.ua.insert(t,r),Ub(n.remoteStore,new Pc(Ai(xc(t.path)),r,2,$i.A))}}function cl(n,e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,Ee.Z)(function*(n,e,t){const r=st(n),o=[],u=[],h=[];var g;r.ia.isEmpty()||(r.ia.forEach((g,_)=>{h.push(r._a(_,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I.fromCache?"not-current":"current"),o.push(I);const T=kT.Ys(_.targetId,I);u.push(T)}}))}),yield Promise.all(h),r.sa.zo(o),yield(g=(0,Ee.Z)(function*(_,I){const T=st(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>be.forEach(I,F=>be.forEach(F.Hs,W=>T.persistence.referenceDelegate.addReference(S,F.targetId,W)).next(()=>be.forEach(F.Js,W=>T.persistence.referenceDelegate.removeReference(S,F.targetId,W)))))}catch(S){if(!Xh(S))throw S;Ye("LocalStore","Failed to update sequence numbers: "+S)}for(const S of I){const F=S.targetId;if(!S.fromCache){const W=T.ui.get(F),Me=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);T.ui=T.ui.insert(F,Me)}}}),function(_,I){return g.apply(this,arguments)})(r.localStore,u))}),RA.apply(this,arguments)}function FN(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,Ee.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ye("SyncEngine","User change. New user:",e.toKey());const r=yield pM(t.localStore,e);t.currentUser=e,(o=t).la.forEach(h=>{h.forEach(g=>{g.reject(new $e(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cl(t,r.di)}var o}),PA.apply(this,arguments)}function LN(n,e){const t=st(n),r=t.aa.get(e);if(r&&r.na)return Re().add(r.key);{let o=Re();const u=t.ra.get(e);if(!u)return o;for(const h of u){const g=t.ia.get(h);o=o.unionWith(g.view.ju)}return o}}function UN(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,Ee.Z)(function*(n,e){const t=st(n),r=yield Ob(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&xA(t,e.targetId,o.Xu),o}),NA.apply(this,arguments)}function VN(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,Ee.Z)(function*(n,e){const t=st(n);return _M(t.localStore,e).then(r=>cl(t,r))}),OA.apply(this,arguments)}function BN(n,e,t,r){return kA.apply(this,arguments)}function kA(){return kA=(0,Ee.Z)(function*(n,e,t,r){const o=st(n),u=yield function(h,g){const _=st(h),I=st(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>I.fn(T,g).next(S=>S?_.fi.Ks(T,S):be.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Zg(o.remoteStore):"acknowledged"===t||"rejected"===t?(SA(o,e,r||null),AA(o,e),g=e,st(st(o.localStore).Bs)._n(g)):ht(),yield cl(o,u)):Ye("SyncEngine","Cannot apply mutation batch with id: "+e)}),kA.apply(this,arguments)}function FA(){return FA=(0,Ee.Z)(function*(n,e){const t=st(n);if(BA(t),jA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield jM(t,r.toArray());t.da=!0,yield uA(t.remoteStore,!0);for(const u of o)Ub(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Xg(t,h),zg(t.localStore,h,!0))),Av(t.remoteStore,h)}),yield o,yield jM(t,r),function(u){const h=st(u);h.aa.forEach((g,_)=>{Av(h.remoteStore,_)}),h.ca.Si(),h.aa=new Map,h.ua=new gr(rt.comparator)}(t),t.da=!1,yield uA(t.remoteStore,!1)}}),FA.apply(this,arguments)}function jM(n,e,t){return LA.apply(this,arguments)}function LA(){return LA=(0,Ee.Z)(function*(n,e,t){const r=st(n),o=[],u=[];for(const h of e){let g;const _=r.ra.get(h);if(_&&0!==_.length){g=yield qg(r.localStore,Ai(_[0]));for(const I of _){const T=r.ia.get(I),S=yield UN(r,T);S.snapshot&&u.push(S.snapshot)}}else{const I=yield yM(r.localStore,h);g=yield qg(r.localStore,I),yield _A(r,$M(I),h,!1)}o.push(g)}return r.sa.zo(u),o}),LA.apply(this,arguments)}function $M(n){return Kh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $N(n){const e=st(n);return st(st(e.localStore).persistence).Fs()}function HN(n,e,t,r){return UA.apply(this,arguments)}function UA(){return UA=(0,Ee.Z)(function*(n,e,t,r){const o=st(n);if(o.da)return void Ye("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield _M(o.localStore,cT(u[0])),g=Oe.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield cl(o,h,g);break}case"rejected":yield zg(o.localStore,e,!0),Xg(o,e,r);break;default:ht()}}),UA.apply(this,arguments)}function GN(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,Ee.Z)(function*(n,e,t){const r=BA(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ye("SyncEngine","Adding an already active target "+o);continue}const u=yield yM(r.localStore,o),h=yield qg(r.localStore,u);yield _A(r,$M(u),h.targetId,!1),Ub(r.remoteStore,h)}for(const o of t)r.ra.has(o)&&(yield zg(r.localStore,o,!1).then(()=>{Av(r.remoteStore,o),Xg(r,o)}).catch(lf))}}),VA.apply(this,arguments)}function BA(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RN.bind(null,e),e.sa.zo=wN.bind(null,e.eventManager),e.sa.wa=bN.bind(null,e.eventManager),e}function jA(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NN.bind(null,e),e}class HM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=Cv(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return fM(this.persistence,new hM,e.initialUser,this.M)}ya(e){return new XP(jT.Yi,this.M)}ga(e){return new bM}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GM extends HM{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield jA(r.Ta.syncEngine),yield Zg(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return fM(this.persistence,new hM,e.initialUser,this.M)}pa(e){return new OP(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=OT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?as.withCacheSize(this.cacheSizeBytes):as.DEFAULT;return new NT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DM(),Lb(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new bM}}class zN extends GM{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof qT&&(r.sharedClientState.syncEngine={$r:BN.bind(null,o),Br:HN.bind(null,o),Lr:GN.bind(null,o),Fs:$N.bind(null,o),Fr:VN.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ee.Z)(function*(h){yield function jN(n,e){return FA.apply(this,arguments)}(r.Ta.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}ga(e){const t=DM();if(!qT.vt(t))throw new $e(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $A{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>VM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=FN.bind(null,r.syncEngine),yield uA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new EN}createDatastore(e){const t=Cv(e.databaseInfo.databaseId),r=new iN(e.databaseInfo);return new aN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>VM(this.syncEngine,g,0),h=IM.vt()?new IM:new tN,new lN(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,g,_,I){const T=new AN(r,o,u,h,g,_);return I&&(T.da=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=st(t);Ye("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Wg(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function qM(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Bb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class WN{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new $r,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new IN(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ee.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ZN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new $e(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ee.Z)(function*(u,h){const g=st(u),_=gv(g.M)+"/documents",I={documents:h.map(W=>pv(g.M,W))},T=yield g._o("BatchGetDocuments",_,I),S=new Map;T.forEach(W=>{const te=function Z1(n,e){return"found"in e?function(t,r){kt(!!r.found);const o=Ja(t,r.found.name),u=li(r.found.updateTime),h=new Jr({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const o=Ja(t,r.missing),u=li(r.readTime);return Bn.newNoDocument(o,u)}(n,e):ht()}(g.M,W);S.set(te.key.toString(),te)});const F=[];return h.forEach(W=>{const te=S.get(W.toString());kt(!!te),F.push(te)}),F}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new i(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=rt.fromPath(o);e.mutations.push(new s(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(o,u){const h=st(o),g=gv(h.M)+"/documents",_={writes:u.map(I=>mv(h.M,I))};yield h.co("Commit",g,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new $e(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Sr.updateTime(t):Sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new $e(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sr.updateTime(t)}return Sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class KN{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new zT(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ee.Z)(function*(){const t=new ZN(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Ic(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!f(t)}return!1}}class YN{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ar.UNAUTHENTICATED,this.clientId=tv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,Ee.Z)(function*(g){Ye("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Ye("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Yg(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function zM(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ye("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield pM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),HA.apply(this,arguments)}function WM(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qA(n);Ye("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>RM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>RM(e.remoteStore,u)),n.onlineComponents=e}),GA.apply(this,arguments)}function qA(n){return zA.apply(this,arguments)}function zA(){return zA=(0,Ee.Z)(function*(n){return n.offlineComponents||(Ye("FirestoreClient","Using default OfflineComponentProvider"),yield zM(n,new HM)),n.offlineComponents}),zA.apply(this,arguments)}function jb(n){return WA.apply(this,arguments)}function WA(){return WA=(0,Ee.Z)(function*(n){return n.onlineComponents||(Ye("FirestoreClient","Using default OnlineComponentProvider"),yield WM(n,new $A)),n.onlineComponents}),WA.apply(this,arguments)}function ZM(n){return qA(n).then(e=>e.persistence)}function ZA(n){return qA(n).then(e=>e.localStore)}function KM(n){return jb(n).then(e=>e.remoteStore)}function KA(n){return jb(n).then(e=>e.syncEngine)}function em(n){return YA.apply(this,arguments)}function YA(){return YA=(0,Ee.Z)(function*(n){const e=yield jb(n),t=e.eventManager;return t.onListen=SN.bind(null,e.syncEngine),t.onUnlisten=xN.bind(null,e.syncEngine),t}),YA.apply(this,arguments)}function YM(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,h,g,_){const I=new Bb({next:S=>{u.enqueueAndForget(()=>fA(o,T));const F=S.docs.has(h);!F&&S.fromCache?_.reject(new $e(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&S.fromCache&&g&&"server"===g.source?_.reject(new $e(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new mA(xc(h.path),I,{includeMetadataChanges:!0,ku:!0});return dA(o,T)}(yield em(n),n.asyncQueue,e,t,r)})),r.promise}function QM(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,h,g,_){const I=new Bb({next:S=>{u.enqueueAndForget(()=>fA(o,T)),S.fromCache&&"server"===g.source?_.reject(new $e(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new mA(h,I,{includeMetadataChanges:!0,ku:!0});return dA(o,T)}(yield em(n),n.asyncQueue,e,t,r)})),r.promise}const JM=new Map;function QA(n,e,t){if(!t)throw new $e(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XM(n,e,t,r){if(!0===e&&!0===r)throw new $e(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eR(n){if(!rt.isDocumentKey(n))throw new $e(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tR(n){if(rt.isDocumentKey(n))throw new $e(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $b(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $e(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$b(n);throw new $e(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nR(n,e){if(e<=0)throw new $e(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class rR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new $e(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $e(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,XM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rR({}),this._settingsFrozen=!1,e instanceof Ko?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new $e(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(o.options.projectId)}(e))}get app(){if(!this._app)throw new $e(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $e(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Kw;switch(t.type){case"gapi":const r=t.client;return kt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Jw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new $e(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JM.get(e);t&&(Ye("ComponentProvider","Removing Datastore"),JM.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class eu extends xi{constructor(e,t,r){super(e,t,xc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new rt(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function iR(n,e,...t){if(n=(0,Ot.m9)(n),QA("collection","path",e),n instanceof Sv){const r=cn.fromString(e,...t);return tR(r),new eu(n,null,r)}{if(!(n instanceof Jn||n instanceof eu))throw new $e(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return tR(r),new eu(n.firestore,null,r)}}function Hb(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=tv.R()),QA("doc","path",e),n instanceof Sv){const r=cn.fromString(e,...t);return eR(r),new Jn(n,null,new rt(r))}{if(!(n instanceof Jn||n instanceof eu))throw new $e(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return eR(r),new Jn(n.firestore,n instanceof eu?n.converter:null,new rt(r))}}function sR(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof Jn||n instanceof eu)&&(e instanceof Jn||e instanceof eu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oR(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof xi&&e instanceof xi&&n.firestore===e.firestore&&ol(n._query,e._query)&&n.converter===e.converter}class aO{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new zT(this,"async_queue_retry"),this.Qa=()=>{const t=Lb();t&&Ye("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Lb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Lb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new $r;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Xh(t))throw t;Ye("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,fr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=cA.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&ht()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function JA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class uO{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends Sv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new aO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||aR(this),this._firestoreClient.terminate()}}function cO(n=(0,Bi.getApp)()){return(0,Bi._getProvider)(n,"firestore").getImmediate()}function qr(n){return n._firestoreClient||aR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function aR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nb(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new YN(n._authCredentials,n._appCheckCredentials,n._queue,r)}function uR(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield zM(n,t),yield WM(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===_e.FAILED_PRECONDITION||u.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function lR(n){if(n._initialized||n._terminated)throw new $e(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $e(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tu(ar.fromBase64String(e))}catch(t){throw new $e(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tu(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class df{constructor(e){this._methodName=e}}class Gb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $e(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $e(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const vO=/^__.*__$/;class EO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jh(e,this.data,t,this.fieldTransforms)}}class cR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class qb{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new qb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Zb(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(dR(this.ec)&&vO.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class wO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Cv(e)}lc(e,t,r,o=!1){return new qb({ec:e,methodName:t,hc:r,path:Hr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function hf(n){const e=n._freezeSettings(),t=Cv(n._databaseId);return new wO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zb(n,e,t,r,o,u={}){const h=n.lc(u.merge||u.mergeFields?2:0,e,t,o);nS("Data must be an object, but it was:",h,r);const g=pR(r,h);let _,I;if(u.merge)_=new Bh(h.fieldMask),I=h.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const F=rS(e,S,t);if(!h.contains(F))throw new $e(_e.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);mR(T,F)||T.push(F)}_=new Bh(T),I=h.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,I=h.fieldTransforms;return new EO(new Jr(g),_,I)}class xv extends df{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xv}}function hR(n,e,t){return new qb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class XA extends df{_toFieldTransform(e){return new Qh(e.path,new al)}isEqual(e){return e instanceof XA}}class bO extends df{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=hR(this,e,!0),r=this.fc.map(u=>ff(u,t)),o=new ul(r);return new Qh(e.path,o)}isEqual(e){return this===e}}class IO extends df{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=hR(this,e,!0),r=this.fc.map(u=>ff(u,t)),o=new Ya(r);return new Qh(e.path,o)}isEqual(e){return this===e}}class DO extends df{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Yh(e.M,wb(e.M,this.dc));return new Qh(e.path,t)}isEqual(e){return this===e}}function eS(n,e,t,r){const o=n.lc(1,e,t);nS("Data must be an object, but it was:",o,r);const u=[],h=Jr.empty();bc(r,(_,I)=>{const T=Wb(e,_,t);I=(0,Ot.m9)(I);const S=o.oc(T);if(I instanceof xv)u.push(T);else{const F=ff(I,S);null!=F&&(u.push(T),h.set(T,F))}});const g=new Bh(u);return new cR(h,g,o.fieldTransforms)}function tS(n,e,t,r,o,u){const h=n.lc(1,e,t),g=[rS(e,r,t)],_=[o];if(u.length%2!=0)throw new $e(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)g.push(rS(e,u[F])),_.push(u[F+1]);const I=[],T=Jr.empty();for(let F=g.length-1;F>=0;--F)if(!mR(I,g[F])){const W=g[F];let te=_[F];te=(0,Ot.m9)(te);const Me=h.oc(W);if(te instanceof xv)I.push(W);else{const je=ff(te,Me);null!=je&&(I.push(W),T.set(W,je))}}const S=new Bh(I);return new cR(T,S,h.fieldTransforms)}function fR(n,e,t,r=!1){return ff(t,n.lc(r?4:3,e))}function ff(n,e){if(gR(n=(0,Ot.m9)(n)))return nS("Unsupported field value:",e,n),pR(n,e);if(n instanceof df)return function(t,r){if(!dR(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let g=ff(h,r.uc(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=pr.fromDate(t);return{timestampValue:ll(r.M,o)}}if(t instanceof pr){const o=new pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ll(r.M,o)}}if(t instanceof Gb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tu)return{bytesValue:Vg(r.M,t._byteString)};if(t instanceof Jn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${$b(t)}`)}(n,e)}function pR(n,e){const t={};return JC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bc(n,(r,o)=>{const u=ff(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function gR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pr||n instanceof Gb||n instanceof tu||n instanceof Jn||n instanceof df)}function nS(n,e,t){if(!gR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=$b(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function rS(n,e,t){if((e=(0,Ot.m9)(e))instanceof dl)return e._internalPath;if("string"==typeof e)return Wb(n,e);throw Zb("Field path arguments must be of type string or ",n,!1,void 0,t)}const CO=new RegExp("[~\\*/\\[\\]]");function Wb(n,e,t){if(e.search(CO)>=0)throw Zb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dl(...e.split("."))._internalPath}catch(r){throw Zb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zb(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||h)&&(_+=" (found",u&&(_+=` in field ${r}`),h&&(_+=` in document ${o}`),_+=")"),new $e(_e.INVALID_ARGUMENT,g+n+_)}function mR(n,e){return n.some(t=>t.isEqual(e))}class Mv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TO extends Mv{data(){return super.data()}}function Kb(n,e){return"string"==typeof e?Wb(n,e):e instanceof dl?e._internalPath:e._delegate._internalPath}class pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hl extends Mv{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Rv extends hl{data(e={}){return super.data(e)}}class Lc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new pf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rv(this._firestore,this._userDataWriter,r.key,r,new pf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $e(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Rv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new pf(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const g=new Rv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new pf(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==h.type&&(_=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),I=u.indexOf(h.doc.key)),{type:AO(h.type),doc:g,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function yR(n,e){return n instanceof hl&&e instanceof hl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lc&&e instanceof Lc&&n._firestore===e._firestore&&oR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function _R(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new $e(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pv{}function Uc(n,...e){for(const t of e)n=t._apply(n);return n}class SO extends Pv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=hf(e.firestore),r=function(o,u,h,g,_,I,T){let S;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new $e(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){DR(T,I);const W=[];for(const te of T)W.push(IR(g,o,te));S={arrayValue:{values:W}}}else S=IR(g,o,T)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||DR(T,I),S=fR(h,"where",T,"in"===I||"not-in"===I);const F=Gr.create(_,I,S);return function(W,te){if(te.S()){const je=Jo(W);if(null!==je&&!je.isEqual(te.field))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${je.toString()}' and '${te.field.toString()}'`);const St=xg(W);null!==St&&CR(0,te.field,St)}const Me=function(je,St){for(const At of je.filters)if(St.indexOf(At.op)>=0)return At.op;return null}(W,function(je){switch(je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Me)throw new $e(_e.INVALID_ARGUMENT,Me===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Me.toString()}' filters.`)}(o,F),F}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new xi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new Qo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class MO extends Pv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Zh(o,u);return function(g,_){if(null===xg(g)){const I=Jo(g);null!==I&&CR(0,I,_.field)}}(r,h),h}(e._query,this._c,this.gc);return new xi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Qo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class vR extends Pv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new xi(e.firestore,e.converter,_b(e._query,this.yc,this.Ic))}}class ER extends Pv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=bR(e,this.type,this.Tc,this.Ec);return new xi(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class wR extends Pv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=bR(e,this.type,this.Tc,this.Ec);return new xi(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function bR(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof Mv)return function(o,u,h,g,_){if(!g)throw new $e(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const I=[];for(const T of Ka(o))if(T.field.isKeyField())I.push(nl(u,g.key));else{const S=g.data.field(T.field);if(Dg(S))throw new $e(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const F=T.field.canonicalString();throw new $e(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}I.push(S)}return new sl(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=hf(n.firestore);return function(u,h,g,_,I,T){const S=u.explicitOrderBy;if(I.length>S.length)throw new $e(_e.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let W=0;W<I.length;W++){const te=I[W];if(S[W].field.isKeyField()){if("string"!=typeof te)throw new $e(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof te}`);if(!Mg(u)&&-1!==te.indexOf("/"))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${te}' contains a slash.`);const Me=u.path.child(cn.fromString(te));if(!rt.isDocumentKey(Me))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const je=new rt(Me);F.push(nl(h,je))}else{const Me=fR(g,_,te);F.push(Me)}}return new sl(F,T)}(n._query,n.firestore._databaseId,o,e,t,r)}}function IR(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mg(e)&&-1!==t.indexOf("/"))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!rt.isDocumentKey(r))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nl(n,new rt(r))}if(t instanceof Jn)return nl(n,t._key);throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$b(t)}.`)}function DR(n,e){if(!Array.isArray(n)||0===n.length)throw new $e(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new $e(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CR(n,e,t){if(!t.isEqual(e))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const UO={maxAttempts:5};class iS{convertValue(e,t="none"){switch(Dc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return bc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Gb(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=Zo(e);return new pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);kt(Fx(r));const o=new Ko(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(t)||fr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Yb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VO extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class TR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hf(e)}set(e,t,r){this._verifyNotCommitted();const o=Vc(e,this._firestore),u=Yb(o.converter,t,r),h=zb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Sr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Vc(e,this._firestore);let h;return h="string"==typeof(t=(0,Ot.m9)(t))||t instanceof dl?tS(this._dataReader,"WriteBatch.update",u._key,t,r,o):eS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vc(e,this._firestore);return this._mutations=this._mutations.concat(new i(t._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $e(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vc(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new $e(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gf extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function AR(n,e,t){n=dn(n,Jn);const r=dn(n.firestore,ur),o=Yb(n.converter,e,t);return tm(r,[zb(hf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Sr.none())])}function SR(n,e,t,...r){n=dn(n,Jn);const o=dn(n.firestore,ur),u=hf(o);let h;return h="string"==typeof(e=(0,Ot.m9)(e))||e instanceof dl?tS(u,"updateDoc",n._key,e,t,r):eS(u,"updateDoc",n._key,e),tm(o,[h.toMutation(n._key,Sr.exists(!0))])}function xR(n,...e){var t,r,o;n=(0,Ot.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||JA(e[h])||(u=e[h],h++);const g={includeMetadataChanges:u.includeMetadataChanges};if(JA(e[h])){const S=e[h];e[h]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[h+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[h+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let _,I,T;if(n instanceof Jn)I=dn(n.firestore,ur),T=xc(n._key.path),_={next:S=>{e[h]&&e[h](sS(I,n,S))},error:e[h+1],complete:e[h+2]};else{const S=dn(n,xi);I=dn(S.firestore,ur),T=S._query;const F=new gf(I);_={next:W=>{e[h]&&e[h](new Lc(I,F,S,W))},error:e[h+1],complete:e[h+2]},_R(n._query)}return function(S,F,W,te){const Me=new Bb(te),je=new mA(F,Me,W);return S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return dA(yield em(S),je)})),()=>{Me.Aa(),S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return fA(yield em(S),je)}))}}(qr(I),T,g,_)}function tm(n,e){return function(t,r){const o=new $r;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function MN(n,e,t){return wA.apply(this,arguments)}(yield KA(t),r,o)})),o.promise}(qr(n),e)}function sS(n,e,t){const r=t.docs.get(e._key),o=new gf(n);return new hl(n,o,e._key,r,new pf(t.hasPendingWrites,t.fromCache),e.converter)}class KO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hf(e)}get(e){const t=Vc(e,this._firestore),r=new VO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ht();const u=o[0];if(u.isFoundDocument())return new Mv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Mv(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const o=Vc(e,this._firestore),u=Yb(o.converter,t,r),h=zb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=Vc(e,this._firestore);let h;return h="string"==typeof(t=(0,Ot.m9)(t))||t instanceof dl?tS(this._dataReader,"Transaction.update",u._key,t,r,o):eS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=Vc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vc(e,this._firestore),r=new gf(this._firestore);return super.get(e).then(o=>new hl(this._firestore,r,t._key,o._document,new pf(!1,!1),t.converter))}}function oS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new $e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RR(){if("undefined"==typeof Uint8Array)throw new $e("unimplemented","Uint8Arrays are not available in this environment.")}function PR(){if(!function _x(){return"undefined"!=typeof atob}())throw new $e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xu=Bi.SDK_VERSION,(0,Bi._registerComponent)(new Ua.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new ur(o,new KC(t.getProvider("auth-internal")),new YC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Bi.registerVersion)(Ww,"3.4.9",n),(0,Bi.registerVersion)(Ww,"3.4.9","esm2017")}();class Nv{constructor(e){this._delegate=e}static fromBase64String(e){return PR(),new Nv(tu.fromBase64String(e))}static fromUint8Array(e){return RR(),new Nv(tu.fromUint8Array(e))}toBase64(){return PR(),this._delegate.toBase64()}toUint8Array(){return RR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function aS(n){return function ik(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class sk{enableIndexedDbPersistence(e,t){return function dO(n,e){lR(n=dn(n,ur));const t=qr(n),r=n._freezeSettings(),o=new $A;return uR(t,o,new GM(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hO(n){lR(n=dn(n,ur));const e=qr(n),t=n._freezeSettings(),r=new $A;return uR(e,r,new zN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fO(n){if(n._initialized&&!n._terminated)throw new $e(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Xo.vt())return Promise.resolve();const o=r+"main";yield Xo.delete(o)}),function(r){return t.apply(this,arguments)})(OT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class NR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ko||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function sO(n,e,t,r={}){var o;const u=(n=dn(n,Sv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Vh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,g;if("string"==typeof r.mockUserToken)h=r.mockUserToken,g=Ar.MOCK_USER;else{h=(0,Ot.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new $e(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ar(_)}n._authCredentials=new Yw(new Zw(h,g))}}(this._delegate,e,t,r)}enableNetwork(){return function gO(n){return function QN(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield ZM(n),t=yield KM(n);return e.setNetworkEnabled(!0),function(r){const o=st(r);return o.wu.delete(0),Tv(o)}(t)}))}(qr(n=dn(n,ur)))}(this._delegate)}disableNetwork(){return function mO(n){return function JN(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield ZM(n),t=yield KM(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(o){const u=st(o);u.wu.add(0),yield Wg(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(qr(n=dn(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pO(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function ON(n,e){return TA.apply(this,arguments)}(yield KA(e),t)})),t.promise}(qr(n=dn(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function ZO(n,e){return function tO(n,e){const t=new Bb(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield em(n),o=t,st(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield em(n),o=t,void st(r).bu.delete(o);var r,o}))}}(qr(n=dn(n,ur)),JA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new $e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nm(this,iR(this._delegate,e))}catch(t){throw qi(t,"collection()","Firestore.collection()")}}doc(e){try{return new lo(this,Hb(this._delegate,e))}catch(t){throw qi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zi(this,function oO(n,e){if(n=dn(n,Sv),QA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $e(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xi(n,null,(t=e,new Qo(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw qi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function YO(n,e,t){n=dn(n,ur);const r=Object.assign(Object.assign({},UO),t);return function(o){if(o.maxAttempts<1)throw new $e(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function nO(n,e,t){const r=new $r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const o=yield(u=n,jb(u).then(h=>h.datastore));var u;new KN(n.asyncQueue,o,t,e,r).run()})),r.promise}(qr(n),o=>e(new KO(n,o)),r)}(this._delegate,t=>e(new OR(this,t)))}batch(){return qr(this._delegate),new kR(new TR(this._delegate,e=>tm(this._delegate,e)))}loadBundle(e){return function yO(n,e){const t=qr(n=dn(n,ur)),r=new uO;return function rO(n,e,t,r){const o=function(u,h){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return qM(_,I);if(_ instanceof ArrayBuffer)return qM(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new WN(_,h);var _}(t,Cv(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function qN(n,e,t){const r=st(n);var o;(o=(0,Ee.Z)(function*(u,h,g){try{const _=yield h.getMetadata();if(yield function(F,W){const te=st(F),Me=li(W.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",je=>te._s.getBundleMetadata(je,W.id)).then(je=>!!je&&je.createTime.compareTo(Me)>=0)}(u.localStore,_))return yield h.close(),g._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);g._updateProgress(OM(_));const I=new DN(_,u.localStore,h.M);let T=yield h.ma();for(;T;){const F=yield I.Fu(T);F&&g._updateProgress(F),T=yield h.ma()}const S=yield I.complete();return yield cl(u,S.Lu,void 0),yield function(F,W){const te=st(F);return te.persistence.runTransaction("Save bundle","readwrite",Me=>te._s.saveBundleMetadata(Me,W))}(u.localStore,_),g._completeWith(S.progress),Promise.resolve(S.Bu)}catch(_){return Vh("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var F}),function(u,h,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield KA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _O(n,e){return function iO(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const o=st(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield ZA(n),e)}))}(qr(n=dn(n,ur)),e).then(t=>t?new xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zi(this,t):null)}}class Qb extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nv(new tu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return lo.forKey(t,this.firestore,null)}}class OR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Qb(e)}get(e){const t=yf(e);return this._delegate.get(t).then(r=>new Ov(this._firestore,new hl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=yf(e);return r?(oS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=yf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=yf(e);return this._delegate.delete(t),this}}class kR{constructor(e){this._delegate=e}set(e,t,r){const o=yf(e);return r?(oS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=yf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=yf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Rv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new mf(e,new Qb(e),t),o.set(t,u)),u}}mf.INSTANCES=new WeakMap;class lo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new $e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new lo(t,new Jn(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new lo(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new nm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nm(this.firestore,iR(this._delegate,e))}catch(t){throw qi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof Jn&&sR(this._delegate,e)}set(e,t){t=oS("DocumentReference.set",t);try{return t?AR(this._delegate,e,t):AR(this._delegate,e)}catch(r){throw qi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?SR(this._delegate,e):SR(this._delegate,e,t,...r)}catch(o){throw qi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function zO(n){return tm(dn(n.firestore,ur),[new i(n._key,Sr.none())])}(this._delegate)}onSnapshot(...e){const t=FR(e),r=LR(e,o=>new Ov(this.firestore,new hl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return xR(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jO(n){n=dn(n,Jn);const e=dn(n.firestore,ur),t=qr(e),r=new gf(e);return function XN(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,h){try{const g=yield function(_,I){const T=st(_);return T.persistence.runTransaction("read document","readonly",S=>T.fi.Ls(S,I))}(o,u);g.isFoundDocument()?h.resolve(g):g.isNoDocument()?h.resolve(null):h.reject(new $e(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Yg(g,`Failed to get document '${u} from cache`);h.reject(_)}}),function(o,u,h){return r.apply(this,arguments)})(yield ZA(n),e,t);var r})),t.promise}(t,n._key).then(o=>new hl(e,r,n._key,o,new pf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function $O(n){n=dn(n,Jn);const e=dn(n.firestore,ur);return YM(qr(e),n._key,{source:"server"}).then(t=>sS(e,n,t))}(this._delegate):function BO(n){n=dn(n,Jn);const e=dn(n.firestore,ur);return YM(qr(e),n._key).then(t=>sS(e,n,t))}(this._delegate),t.then(r=>new Ov(this.firestore,new hl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new lo(this.firestore,this._delegate.withConverter(e?mf.getInstance(this.firestore,e):null))}}function qi(n,e,t){return n.message=n.message.replace(e,t),n}function FR(n){for(const e of n)if("object"==typeof e&&!aS(e))return e;return{}}function LR(n,e){var t,r;let o;return o=aS(n[0])?n[0]:aS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Ov{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yR(this._delegate,e._delegate)}}class kv extends Ov{data(e){const t=this._delegate.data(e);return function ZC(n,e){n||ht()}(void 0!==t),t}}class zi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qb(e)}where(e,t,r){try{return new zi(this.firestore,Uc(this._delegate,function xO(n,e,t){const r=e,o=Kb("where",n);return new SO(o,r,t)}(e,t,r)))}catch(o){throw qi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zi(this.firestore,Uc(this._delegate,function RO(n,e="asc"){const t=e,r=Kb("orderBy",n);return new MO(r,t)}(e,t)))}catch(r){throw qi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zi(this.firestore,Uc(this._delegate,function PO(n){return nR("limit",n),new vR("limit",n,"F")}(e)))}catch(t){throw qi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zi(this.firestore,Uc(this._delegate,function NO(n){return nR("limitToLast",n),new vR("limitToLast",n,"L")}(e)))}catch(t){throw qi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zi(this.firestore,Uc(this._delegate,function OO(...n){return new ER("startAt",n,!0)}(...e)))}catch(t){throw qi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zi(this.firestore,Uc(this._delegate,function kO(...n){return new ER("startAfter",n,!1)}(...e)))}catch(t){throw qi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zi(this.firestore,Uc(this._delegate,function FO(...n){return new wR("endBefore",n,!1)}(...e)))}catch(t){throw qi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zi(this.firestore,Uc(this._delegate,function LO(...n){return new wR("endAt",n,!0)}(...e)))}catch(t){throw qi(t,"endAt()","Query.endAt()")}}isEqual(e){return oR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function GO(n){n=dn(n,xi);const e=dn(n.firestore,ur),t=qr(e),r=new gf(e);return function eO(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,h){try{const g=yield Ob(o,u,!0),_=new LM(u,g._i),I=_.Wu(g.documents),T=_.applyChanges(I,!1);h.resolve(T.snapshot)}catch(g){const _=Yg(g,`Failed to execute query '${u} against cache`);h.reject(_)}}),function(o,u,h){return r.apply(this,arguments)})(yield ZA(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Lc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function qO(n){n=dn(n,xi);const e=dn(n.firestore,ur),t=qr(e),r=new gf(e);return QM(t,n._query,{source:"server"}).then(o=>new Lc(e,r,n,o))}(this._delegate):function HO(n){n=dn(n,xi);const e=dn(n.firestore,ur),t=qr(e),r=new gf(e);return _R(n._query),QM(t,n._query).then(o=>new Lc(e,r,n,o))}(this._delegate),t.then(r=>new uS(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=FR(e),r=LR(e,o=>new uS(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return xR(this._delegate,t,r)}withConverter(e){return new zi(this.firestore,this._delegate.withConverter(e?mf.getInstance(this.firestore,e):null))}}class ak{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ak(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new kv(this._firestore,r))})}isEqual(e){return yR(this._delegate,e._delegate)}}class nm extends zi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new lo(this.firestore,e):null}doc(e){try{return new lo(this.firestore,void 0===e?Hb(this._delegate):Hb(this._delegate,e))}catch(t){throw qi(t,"doc()","CollectionReference.doc()")}}add(e){return function WO(n,e){const t=dn(n.firestore,ur),r=Hb(n),o=Yb(n.converter,e);return tm(t,[zb(hf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new lo(this.firestore,t))}isEqual(e){return sR(this._delegate,e._delegate)}withConverter(e){return new nm(this.firestore,this._delegate.withConverter(e?mf.getInstance(this.firestore,e):null))}}function yf(n){return dn(n,Jn)}class lS{constructor(...e){this._delegate=new dl(...e)}static documentId(){return new lS(Hr.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof dl&&this._delegate._internalPath.isEqual(e._internalPath)}}class _f{constructor(e){this._delegate=e}static serverTimestamp(){const e=function JO(){return new XA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _f(e)}static delete(){const e=function QO(){return new xv("deleteField")}();return e._methodName="FieldValue.delete",new _f(e)}static arrayUnion(...e){const t=function XO(...n){return new bO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _f(t)}static arrayRemove(...e){const t=function ek(...n){return new IO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _f(t)}static increment(e){const t=function tk(n){return new DO("increment",n)}(e);return t._methodName="FieldValue.increment",new _f(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uk={Firestore:NR,GeoPoint:Gb,Timestamp:pr,Blob:Nv,Transaction:OR,WriteBatch:kR,DocumentReference:lo,DocumentSnapshot:Ov,Query:zi,QueryDocumentSnapshot:kv,QuerySnapshot:uS,CollectionReference:nm,FieldPath:lS,FieldValue:_f,setLogLevel:function ok(n){!function ev(n){Wo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function UR(n,e){return function dk(n,e=JE.z){return new ms.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function cS(n,e){return UR(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function Jb(n,e){return cS(n,e).pipe(Rd(void 0),or(),(0,Tt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,g)=>{const _=o.find(T=>T.doc.ref.isEqual(h.ref)),I=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(h.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(h.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:h}})}),u}))}function VR(n,e,t){return Jb(n,t).pipe(Js((r,o)=>function fk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function pk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),u_(),(0,Tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function dS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function BR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function ck(n){(function lk(n,e){n.INTERNAL.registerComponent(new Ua.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},uk)))})(n,(e,t)=>new NR(e,t,new sk)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(XE.Z);class jR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Jb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Rd(void 0),or(),hr(([r,o])=>o.length>0||!r),(0,Tt.U)(([r,o])=>o),Gt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Js((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=BR(e);return VR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(e={}){return cS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Gt.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(Gt.iC)}add(e){return this.ref.add(e)}doc(e){return new $R(this.ref.doc(e),this.afs)}}class $R{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=qR(r,t);return new jR(o,u,this.afs)}snapshotChanges(){return function hk(n,e){return UR(n,e).pipe(Rd(void 0),or(),(0,Tt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(Gt.iC)}}class gk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Jb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),hr(t=>t.length>0),Gt.iC):Jb(this.query,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Js((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=BR(e);return VR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(e={}){return cS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Gt.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(Gt.iC)}}const HR=new c.OlP("angularfire2.enableFirestorePersistence"),GR=new c.OlP("angularfire2.firestore.persistenceSettings"),mk=new c.OlP("angularfire2.firestore.settings"),yk=new c.OlP("angularfire2.firestore.use-emulator");function qR(n,e=(t=>t)){return{query:e(n),ref:n}}let Xb=(()=>{class n{constructor(t,r,o,u,h,g,_,I,T,S,F,W,te,Me,je,St,At){this.schedulers=_;const xt=(0,wr.on)(t,g,r),Et=T;S&&a_(xt,g,F,te,Me,je,W,St),[this.firestore,this.persistenceEnabled$]=(0,wr.cc)(`${xt.name}.firestore`,"AngularFirestore",xt.name,()=>{const Kt=g.runOutsideAngular(()=>xt.firestore());if(u&&Kt.settings(u),Et&&Kt.useEmulator(...Et),o&&!rr(h)){const un=()=>{try{return(0,Tn.D)(Kt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(zr){return"undefined"!=typeof console&&console.warn(zr),wt(!1)}};return[Kt,g.runOutsideAngular(un)]}return[Kt,wt(!1)]},[u,Et,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=qR(o,r),g=this.schedulers.ngZone.run(()=>u);return new jR(g,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new gk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new $R(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wr.Dh),c.LFG(wr.xv,8),c.LFG(HR,8),c.LFG(mk,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Gt.HU),c.LFG(GR,8),c.LFG(yk,8),c.LFG(FE,8),c.LFG(t_,8),c.LFG(n_,8),c.LFG(r_,8),c.LFG(i_,8),c.LFG(s_,8),c.LFG(o_,8),c.LFG(ju,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_k=(()=>{class n{constructor(){$u.Z.registerVersion("angularfire",Gt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:HR,useValue:!0},{provide:GR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Xb]}),n})(),rm=(()=>{class n{constructor(t){this.db=t,this.storageRef=$u.Z.app().storage().ref()}uploadImage(t,r,o){var u=this;return(0,Ee.Z)(function*(){try{return yield(yield u.storageRef.child(t+"/"+r).putString(o,"data_url")).ref.getDownloadURL()}catch(h){return console.log(h),h}})()}alta(t,r){var o=this;return(0,Ee.Z)(function*(){try{return yield o.db.collection(r).add(t)}catch(u){return console.log("Error al realizar alta a Firebase: ",u),u}})()}baja(t,r){var o=this;return(0,Ee.Z)(function*(){try{return yield o.db.collection(r).doc(t).delete()}catch(u){return console.log("Error al realizar baja a Firebase: ",u),u}})()}getCollection(t){var r=this;return(0,Ee.Z)(function*(){try{return yield r.db.collection(t).snapshotChanges()}catch(o){return console.log("Error al obtener los objetos de Firebase: ",o),o}})()}getCollectionByField(t,r,o,u){var h=this;return(0,Ee.Z)(function*(){try{return yield h.db.collection(t,g=>g.where(o,r,u)).valueChanges()}catch(g){return g}})()}getDocById(t,r){var o=this;return(0,Ee.Z)(function*(){try{return yield o.db.collection(t).doc(r).get()}catch(u){return console.log("Error al obtener el documento por el id: ",u),u}})()}delete(t,r){var o=this;return(0,Ee.Z)(function*(){try{return yield o.db.collection(t).doc(r).delete()}catch(u){console.log("Error al realizar el delete: ",u)}})()}update(t,r,o){var u=this;return(0,Ee.Z)(function*(){try{return yield u.db.collection(t).doc(r).set(o)}catch(h){console.log("Error al realizar el update: ",h)}})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xb))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class vk{}class Bc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(h):this.headers.set(u,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let h=this.headers.get(t);if(!h)return;h=h.filter(g=>-1===u.indexOf(g)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Ek{encodeKey(e){return zR(e)}encodeValue(e){return zR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const bk=/%(\d[a-f0-9])/gi,Ik={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function zR(n){return encodeURIComponent(n).replace(bk,(e,t)=>{var r;return null!==(r=Ik[t])&&void 0!==r?r:e})}function WR(n){return`${n}`}class jc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ek,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wk(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[h,g]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],_=t.get(h)||[];_.push(g),t.set(h,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new jc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(WR(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(WR(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Dk{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ZR(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function KR(n){return"undefined"!=typeof Blob&&n instanceof Blob}function YR(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Fv{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Ck(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Bc),this.context||(this.context=new Dk),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+h}}else this.params=new jc,this.urlWithParams=t}serializeBody(){return null===this.body?null:ZR(this.body)||KR(this.body)||YR(this.body)||function Tk(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof jc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YR(this.body)?null:KR(this.body)?this.body.type||null:ZR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof jc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,u=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,g=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let I=e.headers||this.headers,T=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(I=Object.keys(e.setHeaders).reduce((F,W)=>F.set(W,e.setHeaders[W]),I)),e.setParams&&(T=Object.keys(e.setParams).reduce((F,W)=>F.set(W,e.setParams[W]),T)),new Fv(r,o,h,{params:T,headers:I,context:S,reportProgress:_,responseType:u,withCredentials:g})}}var wi=(()=>((wi=wi||{})[wi.Sent=0]="Sent",wi[wi.UploadProgress=1]="UploadProgress",wi[wi.ResponseHeader=2]="ResponseHeader",wi[wi.DownloadProgress=3]="DownloadProgress",wi[wi.Response=4]="Response",wi[wi.User=5]="User",wi))();class hS extends class Ak{constructor(e,t=200,r="OK"){this.headers=e.headers||new Bc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=wi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new hS({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function fS(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Sk=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof Fv)u=t;else{let _,I;_=o.headers instanceof Bc?o.headers:new Bc(o.headers),o.params&&(I=o.params instanceof jc?o.params:new jc({fromObject:o.params})),u=new Fv(t,r,void 0!==o.body?o.body:null,{headers:_,context:o.context,params:I,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=wt(u).pipe(Ru(_=>this.handler.handle(_)));if(t instanceof Fv||"events"===o.observe)return h;const g=h.pipe(hr(_=>_ instanceof hS));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,Tt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,Tt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,Tt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,Tt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new jc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,fS(o,r))}post(t,r,o={}){return this.request("POST",t,fS(o,r))}put(t,r,o={}){return this.request("PUT",t,fS(o,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vk))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Mk=(()=>{class n{constructor(t){this.httpClient=t,this.url="https://restcountries.com/v3.1/subregion/europe",this.urlPelis="https://api.themoviedb.org/3/movie/",this.apiKey="e286de8cab14e42ecc0868b49545d5cf",this.arrayPelis=[]}getPaises(){return this.httpClient.get(this.url)}getPeliculas(){return this.httpClient.get(this.urlPelis+20+"?api_key="+this.apiKey)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sk))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rk=function(n){return[n]};function Pk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"ul",5)(1,"li",6),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().getPaisSeleccionado(u)}),c.TgZ(2,"div")(3,"h6",7),c._uU(4),c.qZA(),c.TgZ(5,"small",2),c._uU(6),c.qZA()(),c.TgZ(7,"span",2),c._UZ(8,"img",8),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(4),c.Oqu(t.translations.spa.common),c.xp6(2),c.Oqu(t.capital),c.xp6(2),c.Q6J("src",c.VKq(3,Rk,t.flags.png),c.LSH)}}let Nk=(()=>{class n{constructor(t){this.http=t,this.paises=[],this.pelis=[],this.paisSeleccionado=new c.vpe,t.getPaises().subscribe(r=>{this.paises=r})}ngOnInit(){}getPaisSeleccionado(t){this.paisSeleccionado.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Mk))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabla-paises"]],outputs:{paisSeleccionado:"paisSeleccionado"},decls:6,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[1,"col","listaPaises"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed","paisContainer",3,"click"],[1,"my-0"],["alt","","width","84px","height","56px",1,"float-right",3,"src"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),c._uU(3,"Nacionalidad"),c.qZA()(),c.TgZ(4,"div",3),c.YNc(5,Pk,9,5,"ul",4),c.qZA()()),2&t&&(c.xp6(5),c.Q6J("ngForOf",r.paises))},directives:[Mn],styles:[".container[_ngcontent-%COMP%]{height:65vh}.listaPaises[_ngcontent-%COMP%]{height:75%;overflow-y:scroll}.paisContainer[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}"]}),n})();function Ok(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"El nombre es requerido"),c.qZA())}function kk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"El nombre no puede tener espacios"),c.qZA())}function Fk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"El apellido es requerido"),c.qZA())}function Lk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"El alias es requerido"),c.qZA())}function Uk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"El alias no puede tener menos de 4 caracteres"),c.qZA())}function Vk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"El g\xe9nero es requerido"),c.qZA())}function Bk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"La edad es requerido"),c.qZA())}function jk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"La edad debe ser mayor a 12"),c.qZA())}function $k(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"La edad debe ser menor a 99"),c.qZA())}function Hk(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1,"La nacionalidad es obligatoria"),c.qZA())}function Gk(n,e){if(1&n&&c._UZ(0,"img",40),2&n){const t=c.oxw();c.Q6J("src",t.bandera,c.LSH)}}let qk=(()=>{class n{constructor(t,r){this.fb=t,this.db=r,this.bandera="",this.formGroup=this.fb.group({nombre:["",[Li.required,this.spacesValidator]],apellido:["",[Li.required]],alias:["",[Li.required,Li.minLength(4)]],edad:["",[Li.required,Li.min(12),Li.max(99)]],sexo:["",[Li.required]],nacionalidad:["",[Li.required]],bandera:""})}ngOnInit(){}obtenerNacionalidadActor(t){this.nacionalidad=t,this.formGroup.controls.nacionalidad.setValue(t.translations.spa.common),this.bandera=this.nacionalidad.flags.png}altaActor(){var t=this;return(0,Ee.Z)(function*(){let r=t.formGroup.value;r.nacionalidad=t.nacionalidad,(yield t.db.alta(r,"Actor"))&&t.formGroup.reset()})()}spacesValidator(t){return t.value.includes(" ")?{containsSpaces:!0}:null}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(np),c.Y36(rm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-actor-alta"]],decls:79,vars:13,consts:[[1,"container"],[1,"py-5","text-center"],["src","../../../assets/bradPitt.png","alt","","width","100","height","100",1,"d-block","mx-auto","mb-4"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"paisSeleccionado"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup","submit"],[1,"col-md-6","mb-3"],["for","nombre"],["type","text","id","nombre","placeholder","","value","","formControlName","nombre","required","",1,"form-control"],[4,"ngIf"],["for","apellido"],["type","text","id","apellido","placeholder","","value","","formControlName","apellido","required","",1,"form-control"],["for","alias"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","alias","placeholder","Username","formControlName","alias","required","",1,"form-control"],["for","sexo"],["id","sexo","formControlName","sexo","required","",1,"custom-select","d-block","w-100"],["value",""],["value","femenino"],["value","masculino"],["value","otro"],["for","edad"],["type","number","id","edad","placeholder","30","formControlName","edad",1,"form-control"],[1,"col-md-9","mb-3"],["for","nacionalidad"],["type","text","id","nacionalidad","placeholder","Ingrese una nacionalidad","formControlName","nacionalidad","required","","readonly","",1,"form-control"],[1,"col-md-3","mb-3"],["alt","",3,"src",4,"ngIf"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"],["alt","",3,"src"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"h2"),c._uU(4,"Alta actores"),c.qZA()(),c.TgZ(5,"div",3)(6,"div",4)(7,"app-tabla-paises",5),c.NdJ("paisSeleccionado",function(u){return r.obtenerNacionalidadActor(u)}),c.qZA()(),c.TgZ(8,"div",6)(9,"h4",7),c._uU(10,"Nuevo actor"),c.qZA(),c.TgZ(11,"form",8),c.NdJ("submit",function(){return r.altaActor()}),c.TgZ(12,"div",3)(13,"div",9)(14,"label",10),c._uU(15,"Nombre"),c.qZA(),c._UZ(16,"input",11),c.YNc(17,Ok,2,0,"small",12),c.YNc(18,kk,2,0,"small",12),c.qZA(),c.TgZ(19,"div",9)(20,"label",13),c._uU(21,"Apellido"),c.qZA(),c._UZ(22,"input",14),c.YNc(23,Fk,2,0,"small",12),c.qZA()(),c.TgZ(24,"div",7)(25,"label",15),c._uU(26,"Alias"),c.qZA(),c.TgZ(27,"div",16)(28,"div",17)(29,"span",18),c._uU(30,"@"),c.qZA()(),c._UZ(31,"input",19),c.qZA(),c.YNc(32,Lk,2,0,"small",12),c.YNc(33,Uk,2,0,"small",12),c.qZA(),c.TgZ(34,"div",3)(35,"div",9)(36,"label",20),c._uU(37,"G\xe9nero"),c.qZA(),c.TgZ(38,"select",21)(39,"option",22),c._uU(40,"Elegir..."),c.qZA(),c.TgZ(41,"option",23),c._uU(42,"Femenino"),c.qZA(),c.TgZ(43,"option",24),c._uU(44,"Masculino"),c.qZA(),c.TgZ(45,"option",25),c._uU(46,"Otro"),c.qZA()(),c.YNc(47,Vk,2,0,"small",12),c.qZA(),c.TgZ(48,"div",9)(49,"label",26),c._uU(50,"Edad"),c.qZA(),c._UZ(51,"input",27),c.YNc(52,Bk,2,0,"small",12),c.YNc(53,jk,2,0,"small",12),c.YNc(54,$k,2,0,"small",12),c.qZA()(),c.TgZ(55,"div",3)(56,"div",28)(57,"label",29),c._uU(58,"Nacionalidad"),c.qZA(),c._UZ(59,"input",30),c.YNc(60,Hk,2,0,"small",12),c.qZA(),c.TgZ(61,"div",31),c.YNc(62,Gk,1,1,"img",32),c.qZA()(),c._UZ(63,"hr",33),c.TgZ(64,"button",34),c._uU(65,"ALTA"),c.qZA()()()(),c.TgZ(66,"footer",35)(67,"p",36),c._uU(68,"\xa9 2017-2020 Company Name"),c.qZA(),c.TgZ(69,"ul",37)(70,"li",38)(71,"a",39),c._uU(72,"Privacy"),c.qZA()(),c.TgZ(73,"li",38)(74,"a",39),c._uU(75,"Terms"),c.qZA()(),c.TgZ(76,"li",38)(77,"a",39),c._uU(78,"Support"),c.qZA()()()()()),2&t&&(c.xp6(11),c.Q6J("formGroup",r.formGroup),c.xp6(6),c.Q6J("ngIf",(null==r.formGroup.controls.nombre.errors?null:r.formGroup.controls.nombre.errors.required)&&r.formGroup.controls.nombre.touched),c.xp6(1),c.Q6J("ngIf",null==r.formGroup.controls.nombre.errors?null:r.formGroup.controls.nombre.errors.containsSpaces),c.xp6(5),c.Q6J("ngIf",(null==r.formGroup.controls.apellido.errors?null:r.formGroup.controls.apellido.errors.required)&&r.formGroup.controls.apellido.touched),c.xp6(9),c.Q6J("ngIf",(null==r.formGroup.controls.alias.errors?null:r.formGroup.controls.alias.errors.required)&&r.formGroup.controls.alias.touched),c.xp6(1),c.Q6J("ngIf",(null==r.formGroup.controls.alias.errors?null:r.formGroup.controls.alias.errors.minLength)&&r.formGroup.controls.alias.touched),c.xp6(14),c.Q6J("ngIf",(null==r.formGroup.controls.sexo.errors?null:r.formGroup.controls.sexo.errors.required)&&r.formGroup.controls.sexo.touched),c.xp6(5),c.Q6J("ngIf",(null==r.formGroup.controls.edad.errors?null:r.formGroup.controls.edad.errors.required)&&r.formGroup.controls.edad.touched),c.xp6(1),c.Q6J("ngIf",(null==r.formGroup.controls.edad.errors?null:r.formGroup.controls.edad.errors.min)&&r.formGroup.controls.edad.touched),c.xp6(1),c.Q6J("ngIf",(null==r.formGroup.controls.edad.errors?null:r.formGroup.controls.edad.errors.max)&&r.formGroup.controls.edad.touched),c.xp6(6),c.Q6J("ngIf",(null==r.formGroup.controls.nacionalidad.errors?null:r.formGroup.controls.nacionalidad.errors.required)&&r.formGroup.controls.nacionalidad.touched),c.xp6(2),c.Q6J("ngIf",r.bandera),c.xp6(2),c.Q6J("disabled",r.formGroup.invalid))},directives:[Nk,Ta,_u,Oo,$s,ni,m,xu,nr,ie,Le,Ii,Fl],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin-top:1rem}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}img[_ngcontent-%COMP%]{width:8rem;height:8rem;margin-top:1.2rem;margin-left:2.2rem}small[_ngcontent-%COMP%]{color:red}"]}),n})();function zk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",8),c.NdJ("click",function(){c.CHM(t);const o=c.oxw().$implicit;return c.oxw().getActorSeleccionado(o,"")}),c.TgZ(1,"div")(2,"h6",9),c._uU(3),c.TgZ(4,"span"),c._uU(5),c.qZA()(),c.TgZ(6,"small",2),c._uU(7),c.qZA()()()}if(2&n){const t=c.oxw().$implicit;c.xp6(3),c.hij("",t.nombre," "),c.xp6(2),c.Oqu(t.apellido),c.xp6(2),c.Oqu(t.edad)}}function Wk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",14),c.NdJ("click",function(){c.CHM(t);const o=c.oxw(2).$implicit;return c.oxw().getActorSeleccionado(o,"peliculas")}),c._uU(1,"LISTADO PEL\xcdCULAS"),c.qZA()}}function Zk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",15),c.NdJ("click",function(){c.CHM(t);const o=c.oxw(2).$implicit;return c.oxw().getActorSeleccionado(o,"pais")}),c._uU(1,"DETALLE PA\xcdS"),c.qZA()}}function Kk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",16),c.NdJ("click",function(){c.CHM(t);const o=c.oxw(2).$implicit;return c.oxw().getActorSeleccionado(o,"actor")}),c._uU(1,"DETALLE ACTOR"),c.qZA()}}function Yk(n,e){if(1&n&&(c.TgZ(0,"li",10)(1,"div")(2,"h6",9),c._uU(3),c.TgZ(4,"span"),c._uU(5),c.qZA()(),c.TgZ(6,"small",2),c._uU(7),c.qZA()(),c.YNc(8,Wk,2,0,"button",11),c.YNc(9,Zk,2,0,"button",12),c.YNc(10,Kk,2,0,"button",13),c.qZA()),2&n){const t=c.oxw().$implicit,r=c.oxw();c.xp6(3),c.hij("",t.nombre," "),c.xp6(2),c.Oqu(t.apellido),c.xp6(2),c.Oqu(t.edad),c.xp6(1),c.Q6J("ngIf",r.inputPantalla),c.xp6(1),c.Q6J("ngIf",r.inputPantalla),c.xp6(1),c.Q6J("ngIf",r.inputPantalla)}}function Qk(n,e){if(1&n&&(c.TgZ(0,"ul",5),c.YNc(1,zk,8,3,"li",6),c.YNc(2,Yk,11,6,"li",7),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",!t.inputPantalla),c.xp6(1),c.Q6J("ngIf",t.inputPantalla)}}let pS=(()=>{class n{constructor(t){this.srv=t,this.actores=[],this.inputPantalla=!1,this.actorSeleccionado=new c.vpe}ngOnInit(){this.srv.getCollection("Actor").then(t=>t.subscribe(r=>{r.forEach(o=>{this.actores.push(o.payload.doc.data())})}))}getActorSeleccionado(t,r){this.actorSeleccionado.emit({actor:t,accion:r})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-actor-listado"]],inputs:{inputPantalla:"inputPantalla"},outputs:{actorSeleccionado:"actorSeleccionado"},decls:6,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[1,"col","listaPaises"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],["class","list-group-item d-flex justify-content-between lh-condensed actorContainer",3,"click",4,"ngIf"],["class","list-group-item d-flex justify-content-between lh-condensed actorContainer",4,"ngIf"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed","actorContainer",3,"click"],[1,"my-0"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed","actorContainer"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],["class","btn btn-outline-secondary",3,"click",4,"ngIf"],["class","btn btn-outline-warning",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-outline-warning",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),c._uU(3,"Actores"),c.qZA()(),c.TgZ(4,"div",3),c.YNc(5,Qk,3,2,"ul",4),c.qZA()()),2&t&&(c.xp6(5),c.Q6J("ngForOf",r.actores))},directives:[Mn,nr],styles:[".actorContainer[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]}),n})();function Jk(n,e){if(1&n&&(c.TgZ(0,"ul",1)(1,"li",2),c._uU(2),c.TgZ(3,"span",3),c._uU(4),c.qZA()()()),2&n){const t=e.$implicit;c.xp6(2),c.hij(" ",t.nombre," "),c.xp6(2),c.Oqu(t.cantidadPublico)}}let gS=(()=>{class n{constructor(){this.inputListadoPeliculas=[]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-pelicula-listado"]],inputs:{inputListadoPeliculas:"inputListadoPeliculas"},decls:4,vars:1,consts:[["class","list-group",4,"ngFor","ngForOf"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","badge-primary","badge-pill"]],template:function(t,r){1&t&&(c.TgZ(0,"h2")(1,"strong"),c._uU(2,"Listado pel\xedculas"),c.qZA()(),c.YNc(3,Jk,5,2,"ul",0)),2&t&&(c.xp6(3),c.Q6J("ngForOf",r.inputListadoPeliculas))},directives:[Mn],styles:[""]}),n})();function Xk(n,e){if(1&n&&(c.TgZ(0,"ul",1)(1,"li",2)(2,"b"),c._uU(3),c.qZA(),c.TgZ(4,"span"),c._UZ(5,"img",3),c.qZA()(),c.TgZ(6,"li",4),c._uU(7),c.qZA()()),2&n){const t=c.oxw();c.xp6(3),c.Oqu(t.inputPaises.translations.spa.common),c.xp6(2),c.Q6J("src",t.inputPaises.flags.png,c.LSH),c.xp6(2),c.Oqu(t.inputPaises.capital)}}let eF=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-detalle-pais"]],inputs:{inputPaises:"inputPaises"},decls:1,vars:1,consts:[["class","list-group",4,"ngIf"],[1,"list-group"],[1,"list-group-item","list-group-item-primary","d-flex"],["alt","",3,"src"],[1,"list-group-item"]],template:function(t,r){1&t&&c.YNc(0,Xk,8,3,"ul",0),2&t&&c.Q6J("ngIf",r.inputPaises)},directives:[nr],styles:["img[_ngcontent-%COMP%]{width:30%;margin-left:70%}b[_ngcontent-%COMP%]{font-size:25px}"]}),n})();function tF(n,e){if(1&n&&(c.TgZ(0,"ul",1)(1,"li",2)(2,"h2"),c._uU(3),c.qZA()(),c.TgZ(4,"li",3)(5,"span"),c._uU(6,"Edad: "),c.qZA(),c._uU(7),c.qZA(),c.TgZ(8,"li",3)(9,"span"),c._uU(10,"Sexo: "),c.qZA(),c._uU(11),c.qZA(),c.TgZ(12,"li",3)(13,"span"),c._uU(14,"Nacionalidad: "),c.qZA(),c._uU(15),c.qZA()()),2&n){const t=c.oxw();c.xp6(3),c.AsE("",t.inputActor.nombre," ",t.inputActor.apellido,""),c.xp6(4),c.Oqu(t.inputActor.edad),c.xp6(4),c.Oqu(t.inputActor.sexo),c.xp6(4),c.Oqu(t.inputActor.nacionalidad.translations.spa.common)}}let nF=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-detalle-actor"]],inputs:{inputActor:"inputActor"},decls:1,vars:1,consts:[["class","list-group",4,"ngIf"],[1,"list-group"],[1,"list-group-item","list-group-item-primary","d-flex"],[1,"list-group-item"]],template:function(t,r){1&t&&c.YNc(0,tF,16,5,"ul",0),2&t&&c.Q6J("ngIf",r.inputActor)},directives:[nr],styles:["span[_ngcontent-%COMP%]{font-weight:700}"]}),n})(),rF=(()=>{class n{constructor(t){this.db=t,this.listadoPeliculas=[],this.pantalla=!0}ngOnInit(){}tomarActorParaMostrar(t){switch(this.actorParaMostrar=t.actor,t.accion){case"peliculas":this.peliculasActor(this.actorParaMostrar.apellido);break;case"pais":this.nacionalidadActor(this.actorParaMostrar);break;case"actor":this.datosActor(this.actorParaMostrar)}}peliculasActor(t){this.db.getCollectionByField("peliculas","==","actor.apellido",t).then(r=>{r.subscribe(o=>{this.listadoPeliculas=o})})}nacionalidadActor(t){this.datosPais=t.nacionalidad}datosActor(t){this.detalleActor=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-actor-pelicula"]],decls:19,vars:4,consts:[["role","main"],[1,"jumbotron"],[3,"inputPantalla","actorSeleccionado"],[1,"container"],[1,"row"],[1,"col-md-4"],[3,"inputListadoPeliculas"],[3,"inputPaises"],[3,"inputActor"]],template:function(t,r){1&t&&(c.TgZ(0,"main",0)(1,"div",1)(2,"app-actor-listado",2),c.NdJ("actorSeleccionado",function(u){return r.tomarActorParaMostrar(u)}),c.qZA()(),c.TgZ(3,"div",3)(4,"div",4)(5,"div",5),c._UZ(6,"app-pelicula-listado",6),c.qZA(),c.TgZ(7,"div",5)(8,"h2"),c._uU(9,"Detalle pa\xeds"),c.qZA(),c._UZ(10,"app-detalle-pais",7),c.qZA(),c.TgZ(11,"div",5)(12,"h2"),c._uU(13,"Detalle actor"),c.qZA(),c._UZ(14,"app-detalle-actor",8),c.qZA()(),c._UZ(15,"hr"),c.qZA()(),c.TgZ(16,"footer",3)(17,"p"),c._uU(18,"\xa9 Company 2017-2020"),c.qZA()()),2&t&&(c.xp6(2),c.Q6J("inputPantalla",r.pantalla),c.xp6(4),c.Q6J("inputListadoPeliculas",r.listadoPeliculas),c.xp6(4),c.Q6J("inputPaises",r.datosPais),c.xp6(4),c.Q6J("inputActor",r.detalleActor))},directives:[pS,gS,eF,nF],styles:[""]}),n})(),iF=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-bienvenido"]],decls:2,vars:0,template:function(t,r){1&t&&(c.TgZ(0,"p"),c._uU(1,"bienvenido works!"),c.qZA())},styles:[""]}),n})();const sF=function(){return["/actorPelicula"]},oF=function(){return["/altaPelicula"]},aF=function(){return["/altaActor"]};let JR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-navbar"]],decls:20,vars:6,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],[1,"nav-link",3,"routerLink"],[1,"nav-item"],[1,"form-inline","my-2","my-lg-0"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","mr-sm-2"],["type","submit",1,"btn","btn-outline-success","my-2","my-sm-0"]],template:function(t,r){1&t&&(c.TgZ(0,"nav",0)(1,"a",1),c._uU(2,"HOME"),c.qZA(),c.TgZ(3,"button",2),c._UZ(4,"span",3),c.qZA(),c.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),c._uU(9,"Actor pel\xedculas"),c.qZA()(),c.TgZ(10,"li",8)(11,"a",7),c._uU(12,"Alta Peliculas"),c.qZA()(),c.TgZ(13,"li",8)(14,"a",7),c._uU(15,"Alta Actores"),c.qZA()()(),c.TgZ(16,"form",9),c._UZ(17,"input",10),c.TgZ(18,"button",11),c._uU(19,"Search"),c.qZA()()()()),2&t&&(c.xp6(8),c.Q6J("routerLink",c.DdM(3,sF)),c.xp6(3),c.Q6J("routerLink",c.DdM(4,oF)),c.xp6(3),c.Q6J("routerLink",c.DdM(5,aF)))},directives:[Lu,Ta,_u,No],styles:[""]}),n})();function uF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td")(6,"button",3),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().mostrarDetallePelicula(u)}),c._uU(7,"VER DETALLE"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.id),c.xp6(2),c.Oqu(t.nombre)}}let lF=(()=>{class n{constructor(){this.peliculaSeleccionada=new c.vpe}ngOnInit(){}mostrarDetallePelicula(t){this.peliculaSeleccionada.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabla-pelicula"]],inputs:{inputTablaPeliculas:"inputTablaPeliculas"},outputs:{peliculaSeleccionada:"peliculaSeleccionada"},decls:11,vars:1,consts:[[1,"table","table-striped","table-dark"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),c._uU(4,"#"),c.qZA(),c.TgZ(5,"th",1),c._uU(6,"Nombre"),c.qZA(),c.TgZ(7,"th",1),c._uU(8,"Detalle"),c.qZA()()(),c.TgZ(9,"tbody"),c.YNc(10,uF,8,2,"tr",2),c.qZA()()),2&t&&(c.xp6(10),c.Q6J("ngForOf",r.inputTablaPeliculas))},directives:[Mn],styles:[".listaPaises[_ngcontent-%COMP%]{height:10%;overflow-y:scroll}"]}),n})();function cF(n,e){if(1&n&&(c.TgZ(0,"div",2),c._UZ(1,"img",3),c.TgZ(2,"div",4)(3,"h5",5),c._uU(4),c.qZA(),c.TgZ(5,"p",6),c._uU(6,"Genero: "),c.TgZ(7,"span"),c._uU(8),c.qZA()(),c.TgZ(9,"p",6),c._uU(10,"Fecha de estreno: "),c.TgZ(11,"span"),c._uU(12),c.qZA()(),c.TgZ(13,"p",6),c._uU(14,"Espectadores: "),c.TgZ(15,"span"),c._uU(16),c.qZA()()()()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.inputDetallePelicula.fotoPelicula,c.LSH),c.xp6(3),c.Oqu(t.inputDetallePelicula.nombre),c.xp6(4),c.Oqu(t.inputDetallePelicula.tipo),c.xp6(4),c.Oqu(t.inputDetallePelicula.fechaEstreno),c.xp6(4),c.Oqu(t.inputDetallePelicula.cantidadPublico)}}let dF=(()=>{class n{constructor(t){this.db=t,this.listadoPeliculas=[],this.obtenerPeliculaInicial()}ngOnInit(){}obtenerPeliculaInicial(){this.db.getCollectionByField("peliculas","==","nombre","Matrix").then(t=>{t.subscribe(r=>{this.inputDetallePelicula=r[0]})})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-detalle-pelicula"]],inputs:{inputDetallePelicula:"inputDetallePelicula"},decls:5,vars:1,consts:[[1,"col-md-4"],["class","card","style","width: 18rem;",4,"ngIf"],[1,"card",2,"width","18rem"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"h2")(2,"strong"),c._uU(3,"Detalle"),c.qZA()(),c.YNc(4,cF,17,5,"div",1),c.qZA()),2&t&&(c.xp6(4),c.Q6J("ngIf",r.inputDetallePelicula))},directives:[nr],styles:[""]}),n})();const hF=function(){return["/altaActor"]};let fF=(()=>{class n{constructor(t){this.db=t,this.listadoPeliculas=[]}ngOnInit(){this.getPeliculas()}tomarPeliculaParaDetalle(t){this.peliculaParaMostrar=t}getPeliculas(){this.db.getCollection("peliculas").then(t=>t.subscribe(r=>{r.forEach(o=>{this.listadoPeliculas.push(o.payload.doc.data())})}))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-busqueda"]],decls:29,vars:5,consts:[["role","main"],[1,"jumbotron"],[1,"container"],[1,"display-3"],[3,"inputTablaPeliculas","peliculaSeleccionada"],[1,"row"],[1,"col-md-4"],[3,"inputDetallePelicula"],[3,"inputListadoPeliculas"],[1,"widget","clearfix"],[1,"widgettitle"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-link",3,"routerLink"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar"),c.TgZ(1,"main",0)(2,"div",1)(3,"div",2)(4,"h1",3),c._uU(5,"Tabla Pel\xedculas"),c.qZA(),c.TgZ(6,"app-tabla-pelicula",4),c.NdJ("peliculaSeleccionada",function(u){return r.tomarPeliculaParaDetalle(u)}),c.qZA()()(),c.TgZ(7,"div",2)(8,"div",5)(9,"div",6),c._UZ(10,"app-detalle-pelicula",7),c.qZA(),c.TgZ(11,"div",6),c._UZ(12,"app-pelicula-listado",8),c.qZA(),c.TgZ(13,"div",6)(14,"section",9)(15,"h4",10),c._uU(16,"Alta actor"),c.qZA(),c.TgZ(17,"div",11)(18,"div",12)(19,"h5",13),c._uU(20,"Alta actor"),c.qZA(),c.TgZ(21,"p",14),c._uU(22,"Secci\xf3n que permite cargar un nuevo actor en nuestra base de datos"),c.qZA(),c.TgZ(23,"a",15),c._uU(24,"ALTA"),c.qZA()()()()()(),c._UZ(25,"hr"),c.qZA()(),c.TgZ(26,"footer",2)(27,"p"),c._uU(28,"\xa9 Company 2017-2020"),c.qZA()()),2&t&&(c.xp6(6),c.Q6J("inputTablaPeliculas",r.listadoPeliculas),c.xp6(4),c.Q6J("inputDetallePelicula",r.peliculaParaMostrar),c.xp6(2),c.Q6J("inputListadoPeliculas",r.listadoPeliculas),c.xp6(11),c.Q6J("routerLink",c.DdM(4,hF)))},directives:[JR,lF,dF,gS,Lu],styles:["body[_ngcontent-%COMP%]{padding-top:3.5rem}"]}),n})();const XR="firebasestorage.googleapis.com",e1="storageBucket";class Ir extends Ot.ZR{constructor(e,t){super(mS(e),`Firebase Storage: ${t} (${mS(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ir.prototype)}_codeEquals(e){return mS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function mS(n){return"storage/"+n}function yS(){return new Ir("unknown","An unknown error occurred, please check the error payload for server response.")}function t1(){return new Ir("canceled","User canceled the upload/download.")}function n1(){return new Ir("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function im(n){return new Ir("invalid-argument",n)}function r1(){return new Ir("app-deleted","The Firebase app was deleted.")}function s1(n){return new Ir("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lv(n,e){return new Ir("invalid-format","String does not match format '"+n+"': "+e)}function Uv(n){throw new Ir("internal-error","Internal error: "+n)}class Mi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Mi.makeFromUrl(e,t)}catch(o){return new Mi(e,"")}if(""===r.path)return r;throw function DF(n){return new Ir("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+o+"(/(.*))?$","i");function I(Et){Et.path_=decodeURIComponent(Et.path)}const S=t.replace(/[.]/g,"\\."),xt=[{regex:g,indices:{bucket:1,path:3},postModify:function u(Et){"/"===Et.path.charAt(Et.path.length-1)&&(Et.path_=Et.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===XR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let Et=0;Et<xt.length;Et++){const Kt=xt[Et],un=Kt.regex.exec(e);if(un){let ta=un[Kt.indices.path];ta||(ta=""),r=new Mi(un[Kt.indices.bucket],ta),Kt.postModify(r);break}}if(null==r)throw function IF(n){return new Ir("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class SF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function eI(n){return"string"==typeof n||n instanceof String}function o1(n){return _S()&&n instanceof Blob}function _S(){return"undefined"!=typeof Blob}function vS(n,e,t,r){if(r<e)throw im(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw im(`Invalid value for '${n}'. Expected ${t} or less.`)}function fl(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function a1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var $c=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}($c||($c={})),$c))();class OF{constructor(e,t,r,o,u,h,g,_,I,T,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=g,this.errorCallback_=_,this.timeout_=I,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,W)=>{this.resolve_=F,this.reject_=W,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,h=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());!function RF(n){return void 0!==n}(_)?u():u(_)}catch(_){h(_)}else if(null!==g){const _=yS();_.serverResponse=g.getErrorText(),h(this.errorCallback_?this.errorCallback_(g,_):_)}else h(o.canceled?this.appDelete_?r1():t1():function bF(){return new Ir("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new tI(!1,null,!0)):this.backoffId_=function xF(n,e,t){let r=1,o=null,u=null,h=!1,g=0;function _(){return 2===g}let I=!1;function T(...je){I||(I=!0,e.apply(null,je))}function S(je){o=setTimeout(()=>{o=null,n(W,_())},je)}function F(){u&&clearTimeout(u)}function W(je,...St){if(I)return void F();if(je)return F(),void T.call(null,je,...St);if(_()||h)return F(),void T.call(null,je,...St);let xt;r<64&&(r*=2),1===g?(g=2,xt=0):xt=1e3*(r+Math.random()),S(xt)}let te=!1;function Me(je){te||(te=!0,F(),!I&&(null!==o?(je||(g=2),clearTimeout(o),S(0)):je||(g=1)))}return S(0),u=setTimeout(()=>{h=!0,Me(!0)},t),Me}((r,o)=>{if(o)return void r(!1,new tI(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const h=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const g=u.getErrorCode()===$c.NO_ERROR,_=u.getStatus();if(!g||this.isRetryStatusCode_(_)){const T=u.getErrorCode()===$c.ABORT;return void r(!1,new tI(!1,null,T))}const I=-1!==this.successCodes_.indexOf(_);r(!0,new tI(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function MF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class tI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function jF(...n){const e=function BF(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(_S())return new Blob(n);throw new Ir("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ES{constructor(e,t){this.data=e,this.contentType=t||null}}function wS(n,e){switch(n){case Os.RAW:return new ES(u1(e));case Os.BASE64:case Os.BASE64URL:return new ES(l1(n,e));case Os.DATA_URL:return new ES(function qF(n){const e=new c1(n);return e.base64?l1(Os.BASE64,e.rest):function GF(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Lv(Os.DATA_URL,"Malformed data URL.")}return u1(e)}(e.rest)}(e),function zF(n){return new c1(n).contentType}(e))}throw yS()}function u1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function l1(n,e){switch(n){case Os.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw Lv(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Os.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw Lv(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function HF(n){return atob(n)}(e)}catch(o){throw Lv(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class c1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Lv(Os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function WF(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class nu{constructor(e,t){let r=0,o="";o1(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(o1(this.data_)){const o=function $F(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new nu(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new nu(r,!0)}}static getBlob(...e){if(_S()){const t=e.map(r=>r instanceof nu?r.data_:r);return new nu(jF.apply(null,t))}{const t=e.map(h=>eI(h)?wS(Os.RAW,h).data:h.data_);let r=0;t.forEach(h=>{r+=h.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(h=>{for(let g=0;g<h.length;g++)o[u++]=h[g]}),new nu(o,!0)}}uploadData(){return this.data_}}function bS(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function NF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function d1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function YF(n,e){return e}class Wi{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||YF}}let nI=null;function Vv(){if(nI)return nI;const n=[];n.push(new Wi("bucket")),n.push(new Wi("generation")),n.push(new Wi("metageneration")),n.push(new Wi("name","fullPath",!0));const t=new Wi("name");t.xform=function e(u,h){return function QF(n){return!eI(n)||n.length<2?n:d1(n)}(h)},n.push(t);const o=new Wi("size");return o.xform=function r(u,h){return void 0!==h?Number(h):h},n.push(o),n.push(new Wi("timeCreated")),n.push(new Wi("updated")),n.push(new Wi("md5Hash",null,!0)),n.push(new Wi("cacheControl",null,!0)),n.push(new Wi("contentDisposition",null,!0)),n.push(new Wi("contentEncoding",null,!0)),n.push(new Wi("contentLanguage",null,!0)),n.push(new Wi("contentType",null,!0)),n.push(new Wi("metadata","customMetadata",!0)),nI=n,nI}function h1(n,e,t){const r=bS(e);return null===r?null:function XF(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const h=t[u];r[h.local]=h.xform(r,e[h.server])}return function JF(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Mi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function IS(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const f1="prefixes";class ru{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function iu(n){if(!n)throw yS()}function rI(n,e){return function t(r,o){const u=h1(n,o,e);return iu(null!==u),u}}function sm(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function EF(){return new Ir("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function vF(){return new Ir("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function _F(n){return new Ir("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function wF(n){return new Ir("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function Bv(n){const e=sm(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function yF(n){return new Ir("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function g1(n,e,t){const o=fl(e.fullServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,g=new ru(o,"GET",rI(n,t),h);return g.errorHandler=Bv(e),g}function sL(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const g=fl(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,T=new ru(g,"GET",function rL(n,e){return function t(r,o){const u=function nL(n,e,t){const r=bS(t);return null===r?null:function tL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[f1])for(const o of t[f1]){const u=o.replace(/\/$/,""),h=n._makeStorageReference(new Mi(e,u));r.prefixes.push(h)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Mi(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return iu(null!==u),u}}(n,e.bucket),I);return T.urlParams=u,T.errorHandler=sm(e),T}function y1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function lL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class iI{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function DS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){iu(!1)}return iu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const fL={STATE_CHANGED:"state_changed"},Zi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function CS(n){switch(n){case"running":case"pausing":case"canceling":return Zi.RUNNING;case"paused":return Zi.PAUSED;case"success":return Zi.SUCCESS;case"canceled":return Zi.CANCELED;default:return Zi.ERROR}}class pL{constructor(e,t,r){if(function PF(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function om(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class mL extends class gL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$c.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$c.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$c.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw Uv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Uv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ea(){return new mL}class w1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Vv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function cL(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),h=y1(e,r,o),g={name:h.fullPath},_=fl(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},S=IS(h,t),te=new ru(_,"POST",function W(Me){let je;DS(Me);try{je=Me.getResponseHeader("X-Goog-Upload-URL")}catch(St){iu(!1)}return iu(eI(je)),je},n.maxUploadRetryTime);return te.urlParams=g,te.headers=T,te.body=S,te.errorHandler=sm(e),te}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ea,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function dL(n,e,t,r){const _=new ru(t,"POST",function u(I){const T=DS(I,["active","final"]);let S=null;try{S=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch(W){iu(!1)}S||iu(!1);const F=Number(S);return iu(!isNaN(F)),new iI(F,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=sm(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,ea,t,r);this._request=u,u.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new iI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let h;try{h=function hL(n,e,t,r,o,u,h,g){const _=new iI(0,0);if(h?(_.current=h.current,_.total=h.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function TF(){return new Ir("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=_.total-_.current;let T=I;o>0&&(T=Math.min(T,o));const S=_.current,te={"X-Goog-Upload-Command":T===I?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},Me=r.slice(S,S+T);if(null===Me)throw n1();const xt=new ru(t,"POST",function je(Et,Kt){const un=DS(Et,["active","final"]),zr=_.current+T,ta=r.size();let NS;return NS="final"===un?rI(e,u)(Et,Kt):null,new iI(zr,ta,"final"===un,NS)},e.maxUploadRetryTime);return xt.headers=te,xt.body=Me.uploadData(),xt.progressCallback=g||null,xt.errorHandler=sm(n),xt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const g=this._ref.storage._makeRequest(h,ea,o,u);this._request=g,g.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=g1(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,ea,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function _1(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},_=function g(){let xt="";for(let Et=0;Et<2;Et++)xt+=Math.random().toString().slice(2);return xt}();h["Content-Type"]="multipart/related; boundary="+_;const I=y1(e,r,o),T=IS(I,t),W=nu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===W)throw n1();const te={name:I.fullPath},Me=fl(u,n.host,n._protocol),St=n.maxUploadRetryTime,At=new ru(Me,"POST",rI(n,t),St);return At.urlParams=te,At.headers=h,At.body=W.uploadData(),At.errorHandler=sm(e),At}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ea,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=t1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=CS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new pL(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(CS(this._state)){case Zi.SUCCESS:om(this._resolve.bind(null,this.snapshot))();break;case Zi.CANCELED:case Zi.ERROR:om(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(CS(this._state)){case Zi.RUNNING:case Zi.PAUSED:e.next&&om(e.next.bind(e,this.snapshot))();break;case Zi.SUCCESS:e.complete&&om(e.complete.bind(e))();break;default:e.error&&om(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class vf{constructor(e,t){this._service=e,this._location=t instanceof Mi?t:Mi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vf(e,t)}get root(){const e=new Mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return d1(this._location.path)}get storage(){return this._service}get parent(){const e=function ZF(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Mi(this._location.bucket,e);return new vf(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw s1(e)}}function I1(n,e,t){return TS.apply(this,arguments)}function TS(){return TS=(0,Ee.Z)(function*(n,e,t){const o=yield D1(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield I1(n,e,o.nextPageToken))}),TS.apply(this,arguments)}function D1(n,e){null!=e&&"number"==typeof e.maxResults&&vS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=sL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ea)}function SL(n){n._throwIfRoot("getDownloadURL");const e=function oL(n,e,t){const o=fl(e.fullServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,g=new ru(o,"GET",function iL(n,e){return function t(r,o){const u=h1(n,o,e);return iu(null!==u),function eL(n,e,t,r){const o=bS(e);if(null===o||!eI(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const h=encodeURIComponent;return u.split(",").map(I=>{const S=n.fullPath;return fl("/b/"+h(n.bucket)+"/o/"+h(S),t,r)+a1({alt:"media",token:I})})[0]}(u,o,n.host,n._protocol)}}(n,t),h);return g.errorHandler=Bv(e),g}(n.storage,n._location,Vv());return n.storage.makeRequestWithTokens(e,ea).then(t=>{if(null===t)throw function AF(){return new Ir("no-download-url","The given file does not have any download URLs.")}();return t})}function C1(n,e){const t=function KF(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Mi(n._location.bucket,t);return new vf(n.storage,r)}function T1(n,e){if(n instanceof AS){const t=n;if(null==t._bucket)throw function CF(){return new Ir("no-default-bucket","No default bucket found. Did you set the '"+e1+"' property when initializing the app?")}();const r=new vf(t,t._bucket);return null!=e?T1(r,e):r}return void 0!==e?C1(n,e):n}function PL(n,e){if(e&&function ML(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof AS)return function RL(n,e){return new vf(n,e)}(n,e);throw im("To use ref(service, url), the first argument must be a Storage instance.")}return T1(n,e)}function A1(n,e){const t=null==e?void 0:e[e1];return null==t?null:Mi.makeFromBucketSpec(t,n)}class AS{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=XR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Mi.makeFromBucketSpec(o,this._host):A1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Mi.makeFromBucketSpec(this._url,e):A1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vf(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new SF(r1());{const u=function VF(n,e,t,r,o,u){const h=a1(n.urlParams),g=n.url+h,_=Object.assign({},n.headers);return function LF(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function kF(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function FF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,u),function UF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new OF(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const S1="@firebase/storage";function R1(n,e){return PL(n=(0,Ot.m9)(n),e)}function HL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new AS(t,r,o,e,Bi.SDK_VERSION)}!function GL(){(0,Bi._registerComponent)(new Ua.wA("storage",HL,"PUBLIC").setMultipleInstances(!0)),(0,Bi.registerVersion)(S1,"0.9.6",""),(0,Bi.registerVersion)(S1,"0.9.6","esm2017")}();class sI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class P1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new sI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new sI(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?h=>t(new sI(h,this,this._ref)):{next:t.next?h=>t.next(new sI(h,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class N1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new pl(e,this._service))}get items(){return this._delegate.items.map(e=>new pl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function jL(n,e){return C1(n,e)}(this._delegate,e);return new pl(t,this.storage)}get root(){return new pl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new pl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new P1(function OL(n,e,t){return function IL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new w1(n,new nu(e),t)}(n=(0,Ot.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Os.RAW,r){this._throwIfRoot("putString");const o=wS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new P1(new w1(this._delegate,new nu(o.data,!0),u),this)}listAll(){return function UL(n){return function CL(n){const e={prefixes:[],items:[]};return I1(n,e).then(()=>e)}(n=(0,Ot.m9)(n))}(this._delegate).then(e=>new N1(e,this.storage))}list(e){return function LL(n,e){return D1(n=(0,Ot.m9)(n),e)}(this._delegate,e||void 0).then(t=>new N1(t,this.storage))}getMetadata(){return function kL(n){return function TL(n){n._throwIfRoot("getMetadata");const e=g1(n.storage,n._location,Vv());return n.storage.makeRequestWithTokens(e,ea)}(n=(0,Ot.m9)(n))}(this._delegate)}updateMetadata(e){return function FL(n,e){return function AL(n,e){n._throwIfRoot("updateMetadata");const t=function aL(n,e,t,r){const u=fl(e.fullServerUrl(),n.host,n._protocol),g=IS(t,r),I=n.maxOperationRetryTime,T=new ru(u,"PATCH",rI(n,r),I);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=g,T.errorHandler=Bv(e),T}(n.storage,n._location,e,Vv());return n.storage.makeRequestWithTokens(t,ea)}(n=(0,Ot.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function VL(n){return SL(n=(0,Ot.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function BL(n){return function xL(n){n._throwIfRoot("deleteObject");const e=function uL(n,e){const r=fl(e.fullServerUrl(),n.host,n._protocol),g=new ru(r,"DELETE",function h(_,I){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=Bv(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ea)}(n=(0,Ot.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw s1(e)}}class O1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(k1(e))throw im("ref() expected a child path but got a URL, use refFromURL instead.");return new pl(R1(this._delegate,e),this)}refFromURL(e){if(!k1(e))throw im("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mi.makeFromUrl(e,this._delegate.host)}catch(t){throw im("refFromUrl() expected a valid full URL but got an invalid one.")}return new pl(R1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function $L(n,e,t,r={}){!function NL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,Ot.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function k1(n){return/^[A-Za-z]+:\/\//.test(n)}function ZL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new O1(t,r)}function F1(n){const e=function YL(n){return new ms.y(e=>{const t=h=>e.next(h);t(n.snapshot);const u=n.on("state_changed",t);return n.then(h=>{t(h),e.complete()},h=>{t(n.snapshot),(h=>{e.error(h)})(h)}),function(){u()}}).pipe(function pF(n,e=JE.z){return(0,mi.e)((t,r)=>{let o=null,u=null,h=null;const g=()=>{if(o){o.unsubscribe(),o=null;const I=u;u=null,r.next(I)}};function _(){const I=h+n,T=e.now();if(T<I)return o=this.schedule(void 0,I-T),void r.add(o);g()}t.subscribe((0,Tr.x)(r,I=>{u=I,h=e.now(),o||(o=e.schedule(_,n),r.add(o))},()=>{g(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function oI(n){return{getDownloadURL:()=>wt(void 0).pipe(Gt.fc,sr(()=>n.getDownloadURL()),Gt.iC),getMetadata:()=>wt(void 0).pipe(Gt.fc,sr(()=>n.getMetadata()),Gt.iC),delete:()=>(0,Tn.D)(n.delete()),child:e=>oI(n.child(e)),updateMetadata:e=>(0,Tn.D)(n.updateMetadata(e)),put:(e,t)=>F1(n.put(e,t)),putString:(e,t,r)=>F1(n.putString(e,t,r)),list:e=>(0,Tn.D)(n.list(e)),listAll:()=>(0,Tn.D)(n.listAll())}}!function KL(n){const e={TaskState:Zi,TaskEvent:fL,StringFormat:Os,Storage:O1,Reference:pl};n.INTERNAL.registerComponent(new Ua.wA("storage-compat",ZL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(XE.Z);const QL=new c.OlP("angularfire2.storageBucket"),JL=new c.OlP("angularfire2.storage.maxUploadRetryTime"),XL=new c.OlP("angularfire2.storage.maxOperationRetryTime"),eU=new c.OlP("angularfire2.storage.use-emulator");let tU=(()=>{class n{constructor(t,r,o,u,h,g,_,I,T,S){const F=(0,wr.on)(t,h,r);this.storage=(0,wr.cc)(`${F.name}.storage.${o}`,"AngularFireStorage",F.name,()=>{const W=h.runOutsideAngular(()=>F.storage(o||void 0)),te=T;return te&&W.useEmulator(...te),_&&W.setMaxUploadRetryTime(_),I&&W.setMaxOperationRetryTime(I),W},[_,I])}ref(t){return oI(this.storage.ref(t))}refFromURL(t){return oI(this.storage.refFromURL(t))}upload(t,r,o){return oI(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wr.Dh),c.LFG(wr.xv,8),c.LFG(QL,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Gt.HU),c.LFG(JL,8),c.LFG(XL,8),c.LFG(eU,8),c.LFG(ju,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const nU=[{path:"bienvenido",component:iF},{path:"busqueda",component:fF},{path:"peliculas/alta",component:(()=>{class n{constructor(t,r,o,u){this.fb=t,this.srv=r,this.fire=o,this.storage=u,this.imagenes=[],this.peliculaGroup=this.fb.group({nombre:"",tipo:"",cantidadPublico:"",fechaEstreno:"",fotoPelicula:"",actor:""})}ngOnInit(){}obtenerActorSeleccionado(t){this.actor=t.actor,this.peliculaGroup.controls.actor.setValue(t.actor.nombre+" "+t.actor.apellido)}altaPelicula(){var t=this;return(0,Ee.Z)(function*(){let r=t.peliculaGroup.value;r.actor=t.actor,r.id=t.fire.createId(),""!=t.archivoImg&&(t.imagenes.push(t.archivoImg),yield t.srv.uploadImage("peliculas",r.id,t.archivoImg).then(u=>{r.fotoPelicula=u})),(yield t.srv.alta(r,"peliculas"))&&(t.peliculaGroup.reset(),t.archivoImg=null,t.imagenes=[])})()}obtnerImgBase64(t){let r=t.target.files,o=new FileReader;o.readAsDataURL(r[0]),o.onloadend=()=>{this.archivoImg=o.result}}cargarFoto(t){let r=t.target.files,o=new FileReader;o.readAsDataURL(r[0]),o.onloadend=()=>{this.imagenes.push(o.result),this.srv.uploadImage("peliculas","lalalala",o.result).then(u=>{console.log(u)})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(np),c.Y36(rm),c.Y36(Xb),c.Y36(tU))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-pelicula-alta"]],decls:79,vars:1,consts:[[1,"container","mt-6"],[1,"py-5","text-center"],["src","../../../assets/1f37f.png","alt","","width","100","height","100",1,"d-block","mx-auto","mb-4"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"actorSeleccionado"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup","submit"],[1,"col-md-12","mb-3"],["for","nombre"],["type","text","id","nombre","placeholder","","value","","formControlName","nombre","required","",1,"form-control"],[1,"invalid-feedback"],["for","apellido"],["id","tipo","formControlName","tipo","required","",1,"custom-select","d-block","w-100"],["value",""],["value","Terror"],["value","Ciencia Ficcion"],["value","Romantica"],["value","Drama"],["value","otro"],[1,"col-md-6","mb-3"],["for","cantidadPublico"],["type","number","id","cantidadPublico","formControlName","cantidadPublico","required","",1,"form-control"],["for","fechaEstreno"],[1,"input-group"],["type","date","id","fechaEstreno","formControlName","fechaEstreno","required","",1,"form-control"],[1,"invalid-feedback",2,"width","100%"],["for","actor"],["type","text","id","actor","placeholder","Ingrese un actor","formControlName","actor","required","","readonly","",1,"form-control"],["for","fotoPelicula"],["type","file","id","fotoPelicula","placeholder","Ingrese un link con la foto de la pel\xedcula (momentaneo)","formControlName","fotoPelicula","required","",1,"form-control",3,"change"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"h2"),c._uU(4,"Alta Pel\xedculas"),c.qZA()(),c.TgZ(5,"div",3)(6,"div",4)(7,"app-actor-listado",5),c.NdJ("actorSeleccionado",function(u){return r.obtenerActorSeleccionado(u)}),c.qZA()(),c.TgZ(8,"div",6)(9,"h4",7),c._uU(10,"Nueva pel\xedcula"),c.qZA(),c.TgZ(11,"form",8),c.NdJ("submit",function(){return r.altaPelicula()}),c.TgZ(12,"div",3)(13,"div",9)(14,"label",10),c._uU(15,"Nombre"),c.qZA(),c._UZ(16,"input",11),c.TgZ(17,"div",12),c._uU(18," Valid first name is required. "),c.qZA()(),c.TgZ(19,"div",9)(20,"label",13),c._uU(21,"Tipo"),c.qZA(),c.TgZ(22,"select",14)(23,"option",15),c._uU(24,"Elegir..."),c.qZA(),c.TgZ(25,"option",16),c._uU(26,"Terror"),c.qZA(),c.TgZ(27,"option",17),c._uU(28,"Ciencia ficci\xf3n"),c.qZA(),c.TgZ(29,"option",18),c._uU(30,"Rom\xe1ntica"),c.qZA(),c.TgZ(31,"option",19),c._uU(32,"Drama"),c.qZA(),c.TgZ(33,"option",20),c._uU(34,"Otro"),c.qZA()(),c.TgZ(35,"div",12),c._uU(36," Por favor seleccionar uno. "),c.qZA()()(),c.TgZ(37,"div",3)(38,"div",21)(39,"label",22),c._uU(40,"Cantidad de p\xfablico"),c.qZA(),c._UZ(41,"input",23),c.TgZ(42,"div",12),c._uU(43," Por favor seleccionar uno. "),c.qZA()(),c.TgZ(44,"div",21)(45,"label",24),c._uU(46,"Fecha de Estreno"),c.qZA(),c.TgZ(47,"div",25),c._UZ(48,"input",26),c.TgZ(49,"div",27),c._uU(50," Your username is required. "),c.qZA()()()(),c.TgZ(51,"div",7)(52,"label",28),c._uU(53,"Actor"),c.qZA(),c._UZ(54,"input",29),c.TgZ(55,"div",12),c._uU(56," Por favor ingrese un pa\xeds. "),c.qZA()(),c.TgZ(57,"div",7)(58,"label",30),c._uU(59,"Flyer"),c.qZA(),c.TgZ(60,"input",31),c.NdJ("change",function(u){return r.obtnerImgBase64(u)}),c.qZA(),c.TgZ(61,"div",12),c._uU(62," Por favor ingrese un pa\xeds. "),c.qZA()(),c._UZ(63,"hr",32),c.TgZ(64,"button",33),c._uU(65,"ALTA"),c.qZA()()()(),c.TgZ(66,"footer",34)(67,"p",35),c._uU(68,"\xa9 2017-2020 Company Name"),c.qZA(),c.TgZ(69,"ul",36)(70,"li",37)(71,"a",38),c._uU(72,"Privacy"),c.qZA()(),c.TgZ(73,"li",37)(74,"a",38),c._uU(75,"Terms"),c.qZA()(),c.TgZ(76,"li",37)(77,"a",38),c._uU(78,"Support"),c.qZA()()()()()),2&t&&(c.xp6(11),c.Q6J("formGroup",r.peliculaGroup))},directives:[pS,Ta,_u,Oo,$s,ni,m,xu,ie,Le,Ii,Fl],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin-top:1rem}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}"]}),n})()},{path:"actor/alta",component:qk},{path:"actor/listado",component:pS},{path:"peliculas/listado",component:gS},{path:"actor/actorpelicula",component:rF}];let rU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[eE.forRoot(nU)],eE]}),n})();function iU(n,e){if(1&n&&(c.TgZ(0,"li",2),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.name," ")}}let sU=(()=>{class n{constructor(t){this.items=t.collection("items").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Xb))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:3,consts:[["class","text",4,"ngFor","ngForOf"],["rel","stylesheet","href","http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"],[1,"text"]],template:function(t,r){1&t&&(c.TgZ(0,"ul"),c.YNc(1,iU,2,1,"li",0),c.ALo(2,"async"),c.qZA(),c._UZ(3,"link",1)(4,"app-navbar")(5,"router-outlet")),2&t&&(c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,r.items)))},directives:[Mn,JR,yp],pipes:[go],styles:[""]}),n})();const SS_firebase={projectId:"modelo-de-1er-parcial-736d1",appId:"1:822576261708:web:ab14873f31b9a478ebe2e9",storageBucket:"modelo-de-1er-parcial-736d1.appspot.com",apiKey:"AIzaSyDksQDCsskBRq84ORjQ4bMyiFOuPyBCuyg",authDomain:"modelo-de-1er-parcial-736d1.firebaseapp.com",messagingSenderId:"822576261708"};var oU=x(198);class xS{constructor(e){return e}}class U1{constructor(){return(0,Gt.vb)("auth")}}const MS=new c.OlP("angularfire2.auth-instances");function uU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xS(r)}}const lU={provide:U1,deps:[[new c.FiY,MS]]},cU={provide:xS,useFactory:function aU(n,e){const t=(0,Gt.JM)("auth",n,e);return t&&new xS(t)},deps:[[new c.FiY,MS],Vu]};let dU=(()=>{class n{constructor(){(0,La.KN)("angularfire",Gt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[cU,lU]}),n})();function hU(n,...e){return{ngModule:dU,providers:[{provide:MS,useFactory:uU(n),multi:!0,deps:[c.R0b,c.zs3,Gt.HU,oE,[new c.FiY,ju],...e]}]}}const fU=(0,Gt.u3)(oU.n,!0);class RS{constructor(e){return e}}const V1="firestore",PS=new c.OlP("angularfire2.firestore-instances");function mU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new RS(r)}}const yU={provide:class pU{constructor(){return(0,Gt.vb)(V1)}},deps:[[new c.FiY,PS]]},_U={provide:RS,useFactory:function gU(n,e){const t=(0,Gt.JM)(V1,n,e);return t&&new RS(t)},deps:[[new c.FiY,PS],Vu]};let vU=(()=>{class n{constructor(){(0,La.KN)("angularfire",Gt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[_U,yU]}),n})();function EU(n,...e){return{ngModule:vU,providers:[{provide:PS,useFactory:mU(n),multi:!0,deps:[c.R0b,c.zs3,Gt.HU,oE,[new c.FiY,U1],[new c.FiY,ju],...e]}]}}const wU=(0,Gt.u3)(cO,!0);let bU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[sU]}),n.\u0275inj=c.cJS({providers:[],imports:[[Jc,wr.hO.initializeApp(SS_firebase),rU,cC,_k,LS,Bl,XS(()=>lE(SS_firebase)),hU(()=>fU()),EU(()=>wU())]]}),n})();(0,c.G48)(),hm().bootstrapModule(bU).catch(n=>console.error(n))},7982:(ot,Te,x)=>{x.d(Te,{Gb:()=>c.Gb});var c=x(579)},5867:(ot,Te,x)=>{x.d(Te,{C6:()=>c.getApps,KN:()=>c.registerVersion,Mq:()=>c.getApp,ZF:()=>c.initializeApp});var c=x(9681);(0,c.registerVersion)("firebase","9.8.1","app")},127:(ot,Te,x)=>{x.d(Te,{Z:()=>c.Z});var c=x(3942);c.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(ot,Te,x)=>{x.r(Te);var c=x(5861),k=x(3942),M=x(198),se=x(2090),he=(x(9681),x(1877),x(4859));function le(){return window}function $(){return($=(0,c.Z)(function*(Q,H,U){var Se;const{BuildInfo:Qe}=le();(0,M.aq)(H.sessionId,"AuthEvent did not contain a session ID");const at=yield De(H.sessionId),Dt={};return(0,M.ar)()?Dt.ibi=Qe.packageName:(0,M.as)()?Dt.apn=Qe.packageName:(0,M.at)(Q,"operation-not-supported-in-this-environment"),Qe.displayName&&(Dt.appDisplayName=Qe.displayName),Dt.sessionId=at,(0,M.au)(Q,U,H.type,void 0,null!==(Se=H.eventId)&&void 0!==Se?Se:void 0,Dt)})).apply(this,arguments)}function Ge(){return(Ge=(0,c.Z)(function*(Q){const{BuildInfo:H}=le(),U={};(0,M.ar)()?U.iosBundleId=H.packageName:(0,M.as)()?U.androidPackageName=H.packageName:(0,M.at)(Q,"operation-not-supported-in-this-environment"),yield(0,M.av)(Q,U)})).apply(this,arguments)}function qe(){return(qe=(0,c.Z)(function*(Q,H,U){const{cordova:Se}=le();let Qe=()=>{};try{yield new Promise((at,Dt)=>{let Yt=null;function Ut(){var Ht;at();const Vn=null===(Ht=Se.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof Vn&&Vn(),"function"==typeof(null==U?void 0:U.close)&&U.close()}function xn(){Yt||(Yt=window.setTimeout(()=>{Dt((0,M.aw)(Q,"redirect-cancelled-by-user"))},2e3))}function cr(){"visible"===(null==document?void 0:document.visibilityState)&&xn()}H.addPassiveListener(Ut),document.addEventListener("resume",xn,!1),(0,M.as)()&&document.addEventListener("visibilitychange",cr,!1),Qe=()=>{H.removePassiveListener(Ut),document.removeEventListener("resume",xn,!1),document.removeEventListener("visibilitychange",cr,!1),Yt&&window.clearTimeout(Yt)}})}finally{Qe()}})).apply(this,arguments)}function De(Q){return et.apply(this,arguments)}function et(){return(et=(0,c.Z)(function*(Q){const H=Ze(Q),U=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(U)).map(Qe=>Qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(Q){if((0,M.aq)(/[0-9a-zA-Z]+/.test(Q),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Q);const H=new ArrayBuffer(Q.length),U=new Uint8Array(H);for(let Se=0;Se<Q.length;Se++)U[Se]=Q.charCodeAt(Se);return U}class Ne extends M.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(U=>U(H)),super.onEvent(H)}initialized(){var H=this;return(0,c.Z)(function*(){yield H.initPromise})()}}function J(Q){return fe.apply(this,arguments)}function fe(){return(fe=(0,c.Z)(function*(Q){const H=yield ue()._get(ce(Q));return H&&(yield ue()._remove(ce(Q))),H})).apply(this,arguments)}function ne(){const Q=[],H="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let U=0;U<20;U++){const Se=Math.floor(Math.random()*H.length);Q.push(H.charAt(Se))}return Q.join("")}function ue(){return(0,M.ay)(M.b)}function ce(Q){return(0,M.az)("authEvent",Q.config.apiKey,Q.name)}function _t(Q){if(!(null==Q?void 0:Q.includes("?")))return{};const[H,...U]=Q.split("?");return(0,se.zd)(U.join("?"))}function dt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.aw)("no-auth-event")}}function zt(){var Q;return(null===(Q=null==self?void 0:self.location)||void 0===Q?void 0:Q.protocol)||null}function sn(Q=(0,se.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()||!Q.toLowerCase().match(/iphone|ipad|ipod|android/))}function zn(){try{const Q=self.localStorage,H=M.aI();if(Q)return Q.setItem(H,"1"),Q.removeItem(H),!function Rn(Q=(0,se.z$)()){return function xr(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function fn(Q=(0,se.z$)()){return/Edge\/\d+/.test(Q)}(Q)}()||(0,se.hl)()}catch(Q){return Xn()&&(0,se.hl)()}return!1}function Xn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sn(){return(function Pt(){return"http:"===zt()||"https:"===zt()}()||(0,se.ru)()||sn())&&!function An(){return(0,se.b$)()||(0,se.UG)()}()&&zn()&&!Xn()}function er(){return sn()&&"undefined"!=typeof document}function Wn(){return(Wn=(0,c.Z)(function*(){return!!er()&&new Promise(Q=>{const H=setTimeout(()=>{Q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(H),Q(!0)})})})).apply(this,arguments)}const Jt={LOCAL:"local",NONE:"none",SESSION:"session"},Ln=M.ax,jn="persistence";function pn(Q){return Un.apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(Q){yield Q._initializationPromise;const H=Ft(),U=M.az(jn,Q.config.apiKey,Q.name);H&&H.setItem(U,Q._getPersistence())})).apply(this,arguments)}function Ft(){var Q;try{return(null===(Q=function nn(){return"undefined"!=typeof window?window:null}())||void 0===Q?void 0:Q.sessionStorage)||null}catch(H){return null}}const ft=M.ax;class nt{constructor(){this.browserResolver=M.ay(M.k),this.cordovaResolver=M.ay(class En{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aB,this._overrideRedirectResult=M.aC}_initialize(H){var U=this;return(0,c.Z)(function*(){const Se=H._key();let Qe=U.eventManagers.get(Se);return Qe||(Qe=new Ne(H),U.eventManagers.set(Se,Qe),U.attachCallbackListeners(H,Qe)),Qe})()}_openPopup(H){(0,M.at)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,U,Se,Qe){var at=this;return(0,c.Z)(function*(){!function ye(Q){var H,U,Se,Qe,at,Dt,Yt,Ut,xn,cr;const Ht=le();(0,M.ax)("function"==typeof(null===(H=null==Ht?void 0:Ht.universalLinks)||void 0===H?void 0:H.subscribe),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.ax)(void 0!==(null===(U=null==Ht?void 0:Ht.BuildInfo)||void 0===U?void 0:U.packageName),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.ax)("function"==typeof(null===(at=null===(Qe=null===(Se=null==Ht?void 0:Ht.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===at?void 0:at.openUrl),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.ax)("function"==typeof(null===(Ut=null===(Yt=null===(Dt=null==Ht?void 0:Ht.cordova)||void 0===Dt?void 0:Dt.plugins)||void 0===Yt?void 0:Yt.browsertab)||void 0===Ut?void 0:Ut.isAvailable),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.ax)("function"==typeof(null===(cr=null===(xn=null==Ht?void 0:Ht.cordova)||void 0===xn?void 0:xn.InAppBrowser)||void 0===cr?void 0:cr.open),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const Dt=yield at._initialize(H);yield Dt.initialized(),Dt.resetRedirect(),(0,M.aD)(),yield at._originValidation(H);const Yt=function Ce(Q,H,U=null){return{type:H,eventId:U,urlResponse:null,sessionId:ne(),postBody:null,tenantId:Q.tenantId,error:(0,M.aw)(Q,"no-auth-event")}}(H,Se,Qe);yield function Je(Q,H){return ue()._set(ce(Q),H)}(H,Yt);const Ut=yield function q(Q,H,U){return $.apply(this,arguments)}(H,Yt,U),xn=yield function Ae(Q){const{cordova:H}=le();return new Promise(U=>{H.plugins.browsertab.isAvailable(Se=>{let Qe=null;Se?H.plugins.browsertab.openUrl(Q):Qe=H.InAppBrowser.open(Q,(0,M.ap)()?"_blank":"_system","location=yes"),U(Qe)})})}(Ut);return function Be(Q,H,U){return qe.apply(this,arguments)}(H,Dt,xn)})()}_isIframeWebStorageSupported(H,U){throw new Error("Method not implemented.")}_originValidation(H){const U=H._key();return this.originValidationPromises[U]||(this.originValidationPromises[U]=function oe(Q){return Ge.apply(this,arguments)}(H)),this.originValidationPromises[U]}attachCallbackListeners(H,U){const{universalLinks:Se,handleOpenURL:Qe,BuildInfo:at}=le(),Dt=setTimeout((0,c.Z)(function*(){yield J(H),U.onEvent(dt())}),500),Yt=function(){var cr=(0,c.Z)(function*(Ht){clearTimeout(Dt);const Vn=yield J(H);let Pr=null;Vn&&(null==Ht?void 0:Ht.url)&&(Pr=function V(Q,H){var U,Se;const Qe=function ae(Q){const H=_t(Q),U=H.link?decodeURIComponent(H.link):void 0,Se=_t(U).link,Qe=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return _t(Qe).link||Qe||Se||U||Q}(H);if(Qe.includes("/__/auth/callback")){const at=_t(Qe),Dt=at.firebaseError?function Pe(Q){try{return JSON.parse(Q)}catch(H){return null}}(decodeURIComponent(at.firebaseError)):null,Yt=null===(Se=null===(U=null==Dt?void 0:Dt.code)||void 0===U?void 0:U.split("auth/"))||void 0===Se?void 0:Se[1],Ut=Yt?(0,M.aw)(Yt):null;return Ut?{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,error:Ut,urlResponse:null,sessionId:null,postBody:null}:{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,sessionId:Q.sessionId,urlResponse:Qe,postBody:null}}return null}(Vn,Ht.url)),U.onEvent(Pr||dt())});return function(Vn){return cr.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,Yt);const Ut=Qe,xn=`${at.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var cr=(0,c.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(xn)&&Yt({url:Ht}),"function"==typeof Ut)try{Ut(Ht)}catch(Vn){console.error(Vn)}});return function(Ht){return cr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aB,this._overrideRedirectResult=M.aC}_initialize(H){var U=this;return(0,c.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,U,Se,Qe){var at=this;return(0,c.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(H,U,Se,Qe)})()}_openRedirect(H,U,Se,Qe){var at=this;return(0,c.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(H,U,Se,Qe)})()}_isIframeWebStorageSupported(H,U){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,U)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return er()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,c.Z)(function*(){if(H.underlyingResolver)return;const U=yield function vt(){return Wn.apply(this,arguments)}();H.underlyingResolver=U?H.cordovaResolver:H.browserResolver})()}}function wn(Q){return Q.unwrap()}function Lt(Q){return _n(Q)}function _n(Q){const{_tokenResponse:H}=Q instanceof se.ZR?Q.customData:Q;if(!H)return null;if(!(Q instanceof se.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return M.P.credentialFromResult(Q);const U=H.providerId;if(!U||U===M.o.PASSWORD)return null;let Se;switch(U){case M.o.GOOGLE:Se=M.Q;break;case M.o.FACEBOOK:Se=M.N;break;case M.o.GITHUB:Se=M.T;break;case M.o.TWITTER:Se=M.W;break;default:const{oauthIdToken:Qe,oauthAccessToken:at,oauthTokenSecret:Dt,pendingToken:Yt,nonce:Ut}=H;return at||Dt||Qe||Yt?Yt?U.startsWith("saml.")?M.aL._create(U,Yt):M.J._fromParams({providerId:U,signInMethod:U,pendingToken:Yt,idToken:Qe,accessToken:at}):new M.U(U).credential({idToken:Qe,accessToken:at,rawNonce:Ut}):null}return Q instanceof se.ZR?Se.credentialFromError(Q):Se.credentialFromResult(Q)}function on(Q,H){return H.catch(U=>{throw U instanceof se.ZR&&function lr(Q,H){var U;const Se=null===(U=H.customData)||void 0===U?void 0:U._tokenResponse;if("auth/multi-factor-auth-required"===H.code)H.resolver=new K(Q,M.an(Q,H));else if(Se){const Qe=_n(H),at=H;Qe&&(at.credential=Qe,at.tenantId=Se.tenantId||void 0,at.email=Se.email||void 0,at.phoneNumber=Se.phoneNumber||void 0)}}(Q,U),U}).then(U=>{const Qe=U.user;return{operationType:U.operationType,credential:Lt(U),additionalUserInfo:M.al(U),user:Ie.getOrCreate(Qe)}})}function L(Q,H){return z.apply(this,arguments)}function z(){return(z=(0,c.Z)(function*(Q,H){const U=yield H;return{verificationId:U.verificationId,confirm:Se=>on(Q,U.confirm(Se))}})).apply(this,arguments)}class K{constructor(H,U){this.resolver=U,this.auth=function Rr(Q){return Q.wrapped()}(H)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return on(wn(this.auth),this.resolver.resolveSignIn(H))}}class Ie{constructor(H){this._delegate=H,this.multiFactor=M.ao(H)}static getOrCreate(H){return Ie.USER_MAP.has(H)||Ie.USER_MAP.set(H,new Ie(H)),Ie.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var U=this;return(0,c.Z)(function*(){return on(U.auth,M.Z(U._delegate,H))})()}linkWithPhoneNumber(H,U){var Se=this;return(0,c.Z)(function*(){return L(Se.auth,M.l(Se._delegate,H,U))})()}linkWithPopup(H){var U=this;return(0,c.Z)(function*(){return on(U.auth,M.d(U._delegate,H,nt))})()}linkWithRedirect(H){var U=this;return(0,c.Z)(function*(){return yield pn(M.aE(U.auth)),M.g(U._delegate,H,nt)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var U=this;return(0,c.Z)(function*(){return on(U.auth,M._(U._delegate,H))})()}reauthenticateWithPhoneNumber(H,U){return L(this.auth,M.r(this._delegate,H,U))}reauthenticateWithPopup(H){return on(this.auth,M.e(this._delegate,H,nt))}reauthenticateWithRedirect(H){var U=this;return(0,c.Z)(function*(){return yield pn(M.aE(U.auth)),M.h(U._delegate,H,nt)})()}sendEmailVerification(H){return M.ab(this._delegate,H)}unlink(H){var U=this;return(0,c.Z)(function*(){return yield M.ak(U._delegate,H),U})()}updateEmail(H){return M.ag(this._delegate,H)}updatePassword(H){return M.ah(this._delegate,H)}updatePhoneNumber(H){return M.u(this._delegate,H)}updateProfile(H){return M.af(this._delegate,H)}verifyBeforeUpdateEmail(H,U){return M.ac(this._delegate,H,U)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ie.USER_MAP=new WeakMap;const B=M.ax;let X=(()=>{class Q{constructor(U,Se){if(this.app=U,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Qe}=U.options;B(Qe,"invalid-api-key",{appName:U.name}),B(Qe,"invalid-api-key",{appName:U.name});const at="undefined"!=typeof window?nt:void 0;this._delegate=Se.initialize({options:{persistence:ee(Qe,U.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(M.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ie.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(U){this._delegate.languageCode=U}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(U){this._delegate.tenantId=U}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(U,Se){M.G(this._delegate,U,Se)}applyActionCode(U){return M.a2(this._delegate,U)}checkActionCode(U){return M.a3(this._delegate,U)}confirmPasswordReset(U,Se){return M.a1(this._delegate,U,Se)}createUserWithEmailAndPassword(U,Se){var Qe=this;return(0,c.Z)(function*(){return on(Qe._delegate,M.a5(Qe._delegate,U,Se))})()}fetchProvidersForEmail(U){return this.fetchSignInMethodsForEmail(U)}fetchSignInMethodsForEmail(U){return M.aa(this._delegate,U)}isSignInWithEmailLink(U){return M.a8(this._delegate,U)}getRedirectResult(){var U=this;return(0,c.Z)(function*(){B(Sn(),U._delegate,"operation-not-supported-in-this-environment");const Se=yield M.j(U._delegate,nt);return Se?on(U._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(U){!function yn(Q,H){(0,M.aE)(Q)._logFramework(H)}(this._delegate,U)}onAuthStateChanged(U,Se,Qe){const{next:at,error:Dt,complete:Yt}=j(U,Se,Qe);return this._delegate.onAuthStateChanged(at,Dt,Yt)}onIdTokenChanged(U,Se,Qe){const{next:at,error:Dt,complete:Yt}=j(U,Se,Qe);return this._delegate.onIdTokenChanged(at,Dt,Yt)}sendSignInLinkToEmail(U,Se){return M.a7(this._delegate,U,Se)}sendPasswordResetEmail(U,Se){return M.a0(this._delegate,U,Se||void 0)}setPersistence(U){var Se=this;return(0,c.Z)(function*(){let Qe;switch(function tr(Q,H){Ln(Object.values(Jt).includes(H),Q,"invalid-persistence-type"),(0,se.b$)()?Ln(H!==Jt.SESSION,Q,"unsupported-persistence-type"):(0,se.UG)()?Ln(H===Jt.NONE,Q,"unsupported-persistence-type"):Xn()?Ln(H===Jt.NONE||H===Jt.LOCAL&&(0,se.hl)(),Q,"unsupported-persistence-type"):Ln(H===Jt.NONE||zn(),Q,"unsupported-persistence-type")}(Se._delegate,U),U){case Jt.SESSION:Qe=M.a;break;case Jt.LOCAL:Qe=(yield M.ay(M.i)._isAvailable())?M.i:M.b;break;case Jt.NONE:Qe=M.L;break;default:return M.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Qe)})()}signInAndRetrieveDataWithCredential(U){return this.signInWithCredential(U)}signInAnonymously(){return on(this._delegate,M.X(this._delegate))}signInWithCredential(U){return on(this._delegate,M.Y(this._delegate,U))}signInWithCustomToken(U){return on(this._delegate,M.$(this._delegate,U))}signInWithEmailAndPassword(U,Se){return on(this._delegate,M.a6(this._delegate,U,Se))}signInWithEmailLink(U,Se){return on(this._delegate,M.a9(this._delegate,U,Se))}signInWithPhoneNumber(U,Se){return L(this._delegate,M.s(this._delegate,U,Se))}signInWithPopup(U){var Se=this;return(0,c.Z)(function*(){return B(Sn(),Se._delegate,"operation-not-supported-in-this-environment"),on(Se._delegate,M.c(Se._delegate,U,nt))})()}signInWithRedirect(U){var Se=this;return(0,c.Z)(function*(){return B(Sn(),Se._delegate,"operation-not-supported-in-this-environment"),yield pn(Se._delegate),M.f(Se._delegate,U,nt)})()}updateCurrentUser(U){return this._delegate.updateCurrentUser(U)}verifyPasswordResetCode(U){return M.a4(this._delegate,U)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Q.Persistence=Jt,Q})();function j(Q,H,U){let Se=Q;"function"!=typeof Q&&({next:Se,error:H,complete:U}=Q);const Qe=Se;return{next:Dt=>Qe(Dt&&Ie.getOrCreate(Dt)),error:H,complete:U}}function ee(Q,H){const U=function Mr(Q,H){const U=Ft();if(!U)return[];const Se=M.az(jn,Q,H);switch(U.getItem(Se)){case Jt.NONE:return[M.L];case Jt.LOCAL:return[M.i,M.a];case Jt.SESSION:return[M.a];default:return[]}}(Q,H);if("undefined"!=typeof self&&!U.includes(M.i)&&U.push(M.i),"undefined"!=typeof window)for(const Se of[M.b,M.a])U.includes(Se)||U.push(Se);return U.includes(M.L)||U.push(M.L),U}class ve{constructor(){this.providerId="phone",this._delegate=new M.P(wn(k.Z.auth()))}static credential(H,U){return M.P.credential(H,U)}verifyPhoneNumber(H,U){return this._delegate.verifyPhoneNumber(H,U)}unwrap(){return this._delegate}}ve.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,ve.PROVIDER_ID=M.P.PROVIDER_ID;const Ve=M.ax;class We{constructor(H,U,Se=k.Z.app()){var Qe;Ve(null===(Qe=Se.options)||void 0===Qe?void 0:Qe.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new M.R(H,U,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function pt(Q){Q.INTERNAL.registerComponent(new he.wA("auth-compat",H=>{const U=H.getProvider("app-compat").getImmediate(),Se=H.getProvider("auth");return new X(U,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.M,FacebookAuthProvider:M.N,GithubAuthProvider:M.T,GoogleAuthProvider:M.Q,OAuthProvider:M.U,SAMLAuthProvider:M.V,PhoneAuthProvider:ve,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:We,TwitterAuthProvider:M.W,Auth:X,AuthCredential:M.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Q.registerVersion("@firebase/auth-compat","0.2.14")}(k.Z)},8306:(ot,Te,x)=>{x.d(Te,{y:()=>q});var c=x(2961),k=x(727),M=x(8822),se=x(4671);var he=x(2416),le=x(576),me=x(2806);let q=(()=>{class Ae{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const ye=new Ae;return ye.source=this,ye.operator=qe,ye}subscribe(qe,ye,De){const et=function Ge(Ae){return Ae&&Ae instanceof c.Lv||function oe(Ae){return Ae&&(0,le.m)(Ae.next)&&(0,le.m)(Ae.error)&&(0,le.m)(Ae.complete)}(Ae)&&(0,k.Nn)(Ae)}(qe)?qe:new c.Hp(qe,ye,De);return(0,me.x)(()=>{const{operator:Ze,source:ke}=this;et.add(Ze?Ze.call(et,ke):ke?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(qe){try{return this._subscribe(qe)}catch(ye){qe.error(ye)}}forEach(qe,ye){return new(ye=$(ye))((De,et)=>{const Ze=new c.Hp({next:ke=>{try{qe(ke)}catch(Ne){et(Ne),Ze.unsubscribe()}},error:et,complete:De});this.subscribe(Ze)})}_subscribe(qe){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(qe)}[M.L](){return this}pipe(...qe){return function we(Ae){return 0===Ae.length?se.y:1===Ae.length?Ae[0]:function(qe){return Ae.reduce((ye,De)=>De(ye),qe)}}(qe)(this)}toPromise(qe){return new(qe=$(qe))((ye,De)=>{let et;this.subscribe(Ze=>et=Ze,Ze=>De(Ze),()=>ye(et))})}}return Ae.create=Be=>new Ae(Be),Ae})();function $(Ae){var Be;return null!==(Be=null!=Ae?Ae:he.v.Promise)&&void 0!==Be?Be:Promise}},7579:(ot,Te,x)=>{x.d(Te,{x:()=>he});var c=x(8306),k=x(727);const se=(0,x(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=x(8737),we=x(2806);let he=(()=>{class me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const oe=new le(this,this);return oe.operator=$,oe}_throwIfClosed(){if(this.closed)throw new se}next($){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const oe of this.currentObservers)oe.next($)}})}error($){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:oe}=this;for(;oe.length;)oe.shift().error($)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:oe,isStopped:Ge,observers:Ae}=this;return oe||Ge?k.Lc:(this.currentObservers=null,Ae.push($),new k.w0(()=>{this.currentObservers=null,(0,pe.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:oe,thrownError:Ge,isStopped:Ae}=this;oe?$.error(Ge):Ae&&$.complete()}asObservable(){const $=new c.y;return $.source=this,$}}return me.create=(q,$)=>new le(q,$),me})();class le extends he{constructor(q,$){super(),this.destination=q,this.source=$}next(q){var $,oe;null===(oe=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===oe||oe.call($,q)}error(q){var $,oe;null===(oe=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===oe||oe.call($,q)}complete(){var q,$;null===($=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===$||$.call(q)}_subscribe(q){var $,oe;return null!==(oe=null===($=this.source)||void 0===$?void 0:$.subscribe(q))&&void 0!==oe?oe:k.Lc}}},2961:(ot,Te,x)=>{x.d(Te,{Hp:()=>qe,Lv:()=>oe});var c=x(576),k=x(727),M=x(2416),se=x(7849);function pe(){}const we=me("C",void 0,void 0);function me(ke,Ne,Ce){return{kind:ke,value:Ne,error:Ce}}var q=x(3410),$=x(2806);class oe extends k.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,k.Nn)(Ne)&&Ne.add(this)):this.destination=Ze}static create(Ne,Ce,Je){return new qe(Ne,Ce,Je)}next(Ne){this.isStopped?et(function le(ke){return me("N",ke,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?et(function he(ke){return me("E",void 0,ke)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?et(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ae(ke,Ne){return Ge.call(ke,Ne)}class Be{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Ne)}catch(Je){ye(Je)}}error(Ne){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Ne)}catch(Je){ye(Je)}else ye(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(Ce){ye(Ce)}}}class qe extends oe{constructor(Ne,Ce,Je){let J;if(super(),(0,c.m)(Ne)||!Ne)J={next:null!=Ne?Ne:void 0,error:null!=Ce?Ce:void 0,complete:null!=Je?Je:void 0};else{let fe;this&&M.v.useDeprecatedNextContext?(fe=Object.create(Ne),fe.unsubscribe=()=>this.unsubscribe(),J={next:Ne.next&&Ae(Ne.next,fe),error:Ne.error&&Ae(Ne.error,fe),complete:Ne.complete&&Ae(Ne.complete,fe)}):J=Ne}this.destination=new Be(J)}}function ye(ke){M.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(ke):(0,se.h)(ke)}function et(ke,Ne){const{onStoppedNotification:Ce}=M.v;Ce&&q.z.setTimeout(()=>Ce(ke,Ne))}const Ze={closed:!0,next:pe,error:function De(ke){throw ke},complete:pe}},727:(ot,Te,x)=>{x.d(Te,{Lc:()=>we,w0:()=>pe,Nn:()=>he});var c=x(576);const M=(0,x(3888).d)(me=>function($){me(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((oe,Ge)=>`${Ge+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var se=x(8737);class pe{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:oe}=this;if((0,c.m)(oe))try{oe()}catch(Ae){q=Ae instanceof M?Ae.errors:[Ae]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ae of Ge)try{le(Ae)}catch(Be){q=null!=q?q:[],Be instanceof M?q=[...q,...Be.errors]:q.push(Be)}}if(q)throw new M(q)}}add(q){var $;if(q&&q!==this)if(this.closed)le(q);else{if(q instanceof pe){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(q)}}_hasParent(q){const{_parentage:$}=this;return $===q||Array.isArray($)&&$.includes(q)}_addParent(q){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(q),$):$?[$,q]:q}_removeParent(q){const{_parentage:$}=this;$===q?this._parentage=null:Array.isArray($)&&(0,se.P)($,q)}remove(q){const{_finalizers:$}=this;$&&(0,se.P)($,q),q instanceof pe&&q._removeParent(this)}}pe.EMPTY=(()=>{const me=new pe;return me.closed=!0,me})();const we=pe.EMPTY;function he(me){return me instanceof pe||me&&"closed"in me&&(0,c.m)(me.remove)&&(0,c.m)(me.add)&&(0,c.m)(me.unsubscribe)}function le(me){(0,c.m)(me)?me():me.unsubscribe()}},2416:(ot,Te,x)=>{x.d(Te,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Te,x)=>{x.d(Te,{E:()=>k});const k=new(x(8306).y)(pe=>pe.complete())},8996:(ot,Te,x)=>{x.d(Te,{D:()=>Ne});var c=x(8421),k=x(5363),M=x(9468),we=x(8306),le=x(2202),me=x(576),q=x(9672);function oe(Ce,Je){if(!Ce)throw new Error("Iterable cannot be null");return new we.y(J=>{(0,q.f)(J,Je,()=>{const fe=Ce[Symbol.asyncIterator]();(0,q.f)(J,Je,()=>{fe.next().then(V=>{V.done?J.complete():J.next(V.value)})},0,!0)})})}var Ge=x(3670),Ae=x(8239),Be=x(1144),qe=x(6495),ye=x(2206),De=x(4532),et=x(3260);function Ne(Ce,Je){return Je?function ke(Ce,Je){if(null!=Ce){if((0,Ge.c)(Ce))return function se(Ce,Je){return(0,c.Xf)(Ce).pipe((0,M.R)(Je),(0,k.Q)(Je))}(Ce,Je);if((0,Be.z)(Ce))return function he(Ce,Je){return new we.y(J=>{let fe=0;return Je.schedule(function(){fe===Ce.length?J.complete():(J.next(Ce[fe++]),J.closed||this.schedule())})})}(Ce,Je);if((0,Ae.t)(Ce))return function pe(Ce,Je){return(0,c.Xf)(Ce).pipe((0,M.R)(Je),(0,k.Q)(Je))}(Ce,Je);if((0,ye.D)(Ce))return oe(Ce,Je);if((0,qe.T)(Ce))return function $(Ce,Je){return new we.y(J=>{let fe;return(0,q.f)(J,Je,()=>{fe=Ce[le.h](),(0,q.f)(J,Je,()=>{let V,ne;try{({value:V,done:ne}=fe.next())}catch(ue){return void J.error(ue)}ne?J.complete():J.next(V)},0,!0)}),()=>(0,me.m)(null==fe?void 0:fe.return)&&fe.return()})}(Ce,Je);if((0,et.L)(Ce))return function Ze(Ce,Je){return oe((0,et.Q)(Ce),Je)}(Ce,Je)}throw(0,De.z)(Ce)}(Ce,Je):(0,c.Xf)(Ce)}},8421:(ot,Te,x)=>{x.d(Te,{Xf:()=>Ge});var c=x(655),k=x(1144),M=x(8239),se=x(8306),pe=x(3670),we=x(2206),he=x(4532),le=x(6495),me=x(3260),q=x(576),$=x(7849),oe=x(8822);function Ge(ke){if(ke instanceof se.y)return ke;if(null!=ke){if((0,pe.c)(ke))return function Ae(ke){return new se.y(Ne=>{const Ce=ke[oe.L]();if((0,q.m)(Ce.subscribe))return Ce.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,k.z)(ke))return function Be(ke){return new se.y(Ne=>{for(let Ce=0;Ce<ke.length&&!Ne.closed;Ce++)Ne.next(ke[Ce]);Ne.complete()})}(ke);if((0,M.t)(ke))return function qe(ke){return new se.y(Ne=>{ke.then(Ce=>{Ne.closed||(Ne.next(Ce),Ne.complete())},Ce=>Ne.error(Ce)).then(null,$.h)})}(ke);if((0,we.D)(ke))return De(ke);if((0,le.T)(ke))return function ye(ke){return new se.y(Ne=>{for(const Ce of ke)if(Ne.next(Ce),Ne.closed)return;Ne.complete()})}(ke);if((0,me.L)(ke))return function et(ke){return De((0,me.Q)(ke))}(ke)}throw(0,he.z)(ke)}function De(ke){return new se.y(Ne=>{(function Ze(ke,Ne){var Ce,Je,J,fe;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,c.KL)(ke);!(Je=yield Ce.next()).done;)if(Ne.next(Je.value),Ne.closed)return}catch(V){J={error:V}}finally{try{Je&&!Je.done&&(fe=Ce.return)&&(yield fe.call(Ce))}finally{if(J)throw J.error}}Ne.complete()})})(ke,Ne).catch(Ce=>Ne.error(Ce))})}},6451:(ot,Te,x)=>{x.d(Te,{T:()=>we});var c=x(8189),k=x(8421),M=x(515),se=x(7669),pe=x(8996);function we(...he){const le=(0,se.yG)(he),me=(0,se._6)(he,1/0),q=he;return q.length?1===q.length?(0,k.Xf)(q[0]):(0,c.J)(me)((0,pe.D)(q,le)):M.E}},5403:(ot,Te,x)=>{x.d(Te,{Q:()=>M,x:()=>k});var c=x(2961);function k(se,pe,we,he,le){return new M(se,pe,we,he,le)}class M extends c.Lv{constructor(pe,we,he,le,me,q){super(pe),this.onFinalize=me,this.shouldUnsubscribe=q,this._next=we?function($){try{we($)}catch(oe){pe.error(oe)}}:super._next,this._error=le?function($){try{le($)}catch(oe){pe.error(oe)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch($){pe.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},4004:(ot,Te,x)=>{x.d(Te,{U:()=>M});var c=x(4482),k=x(5403);function M(se,pe){return(0,c.e)((we,he)=>{let le=0;we.subscribe((0,k.x)(he,me=>{he.next(se.call(pe,me,le++))}))})}},8189:(ot,Te,x)=>{x.d(Te,{J:()=>M});var c=x(5577),k=x(4671);function M(se=1/0){return(0,c.z)(k.y,se)}},5577:(ot,Te,x)=>{x.d(Te,{z:()=>le});var c=x(4004),k=x(8421),M=x(4482),se=x(9672),pe=x(5403),he=x(576);function le(me,q,$=1/0){return(0,he.m)(q)?le((oe,Ge)=>(0,c.U)((Ae,Be)=>q(oe,Ae,Ge,Be))((0,k.Xf)(me(oe,Ge))),$):("number"==typeof q&&($=q),(0,M.e)((oe,Ge)=>function we(me,q,$,oe,Ge,Ae,Be,qe){const ye=[];let De=0,et=0,Ze=!1;const ke=()=>{Ze&&!ye.length&&!De&&q.complete()},Ne=Je=>De<oe?Ce(Je):ye.push(Je),Ce=Je=>{Ae&&q.next(Je),De++;let J=!1;(0,k.Xf)($(Je,et++)).subscribe((0,pe.x)(q,fe=>{null==Ge||Ge(fe),Ae?Ne(fe):q.next(fe)},()=>{J=!0},void 0,()=>{if(J)try{for(De--;ye.length&&De<oe;){const fe=ye.shift();Be?(0,se.f)(q,Be,()=>Ce(fe)):Ce(fe)}ke()}catch(fe){q.error(fe)}}))};return me.subscribe((0,pe.x)(q,Ne,()=>{Ze=!0,ke()})),()=>{null==qe||qe()}}(oe,Ge,me,$)))}},5363:(ot,Te,x)=>{x.d(Te,{Q:()=>se});var c=x(9672),k=x(4482),M=x(5403);function se(pe,we=0){return(0,k.e)((he,le)=>{he.subscribe((0,M.x)(le,me=>(0,c.f)(le,pe,()=>le.next(me),we),()=>(0,c.f)(le,pe,()=>le.complete(),we),me=>(0,c.f)(le,pe,()=>le.error(me),we)))})}},3099:(ot,Te,x)=>{x.d(Te,{B:()=>we});var c=x(8996),k=x(5698),M=x(7579),se=x(2961),pe=x(4482);function we(le={}){const{connector:me=(()=>new M.x),resetOnError:q=!0,resetOnComplete:$=!0,resetOnRefCountZero:oe=!0}=le;return Ge=>{let Ae=null,Be=null,qe=null,ye=0,De=!1,et=!1;const Ze=()=>{null==Be||Be.unsubscribe(),Be=null},ke=()=>{Ze(),Ae=qe=null,De=et=!1},Ne=()=>{const Ce=Ae;ke(),null==Ce||Ce.unsubscribe()};return(0,pe.e)((Ce,Je)=>{ye++,!et&&!De&&Ze();const J=qe=null!=qe?qe:me();Je.add(()=>{ye--,0===ye&&!et&&!De&&(Be=he(Ne,oe))}),J.subscribe(Je),Ae||(Ae=new se.Hp({next:fe=>J.next(fe),error:fe=>{et=!0,Ze(),Be=he(ke,q,fe),J.error(fe)},complete:()=>{De=!0,Ze(),Be=he(ke,$),J.complete()}}),(0,c.D)(Ce).subscribe(Ae))})(Ge)}}function he(le,me,...q){return!0===me?(le(),null):!1===me?null:me(...q).pipe((0,k.q)(1)).subscribe(()=>le())}},9468:(ot,Te,x)=>{x.d(Te,{R:()=>k});var c=x(4482);function k(M,se=0){return(0,c.e)((pe,we)=>{we.add(M.schedule(()=>pe.subscribe(we),se))})}},5698:(ot,Te,x)=>{x.d(Te,{q:()=>se});var c=x(515),k=x(4482),M=x(5403);function se(pe){return pe<=0?()=>c.E:(0,k.e)((we,he)=>{let le=0;we.subscribe((0,M.x)(he,me=>{++le<=pe&&(he.next(me),pe<=le&&he.complete())}))})}},8505:(ot,Te,x)=>{x.d(Te,{b:()=>pe});var c=x(576),k=x(4482),M=x(5403),se=x(4671);function pe(we,he,le){const me=(0,c.m)(we)||he||le?{next:we,error:he,complete:le}:we;return me?(0,k.e)((q,$)=>{var oe;null===(oe=me.subscribe)||void 0===oe||oe.call(me);let Ge=!0;q.subscribe((0,M.x)($,Ae=>{var Be;null===(Be=me.next)||void 0===Be||Be.call(me,Ae),$.next(Ae)},()=>{var Ae;Ge=!1,null===(Ae=me.complete)||void 0===Ae||Ae.call(me),$.complete()},Ae=>{var Be;Ge=!1,null===(Be=me.error)||void 0===Be||Be.call(me,Ae),$.error(Ae)},()=>{var Ae,Be;Ge&&(null===(Ae=me.unsubscribe)||void 0===Ae||Ae.call(me)),null===(Be=me.finalize)||void 0===Be||Be.call(me)}))}):se.y}},4408:(ot,Te,x)=>{x.d(Te,{o:()=>pe});var c=x(727);class k extends c.w0{constructor(he,le){super()}schedule(he,le=0){return this}}const M={setInterval(we,he,...le){const{delegate:me}=M;return(null==me?void 0:me.setInterval)?me.setInterval(we,he,...le):setInterval(we,he,...le)},clearInterval(we){const{delegate:he}=M;return((null==he?void 0:he.clearInterval)||clearInterval)(we)},delegate:void 0};var se=x(8737);class pe extends k{constructor(he,le){super(he,le),this.scheduler=he,this.work=le,this.pending=!1}schedule(he,le=0){if(this.closed)return this;this.state=he;const me=this.id,q=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(q,me,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(q,this.id,le),this}requestAsyncId(he,le,me=0){return M.setInterval(he.flush.bind(he,this),me)}recycleAsyncId(he,le,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return le;M.clearInterval(le)}execute(he,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(he,le);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,le){let q,me=!1;try{this.work(he)}catch($){me=!0,q=$||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:he,scheduler:le}=this,{actions:me}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(me,this),null!=he&&(this.id=this.recycleAsyncId(le,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Te,x)=>{x.d(Te,{v:()=>M});var c=x(6063);class k{constructor(pe,we=k.now){this.schedulerActionCtor=pe,this.now=we}schedule(pe,we=0,he){return new this.schedulerActionCtor(this,pe).schedule(he,we)}}k.now=c.l.now;class M extends k{constructor(pe,we=k.now){super(pe,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(pe){const{actions:we}=this;if(this._active)return void we.push(pe);let he;this._active=!0;do{if(he=pe.execute(pe.state,pe.delay))break}while(pe=we.shift());if(this._active=!1,he){for(;pe=we.shift();)pe.unsubscribe();throw he}}}},4986:(ot,Te,x)=>{x.d(Te,{z:()=>M});var c=x(4408);const M=new(x(7565).v)(c.o)},6063:(ot,Te,x)=>{x.d(Te,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ot,Te,x)=>{x.d(Te,{z:()=>c});const c={setTimeout(k,M,...se){const{delegate:pe}=c;return(null==pe?void 0:pe.setTimeout)?pe.setTimeout(k,M,...se):setTimeout(k,M,...se)},clearTimeout(k){const{delegate:M}=c;return((null==M?void 0:M.clearTimeout)||clearTimeout)(k)},delegate:void 0}},2202:(ot,Te,x)=>{x.d(Te,{h:()=>k});const k=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Te,x)=>{x.d(Te,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Te,x)=>{x.d(Te,{_6:()=>we,jO:()=>se,yG:()=>pe});var c=x(576);function M(he){return he[he.length-1]}function se(he){return(0,c.m)(M(he))?he.pop():void 0}function pe(he){return function k(he){return he&&(0,c.m)(he.schedule)}(M(he))?he.pop():void 0}function we(he,le){return"number"==typeof M(he)?he.pop():le}},8737:(ot,Te,x)=>{function c(k,M){if(k){const se=k.indexOf(M);0<=se&&k.splice(se,1)}}x.d(Te,{P:()=>c})},3888:(ot,Te,x)=>{function c(k){const se=k(pe=>{Error.call(pe),pe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}x.d(Te,{d:()=>c})},2806:(ot,Te,x)=>{x.d(Te,{O:()=>se,x:()=>M});var c=x(2416);let k=null;function M(pe){if(c.v.useDeprecatedSynchronousErrorHandling){const we=!k;if(we&&(k={errorThrown:!1,error:null}),pe(),we){const{errorThrown:he,error:le}=k;if(k=null,he)throw le}}else pe()}function se(pe){c.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=pe)}},9672:(ot,Te,x)=>{function c(k,M,se,pe=0,we=!1){const he=M.schedule(function(){se(),we?k.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(k.add(he),!we)return he}x.d(Te,{f:()=>c})},4671:(ot,Te,x)=>{function c(k){return k}x.d(Te,{y:()=>c})},1144:(ot,Te,x)=>{x.d(Te,{z:()=>c});const c=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(ot,Te,x)=>{x.d(Te,{D:()=>k});var c=x(576);function k(M){return Symbol.asyncIterator&&(0,c.m)(null==M?void 0:M[Symbol.asyncIterator])}},576:(ot,Te,x)=>{function c(k){return"function"==typeof k}x.d(Te,{m:()=>c})},3670:(ot,Te,x)=>{x.d(Te,{c:()=>M});var c=x(8822),k=x(576);function M(se){return(0,k.m)(se[c.L])}},6495:(ot,Te,x)=>{x.d(Te,{T:()=>M});var c=x(2202),k=x(576);function M(se){return(0,k.m)(null==se?void 0:se[c.h])}},8239:(ot,Te,x)=>{x.d(Te,{t:()=>k});var c=x(576);function k(M){return(0,c.m)(null==M?void 0:M.then)}},3260:(ot,Te,x)=>{x.d(Te,{L:()=>se,Q:()=>M});var c=x(655),k=x(576);function M(pe){return(0,c.FC)(this,arguments,function*(){const he=pe.getReader();try{for(;;){const{value:le,done:me}=yield(0,c.qq)(he.read());if(me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(le)}}finally{he.releaseLock()}})}function se(pe){return(0,k.m)(null==pe?void 0:pe.getReader)}},4482:(ot,Te,x)=>{x.d(Te,{A:()=>k,e:()=>M});var c=x(576);function k(se){return(0,c.m)(null==se?void 0:se.lift)}function M(se){return pe=>{if(k(pe))return pe.lift(function(we){try{return se(we,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ot,Te,x)=>{x.d(Te,{h:()=>M});var c=x(2416),k=x(3410);function M(se){k.z.setTimeout(()=>{const{onUnhandledError:pe}=c.v;if(!pe)throw se;pe(se)})}},4532:(ot,Te,x)=>{function c(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}x.d(Te,{z:()=>c})},655:(ot,Te,x)=>{function se(V,ne){var ue={};for(var ce in V)Object.prototype.hasOwnProperty.call(V,ce)&&ne.indexOf(ce)<0&&(ue[ce]=V[ce]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ce=Object.getOwnPropertySymbols(V);Pe<ce.length;Pe++)ne.indexOf(ce[Pe])<0&&Object.prototype.propertyIsEnumerable.call(V,ce[Pe])&&(ue[ce[Pe]]=V[ce[Pe]])}return ue}function le(V,ne,ue,ce){return new(ue||(ue=Promise))(function(ae,_t){function Rt(dt){try{it(ce.next(dt))}catch(yn){_t(yn)}}function En(dt){try{it(ce.throw(dt))}catch(yn){_t(yn)}}function it(dt){dt.done?ae(dt.value):function Pe(ae){return ae instanceof ue?ae:new ue(function(_t){_t(ae)})}(dt.value).then(Rt,En)}it((ce=ce.apply(V,ne||[])).next())})}function ye(V){return this instanceof ye?(this.v=V,this):new ye(V)}function De(V,ne,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ce=ue.apply(V,ne||[]),ae=[];return Pe={},_t("next"),_t("throw"),_t("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function _t(ln){ce[ln]&&(Pe[ln]=function(mr){return new Promise(function(rn,zt){ae.push([ln,mr,rn,zt])>1||Rt(ln,mr)})})}function Rt(ln,mr){try{!function En(ln){ln.value instanceof ye?Promise.resolve(ln.value.v).then(it,dt):yn(ae[0][2],ln)}(ce[ln](mr))}catch(rn){yn(ae[0][3],rn)}}function it(ln){Rt("next",ln)}function dt(ln){Rt("throw",ln)}function yn(ln,mr){ln(mr),ae.shift(),ae.length&&Rt(ae[0][0],ae[0][1])}}function Ze(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ne=V[Symbol.asyncIterator];return ne?ne.call(V):(V=function oe(V){var ne="function"==typeof Symbol&&Symbol.iterator,ue=ne&&V[ne],ce=0;if(ue)return ue.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&ce>=V.length&&(V=void 0),{value:V&&V[ce++],done:!V}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),ue={},ce("next"),ce("throw"),ce("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function ce(ae){ue[ae]=V[ae]&&function(_t){return new Promise(function(Rt,En){!function Pe(ae,_t,Rt,En){Promise.resolve(En).then(function(it){ae({value:it,done:Rt})},_t)}(Rt,En,(_t=V[ae](_t)).done,_t.value)})}}}x.d(Te,{FC:()=>De,KL:()=>Ze,_T:()=>se,mG:()=>le,qq:()=>ye})},5e3:(ot,Te,x)=>{x.d(Te,{$8M:()=>yu,$Z:()=>ND,AFp:()=>za,ALo:()=>Sh,AaK:()=>le,AsE:()=>p_,CHM:()=>Oi,CRH:()=>Q_,CZH:()=>qn,CqO:()=>PE,DdM:()=>V_,EJc:()=>Tg,EpF:()=>FD,F4k:()=>LD,FYo:()=>Ha,FiY:()=>bi,G48:()=>nT,GfV:()=>lg,Gpc:()=>$,JOm:()=>Is,LFG:()=>Yn,LSH:()=>Um,Lbi:()=>Ko,NdJ:()=>NE,OlP:()=>On,Oqu:()=>h_,PXZ:()=>hb,Q6J:()=>Qy,QGY:()=>ih,Qsj:()=>F_,R0b:()=>os,RDi:()=>uu,Rgc:()=>Oh,SBq:()=>gc,Sil:()=>ib,Suo:()=>qa,TTD:()=>Us,TgZ:()=>sc,VKq:()=>Ku,VLi:()=>Sg,X6Q:()=>tT,XFs:()=>vt,Xpm:()=>ve,Y36:()=>ic,YKP:()=>Tw,YNc:()=>xp,Yjl:()=>Qe,Yz7:()=>rn,ZZ4:()=>Ng,_Bn:()=>k_,_UZ:()=>Xy,_Vd:()=>Dh,_c5:()=>kg,_uU:()=>iC,aQg:()=>Og,c2e:()=>rb,cJS:()=>Pt,cg1:()=>m_,dDg:()=>Jr,deG:()=>Ff,dqk:()=>Lt,eFA:()=>zh,ekj:()=>l_,g9A:()=>nb,h0i:()=>oo,hGG:()=>Fg,hij:()=>f_,iGM:()=>Y_,ifc:()=>Ft,ip1:()=>Zo,kL8:()=>jp,lG2:()=>Se,lcZ:()=>Mh,n5z:()=>ld,oAB:()=>Q,oxw:()=>jD,q4F:()=>Ga,qLn:()=>Md,qOj:()=>Ee,qZA:()=>Jy,sBO:()=>iT,sIi:()=>Xd,s_b:()=>kh,soG:()=>uo,tBr:()=>Zs,tb:()=>Ic,tp0:()=>Ia,uIk:()=>Sp,vHH:()=>Be,vpe:()=>ao,wAp:()=>yt,xp6:()=>I0,z2F:()=>il,zSh:()=>My,zs3:()=>As});var c=x(7579),k=x(727),M=x(8306),se=x(6451),pe=x(3099);function we(i){for(let s in i)if(i[s]===we)return s;throw Error("Could not find renamed property on target object.")}function he(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function me(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const q=we({__forward_ref__:we});function $(i){return i.__forward_ref__=$,i.toString=function(){return le(this())},i}function oe(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(q)&&i.__forward_ref__===$}class Be extends Error{constructor(s,a){super(function qe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function De(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}function Ne(i,s){const a=s?` in ${s}`:"";throw new Be(-201,`No provider for ${De(i)} found${a}`)}function it(i,s){null==i&&function dt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function rn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Pt(i){return{providers:i.providers||[],imports:i.imports||[]}}function sn(i){return An(i,zn)||An(i,Sn)}function An(i,s){return i.hasOwnProperty(s)?i[s]:null}function Rn(i){return i&&(i.hasOwnProperty(Xn)||i.hasOwnProperty(er))?i[Xn]:null}const zn=we({\u0275prov:we}),Xn=we({\u0275inj:we}),Sn=we({ngInjectableDef:we}),er=we({ngInjectorDef:we});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Wn;function Jt(i){const s=Wn;return Wn=i,s}function Ln(i,s,a){const l=sn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&vt.Optional?null:void 0!==s?s:void Ne(le(i),"Injector")}function tr(i){return{toString:i}.toString()}var pn=(()=>((pn=pn||{})[pn.OnPush=0]="OnPush",pn[pn.Default=1]="Default",pn))(),Ft=(()=>{return(i=Ft||(Ft={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ft;var i})();const ft="undefined"!=typeof globalThis&&globalThis,nt="undefined"!=typeof window&&window,wn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt=ft||"undefined"!=typeof global&&global||nt||wn,on={},L=[],z=we({\u0275cmp:we}),K=we({\u0275dir:we}),Ie=we({\u0275pipe:we}),B=we({\u0275mod:we}),X=we({\u0275fac:we}),j=we({__NG_ELEMENT_ID__:we});let ee=0;function ve(i){return tr(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===pn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ft.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,y=i.pipes;return l.id+=ee++,l.inputs=U(i.inputs,a),l.outputs=U(i.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(We):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(ze):null,l})}function We(i){return at(i)||function Dt(i){return i[K]||null}(i)}function ze(i){return function Yt(i){return i[Ie]||null}(i)}const pt={};function Q(i){return tr(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(pt[i.id]=i.type),s})}function U(i,s){if(null==i)return on;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,s&&(s[d]=f)}return a}const Se=ve;function Qe(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function at(i){return i[z]||null}function Ut(i,s){const a=i[B]||null;if(!a&&!0===s)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function Nr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Or(i){return Array.isArray(i)&&!0===i[1]}function ho(i){return 0!=(8&i.flags)}function fo(i){return 2==(2&i.flags)}function ls(i){return 1==(1&i.flags)}function Wr(i){return null!==i.template}function Hc(i){return 0!=(512&i[2])}function hi(i,s){return i.hasOwnProperty(X)?i[X]:null}class yo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Us(){return sa}function sa(i){return i.type.prototype.ngOnChanges&&(i.setInput=Wc),ou}function ou(){const i=_o(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===on)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Wc(i,s,a,l){const d=_o(i)||function Vs(i,s){return i[ds]=s}(i,{previous:on,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[a],b=y[E];f[E]=new yo(b&&b.currentValue,s,y===on),i[l]=s}Us.ngInherit=!0;const ds="__ngSimpleChanges__";function _o(i){return i[ds]||null}let ua;function uu(i){ua=i}function bn(i){return!!i.listen}const la={createRenderer:(i,s)=>function Ji(){return void 0!==ua?ua:"undefined"!=typeof document?document:void 0}()};function vn(i){for(;Array.isArray(i);)i=i[0];return i}function ca(i,s){return vn(s[i])}function vr(i,s){return vn(s[i.index])}function wo(i,s){return i.data[s]}function R(i,s){const a=s[i];return Nr(a)?a:a[0]}function P(i){return 4==(4&i[2])}function Y(i){return 128==(128&i[2])}function He(i,s){return null==s?null:i[s]}function Xe(i){i[18]=0}function Mt(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ut={lFrame:xf(null),bindingsEnabled:!0};function fi(){return ut.bindingsEnabled}function Fe(){return ut.lFrame.lView}function jt(){return ut.lFrame.tView}function Oi(i){return ut.lFrame.contextLView=i,i[8]}function Cn(){let i=Df();for(;null!==i&&64===i.type;)i=i.parent;return i}function Df(){return ut.lFrame.currentTNode}function ts(i,s){const a=ut.lFrame;a.currentTNode=i,a.isParent=s}function Yc(){return ut.lFrame.isParent}function Cr(){const i=ut.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function fa(){return ut.lFrame.bindingIndex++}function ki(i){const s=ut.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function hm(i,s){const a=ut.lFrame;a.bindingIndex=a.bindingRootIndex=i,Jc(s)}function Jc(i){ut.lFrame.currentDirectiveIndex=i}function Tf(){return ut.lFrame.currentQueryIndex}function Af(i){ut.lFrame.currentQueryIndex=i}function Sf(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function du(i,s,a){if(a&vt.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&vt.Host||(d=Sf(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const l=ut.lFrame=bo();return l.currentTNode=s,l.lView=i,!0}function bl(i){const s=bo(),a=i[1];ut.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function bo(){const i=ut.lFrame,s=null===i?null:i.child;return null===s?xf(i):s}function xf(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function fm(){const i=ut.lFrame;return ut.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Xc=fm;function Fi(){const i=fm();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function kr(){return ut.lFrame.selectedIndex}function js(i){ut.lFrame.selectedIndex=i}function ir(){const i=ut.lFrame;return wo(i.tView,i.selectedIndex)}function ps(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:A}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),D&&((i.viewHooks||(i.viewHooks=[])).push(a,D),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,D)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(a,A)}}function hu(i,s,a){mm(i,s,3,a)}function Il(i,s,a,l){(3&i[2])===a&&mm(i,s,a,l)}function Rf(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function mm(i,s,a,l){const f=null!=l?l:-1,y=s.length-1;let E=0;for(let b=void 0!==l?65535&i[18]:0;b<y;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=l&&E>=l)break}else s[b]<0&&(i[18]+=65536),(E<f||-1==f)&&(Hv(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Hv(i,s,a,l){const d=a[l]<0,f=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class pa{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function nd(i,s,a){const l=bn(i);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const y=a[d++],E=a[d++],b=a[d++];l?i.setAttribute(s,E,b,y):s.setAttributeNS(y,E,b)}else{const y=f,E=a[++d];rd(y)?l&&i.setProperty(s,y,E):l?i.setAttribute(s,y,E):s.setAttribute(y,E),d++}}return d}function Dl(i){return 3===i||4===i||6===i}function rd(i){return 64===i.charCodeAt(0)}function pu(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||ga(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function ga(i,s,a,l,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function ma(i){return-1!==i}function gn(i){return 32767&i}function Tt(i,s){let a=function Tr(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let id=!0;function ya(i){const s=id;return id=i,s}let Pf=0;function Zr(i,s){const a=Do(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Io(l.data,i),Io(s,null),Io(l.blueprint,null));const d=Cl(i,s),f=i.injectorIndex;if(ma(d)){const y=gn(d),E=Tt(d,s),b=E[1].data;for(let D=0;D<8;D++)s[f+D]=E[y+D]|b[y+D]}return s[f+8]=d,f}function Io(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Do(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Cl(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const f=d[1],y=f.type;if(l=2===y?f.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function _a(i,s,a){!function ns(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(j)&&(l=a[j]),null==l&&(l=a[j]=Pf++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function $s(i,s,a){if(a&vt.Optional)return i;Ne(s,"NodeInjector")}function ys(i,s,a,l){if(a&vt.Optional&&void 0===l&&(l=null),0==(a&(vt.Self|vt.Host))){const d=i[9],f=Jt(void 0);try{return d?d.get(s,l,a&vt.Optional):Ln(s,l,a&vt.Optional)}finally{Jt(f)}}return $s(l,s,a)}function gu(i,s,a,l=vt.Default,d){if(null!==i){const f=function Of(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof s?s>=0?255&s:Hs:s}(a);if("function"==typeof f){if(!du(s,i,l))return l&vt.Host?$s(d,a,l):ys(s,a,l,d);try{const y=f(l);if(null!=y||l&vt.Optional)return y;Ne(a)}finally{Xc()}}else if("number"==typeof f){let y=null,E=Do(i,s),b=-1,D=l&vt.Host?s[16][6]:null;for((-1===E||l&vt.SkipSelf)&&(b=-1===E?Cl(i,s):s[E+8],-1!==b&&ud(l,!1)?(y=s[1],E=gn(b),s=Tt(b,s)):E=-1);-1!==E;){const A=s[1];if(ad(f,E,A.data)){const O=vm(E,s,a,y,l,D);if(O!==Er)return O}b=s[E+8],-1!==b&&ud(l,s[1].data[E+8]===D)&&ad(f,E,s)?(y=A,E=gn(b),s=Tt(b,s)):E=-1}}}return ys(s,a,l,d)}const Er={};function Hs(){return new _s(Cn(),Fe())}function vm(i,s,a,l,d,f){const y=s[1],E=y.data[i+8],A=Li(E,y,a,null==l?fo(E)&&id:l!=y&&0!=(3&E.type),d&vt.Host&&f===E);return null!==A?Co(s,y,A,E):Er}function Li(i,s,a,l,d){const f=i.providerIndexes,y=s.data,E=1048575&f,b=i.directiveStart,A=f>>20,G=d?E+A:i.directiveEnd;for(let re=l?E:E+A;re<G;re++){const xe=y[re];if(re<b&&a===xe||re>=b&&xe.type===a)return re}if(d){const re=y[b];if(re&&Wr(re)&&re.type===a)return b}return null}function Co(i,s,a,l){let d=i[a];const f=s.data;if(function Gv(i){return i instanceof pa}(d)){const y=d;y.resolving&&function et(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Be(-200,`Circular dependency in DI detected for ${i}${a}`)}(De(f[a]));const E=ya(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Jt(y.injectImpl):null;du(i,l,vt.Default);try{d=i[a]=y.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Mf(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(l){const y=sa(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==b&&Jt(b),ya(E),y.resolving=!1,Xc()}}return d}function ad(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ud(i,s){return!(i&vt.Self||i&vt.Host&&s)}class _s{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return gu(this._tNode,this._lView,s,l,a)}}function ld(i){return tr(()=>{const s=i.prototype.constructor,a=s[X]||mu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[X]||mu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function mu(i){return Ge(i)?()=>{const s=mu(oe(i));return s&&s()}:hi(i)}function yu(i){return function Nf(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Dl(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(Cn(),i)}const To="__parameters__";function va(i,s,a){return tr(()=>{const l=function Tl(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(b,D,A){const O=b.hasOwnProperty(To)?b[To]:Object.defineProperty(b,To,{value:[]})[To];for(;O.length<=A;)O.push(null);return(O[A]=O[A]||[]).push(y),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class On{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ff=new On("AnalyzeForEntryComponents");function ti(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),ti(l,s)):s!==i&&s.push(l)}return s}function ni(i,s){i.forEach(a=>Array.isArray(a)?ni(a,s):s(a))}function _u(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function qs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function pi(i,s,a){let l=Eu(i,s);return l>=0?i[1|l]=a:(l=~l,function Dm(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function jf(i,s){const a=Eu(i,s);if(a>=0)return i[1|a]}function Eu(i,s){return function pd(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),y=i[f<<a];if(s===y)return f<<a;y>s?d=f:l=f+1}return~(d<<a)}(i,s,1)}const ss={},bu="__NG_DI_FLAG__",xl="ngTempTokenPath",Hf=/\n/gm,Gf="__source",zv=we({provide:String,useValue:we});let Ao;function vd(i){const s=Ao;return Ao=i,s}function Wv(i,s=vt.Default){if(void 0===Ao)throw new Be(203,"");return null===Ao?Ln(i,void 0,s):Ao.get(i,s&vt.Optional?null:void 0,s)}function Yn(i,s=vt.Default){return(function nn(){return Wn}()||Wv)(oe(i),s)}const zf=Yn;function So(i){const s=[];for(let a=0;a<i.length;a++){const l=oe(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Be(900,"");let d,f=vt.Default;for(let y=0;y<l.length;y++){const E=l[y],b=Wf(E);"number"==typeof b?-1===b?d=E.token:f|=b:d=E}s.push(Yn(d,f))}else s.push(Yn(l))}return s}function xo(i,s){return i[bu]=s,i.prototype[bu]=s,i}function Wf(i){return i[bu]}const Zs=xo(va("Inject",i=>({token:i})),-1),bi=xo(va("Optional"),8),Ia=xo(va("SkipSelf"),4);class Ta{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ys(i){return i instanceof Ta?i.changingThisBreaksApplicationSecurity:i}const Cd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,p=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function Um(i){const s=function Bl(){const i=Fe();return i&&i[12]}();return s?s.sanitize(dr.URL,i)||"":function Qs(i,s){const a=function Rm(i){return i instanceof Ta&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ys(i):function m(i){return(i=String(i)).match(Cd)||i.match(p)?i:"unsafe:"+i}(ye(i))}const wr="__ngContext__";function Kr(i,s){i[wr]=s}function Fo(i){const s=function wt(i){return i[wr]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function $m(i){return i.ngOriginalError}function _I(i,...s){i.error(...s)}class Md{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function yI(i){return i&&i.ngErrorLogger||_I}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&$m(s);for(;a&&$m(a);)a=$m(a);return a||null}}const EI=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Lt))();function hr(i){return i instanceof Function?i():i}var Is=(()=>((Is=Is||{})[Is.Important=1]="Important",Is[Is.DashCase=2]="DashCase",Is))();function op(i,s){return undefined(i,s)}function Yr(i){const s=i[3];return Or(s)?s[3]:s}function Pd(i){return Wm(i[13])}function Pu(i){return Wm(i[4])}function Wm(i){for(;null!==i&&!Or(i);)i=i[4];return i}function jl(i,s,a,l,d){if(null!=l){let f,y=!1;Or(l)?f=l:Nr(l)&&(y=!0,l=l[0]);const E=vn(l);0===i&&null!==a?null==d?Ds(s,a,E):Nu(s,a,E,d||null,!0):1===i&&null!==a?Nu(s,a,E,d||null,!0):2===i?function ry(i,s,a){const l=Nd(i,s);l&&function m0(i,s,a,l){bn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=f&&function kd(i,s,a,l,d){const f=a[7];f!==vn(a)&&jl(s,i,l,f,d);for(let E=10;E<a.length;E++){const b=a[E];Ma(b[1],b,i,s,l,f)}}(s,i,f,a,d)}}function Km(i,s,a){if(bn(i))return i.createElement(s,a);{const l=null!==a?function aa(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function Ym(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Mt(d,-1)),a.splice(l,1)}function en(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&Ym(d,l),s>0&&(i[a-1][4]=l[4]);const f=qs(i,10+s);!function l0(i,s){Ma(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function h0(i,s){if(!(256&s[2])){const a=s[11];bn(a)&&a.destroyNode&&Ma(i,s,a,3,null,null),function CI(i){let s=i[13];if(!s)return xa(i[1],i);for(;s;){let a=null;if(Nr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Nr(s)&&xa(s[1],s),s=s[3];null===s&&(s=i),Nr(s)&&xa(s[1],s),a=s&&s[4]}s=a}}(s)}}function xa(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Qm(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof pa)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],b=f[y+1];try{b.call(E)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function f0(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],E="function"==typeof y?y(s):vn(s[y]),b=l[d=a[f+2]],D=a[f+3];"boolean"==typeof D?E.removeEventListener(a[f],b,D):D>=0?l[d=D]():l[d=-D].unsubscribe(),f+=2}else{const y=l[d=a[f+1]];a[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&bn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Or(s[3])){a!==s[3]&&Ym(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function p0(i,s,a){return function g0(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Ft.None||d===Ft.Emulated)return null}return vr(l,a)}(i,s.parent,a)}function Nu(i,s,a,l,d){bn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function Ds(i,s,a){bn(i)?i.appendChild(s,a):s.appendChild(a)}function Jm(i,s,a,l,d){null!==l?Nu(i,s,a,l,d):Ds(i,s,a)}function Nd(i,s){return bn(i)?i.parentNode(s):s.parentNode}let y0=function Cs(i,s,a){return 40&i.type?vr(i,a):null};function Od(i,s,a,l){const d=p0(i,l,s),f=s[11],E=function Fr(i,s,a){return y0(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)Jm(f,d,a[b],E,!1);else Jm(f,d,a,E,!1)}function ap(i,s){if(null!==s){const a=s.type;if(3&a)return vr(s,i);if(4&a)return ny(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return ap(i,l);{const d=i[s.index];return Or(d)?ny(-1,d):vn(d)}}if(32&a)return op(s,i)()||vn(i[s.index]);{const l=ty(i,s);return null!==l?Array.isArray(l)?l[0]:ap(Yr(i[16]),l):ap(i,s.next)}}return null}function ty(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ny(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return ap(l,d)}return s[7]}function up(i,s,a,l,d,f,y){for(;null!=a;){const E=l[a.index],b=a.type;if(y&&0===s&&(E&&Kr(vn(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)up(i,s,a.child,l,d,f,!1),jl(s,i,d,E,f);else if(32&b){const D=op(a,l);let A;for(;A=D();)jl(s,i,d,A,f);jl(s,i,d,E,f)}else 16&b?an(i,s,l,a,d,f):jl(s,i,d,E,f);a=y?a.projectionNext:a.next}}function Ma(i,s,a,l,d,f){up(a,l,i.firstChild,s,d,f,!1)}function an(i,s,a,l,d,f){const y=a[16],b=y[6].projection[l.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)jl(s,i,d,b[D],f);else up(i,s,b,y[3],d,f,!0)}function Ra(i,s,a){bn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function iy(i,s,a){bn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function sy(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const _0="ng-template";function lp(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==sy(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function $l(i){return 4===i.type&&i.value!==_0}function v0(i,s,a){return s===(4!==i.type||a?i.value:_0)}function cp(i,s,a){let l=4;const d=i.attrs||[],f=function w0(i){for(let s=0;s<i.length;s++)if(Dl(i[s]))return s;return i.length}(d);let y=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!y)if(4&l){if(l=2|1&l,""!==b&&!v0(i,b,a)||""===b&&1===s.length){if(Ts(l))return!1;y=!0}}else{const D=8&l?b:s[++E];if(8&l&&null!==i.attrs){if(!lp(i.attrs,D,a)){if(Ts(l))return!1;y=!0}continue}const O=oy(8&l?"class":b,d,$l(i),a);if(-1===O){if(Ts(l))return!1;y=!0;continue}if(""!==D){let G;G=O>f?"":d[O+1].toLowerCase();const re=8&l?G:null;if(re&&-1!==sy(re,D,0)||2&l&&D!==G){if(Ts(l))return!1;y=!0}}}}else{if(!y&&!Ts(l)&&!Ts(b))return!1;if(y&&Ts(b))continue;y=!1,l=b|1&l}}return Ts(l)||y}function Ts(i){return 0==(1&i)}function oy(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function xI(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Fd(i,s,a=!1){for(let l=0;l<s.length;l++)if(cp(i,s[l],a))return!0;return!1}function b0(i,s){return i?":not("+s.trim()+")":s}function dp(i){let s=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const E=i[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Ts(y)&&(s+=b0(f,d),d=""),l=y,f=f||!Ts(l);a++}return""!==d&&(s+=b0(f,d)),s}const qt={};function I0(i){D0(jt(),Fe(),kr()+i,!1)}function D0(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&hu(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Il(s,f,0,a)}js(a)}function Hl(i,s){return i<<17|s<<2}function Ui(i){return i>>17&32767}function hp(i){return 2|i}function to(i){return(131068&i)>>2}function uy(i,s){return-131069&i|s<<2}function fp(i){return 1|i}function yp(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const y=i.data[f];Af(d),y.contentQueries(2,s[f],f)}}}function Zl(i,s,a,l,d,f,y,E,b,D){const A=s.blueprint.slice();return A[0]=d,A[2]=140|l,Xe(A),A[3]=A[15]=i,A[8]=a,A[10]=y||i&&i[10],A[11]=E||i&&i[11],A[12]=b||i&&i[12]||null,A[9]=D||i&&i[9]||null,A[6]=f,A[16]=2==s.type?i[16]:A,A}function Kl(i,s,a,l,d){let f=i.data[s];if(null===f)f=function gy(i,s,a,l,d){const f=Df(),y=Yc(),b=i.data[s]=function Wd(i,s,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(i,s,a,l,d),function dm(){return ut.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function Bs(){const i=ut.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return ts(f,!0),f}function ka(i,s,a,l){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function si(i,s,a){bl(s);try{const l=i.viewQuery;null!==l&&Ay(1,l,a);const d=i.template;null!==d&&Gd(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&yp(i,s),i.staticViewQueries&&Ay(2,i.viewQuery,a);const f=i.components;null!==f&&function py(i,s){for(let a=0;a<s.length;a++)ZS(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Fi()}}function Fu(i,s,a,l){const d=s[2];if(256!=(256&d)){bl(s);try{Xe(s),function vl(i){return ut.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Gd(i,s,a,2,l);const y=3==(3&d);if(y){const D=i.preOrderCheckHooks;null!==D&&hu(s,D,null)}else{const D=i.preOrderHooks;null!==D&&Il(s,D,0,null),Rf(s,0)}if(function rD(i){for(let s=Pd(i);null!==s;s=Pu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&Mt(f,1),d[2]|=1024}}}(s),function nD(i){for(let s=Pd(i);null!==s;s=Pu(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];Y(l)&&Fu(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&yp(i,s),y){const D=i.contentCheckHooks;null!==D&&hu(s,D)}else{const D=i.contentHooks;null!==D&&Il(s,D,1),Rf(s,1)}!function Hd(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)js(~d);else{const f=d,y=a[++l],E=a[++l];hm(y,f),E(2,s[f])}}}finally{js(-1)}}(i,s);const E=i.components;null!==E&&function HI(i,s){for(let a=0;a<s.length;a++)iD(i,s[a])}(s,E);const b=i.viewQuery;if(null!==b&&Ay(2,b,l),y){const D=i.viewCheckHooks;null!==D&&hu(s,D)}else{const D=i.viewHooks;null!==D&&Il(s,D,2),Rf(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Mt(s[3],-1))}finally{Fi()}}}function R0(i,s,a,l){const d=s[10],y=P(s);try{!y&&d.begin&&d.begin(),y&&si(i,s,l),Fu(i,s,a,l)}finally{!y&&d.end&&d.end()}}function Gd(i,s,a,l,d){const f=kr(),y=2&l;try{js(-1),y&&s.length>20&&D0(i,s,20,!1),a(l,d)}finally{js(f)}}function my(i,s,a){!fi()||(function Kd(i,s,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Zr(a,s),Kr(l,s);const y=a.initialInputs;for(let E=d;E<f;E++){const b=i.data[E],D=Wr(b);D&&eD(s,a,b);const A=Co(s,i,E,a);Kr(A,s),null!==y&&tD(0,E-d,A,b,0,y),D&&(R(a.index,s)[8]=A)}}(i,s,a,vr(a,s)),128==(128&a.flags)&&function QI(i,s,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,E=function Qc(){return ut.lFrame.currentDirectiveIndex}();try{js(y);for(let b=l;b<d;b++){const D=i.data[b],A=s[b];Jc(b),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&O0(D,A)}}finally{js(-1),Jc(E)}}(i,s,a))}function yy(i,s,a=vr){const l=s.localNames;if(null!==l){let d=s.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],E=-1===y?a(s,i):i[y];i[d++]=E}}}function P0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=_p(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function _p(i,s,a,l,d,f,y,E,b,D){const A=20+l,O=A+d,G=function vp(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:qt);return a}(A,O),re="function"==typeof D?D():D;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:s,data:G.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:re,incompleteFirstPass:!1}}function vy(i,s,a,l){const d=G0(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&q0(i).push(l,d.length-1))}function Ey(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function Iy(i,s,a,l){let d=!1;if(fi()){const f=function Yd(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];Fd(a,y.selectors,!1)&&(d||(d=[]),_a(Zr(a,s),i,y.type),Wr(y)?(k0(i,a),d.unshift(y)):d.push(y))}return d}(i,s,a),y=null===l?null:{"":-1};if(null!==f){d=!0,F0(a,i.data.length,f.length);for(let A=0;A<f.length;A++){const O=f[A];O.providersResolver&&O.providersResolver(O)}let E=!1,b=!1,D=ka(i,s,f.length,null);for(let A=0;A<f.length;A++){const O=f[A];a.mergedAttrs=pu(a.mergedAttrs,O.hostAttrs),L0(i,a,s,D,O),XI(D,O,y),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const G=O.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),D++}!function qI(i,s){const l=s.directiveEnd,d=i.data,f=s.attrs,y=[];let E=null,b=null;for(let D=s.directiveStart;D<l;D++){const A=d[D],O=A.inputs,G=null===f||$l(s)?null:U0(O,f);y.push(G),E=Ey(O,D,E),b=Ey(A.outputs,D,b)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=E,s.outputs=b}(i,a)}y&&function JI(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new Be(-301,!1);l.push(s[d],f)}}}(a,l,y)}return a.mergedAttrs=pu(a.mergedAttrs,a.attrs),d}function Zd(i,s,a,l,d,f){const y=f.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~s.index;(function YI(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,d,y)}}function O0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function k0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function XI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Wr(s)&&(a[""]=i)}}function F0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function L0(i,s,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=hi(d.type)),y=new pa(f,Wr(d),null);i.blueprint[l]=y,a[l]=y,Zd(i,s,0,l,ka(i,a,d.hostVars,qt),d)}function eD(i,s,a){const l=vr(s,i),d=P0(a),f=i[10],y=Qd(i,Zl(i,d,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=y}function no(i,s,a,l,d,f){const y=vr(i,s);!function Dy(i,s,a,l,d,f,y){if(null==f)bn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const E=null==y?ye(f):y(f,l||"",d);bn(i)?i.setAttribute(s,d,E,a):a?s.setAttributeNS(a,d,E):s.setAttribute(d,E)}}(s[11],y,f,i.value,a,l,d)}function tD(i,s,a,l,d,f){const y=f[s];if(null!==y){const E=l.setInput;for(let b=0;b<y.length;){const D=y[b++],A=y[b++],O=y[b++];null!==E?l.setInput(a,O,D,A):a[A]=O}}}function U0(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function V0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function iD(i,s){const a=R(s,i);if(Y(a)){const l=a[1];80&a[2]?Fu(l,a,l.template,a[8]):a[5]>0&&Ep(a)}}function Ep(i){for(let l=Pd(i);null!==l;l=Pu(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const y=f[1];Fu(y,f,y.template,f[8])}else f[5]>0&&Ep(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=R(a[l],i);Y(d)&&d[5]>0&&Ep(d)}}function ZS(i,s){const a=R(s,i),l=a[1];(function B0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),si(l,a,a[8])}function Qd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function wp(i){for(;i;){i[2]|=64;const s=Yr(i);if(Hc(i)&&!s)return i;i=s}return null}function $0(i){!function Cy(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Fo(a),d=l[1];R0(d,l,d.template,a)}}(i[8])}function Ay(i,s,a){Af(0),s(i,a)}const oD=(()=>Promise.resolve(null))();function G0(i){return i[7]||(i[7]=[])}function q0(i){return i.cleanup||(i.cleanup=[])}function Sy(i,s){const a=i[9],l=a?a.get(Md,null):null;l&&l.handleError(s)}function z0(i,s,a,l,d){for(let f=0;f<a.length;){const y=a[f++],E=a[f++],b=s[y],D=i.data[y];null!==D.setInput?D.setInput(b,d,l,E):b[E]=d}}function Vo(i,s,a){const l=ca(s,i);!function u0(i,s,a){bn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Ip(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?f=E:1==f?d=me(d,E):2==f&&(l=me(l,E+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const xy=new On("INJECTOR",-1);class yi{get(s,a=ss){if(a===ss){const l=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw l.name="NullInjectorError",l}return a}}const My=new On("Set Injector scope."),Yl={},Ry={};let Lu;function Uu(){return void 0===Lu&&(Lu=new yi),Lu}function Z0(i,s=null,a=null,l){const d=K0(i,s,a,l);return d._resolveInjectorDefTypes(),d}function K0(i,s=null,a=null,l){return new Y0(i,a,s||Uu(),l)}class Y0{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&ni(a,E=>this.processProvider(E,s,a)),ni([s],E=>this.processInjectorType(E,[],f)),this.records.set(xy,Jd(void 0,this));const y=this.records.get(My);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof s?null:le(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ss,l=vt.Default){this.assertNotDestroyed();const d=vd(this),f=Jt(void 0);try{if(!(l&vt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function dD(i){return"function"==typeof i||"object"==typeof i&&i instanceof On}(s)&&sn(s);E=b&&this.injectableDefInScope(b)?Jd(Py(s),Yl):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&vt.Self?Uu():this.parent).get(s,a=l&vt.Optional&&a===ss?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[xl]=y[xl]||[]).unshift(le(s)),d)throw y;return function Iu(i,s,a,l){const d=i[xl];throw s[Gf]&&d.unshift(s[Gf]),i.message=function Mo(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=le(s);if(Array.isArray(s))d=s.map(le).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Hf,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[xl]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Jt(f),vd(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(le(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Be(205,!1)}processInjectorType(s,a,l){if(!(s=oe(s)))return!1;let d=Rn(s);const f=null==d&&s.ngModule||void 0,y=void 0===f?s:f,E=-1!==l.indexOf(y);if(void 0!==f&&(d=Rn(f)),null==d)return!1;if(null!=d.imports&&!E){let A;l.push(y);try{ni(d.imports,O=>{this.processInjectorType(O,a,l)&&(void 0===A&&(A=[]),A.push(O))})}finally{}if(void 0!==A)for(let O=0;O<A.length;O++){const{ngModule:G,providers:re}=A[O];ni(re,xe=>this.processProvider(xe,G,re||L))}}this.injectorDefTypes.add(y);const b=hi(y)||(()=>new y);this.records.set(y,Jd(b,Yl));const D=d.providers;if(null!=D&&!E){const A=s;ni(D,O=>this.processProvider(O,A,D))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let d=Ql(s=oe(s))?s:oe(s&&s.provide);const f=function J0(i,s,a){return Fa(i)?Jd(void 0,i.useValue):Jd(Dp(i),Yl)}(s);if(Ql(s)||!0!==s.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Jd(void 0,Yl,!0),y.factory=()=>So(y.multi),this.records.set(d,y)),d=s,y.multi.push(s)}this.records.set(d,f)}hydrate(s,a){return a.value===Yl&&(a.value=Ry,a.value=a.factory()),"object"==typeof a.value&&a.value&&function cD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=oe(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Py(i){const s=sn(i),a=null!==s?s.factory:hi(i);if(null!==a)return a;if(i instanceof On)throw new Be(204,!1);if(i instanceof Function)return function Q0(i){const s=i.length;if(s>0)throw function zs(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Be(204,!1);const a=function xr(i){const s=i&&(i[zn]||i[Sn]);if(s){const a=function fn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Be(204,!1)}function Dp(i,s,a){let l;if(Ql(i)){const d=oe(i);return hi(d)||Py(d)}if(Fa(i))l=()=>oe(i.useValue);else if(function uD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...So(i.deps||[]));else if(function X0(i){return!(!i||!i.useExisting)}(i))l=()=>Yn(oe(i.useExisting));else{const d=oe(i&&(i.useClass||i.provide));if(!function lD(i){return!!i.deps}(i))return hi(d)||Py(d);l=()=>new d(...So(i.deps))}return l}function Jd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Fa(i){return null!==i&&"object"==typeof i&&zv in i}function Ql(i){return"function"==typeof i}let As=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Z0({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return Z0({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=ss,i.NULL=new yi,i.\u0275prov=rn({token:i,providedIn:"any",factory:()=>Yn(xy)}),i.__NG_ELEMENT_ID__=-1,i})();function ex(i,s){ps(Fo(i)[1],Cn())}function Ee(i){let s=function yD(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(Wr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Be(903,"");d=s.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=Ua(i.inputs),y.declaredInputs=Ua(i.declaredInputs),y.outputs=Ua(i.outputs);const E=d.hostBindings;E&&cE(i,E);const b=d.viewQuery,D=d.contentQueries;if(b&&Ot(i,b),D&&Va(i,D),he(i.inputs,d.inputs),he(i.declaredInputs,d.declaredInputs),he(i.outputs,d.outputs),Wr(d)&&d.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const E=f[y];E&&E.ngInherit&&E(i),E===Ee&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Bi(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=pu(d.hostAttrs,a=pu(a,d.hostAttrs))}}(l)}function Ua(i){return i===on?{}:i===L?[]:i}function Ot(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function Va(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{s(l,d,f),a(l,d,f)}:s}function cE(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Di=null;function Bo(){if(!Di){const i=Lt.Symbol;if(i&&i.iterator)Di=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Di=l)}}}return Di}function Xd(i){return!!Ap(i)&&(Array.isArray(i)||!(i instanceof Map)&&Bo()in i)}function Ap(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ro(i,s,a){return i[s]=a}function oi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Sp(i,s,a,l){const d=Fe();return oi(d,fa(),s)&&(jt(),no(ir(),d,i,s,a,l)),Sp}function jo(i,s,a,l,d,f){const E=function Bu(i,s,a,l){const d=oi(i,s,a);return oi(i,s+1,l)||d}(i,function fs(){return ut.lFrame.bindingIndex}(),a,d);return ki(2),E?s+ye(a)+l+ye(d)+f:qt}function xp(i,s,a,l,d,f,y,E){const b=Fe(),D=jt(),A=i+20,O=D.firstCreatePass?function mE(i,s,a,l,d,f,y,E,b){const D=s.consts,A=Kl(s,i,4,y||null,He(D,E));Iy(s,a,A,He(D,b)),ps(s,A);const O=A.tViews=_p(2,A,l,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,D);return null!==s.queries&&(s.queries.template(s,A),O.queries=s.queries.embeddedTView(A)),A}(A,D,b,s,a,l,d,f,y):D.data[A];ts(O,!1);const G=b[11].createComment("");Od(D,b,G,O),Kr(G,b),Qd(b,b[A]=V0(G,b,G,O)),ls(O)&&my(D,b,O),null!=y&&yy(b,O,E)}function ic(i,s=vt.Default){const a=Fe();return null===a?Yn(i,s):gu(Cn(),a,oe(i),s)}function ND(){throw new Error("invalid")}function Qy(i,s,a){const l=Fe();return oi(l,fa(),s)&&function Vi(i,s,a,l,d,f,y,E){const b=vr(s,a);let A,D=s.inputs;!E&&null!=D&&(A=D[l])?(z0(i,a,A,l,d),fo(s)&&function WI(i,s){const a=R(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function zI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,s.value||"",l):d,bn(f)?f.setProperty(b,l,d):rd(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}(jt(),ir(),l,i,s,l[11],a,!1),Qy}function RE(i,s,a,l,d){const y=d?"class":"style";z0(i,a,s.inputs[y],y,l)}function sc(i,s,a,l){const d=Fe(),f=jt(),y=20+i,E=d[11],b=d[y]=Km(E,s,function $v(){return ut.lFrame.currentNamespace}()),D=f.firstCreatePass?function nx(i,s,a,l,d,f,y){const E=s.consts,D=Kl(s,i,2,d,He(E,f));return Iy(s,a,D,He(E,y)),null!==D.attrs&&Ip(D,D.attrs,!1),null!==D.mergedAttrs&&Ip(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,f,d,0,s,a,l):f.data[y];ts(D,!0);const A=D.mergedAttrs;null!==A&&nd(E,b,A);const O=D.classes;null!==O&&iy(E,b,O);const G=D.styles;return null!==G&&Ra(E,b,G),64!=(64&D.flags)&&Od(f,d,b,D),0===function Dn(){return ut.lFrame.elementDepthCount}()&&Kr(b,d),function Wt(){ut.lFrame.elementDepthCount++}(),ls(D)&&(my(f,d,D),function qd(i,s,a){if(ho(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,D,d)),null!==l&&yy(d,D),sc}function Jy(){let i=Cn();Yc()?function lu(){ut.lFrame.isParent=!1}():(i=i.parent,ts(i,!1));const s=i;!function hs(){ut.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(ps(a,i),ho(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function qv(i){return 0!=(16&i.flags)}(s)&&RE(a,s,Fe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Tn(i){return 0!=(32&i.flags)}(s)&&RE(a,s,Fe(),s.stylesWithoutHost,!1),Jy}function Xy(i,s,a,l){return sc(i,s,a,l),Jy(),Xy}function FD(){return Fe()}function ih(i){return!!i&&"function"==typeof i.then}function LD(i){return!!i&&"function"==typeof i.subscribe}const PE=LD;function NE(i,s,a,l){const d=Fe(),f=jt(),y=Cn();return function VD(i,s,a,l,d,f,y,E){const b=ls(l),A=i.firstCreatePass&&q0(i),O=s[8],G=G0(s);let re=!0;if(3&l.type||E){const tt=vr(l,s),ct=E?E(tt):tt,Oe=G.length,bt=E?tn=>E(vn(tn[l.index])):l.index;if(bn(a)){let tn=null;if(!E&&b&&(tn=function UD(i,s,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const E=s[7],b=d[f+2];return E.length>b?E[b]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,l.index)),null!==tn)(tn.__ngLastListenerFn__||tn).__ngNextListenerFn__=f,tn.__ngLastListenerFn__=f,re=!1;else{f=e_(l,s,O,f,!1);const mn=a.listen(ct,d,f);G.push(f,mn),A&&A.push(d,bt,Oe,Oe+1)}}else f=e_(l,s,O,f,!0),ct.addEventListener(d,f,y),G.push(f),A&&A.push(d,bt,Oe,y)}else f=e_(l,s,O,f,!1);const xe=l.outputs;let Re;if(re&&null!==xe&&(Re=xe[d])){const tt=Re.length;if(tt)for(let ct=0;ct<tt;ct+=2){const Si=s[Re[ct]][Re[ct+1]].subscribe(f),Qa=G.length;G.push(f,Si),A&&A.push(d,l.index,Qa,-(Qa+1))}}}(f,d,d[11],y,i,s,!!a,l),NE}function BD(i,s,a,l){try{return!1!==a(l)}catch(d){return Sy(i,d),!1}}function e_(i,s,a,l,d){return function f(y){if(y===Function)return l;const E=2&i.flags?R(i.index,s):s;0==(32&s[2])&&wp(E);let b=BD(s,0,l,y),D=f.__ngNextListenerFn__;for(;D;)b=BD(s,0,D,y)&&b,D=D.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function jD(i=1){return function pm(i){return(ut.lFrame.contextLView=function gm(i,s){for(;i>0;)s=s[15],i--;return s}(i,ut.lFrame.contextLView))[8]}(i)}function u_(i,s,a,l,d){const f=i[a+1],y=null===s;let E=l?Ui(f):to(f),b=!1;for(;0!==E&&(!1===b||y);){const A=i[E+1];GD(i[E],s)&&(b=!0,i[E+1]=l?fp(A):hp(A)),E=l?Ui(A):to(A)}b&&(i[a+1]=l?hp(f):fp(f))}function GD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Eu(i,s)>=0}function l_(i,s){return function Ms(i,s,a,l){const d=Fe(),f=jt(),y=ki(2);f.firstUpdatePass&&function BE(i,s,a,l){const d=i.data;if(null===d[a+1]){const f=d[kr()],y=function VE(i,s){return s>=i.expandoStartIndex}(i,a);(function rC(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!y&&(s=!1),s=function oh(i,s,a,l){const d=function wl(i){const s=ut.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=ah(a=c_(null,i,s,a,l),s.attrs,l),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=c_(d,i,s,a,l),null===f){let b=function jE(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==to(l))return i[Ui(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=c_(null,i,s,b[1],l),b=ah(b,s.attrs,l),function dx(i,s,a,l){i[Ui(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else f=function XD(i,s,a){let l;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)l=ah(l,i[f].hostAttrs,a);return ah(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,l),function ox(i,s,a,l,d,f){let y=f?s.classBindings:s.styleBindings,E=Ui(y),b=to(y);i[l]=a;let A,D=!1;if(Array.isArray(a)){const O=a;A=O[1],(null===A||Eu(O,A)>0)&&(D=!0)}else A=a;if(d)if(0!==b){const G=Ui(i[E+1]);i[l+1]=Hl(G,E),0!==G&&(i[G+1]=uy(i[G+1],l)),i[E+1]=function Gl(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Hl(E,0),0!==E&&(i[E+1]=uy(i[E+1],l)),E=l;else i[l+1]=Hl(b,0),0===E?E=l:i[b+1]=uy(i[b+1],l),b=l;D&&(i[l+1]=hp(i[l+1])),u_(i,A,l,!0),u_(i,A,l,!1),function HD(i,s,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Eu(f,s)>=0&&(a[l+1]=fp(a[l+1]))}(s,A,i,l,f),y=Hl(E,b),f?s.classBindings=y:s.styleBindings=y}(d,f,s,a,y,l)}}(f,i,y,l),s!==qt&&oi(d,y,s)&&function tC(i,s,a,l,d,f,y,E){if(!(3&s.type))return;const b=i.data,D=b[E+1];Lp(function ku(i){return 1==(1&i)}(D)?Fp(b,s,a,d,to(D),y):void 0)||(Lp(f)||function eo(i){return 2==(2&i)}(D)&&(f=Fp(b,null,a,d,E,y)),function AI(i,s,a,l,d){const f=bn(i);if(s)d?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:Is.DashCase;if(null==d)f?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=Is.Important),f?i.setStyle(a,l,d,y):a.style.setProperty(l,d,E?"important":"")}}}(l,y,ca(kr(),a),d,f))}(f,f.data[kr()],d,d[11],i,d[y+1]=function nC(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=le(Ys(i)))),i}(s,a),l,y)}(i,s,null,!0),l_}function c_(i,s,a,l,d){let f=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(f=s[E],l=ah(l,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function ah(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),pi(i,y,!!a||s[++f]))}return void 0===i?null:i}function Fp(i,s,a,l,d,f){const y=null===s;let E;for(;d>0;){const b=i[d],D=Array.isArray(b),A=D?b[1]:b,O=null===A;let G=a[d+1];G===qt&&(G=O?L:void 0);let re=O?jf(G,l):A===l?G:void 0;if(D&&!Lp(re)&&(re=jf(b,l)),Lp(re)&&(E=re,y))return E;const xe=i[d+1];d=y?Ui(xe):to(xe)}if(null!==s){let b=f?s.residualClasses:s.residualStyles;null!=b&&(E=jf(b,l))}return E}function Lp(i){return void 0!==i}function iC(i,s=""){const a=Fe(),l=jt(),d=i+20,f=l.firstCreatePass?Kl(l,d,1,s,null):l.data[d],y=a[d]=function Zm(i,s){return bn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Od(l,a,y,f),ts(f,!1)}function h_(i){return f_("",i,""),h_}function f_(i,s,a){const l=Fe(),d=function Ba(i,s,a,l){return oi(i,fa(),a)?s+ye(a)+l:qt}(l,i,s,a);return d!==qt&&Vo(l,kr(),d),f_}function p_(i,s,a,l,d){const f=Fe(),y=jo(f,i,s,a,l,d);return y!==qt&&Vo(f,kr(),y),p_}const Ci=void 0;var fC=["en",[["a","p"],["AM","PM"],Ci],[["AM","PM"],Ci,Ci],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ci,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ci,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ci,"{1} 'at' {0}",Ci],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Hu={};function m_(i){const s=function y_(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=dh(s);if(a)return a;const l=s.split("-")[0];if(a=dh(l),a)return a;if("en"===l)return fC;throw new Error(`Missing locale data for the locale "${i}".`)}function jp(i){return m_(i)[yt.PluralCase]}function dh(i){return i in Hu||(Hu[i]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[i]),Hu[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const hh="en-US";let ow=hh;function ng(i,s,a,l,d){if(i=oe(i),Array.isArray(i))for(let f=0;f<i.length;f++)ng(i[f],s,a,l,d);else{const f=jt(),y=Fe();let E=Ql(i)?i:oe(i.provide),b=Dp(i);const D=Cn(),A=1048575&D.providerIndexes,O=D.directiveStart,G=D.providerIndexes>>20;if(Ql(i)||!i.multi){const re=new pa(b,d,ic),xe=bh(E,s,d?A:A+G,O);-1===xe?(_a(Zr(D,y),f,E),rg(f,i,s.length),s.push(E),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),a.push(re),y.push(re)):(a[xe]=re,y[xe]=re)}else{const re=bh(E,s,A+G,O),xe=bh(E,s,A,A+G),Re=re>=0&&a[re],tt=xe>=0&&a[xe];if(d&&!tt||!d&&!Re){_a(Zr(D,y),f,E);const ct=function Ih(i,s,a,l,d){const f=new pa(i,a,ic);return f.multi=[],f.index=s,f.componentProviders=0,fc(f,d,l&&!a),f}(d?O_:N_,a.length,d,l,b);!d&&tt&&(a[xe].providerFactory=ct),rg(f,i,s.length,0),s.push(E),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),a.push(ct),y.push(ct)}else rg(f,i,re>-1?re:xe,fc(a[d?xe:re],b,!d&&l));!d&&l&&tt&&a[xe].componentProviders++}}}function rg(i,s,a,l){const d=Ql(s),f=function eE(i){return!!i.useClass}(s);if(d||f){const b=(f?oe(s.useClass):s).prototype.ngOnDestroy;if(b){const D=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const A=D.indexOf(a);-1===A?D.push(a,[l,b]):D[A+1].push(l,b)}else D.push(a,b)}}}function fc(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function bh(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function N_(i,s,a,l){return pc(this.multi,[])}function O_(i,s,a,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Co(a,a[1],this.providerFactory.index,l);f=E.slice(0,y),pc(d,f);for(let b=y;b<E.length;b++)f.push(E[b])}else f=[],pc(d,f);return f}function pc(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function k_(i,s=[]){return a=>{a.providersResolver=(l,d)=>function P_(i,s,a){const l=jt();if(l.firstCreatePass){const d=Wr(i);ng(a,l.data,l.blueprint,d,!0),ng(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class ig{}class Dw{resolveComponentFactory(s){throw function sg(i){const s=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Dh=(()=>{class i{}return i.NULL=new Dw,i})();function OC(){return so(Cn(),Fe())}function so(i,s){return new gc(vr(i,s))}let gc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=OC,i})();function ag(i){return i instanceof gc?i.nativeElement:i}class Ha{}let F_=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function L_(){const i=Fe(),a=R(Cn().index,i);return function kC(i){return i[11]}(Nr(a)?a:i)}(),i})(),mc=(()=>{class i{}return i.\u0275prov=rn({token:i,providedIn:"root",factory:()=>null}),i})();class lg{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ga=new lg("13.3.8"),cg={};function dg(i,s,a,l,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(vn(f)),Or(f))for(let E=10;E<f.length;E++){const b=f[E],D=b[1].firstChild;null!==D&&dg(b[1],b,D,l)}const y=a.type;if(8&y)dg(i,s,a.child,l);else if(32&y){const E=op(a,s);let b;for(;b=E();)l.push(b)}else if(16&y){const E=ty(s,a);if(Array.isArray(E))l.push(...E);else{const b=Yr(s[16]);dg(b[1],b,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class Rs{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return dg(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Or(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(en(s,l),qs(a,l))}this._attachedToViewContainer=!1}h0(this._lView[1],this._lView)}onDestroy(s){vy(this._lView[1],this._lView,null,s)}markForCheck(){wp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Ty(i,s,a){const l=s[10];l.begin&&l.begin();try{Fu(i,s,i.template,a)}catch(d){throw Sy(s,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Be(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function DI(i,s){Ma(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Be(902,"");this._appRef=s}}class qo extends Rs{constructor(s){super(s),this._view=s}detectChanges(){$0(this._view)}checkNoChanges(){}get context(){return null}}class Ch extends Dh{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=at(s);return new kn(a,this.ngModule)}}function Th(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class kn extends ig{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function RI(i){return i.map(dp).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Th(this.componentDef.inputs)}get outputs(){return Th(this.componentDef.outputs)}create(s,a,l,d){const f=(d=d||this.ngModule)?function Cw(i,s){return{get:(a,l,d)=>{const f=i.get(a,cg,d);return f!==cg||l===cg?f:s.get(a,l,d)}}}(s,d.injector):s,y=f.get(Ha,la),E=f.get(mc,null),b=y.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",A=l?function zd(i,s,a){if(bn(i))return i.selectRootElement(s,a===Ft.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Km(y.createRenderer(null,this.componentDef),D,function hg(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(D)),O=this.componentDef.onPush?576:528,G=function lE(i,s){return{components:[],scheduler:i||EI,clean:oD,playerHandler:s||null,flags:0}}(),re=_p(0,null,null,1,0,null,null,null,null,null),xe=Zl(null,re,G,O,null,null,y,b,E,f);let Re,tt;bl(xe);try{const ct=function gD(i,s,a,l,d,f){const y=a[1];a[20]=i;const b=Kl(y,20,2,"#host",null),D=b.mergedAttrs=s.hostAttrs;null!==D&&(Ip(b,D,!0),null!==i&&(nd(d,i,D),null!==b.classes&&iy(d,i,b.classes),null!==b.styles&&Ra(d,i,b.styles)));const A=l.createRenderer(i,s),O=Zl(a,P0(s),null,s.onPush?64:16,a[20],b,l,A,f||null,null);return y.firstCreatePass&&(_a(Zr(b,a),y,s.type),k0(y,b),F0(b,a.length,1)),Qd(a,O),a[20]=O}(A,this.componentDef,xe,y,b);if(A)if(l)nd(b,A,["ng-version",Ga.full]);else{const{attrs:Oe,classes:bt}=function PI(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++l]):8===d&&a.push(f);else{if(!Ts(d))break;d=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Oe&&nd(b,A,Oe),bt&&bt.length>0&&iy(b,A,bt.join(" "))}if(tt=wo(re,20),void 0!==a){const Oe=tt.projection=[];for(let bt=0;bt<this.ngContentSelectors.length;bt++){const tn=a[bt];Oe.push(null!=tn?Array.from(tn):null)}}Re=function mD(i,s,a,l,d){const f=a[1],y=function KI(i,s,a){const l=Cn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),L0(i,l,s,ka(i,s,1,null),a));const d=Co(s,i,l.directiveStart,l);Kr(d,s);const f=vr(l,s);return f&&Kr(f,s),d}(f,a,s);if(l.components.push(y),i[8]=y,d&&d.forEach(b=>b(y,s)),s.contentQueries){const b=Cn();s.contentQueries(1,y,b.directiveStart)}const E=Cn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(js(E.index),Zd(a[1],E,0,E.directiveStart,E.directiveEnd,s),O0(s,y)),y}(ct,this.componentDef,xe,G,[ex]),si(re,xe,null)}finally{Fi()}return new FC(this.componentType,Re,so(tt,xe),xe,tt)}}class FC extends class PC{}{constructor(s,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new qo(d),this.componentType=s}get injector(){return new _s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class oo{}class Tw{}const Wu=new Map;class U_ extends oo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ch(this);const l=Ut(s);this._bootstrapComponents=hr(l.bootstrap),this._r3Injector=K0(s,a,[{provide:oo,useValue:this},{provide:Dh,useValue:this.componentFactoryResolver}],le(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=As.THROW_IF_NOT_FOUND,l=vt.Default){return s===As||s===oo||s===xy?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pg extends Tw{constructor(s){super(),this.moduleType=s,null!==Ut(s)&&function LC(i){const s=new Set;!function a(l){const d=Ut(l,!0),f=d.id;null!==f&&(function Aw(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${le(s)} vs ${le(s.name)}`)}(f,Wu.get(f),l),Wu.set(f,l));const y=hr(d.imports);for(const E of y)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new U_(this.moduleType,s)}}function V_(i,s,a){const l=Cr()+i,d=Fe();return d[l]===qt?ro(d,l,a?s.call(a):s()):function eh(i,s){return i[s]}(d,l)}function Ku(i,s,a,l){return $_(Fe(),Cr(),i,s,a,l)}function $_(i,s,a,l,d,f){const y=s+a;return oi(i,y,d)?ro(i,y+1,f?l.call(f,d):l(d)):function _c(i,s){const a=i[s];return a===qt?void 0:a}(i,y+1)}function Sh(i,s){const a=jt();let l;const d=i+20;a.firstCreatePass?(l=function xh(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=hi(l.type)),y=Jt(ic);try{const E=ya(!1),b=f();return ya(E),function yE(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Fe(),d,b),b}finally{Jt(y)}}function Mh(i,s,a){const l=i+20,d=Fe(),f=function Ni(i,s){return i[s]}(d,l);return function Nh(i,s){return i[1].data[s].pure}(d,l)?$_(d,Cr(),s,f.transform,a,f):f.transform(a)}function mg(i){return s=>{setTimeout(i,void 0,s)}}const ao=class br extends c.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,f,y;let E=s,b=a||(()=>null),D=l;if(s&&"object"==typeof s){const O=s;E=null===(d=O.next)||void 0===d?void 0:d.bind(O),b=null===(f=O.error)||void 0===f?void 0:f.bind(O),D=null===(y=O.complete)||void 0===y?void 0:y.bind(O)}this.__isAsync&&(b=mg(b),E&&(E=mg(E)),D&&(D=mg(D)));const A=super.subscribe({next:E,error:b,complete:D});return s instanceof k.w0&&s.add(A),A}};function jC(){return this._results[Bo()]()}class G_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Bo(),l=G_.prototype;l[a]||(l[a]=jC)}get changes(){return this._changes||(this._changes=new ao)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=ti(s);(this._changesDetected=!function Bf(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=s[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Oh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Lw,i})();const kw=Oh,Fw=class extends kw{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Zl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),si(a,l,s),new Rs(l)}};function Lw(){return Yu(Cn(),Fe())}function Yu(i,s){return 4&i.type?new Fw(s,i,so(i,s)):null}let kh=(()=>{class i{}return i.__NG_ELEMENT_ID__=zo,i})();function zo(){return q_(Cn(),Fe())}const Uw=kh,Vw=class extends Uw{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return so(this._hostTNode,this._hostLView)}get injector(){return new _s(this._hostTNode,this._hostLView)}get parentInjector(){const s=Cl(this._hostTNode,this._hostLView);if(ma(s)){const a=Tt(s,this._hostLView),l=gn(s);return new _s(a[1].data[l+8],a)}return new _s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=yg(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,f){const y=s&&!function Kn(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const O=a||{};E=O.index,l=O.injector,d=O.projectableNodes,f=O.ngModuleRef}const b=y?s:new kn(at(s)),D=l||this.parentInjector;if(!f&&null==b.ngModule){const G=(y?D:this.parentInjector).get(oo,null);G&&(f=G)}const A=b.create(D,d,void 0,f);return this.insert(A.hostView,E),A}insert(s,a){const l=s._lView,d=l[1];if(function ge(i){return Or(i[3])}(l)){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const O=l[3],G=new Vw(O,O[6],O[3]);G.detach(G.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function TI(i,s,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=s),l<f-10?(s[4]=a[d],_u(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function d0(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(d,l,y,f);const E=ny(f,y),b=l[11],D=Nd(b,y[7]);return null!==D&&function c0(i,s,a,l,d,f){l[0]=d,l[6]=s,Ma(i,l,a,1,d,f)}(d,y[6],b,l,D,E),s.attachToViewContainerRef(),_u(Qu(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=yg(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=en(this._lContainer,a);l&&(qs(Qu(this._lContainer),a),h0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=en(this._lContainer,a);return l&&null!=qs(Qu(this._lContainer),a)?new Rs(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function yg(i){return i[8]}function Qu(i){return i[8]||(i[8]=[])}function q_(i,s){let a;const l=s[i.index];if(Or(l))a=l;else{let d;if(8&i.type)d=vn(l);else{const f=s[11];d=f.createComment("");const y=vr(i,s);Nu(f,Nd(f,y),d,function VS(i,s){return bn(i)?i.nextSibling(s):s.nextSibling}(f,y),!1)}s[i.index]=a=V0(l,s,d,i),Qd(s,a)}return new Vw(a,i,s)}class Fh{constructor(s){this.queryList=s,this.matches=null}clone(){return new Fh(this.queryList)}setDirty(){this.queryList.setDirty()}}class vc{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new vc(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ti(s,a).matches&&this.queries[a].setDirty()}}class Bw{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class vg{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new vg(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ju{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Ju(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(s,a,jw(a,f)),this.matchTNodeWithReadOption(s,a,Li(a,s,f,!1,!1))}else l===Oh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Li(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===gc||d===kh||d===Oh&&4&a.type)this.addMatch(a.index,-2);else{const f=Li(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function jw(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function W_(i,s,a,l){return-1===a?function $w(i,s){return 11&i.type?so(i,s):4&i.type?Yu(i,s):null}(s,i):-2===a?function Z_(i,s,a){return a===gc?so(s,i):a===Oh?Yu(s,i):a===kh?q_(s,i):void 0}(i,s,l):Co(i,i[1],a,s)}function K_(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const f=i.data,y=a.matches,E=[];for(let b=0;b<y.length;b+=2){const D=y[b];E.push(D<0?null:W_(s,f[D],y[b+1],a.metadata.read))}d.matches=E}return d.matches}function Ec(i,s,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=K_(i,s,d,a);for(let E=0;E<f.length;E+=2){const b=f[E];if(b>0)l.push(y[E/2]);else{const D=f[E+1],A=s[-b];for(let O=10;O<A.length;O++){const G=A[O];G[17]===G[3]&&Ec(G[1],G,D,l)}if(null!==A[9]){const O=A[9];for(let G=0;G<O.length;G++){const re=O[G];Ec(re[1],re,D,l)}}}}}return l}function Y_(i){const s=Fe(),a=jt(),l=Tf();Af(l+1);const d=Ti(a,l);if(i.dirty&&P(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Ec(a,s,l,[]):K_(a,s,d,l);i.reset(f,ag),i.notifyOnChanges()}return!0}return!1}function qa(i,s,a,l){const d=jt();if(d.firstCreatePass){const f=Cn();(function X_(i,s,a){null===i.queries&&(i.queries=new vg),i.queries.track(new Ju(s,a))})(d,new Bw(s,a,l),f.index),function Eg(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function J_(i,s,a){const l=new G_(4==(4&a));vy(i,s,l,l.destroy),null===s[19]&&(s[19]=new vc),s[19].queries.push(new Fh(l))}(d,Fe(),a)}function Q_(){return function Gw(i,s){return i[19].queries[s].queryList}(Fe(),Tf())}function Ti(i,s){return i.queries.getByIndex(s)}function ar(...i){}const Zo=new On("Application Initializer");let qn=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ar,this.reject=ar,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(ih(f))a.push(f);else if(PE(f)){const y=new Promise((E,b)=>{f.subscribe({complete:E,error:b})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Yn(Zo,8))},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const za=new On("AppId",{providedIn:"root",factory:function Dg(){return`${tl()}${tl()}${tl()}`}});function tl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nb=new On("Platform Initializer"),Ko=new On("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ic=new On("appBootstrapListener");let rb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const uo=new On("LocaleId",{providedIn:"root",factory:()=>zf(uo,vt.Optional|vt.SkipSelf)||function rt(){return"undefined"!=typeof $localize&&$localize.locale||hh}()}),Tg=new On("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Wa{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let ib=(()=>{class i{compileModuleSync(a){return new pg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=hr(Ut(a).declarations).reduce((y,E)=>{const b=at(E);return b&&y.push(new kn(b)),y},[]);return new Wa(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const nl=(()=>Promise.resolve(0))();function jh(i){"undefined"==typeof Zone?nl.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class os{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ao(!1),this.onMicrotaskEmpty=new ao(!1),this.onStable=new ao(!1),this.onError=new ao(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function $h(){let i=Lt.requestAnimationFrame,s=Lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function ab(i){const s=()=>{!function Hh(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Lt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,rv(i),i.isCheckStableRunning=!0,Tc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),rv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,E)=>{try{return ub(i),a.invokeTask(d,f,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),iv(i)}},onInvoke:(a,l,d,f,y,E,b)=>{try{return ub(i),a.invoke(d,f,y,E,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),iv(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,rv(i),Tc(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!os.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(os.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,ob,ar,ar);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const ob={};function Tc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function rv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function ub(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function iv(i){i._nesting--,Tc(i)}class lb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ao,this.onMicrotaskEmpty=new ao,this.onStable=new ao,this.onError=new ao}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Jr=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{os.assertNotInAngularZone(),jh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jh(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Yn(os))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})(),cb=(()=>{class i{constructor(){this._applications=new Map,Gh.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Gh.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Bn{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function Sg(i){Gh=i}let Gh=new Bn,Hi=null;const qh=new On("AllowMultipleToken"),Ac=new On("PlatformOnDestroy");class hb{constructor(s,a){this.name=s,this.token=a}}function zh(i,s,a=[]){const l=`Platform: ${s}`,d=new On(l);return(f=[])=>{let y=Za();if(!y||y.injector.get(qh,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function gr(i){if(Hi&&!Hi.get(qh,!1))throw new Be(400,"");Hi=i;const s=i.get(fb),a=i.get(nb,null);a&&a.forEach(l=>l())}(function Fn(i=[],s){return As.create({name:s,providers:[{provide:My,useValue:"platform"},{provide:Ac,useValue:()=>Hi=null},...i]})}(E,l))}return function Xr(i){const s=Za();if(!s)throw new Be(401,"");return s}()}}function Za(){var i;return null!==(i=null==Hi?void 0:Hi.get(fb))&&void 0!==i?i:null}let fb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function pb(i,s){let a;return a="noop"===i?new lb:("zone.js"===i?void 0:i)||new os({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:os,useValue:E}];return E.run(()=>{const D=As.create({providers:b,parent:this.injector,name:a.moduleType.name}),A=a.create(D),O=A.injector.get(Md,null);if(!O)throw new Be(402,"");return E.runOutsideAngular(()=>{const G=E.onError.subscribe({next:re=>{O.handleError(re)}});A.onDestroy(()=>{Sc(this._modules,A),G.unsubscribe()})}),function rl(i,s,a){try{const l=a();return ih(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(O,E,()=>{const G=A.injector.get(qn);return G.runInitializers(),G.donePromise.then(()=>(function yC(i){it(i,"Expected localeId to be defined"),"string"==typeof i&&(ow=i.toLowerCase().replace(/_/g,"-"))}(A.injector.get(uo,hh)||hh),this._moduleDoBootstrap(A),A))})})}bootstrapModule(a,l=[]){const d=gb({},l);return function db(i,s,a){const l=new pg(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(il);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Be(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Be(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Ac,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Yn(As))},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function gb(i,s){return Array.isArray(s)?s.reduce(gb,i):Object.assign(Object.assign({},i),s)}let il=(()=>{class i{constructor(a,l,d,f){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new M.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new M.y(b=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{os.assertNotInAngularZone(),jh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{D.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(y,E.pipe((0,pe.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Be(405,"");let d;d=a instanceof ig?a:this._injector.get(Dh).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function Ns(i){return i.isBoundToModule}(d)?void 0:this._injector.get(oo),E=d.create(As.NULL,[],l||d.selector,f),b=E.location.nativeElement,D=E.injector.get(Jr,null),A=D&&E.injector.get(cb);return D&&A&&A.registerApplication(b,D),E.onDestroy(()=>{this.detachView(E.hostView),Sc(this.components,E),A&&A.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Be(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Sc(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Ic,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Yn(os),Yn(As),Yn(Md),Yn(qn))},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Sc(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let sv=!0,Gr=!1;function tT(){return Gr=!0,sv}function nT(){if(Gr)throw new Error("Cannot enable prod mode after platform setup.");sv=!1}let iT=(()=>{class i{}return i.__NG_ELEMENT_ID__=sT,i})();function sT(i){return function oT(i,s,a){if(fo(i)&&!a){const l=R(i.index,s);return new Rs(l,l)}return 47&i.type?new Rs(s[16],s):null}(Cn(),Fe(),16==(16&i))}class ov{constructor(){}supports(s){return Xd(s)}create(s){return new wb(s)}}const Eb=(i,s)=>s;class wb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Eb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<av(l,d,f)?a:l,E=av(y,d,f),b=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const D=E-d,A=b-d;if(D!=A){for(let G=0;G<D;G++){const re=G<f.length?f[G]:f[G]=0,xe=re+G;A<=xe&&xe<D&&(f[G]=re+1)}f[y.previousIndex]=A-D}}E!==b&&s(y,E,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Xd(s))throw new Be(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],y=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,E),l=!0),a=a._next}else d=0,function wD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Bo()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new Pg(a,l),f,d),s}_verifyReinsertion(s,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new bb),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Pg{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class bb{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new hT,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function av(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class al{constructor(){}supports(s){return s instanceof Map||Ap(s)}create(){return new ul}}class ul{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ap(s)))throw new Be(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new Ib(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Ib{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ya(){return new Ng([new ov])}let Ng=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ya()),deps:[[i,new Ia,new bi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Be(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:Ya}),i})();function uv(){return new Og([new al])}let Og=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||uv()),deps:[[i,new Ia,new bi]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Be(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:uv}),i})();const kg=zh(null,"core",[]);let Fg=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Yn(il))},i.\u0275mod=Q({type:i}),i.\u0275inj=Pt({}),i})()},579:(ot,Te,x)=>{x.d(Te,{EI:()=>z,Gb:()=>Lt,Iv:()=>on,Kz:()=>K,Xd:()=>vt,lT:()=>_n,xP:()=>L});var c=x(5861),k=x(9681),M=x(1877),se=x(2090),pe=x(4859);x(2833);const he="analytics",le="firebase_id",$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",oe="https://www.googletagmanager.com/gtag/js",Ge=new M.Yd("@firebase/analytics");function Ae(j){return Promise.all(j.map(ee=>ee.catch(ve=>ve)))}function Be(j,ee){const ve=document.createElement("script");ve.src=`${oe}?l=${j}&id=${ee}`,ve.async=!0,document.head.appendChild(ve)}function ye(j,ee,ve,Ve,We,ze){return De.apply(this,arguments)}function De(){return(De=(0,c.Z)(function*(j,ee,ve,Ve,We,ze){const pt=Ve[We];try{if(pt)yield ee[pt];else{const H=(yield Ae(ve)).find(U=>U.measurementId===We);H&&(yield ee[H.appId])}}catch(Q){Ge.error(Q)}j("config",We,ze)})).apply(this,arguments)}function et(j,ee,ve,Ve,We){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,c.Z)(function*(j,ee,ve,Ve,We){try{let ze=[];if(We&&We.send_to){let pt=We.send_to;Array.isArray(pt)||(pt=[pt]);const Q=yield Ae(ve);for(const H of pt){const U=Q.find(Qe=>Qe.measurementId===H),Se=U&&ee[U.appId];if(!Se){ze=[];break}ze.push(Se)}}0===ze.length&&(ze=Object.values(ee)),yield Promise.all(ze),j("event",Ve,We||{})}catch(ze){Ge.error(ze)}})).apply(this,arguments)}function Ce(){const j=window.document.getElementsByTagName("script");for(const ee of Object.values(j))if(ee.src&&ee.src.includes(oe))return ee;return null}const J=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ue=new class ne{constructor(ee={},ve=1e3){this.throttleMetadata=ee,this.intervalMillis=ve}getThrottleMetadata(ee){return this.throttleMetadata[ee]}setThrottleMetadata(ee,ve){this.throttleMetadata[ee]=ve}deleteThrottleMetadata(ee){delete this.throttleMetadata[ee]}};function ce(j){return new Headers({Accept:"application/json","x-goog-api-key":j})}function Pe(j){return ae.apply(this,arguments)}function ae(){return(ae=(0,c.Z)(function*(j){var ee;const{appId:ve,apiKey:Ve}=j,We={method:"GET",headers:ce(Ve)},ze=$.replace("{app-id}",ve),pt=yield fetch(ze,We);if(200!==pt.status&&304!==pt.status){let Q="";try{const H=yield pt.json();(null===(ee=H.error)||void 0===ee?void 0:ee.message)&&(Q=H.error.message)}catch(H){}throw J.create("config-fetch-failed",{httpStatus:pt.status,responseMessage:Q})}return pt.json()})).apply(this,arguments)}function _t(j){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,c.Z)(function*(j,ee=ue,ve){const{appId:Ve,apiKey:We,measurementId:ze}=j.options;if(!Ve)throw J.create("no-app-id");if(!We){if(ze)return{measurementId:ze,appId:Ve};throw J.create("no-api-key")}const pt=ee.getThrottleMetadata(Ve)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Q=new ln;return setTimeout((0,c.Z)(function*(){Q.abort()}),void 0!==ve?ve:6e4),En({appId:Ve,apiKey:We,measurementId:ze},pt,Q,ee)})).apply(this,arguments)}function En(j,ee,ve){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(j,{throttleEndTimeMillis:ee,backoffCount:ve},Ve,We=ue){const{appId:ze,measurementId:pt}=j;try{yield dt(Ve,ee)}catch(Q){if(pt)return Ge.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Q.message}]`),{appId:ze,measurementId:pt};throw Q}try{const Q=yield Pe(j);return We.deleteThrottleMetadata(ze),Q}catch(Q){if(!yn(Q)){if(We.deleteThrottleMetadata(ze),pt)return Ge.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Q.message}]`),{appId:ze,measurementId:pt};throw Q}const H=503===Number(Q.customData.httpStatus)?(0,se.$s)(ve,We.intervalMillis,30):(0,se.$s)(ve,We.intervalMillis),U={throttleEndTimeMillis:Date.now()+H,backoffCount:ve+1};return We.setThrottleMetadata(ze,U),Ge.debug(`Calling attemptFetch again in ${H} millis`),En(j,U,Ve,We)}})).apply(this,arguments)}function dt(j,ee){return new Promise((ve,Ve)=>{const We=Math.max(ee-Date.now(),0),ze=setTimeout(ve,We);j.addEventListener(()=>{clearTimeout(ze),Ve(J.create("fetch-throttle",{throttleEndTimeMillis:ee}))})})}function yn(j){if(!(j instanceof se.ZR&&j.customData))return!1;const ee=Number(j.customData.httpStatus);return 429===ee||500===ee||503===ee||504===ee}class ln{constructor(){this.listeners=[]}addEventListener(ee){this.listeners.push(ee)}abort(){this.listeners.forEach(ee=>ee())}}function mr(){return rn.apply(this,arguments)}function rn(){return(rn=(0,c.Z)(function*(){if(!(0,se.hl)())return Ge.warn(J.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(j){return Ge.warn(J.create("indexeddb-unavailable",{errorInfo:j}).message),!1}return!0})).apply(this,arguments)}function Pt(){return(Pt=(0,c.Z)(function*(j,ee,ve,Ve,We,ze,pt){var Q;const H=_t(j);H.then(Dt=>{ve[Dt.measurementId]=Dt.appId,j.options.measurementId&&Dt.measurementId!==j.options.measurementId&&Ge.warn(`The measurement ID in the local Firebase config (${j.options.measurementId}) does not match the measurement ID fetched from the server (${Dt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Dt=>Ge.error(Dt)),ee.push(H);const U=mr().then(Dt=>{if(Dt)return Ve.getId()}),[Se,Qe]=yield Promise.all([H,U]);Ce()||Be(ze,Se.measurementId),We("js",new Date);const at=null!==(Q=null==pt?void 0:pt.config)&&void 0!==Q?Q:{};return at.origin="firebase",at.update=!0,null!=Qe&&(at[le]=Qe),We("config",Se.measurementId,at),Se.measurementId})).apply(this,arguments)}class sn{constructor(ee){this.app=ee}_delete(){return delete An[this.app.options.appId],Promise.resolve()}}let An={},xr=[];const fn={};let Xn,Sn,Rn="dataLayer",zn="gtag",er=!1;function vt(j){if(er)throw J.create("already-initialized");j.dataLayerName&&(Rn=j.dataLayerName),j.gtagName&&(zn=j.gtagName)}function nn(j,ee,ve){!function Wn(){const j=[];if((0,se.ru)()&&j.push("This is a browser extension environment."),(0,se.zI)()||j.push("Cookies are not available."),j.length>0){const ee=j.map((Ve,We)=>`(${We+1}) ${Ve}`).join(" "),ve=J.create("invalid-analytics-context",{errorInfo:ee});Ge.warn(ve.message)}}();const Ve=j.options.appId;if(!Ve)throw J.create("no-app-id");if(!j.options.apiKey){if(!j.options.measurementId)throw J.create("no-api-key");Ge.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${j.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=An[Ve])throw J.create("already-exists",{id:Ve});if(!er){!function qe(j){let ee=[];Array.isArray(window[j])?ee=window[j]:window[j]=ee}(Rn);const{wrappedGtag:ze,gtagCore:pt}=function Ne(j,ee,ve,Ve,We){let ze=function(...pt){window[Ve].push(arguments)};return window[We]&&"function"==typeof window[We]&&(ze=window[We]),window[We]=function ke(j,ee,ve,Ve){function ze(){return(ze=(0,c.Z)(function*(pt,Q,H){try{"event"===pt?yield et(j,ee,ve,Q,H):"config"===pt?yield ye(j,ee,ve,Ve,Q,H):j("set",Q)}catch(U){Ge.error(U)}})).apply(this,arguments)}return function We(pt,Q,H){return ze.apply(this,arguments)}}(ze,j,ee,ve),{gtagCore:ze,wrappedGtag:window[We]}}(An,xr,fn,Rn,zn);Sn=ze,Xn=pt,er=!0}return An[Ve]=function zt(j,ee,ve,Ve,We,ze,pt){return Pt.apply(this,arguments)}(j,xr,fn,ee,Xn,Rn,ve),new sn(j)}function Ln(){return(Ln=(0,c.Z)(function*(j,ee,ve,Ve,We){if(We&&We.global)j("event",ve,Ve);else{const ze=yield ee;j("event",ve,Object.assign(Object.assign({},Ve),{send_to:ze}))}})).apply(this,arguments)}function tr(){return(tr=(0,c.Z)(function*(j,ee,ve,Ve){if(Ve&&Ve.global)return j("set",{screen_name:ve}),Promise.resolve();j("config",yield ee,{update:!0,screen_name:ve})})).apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(j,ee,ve,Ve){if(Ve&&Ve.global)return j("set",{user_id:ve}),Promise.resolve();j("config",yield ee,{update:!0,user_id:ve})})).apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(j,ee,ve,Ve){if(Ve&&Ve.global){const We={};for(const ze of Object.keys(ve))We[`user_properties.${ze}`]=ve[ze];return j("set",We),Promise.resolve()}j("config",yield ee,{update:!0,user_properties:ve})})).apply(this,arguments)}function nt(){return(nt=(0,c.Z)(function*(j,ee){const ve=yield j;window[`ga-disable-${ve}`]=!ee})).apply(this,arguments)}function Lt(){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(j){return!1}})).apply(this,arguments)}function _n(j,ee,ve){j=(0,se.m9)(j),function jn(j,ee,ve,Ve){return tr.apply(this,arguments)}(Sn,An[j.app.options.appId],ee,ve).catch(Ve=>Ge.error(Ve))}function on(j,ee,ve){j=(0,se.m9)(j),function pn(j,ee,ve,Ve){return Un.apply(this,arguments)}(Sn,An[j.app.options.appId],ee,ve).catch(Ve=>Ge.error(Ve))}function L(j,ee,ve){j=(0,se.m9)(j),function Mr(j,ee,ve,Ve){return Ft.apply(this,arguments)}(Sn,An[j.app.options.appId],ee,ve).catch(Ve=>Ge.error(Ve))}function z(j,ee){j=(0,se.m9)(j),function ft(j,ee){return nt.apply(this,arguments)}(An[j.app.options.appId],ee).catch(ve=>Ge.error(ve))}function K(j,ee,ve,Ve){j=(0,se.m9)(j),function Jt(j,ee,ve,Ve,We){return Ln.apply(this,arguments)}(Sn,An[j.app.options.appId],ee,ve,Ve).catch(We=>Ge.error(We))}const Ie="@firebase/analytics",B="0.7.9";!function X(){(0,k._registerComponent)(new pe.wA(he,(ee,{options:ve})=>nn(ee.getProvider("app").getImmediate(),ee.getProvider("installations-internal").getImmediate(),ve),"PUBLIC")),(0,k._registerComponent)(new pe.wA("analytics-internal",function j(ee){try{const ve=ee.getProvider(he).getImmediate();return{logEvent:(Ve,We,ze)=>K(ve,Ve,We,ze)}}catch(ve){throw J.create("interop-component-reg-failed",{reason:ve})}},"PRIVATE")),(0,k.registerVersion)(Ie,B),(0,k.registerVersion)(Ie,B,"esm2017")}()},3942:(ot,Te,x)=>{x.d(Te,{Z:()=>Be});var c=x(2090),k=x(4859),M=x(9681),se=x(1877);class pe{constructor(ye,De){this._delegate=ye,this.firebase=De,(0,M._addComponent)(ye,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(ye,De=M._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(ye);return!Ze.isInitialized()&&"EXPLICIT"===(null===(et=Ze.getComponent())||void 0===et?void 0:et.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:De})}_removeServiceInstance(ye,De=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(De)}_addComponent(ye){(0,M._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,M._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function me(){const qe=function le(qe){const ye={},De={__esModule:!0,initializeApp:function ke(J,fe={}){const V=M.initializeApp(J,fe);if((0,c.r3)(ye,V.name))return ye[V.name];const ne=new qe(V,De);return ye[V.name]=ne,ne},app:Ze,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function Ce(J){const fe=J.name,V=fe.replace("-compat","");if(M._registerComponent(J)&&"PUBLIC"===J.type){const ne=(ue=Ze())=>{if("function"!=typeof ue[V])throw he.create("invalid-app-argument",{appName:fe});return ue[V]()};void 0!==J.serviceProps&&(0,c.ZB)(ne,J.serviceProps),De[V]=ne,qe.prototype[V]=function(...ue){return this._getService.bind(this,fe).apply(this,J.multipleInstances?ue:[])}}return"PUBLIC"===J.type?De[V]:null},removeApp:function et(J){delete ye[J]},useAsService:function Je(J,fe){return"serverAuth"===fe?null:fe},modularAPIs:M}};function Ze(J){if(!(0,c.r3)(ye,J=J||M._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:J});return ye[J]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ne(){return Object.keys(ye).map(J=>ye[J])}}),Ze.App=qe,De}(pe);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ye(De){(0,c.ZB)(qe,De)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),qe}(),$=new se.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Be=q;!function Ae(qe){(0,M.registerVersion)("@firebase/app-compat","0.1.25",qe)}()},9681:(ot,Te,x)=>{x.r(Te),x.d(Te,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>zn,_DEFAULT_ENTRY_NAME:()=>it,_addComponent:()=>mr,_addOrOverwriteComponent:()=>rn,_apps:()=>yn,_clearComponents:()=>An,_components:()=>ln,_getProvider:()=>Pt,_registerComponent:()=>zt,_removeServiceInstance:()=>sn,deleteApp:()=>vt,getApp:()=>Sn,getApps:()=>er,initializeApp:()=>Xn,onLog:()=>Jt,registerVersion:()=>nn,setLogLevel:()=>Ln});var c=x(5861),k=x(4859),M=x(1877),se=x(2090),pe=x(8766);class we{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(j=>{if(function he(B){const X=B.getComponent();return"VERSION"===(null==X?void 0:X.type)}(j)){const ee=j.getImmediate();return`${ee.library}/${ee.version}`}return null}).filter(j=>j).join(" ")}}const le="@firebase/app",q=new M.Yd("@firebase/app"),it="[DEFAULT]",dt={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yn=new Map,ln=new Map;function mr(B,X){try{B.container.addComponent(X)}catch(j){q.debug(`Component ${X.name} failed to register with FirebaseApp ${B.name}`,j)}}function rn(B,X){B.container.addOrOverwriteComponent(X)}function zt(B){const X=B.name;if(ln.has(X))return q.debug(`There were multiple attempts to register component ${X}.`),!1;ln.set(X,B);for(const j of yn.values())mr(j,B);return!0}function Pt(B,X){const j=B.container.getProvider("heartbeat").getImmediate({optional:!0});return j&&j.triggerHeartbeat(),B.container.getProvider(X)}function sn(B,X,j=it){Pt(B,X).clearInstance(j)}function An(){ln.clear()}const fn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Rn{constructor(X,j,ee){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},j),this._name=j.name,this._automaticDataCollectionEnabled=j.automaticDataCollectionEnabled,this._container=ee,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}const zn="9.8.1";function Xn(B,X={}){"object"!=typeof X&&(X={name:X});const j=Object.assign({name:it,automaticDataCollectionEnabled:!1},X),ee=j.name;if("string"!=typeof ee||!ee)throw fn.create("bad-app-name",{appName:String(ee)});const ve=yn.get(ee);if(ve){if((0,se.vZ)(B,ve.options)&&(0,se.vZ)(j,ve.config))return ve;throw fn.create("duplicate-app",{appName:ee})}const Ve=new k.H0(ee);for(const ze of ln.values())Ve.addComponent(ze);const We=new Rn(B,j,Ve);return yn.set(ee,We),We}function Sn(B=it){const X=yn.get(B);if(!X)throw fn.create("no-app",{appName:B});return X}function er(){return Array.from(yn.values())}function vt(B){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,c.Z)(function*(B){const X=B.name;yn.has(X)&&(yn.delete(X),yield Promise.all(B.container.getProviders().map(j=>j.delete())),B.isDeleted=!0)})).apply(this,arguments)}function nn(B,X,j){var ee;let ve=null!==(ee=dt[B])&&void 0!==ee?ee:B;j&&(ve+=`-${j}`);const Ve=ve.match(/\s|\//),We=X.match(/\s|\//);if(Ve||We){const ze=[`Unable to register library "${ve}" with version "${X}":`];return Ve&&ze.push(`library name "${ve}" contains illegal characters (whitespace or "/")`),Ve&&We&&ze.push("and"),We&&ze.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void q.warn(ze.join(" "))}zt(new k.wA(`${ve}-version`,()=>({library:ve,version:X}),"VERSION"))}function Jt(B,X){if(null!==B&&"function"!=typeof B)throw fn.create("invalid-log-argument");(0,M.Am)(B,X)}function Ln(B){(0,M.Ub)(B)}const pn="firebase-heartbeat-store";let Un=null;function Mr(){return Un||(Un=(0,pe.X3)("firebase-heartbeat-database",1,{upgrade:(B,X)=>{0===X&&B.createObjectStore(pn)}}).catch(B=>{throw fn.create("storage-open",{originalErrorMessage:B.message})})),Un}function ft(){return(ft=(0,c.Z)(function*(B){try{return(yield Mr()).transaction(pn).objectStore(pn).get(Rr(B))}catch(X){throw fn.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function nt(B,X){return wn.apply(this,arguments)}function wn(){return(wn=(0,c.Z)(function*(B,X){try{const ee=(yield Mr()).transaction(pn,"readwrite");return yield ee.objectStore(pn).put(X,Rr(B)),ee.done}catch(j){throw fn.create("storage-set",{originalErrorMessage:j.message})}})).apply(this,arguments)}function Rr(B){return`${B.name}!${B.options.appId}`}class _n{constructor(X){this.container=X,this._heartbeatsCache=null;const j=this.container.getProvider("app").getImmediate();this._storage=new z(j),this._heartbeatsCachePromise=this._storage.read().then(ee=>(this._heartbeatsCache=ee,ee))}triggerHeartbeat(){var X=this;return(0,c.Z)(function*(){const ee=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ve=on();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==ve&&!X._heartbeatsCache.heartbeats.some(Ve=>Ve.date===ve))return X._heartbeatsCache.heartbeats.push({date:ve,agent:ee}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Ve=>{const We=new Date(Ve.date).valueOf();return Date.now()-We<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,c.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const j=on(),{heartbeatsToSend:ee,unsentEntries:ve}=function L(B,X=1024){const j=[];let ee=B.slice();for(const ve of B){const Ve=j.find(We=>We.agent===ve.agent);if(Ve){if(Ve.dates.push(ve.date),K(j)>X){Ve.dates.pop();break}}else if(j.push({agent:ve.agent,dates:[ve.date]}),K(j)>X){j.pop();break}ee=ee.slice(1)}return{heartbeatsToSend:j,unsentEntries:ee}}(X._heartbeatsCache.heartbeats),Ve=(0,se.L)(JSON.stringify({version:2,heartbeats:ee}));return X._heartbeatsCache.lastSentHeartbeatDate=j,ve.length>0?(X._heartbeatsCache.heartbeats=ve,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Ve})()}}function on(){return(new Date).toISOString().substring(0,10)}class z{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,c.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function Ft(B){return ft.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var j=this;return(0,c.Z)(function*(){var ee;if(yield j._canUseIndexedDBPromise){const Ve=yield j.read();return nt(j.app,{lastSentHeartbeatDate:null!==(ee=X.lastSentHeartbeatDate)&&void 0!==ee?ee:Ve.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var j=this;return(0,c.Z)(function*(){var ee;if(yield j._canUseIndexedDBPromise){const Ve=yield j.read();return nt(j.app,{lastSentHeartbeatDate:null!==(ee=X.lastSentHeartbeatDate)&&void 0!==ee?ee:Ve.lastSentHeartbeatDate,heartbeats:[...Ve.heartbeats,...X.heartbeats]})}})()}}function K(B){return(0,se.L)(JSON.stringify({version:2,heartbeats:B})).length}!function Ie(B){zt(new k.wA("platform-logger",X=>new we(X),"PRIVATE")),zt(new k.wA("heartbeat",X=>new _n(X),"PRIVATE")),nn(le,"0.7.24",B),nn(le,"0.7.24","esm2017"),nn("fire-js","")}("")},4859:(ot,Te,x)=>{x.d(Te,{H0:()=>le,wA:()=>M});var c=x(5861),k=x(2090);class M{constructor(q,$,oe){this.name=q,this.instanceFactory=$,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const se="[DEFAULT]";class pe{constructor(q,$){this.name=q,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const $=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has($)){const oe=new k.BH;if(this.instancesDeferred.set($,oe),this.isInitialized($)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:$});Ge&&oe.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get($).promise}getImmediate(q){var $;const oe=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),Ge=null!==($=null==q?void 0:q.optional)&&void 0!==$&&$;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(Ae){if(Ge)return null;throw Ae}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function he(me){return"EAGER"===me.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:se})}catch($){}for(const[$,oe]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ge});oe.resolve(Ae)}catch(Ae){}}}}clearInstance(q=se){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,c.Z)(function*(){const $=Array.from(q.instances.values());yield Promise.all([...$.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...$.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=se){return this.instances.has(q)}getOptions(q=se){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:$={}}=q,oe=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:oe,options:$});for(const[Ae,Be]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(Ae)&&Be.resolve(Ge);return Ge}onInit(q,$){var oe;const Ge=this.normalizeInstanceIdentifier($),Ae=null!==(oe=this.onInitCallbacks.get(Ge))&&void 0!==oe?oe:new Set;Ae.add(q),this.onInitCallbacks.set(Ge,Ae);const Be=this.instances.get(Ge);return Be&&q(Be,Ge),()=>{Ae.delete(q)}}invokeOnInitCallbacks(q,$){const oe=this.onInitCallbacks.get($);if(oe)for(const Ge of oe)try{Ge(q,$)}catch(Ae){}}getOrInitializeService({instanceIdentifier:q,options:$={}}){let oe=this.instances.get(q);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(me=q,me===se?void 0:me),options:$}),this.instances.set(q,oe),this.instancesOptions.set(q,$),this.invokeOnInitCallbacks(oe,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,oe)}catch(Ge){}var me;return oe||null}normalizeInstanceIdentifier(q=se){return this.component?this.component.multipleInstances?q:se:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const $=this.getProvider(q.name);if($.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);$.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const $=new pe(q,this);return this.providers.set(q,$),$}getProviders(){return Array.from(this.providers.values())}}},2833:(ot,Te,x)=>{var c=x(5861),k=x(9681),M=x(4859),se=x(2090),pe=x(8766);const we="@firebase/installations",me="w:0.5.9",q="FIS_v2",qe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ye(Z){return Z instanceof se.ZR&&Z.code.includes("request-failed")}function De({projectId:Z}){return`https://firebaseinstallations.googleapis.com/v1/projects/${Z}/installations`}function et(Z){return{token:Z.token,requestStatus:2,expiresIn:fe(Z.expiresIn),creationTime:Date.now()}}function Ze(Z,de){return ke.apply(this,arguments)}function ke(){return(ke=(0,c.Z)(function*(Z,de){const gt=(yield de.json()).error;return qe.create("request-failed",{requestName:Z,serverCode:gt.code,serverMessage:gt.message,serverStatus:gt.status})})).apply(this,arguments)}function Ne({apiKey:Z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z})}function Ce(Z,{refreshToken:de}){const Ue=Ne(Z);return Ue.append("Authorization",function V(Z){return`${q} ${Z}`}(de)),Ue}function Je(Z){return J.apply(this,arguments)}function J(){return(J=(0,c.Z)(function*(Z){const de=yield Z();return de.status>=500&&de.status<600?Z():de})).apply(this,arguments)}function fe(Z){return Number(Z.replace("s","000"))}function ne(Z,de){return ue.apply(this,arguments)}function ue(){return(ue=(0,c.Z)(function*({appConfig:Z,heartbeatServiceProvider:de},{fid:Ue}){const gt=De(Z),Bt=Ne(Z),Xt=de.getImmediate({optional:!0});if(Xt){const Ct=yield Xt.getHeartbeatsHeader();Ct&&Bt.append("x-firebase-client",Ct)}const Pn={method:"POST",headers:Bt,body:JSON.stringify({fid:Ue,authVersion:q,appId:Z.appId,sdkVersion:me})},yr=yield Je(()=>fetch(gt,Pn));if(yr.ok){const Ct=yield yr.json();return{fid:Ct.fid||Ue,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:et(Ct.authToken)}}throw yield Ze("Create Installation",yr)})).apply(this,arguments)}function ce(Z){return new Promise(de=>{setTimeout(de,Z)})}const ae=/^[cdef][\w-]{21}$/;function Rt(){try{const Z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Z),Z[0]=112+Z[0]%16;const Ue=function En(Z){return function Pe(Z){return btoa(String.fromCharCode(...Z)).replace(/\+/g,"-").replace(/\//g,"_")}(Z).substr(0,22)}(Z);return ae.test(Ue)?Ue:""}catch(Z){return""}}function it(Z){return`${Z.appName}!${Z.appId}`}const dt=new Map;function yn(Z,de){const Ue=it(Z);rn(Ue,de),function zt(Z,de){const Ue=function sn(){return!Pt&&"BroadcastChannel"in self&&(Pt=new BroadcastChannel("[Firebase] FID Change"),Pt.onmessage=Z=>{rn(Z.data.key,Z.data.fid)}),Pt}();Ue&&Ue.postMessage({key:Z,fid:de}),function An(){0===dt.size&&Pt&&(Pt.close(),Pt=null)}()}(Ue,de)}function rn(Z,de){const Ue=dt.get(Z);if(Ue)for(const gt of Ue)gt(de)}let Pt=null;const Rn="firebase-installations-store";let zn=null;function Xn(){return zn||(zn=(0,pe.X3)("firebase-installations-database",1,{upgrade:(Z,de)=>{0===de&&Z.createObjectStore(Rn)}})),zn}function Sn(Z,de){return er.apply(this,arguments)}function er(){return(er=(0,c.Z)(function*(Z,de){const Ue=it(Z),Bt=(yield Xn()).transaction(Rn,"readwrite"),Xt=Bt.objectStore(Rn),Vt=yield Xt.get(Ue);return yield Xt.put(de,Ue),yield Bt.done,(!Vt||Vt.fid!==de.fid)&&yn(Z,de.fid),de})).apply(this,arguments)}function vt(Z){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,c.Z)(function*(Z){const de=it(Z),gt=(yield Xn()).transaction(Rn,"readwrite");yield gt.objectStore(Rn).delete(de),yield gt.done})).apply(this,arguments)}function nn(Z,de){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,c.Z)(function*(Z,de){const Ue=it(Z),Bt=(yield Xn()).transaction(Rn,"readwrite"),Xt=Bt.objectStore(Rn),Vt=yield Xt.get(Ue),Pn=de(Vt);return void 0===Pn?yield Xt.delete(Ue):yield Xt.put(Pn,Ue),yield Bt.done,Pn&&(!Vt||Vt.fid!==Pn.fid)&&yn(Z,Pn.fid),Pn})).apply(this,arguments)}function Ln(Z){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(Z){let de;const Ue=yield nn(Z.appConfig,gt=>{const Bt=tr(gt),Xt=pn(Z,Bt);return de=Xt.registrationPromise,Xt.installationEntry});return""===Ue.fid?{installationEntry:yield de}:{installationEntry:Ue,registrationPromise:de}})).apply(this,arguments)}function tr(Z){return wn(Z||{fid:Rt(),registrationStatus:0})}function pn(Z,de){if(0===de.registrationStatus){if(!navigator.onLine)return{installationEntry:de,registrationPromise:Promise.reject(qe.create("app-offline"))};const Ue={fid:de.fid,registrationStatus:1,registrationTime:Date.now()},gt=function Un(Z,de){return Mr.apply(this,arguments)}(Z,Ue);return{installationEntry:Ue,registrationPromise:gt}}return 1===de.registrationStatus?{installationEntry:de,registrationPromise:Ft(Z)}:{installationEntry:de}}function Mr(){return(Mr=(0,c.Z)(function*(Z,de){try{const Ue=yield ne(Z,de);return Sn(Z.appConfig,Ue)}catch(Ue){throw ye(Ue)&&409===Ue.customData.serverCode?yield vt(Z.appConfig):yield Sn(Z.appConfig,{fid:de.fid,registrationStatus:0}),Ue}})).apply(this,arguments)}function Ft(Z){return ft.apply(this,arguments)}function ft(){return(ft=(0,c.Z)(function*(Z){let de=yield nt(Z.appConfig);for(;1===de.registrationStatus;)yield ce(100),de=yield nt(Z.appConfig);if(0===de.registrationStatus){const{installationEntry:Ue,registrationPromise:gt}=yield Ln(Z);return gt||Ue}return de})).apply(this,arguments)}function nt(Z){return nn(Z,de=>{if(!de)throw qe.create("installation-not-found");return wn(de)})}function wn(Z){return function Rr(Z){return 1===Z.registrationStatus&&Z.registrationTime+1e4<Date.now()}(Z)?{fid:Z.fid,registrationStatus:0}:Z}function Lt(Z,de){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*({appConfig:Z,heartbeatServiceProvider:de},Ue){const gt=_n(Z,Ue),Bt=Ce(Z,Ue),Xt=de.getImmediate({optional:!0});if(Xt){const Ct=yield Xt.getHeartbeatsHeader();Ct&&Bt.append("x-firebase-client",Ct)}const Pn={method:"POST",headers:Bt,body:JSON.stringify({installation:{sdkVersion:me,appId:Z.appId}})},yr=yield Je(()=>fetch(gt,Pn));if(yr.ok)return et(yield yr.json());throw yield Ze("Generate Auth Token",yr)})).apply(this,arguments)}function _n(Z,{fid:de}){return`${De(Z)}/${de}/authTokens:generate`}function on(Z){return L.apply(this,arguments)}function L(){return(L=(0,c.Z)(function*(Z,de=!1){let Ue;const gt=yield nn(Z.appConfig,Xt=>{if(!j(Xt))throw qe.create("not-registered");const Vt=Xt.authToken;if(!de&&ee(Vt))return Xt;if(1===Vt.requestStatus)return Ue=z(Z,de),Xt;{if(!navigator.onLine)throw qe.create("app-offline");const Pn=Ve(Xt);return Ue=B(Z,Pn),Pn}});return Ue?yield Ue:gt.authToken})).apply(this,arguments)}function z(Z,de){return K.apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(Z,de){let Ue=yield Ie(Z.appConfig);for(;1===Ue.authToken.requestStatus;)yield ce(100),Ue=yield Ie(Z.appConfig);const gt=Ue.authToken;return 0===gt.requestStatus?on(Z,de):gt})).apply(this,arguments)}function Ie(Z){return nn(Z,de=>{if(!j(de))throw qe.create("not-registered");return function We(Z){return 1===Z.requestStatus&&Z.requestTime+1e4<Date.now()}(de.authToken)?Object.assign(Object.assign({},de),{authToken:{requestStatus:0}}):de})}function B(Z,de){return X.apply(this,arguments)}function X(){return(X=(0,c.Z)(function*(Z,de){try{const Ue=yield Lt(Z,de),gt=Object.assign(Object.assign({},de),{authToken:Ue});return yield Sn(Z.appConfig,gt),Ue}catch(Ue){if(!ye(Ue)||401!==Ue.customData.serverCode&&404!==Ue.customData.serverCode){const gt=Object.assign(Object.assign({},de),{authToken:{requestStatus:0}});yield Sn(Z.appConfig,gt)}else yield vt(Z.appConfig);throw Ue}})).apply(this,arguments)}function j(Z){return void 0!==Z&&2===Z.registrationStatus}function ee(Z){return 2===Z.requestStatus&&!function ve(Z){const de=Date.now();return de<Z.creationTime||Z.creationTime+Z.expiresIn<de+36e5}(Z)}function Ve(Z){const de={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Z),{authToken:de})}function pt(){return(pt=(0,c.Z)(function*(Z){const de=Z,{installationEntry:Ue,registrationPromise:gt}=yield Ln(de);return gt?gt.catch(console.error):on(de).catch(console.error),Ue.fid})).apply(this,arguments)}function H(){return(H=(0,c.Z)(function*(Z,de=!1){const Ue=Z;return yield U(Ue),(yield on(Ue,de)).token})).apply(this,arguments)}function U(Z){return Se.apply(this,arguments)}function Se(){return(Se=(0,c.Z)(function*(Z){const{registrationPromise:de}=yield Ln(Z);de&&(yield de)})).apply(this,arguments)}function Vn(Z){return qe.create("missing-app-config-values",{valueName:Z})}const Pr="installations",us=Z=>{const de=Z.getProvider("app").getImmediate(),Ue=function Ht(Z){if(!Z||!Z.options)throw Vn("App Configuration");if(!Z.name)throw Vn("App Name");const de=["projectId","apiKey","appId"];for(const Ue of de)if(!Z.options[Ue])throw Vn(Ue);return{appName:Z.name,projectId:Z.options.projectId,apiKey:Z.options.apiKey,appId:Z.options.appId}}(de);return{app:de,appConfig:Ue,heartbeatServiceProvider:(0,k._getProvider)(de,"heartbeat"),_delete:()=>Promise.resolve()}},Dr=Z=>{const de=Z.getProvider("app").getImmediate(),Ue=(0,k._getProvider)(de,Pr).getImmediate();return{getId:()=>function ze(Z){return pt.apply(this,arguments)}(Ue),getToken:Bt=>function Q(Z){return H.apply(this,arguments)}(Ue,Bt)}};(function Ke(){(0,k._registerComponent)(new M.wA(Pr,us,"PUBLIC")),(0,k._registerComponent)(new M.wA("installations-internal",Dr,"PRIVATE"))})(),(0,k.registerVersion)(we,"0.5.9"),(0,k.registerVersion)(we,"0.5.9","esm2017")},1877:(ot,Te,x)=>{x.d(Te,{Am:()=>me,Ub:()=>le,Yd:()=>he,in:()=>k});const c=[];var k=(()=>{return(q=k||(k={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",k;var q})();const M={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},se=k.INFO,pe={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},we=(q,$,...oe)=>{if($<q.logLevel)return;const Ge=(new Date).toISOString(),Ae=pe[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${Ge}]  ${q.name}:`,...oe)};class he{constructor($){this.name=$,this._logLevel=se,this._logHandler=we,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in k))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?M[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...$),this._logHandler(this,k.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...$),this._logHandler(this,k.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,k.INFO,...$),this._logHandler(this,k.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,k.WARN,...$),this._logHandler(this,k.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...$),this._logHandler(this,k.ERROR,...$)}}function le(q){c.forEach($=>{$.setLogLevel(q)})}function me(q,$){for(const oe of c){let Ge=null;$&&$.level&&(Ge=M[$.level]),oe.userLogHandler=null===q?null:(Ae,Be,...qe)=>{const ye=qe.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(et){return null}}).filter(De=>De).join(" ");Be>=(null!=Ge?Ge:Ae.logLevel)&&q({level:k[Be].toLowerCase(),message:ye,args:qe,type:Ae.name})}}}},8766:(ot,Te,x)=>{x.d(Te,{Lj:()=>ke,X3:()=>Ze});var c=x(5861);let M,se;const he=new WeakMap,le=new WeakMap,me=new WeakMap,q=new WeakMap,$=new WeakMap;let Ae={get(fe,V,ne){if(fe instanceof IDBTransaction){if("done"===V)return le.get(fe);if("objectStoreNames"===V)return fe.objectStoreNames||me.get(fe);if("store"===V)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return De(fe[V])},set:(fe,V,ne)=>(fe[V]=ne,!0),has:(fe,V)=>fe instanceof IDBTransaction&&("done"===V||"store"===V)||V in fe};function ye(fe){return"function"==typeof fe?function qe(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...V){return fe.apply(et(this),V),De(he.get(this))}:function(...V){return De(fe.apply(et(this),V))}:function(V,...ne){const ue=fe.call(et(this),V,...ne);return me.set(ue,V.sort?V.sort():[V]),De(ue)}}(fe):(fe instanceof IDBTransaction&&function Ge(fe){if(le.has(fe))return;const V=new Promise((ne,ue)=>{const ce=()=>{fe.removeEventListener("complete",Pe),fe.removeEventListener("error",ae),fe.removeEventListener("abort",ae)},Pe=()=>{ne(),ce()},ae=()=>{ue(fe.error||new DOMException("AbortError","AbortError")),ce()};fe.addEventListener("complete",Pe),fe.addEventListener("error",ae),fe.addEventListener("abort",ae)});le.set(fe,V)}(fe),((fe,V)=>V.some(ne=>fe instanceof ne))(fe,function pe(){return M||(M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Ae):fe)}function De(fe){if(fe instanceof IDBRequest)return function oe(fe){const V=new Promise((ne,ue)=>{const ce=()=>{fe.removeEventListener("success",Pe),fe.removeEventListener("error",ae)},Pe=()=>{ne(De(fe.result)),ce()},ae=()=>{ue(fe.error),ce()};fe.addEventListener("success",Pe),fe.addEventListener("error",ae)});return V.then(ne=>{ne instanceof IDBCursor&&he.set(ne,fe)}).catch(()=>{}),$.set(V,fe),V}(fe);if(q.has(fe))return q.get(fe);const V=ye(fe);return V!==fe&&(q.set(fe,V),$.set(V,fe)),V}const et=fe=>$.get(fe);function Ze(fe,V,{blocked:ne,upgrade:ue,blocking:ce,terminated:Pe}={}){const ae=indexedDB.open(fe,V),_t=De(ae);return ue&&ae.addEventListener("upgradeneeded",Rt=>{ue(De(ae.result),Rt.oldVersion,Rt.newVersion,De(ae.transaction))}),ne&&ae.addEventListener("blocked",()=>ne()),_t.then(Rt=>{Pe&&Rt.addEventListener("close",()=>Pe()),ce&&Rt.addEventListener("versionchange",()=>ce())}).catch(()=>{}),_t}function ke(fe,{blocked:V}={}){const ne=indexedDB.deleteDatabase(fe);return V&&ne.addEventListener("blocked",()=>V()),De(ne).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Je=new Map;function J(fe,V){if(!(fe instanceof IDBDatabase)||V in fe||"string"!=typeof V)return;if(Je.get(V))return Je.get(V);const ne=V.replace(/FromIndex$/,""),ue=V!==ne,ce=Ce.includes(ne);if(!(ne in(ue?IDBIndex:IDBObjectStore).prototype)||!ce&&!Ne.includes(ne))return;const Pe=function(){var ae=(0,c.Z)(function*(_t,...Rt){const En=this.transaction(_t,ce?"readwrite":"readonly");let it=En.store;return ue&&(it=it.index(Rt.shift())),(yield Promise.all([it[ne](...Rt),ce&&En.done]))[0]});return function(Rt){return ae.apply(this,arguments)}}();return Je.set(V,Pe),Pe}!function Be(fe){Ae=fe(Ae)}(fe=>H1($1({},fe),{get:(V,ne,ue)=>J(V,ne)||fe.get(V,ne,ue),has:(V,ne)=>!!J(V,ne)||fe.has(V,ne)}))},5861:(ot,Te,x)=>{function c(M,se,pe,we,he,le,me){try{var q=M[le](me),$=q.value}catch(oe){return void pe(oe)}q.done?se($):Promise.resolve($).then(we,he)}function k(M){return function(){var se=this,pe=arguments;return new Promise(function(we,he){var le=M.apply(se,pe);function me($){c(le,we,he,me,q,"next",$)}function q($){c(le,we,he,me,q,"throw",$)}me(void 0)})}}x.d(Te,{Z:()=>k})}},ot=>{ot(ot.s=7125)}]);