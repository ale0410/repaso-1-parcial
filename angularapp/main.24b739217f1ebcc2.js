"use strict";var $O=Object.defineProperty,HO=Object.defineProperties,GO=Object.getOwnPropertyDescriptors,gR=Object.getOwnPropertySymbols,zO=Object.prototype.hasOwnProperty,qO=Object.prototype.propertyIsEnumerable,mR=(ot,Ce,M)=>Ce in ot?$O(ot,Ce,{enumerable:!0,configurable:!0,writable:!0,value:M}):ot[Ce]=M,yR=(ot,Ce)=>{for(var M in Ce||(Ce={}))zO.call(Ce,M)&&mR(ot,M,Ce[M]);if(gR)for(var M of gR(Ce))qO.call(Ce,M)&&mR(ot,M,Ce[M]);return ot},vR=(ot,Ce)=>HO(ot,GO(Ce));(self.webpackChunkrepaso_1_parcial=self.webpackChunkrepaso_1_parcial||[]).push([[179],{2011:(ot,Ce,M)=>{M.d(Ce,{Dh:()=>le,GT:()=>Ee,Ot:()=>he,cc:()=>Te,hO:()=>He,on:()=>z,pX:()=>pe,xv:()=>me});var d=M(5e3),k=M(127),x=M(880);ot=M.hmd(ot);const ie=["ngOnDestroy"],pe=(be,et,We,Oe={})=>new Proxy(be,{get:(Ne,De)=>We.runOutsideAngular(()=>{var Qe;if(be[De])return(null===(Qe=null==Oe?void 0:Oe.spy)||void 0===Qe?void 0:Qe.get)&&Oe.spy.get(De,be[De]),be[De];if(ie.indexOf(De)>-1)return()=>{};const J=et.toPromise().then(fe=>{const V=fe&&fe[De];return"function"==typeof V?V.bind(fe):V&&V.then?V.then(te=>We.run(()=>te)):We.run(()=>V)});return new Proxy(()=>{},{get:(fe,V)=>J[V],apply:(fe,V,te)=>J.then(ae=>{var ce;const Re=ae&&ae(...te);return(null===(ce=null==Oe?void 0:Oe.spy)||void 0===ce?void 0:ce.apply)&&Oe.spy.apply(De,te,Re),Re})})})}),Ee=(be,et)=>{et.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Oe=>{Object.defineProperty(be.prototype,Oe,Object.getOwnPropertyDescriptor(We.prototype||We,Oe))})})};class he{constructor(et){return et}}const le=new d.OlP("angularfire2.app.options"),me=new d.OlP("angularfire2.app.name");function z(be,et,We){const Ne="object"==typeof We&&We||{};Ne.name=Ne.name||"string"==typeof We&&We||"[DEFAULT]";const Qe=k.Z.apps.filter(J=>J&&J.name===Ne.name)[0]||et.runOutsideAngular(()=>k.Z.initializeApp(be,Ne));try{JSON.stringify(be)!==JSON.stringify(Qe.options)&&j("error",`${Qe.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(J){}return new he(Qe)}const j=(be,...et)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[be](...et)},se={provide:he,useFactory:z,deps:[le,d.R0b,[new d.FiY,me]]};let He=(()=>{class be{constructor(We){k.Z.registerVersion("angularfire",x.q4.full,"core"),k.Z.registerVersion("angularfire",x.q4.full,"app-compat"),k.Z.registerVersion("angular",d.q4F.full,We.toString())}static initializeApp(We,Oe){return{ngModule:be,providers:[{provide:le,useValue:We},{provide:me,useValue:Oe}]}}}return be.\u0275fac=function(We){return new(We||be)(d.LFG(d.Lbi))},be.\u0275mod=d.oAB({type:be}),be.\u0275inj=d.cJS({providers:[se]}),be})();function Te(be,et,We,Oe,Ne){const[,De,Qe]=globalThis.\u0275AngularfireInstanceCache.find(J=>J[0]===be)||[];if(De)return function Be(be,et){try{return be.toString()===et.toString()}catch(We){return be===et}}(Ne,Qe)||(ye("error",`${et} was already initialized on the ${We} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Ne,was:Qe})),De;{const J=Oe();return globalThis.\u0275AngularfireInstanceCache.push([be,J,Ne]),J}}const Ge=!!ot.hot,ye=(be,...et)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[be](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(ot,Ce,M)=>{M.d(Ce,{q4:()=>ss,iC:()=>yr,HU:()=>ea,vb:()=>Ka,JM:()=>Xo,nk:()=>Jo,u3:()=>Ri});var d=M(5e3),k=M(5867),x=M(5861),ie=M(9681),pe=M(2090),Ee=M(4859),he=M(1877);M(2833);const me="@firebase/remote-config",z="0.3.8",Te=new pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class At{constructor(N,K,ge,$e){this.client=N,this.storage=K,this.storageCache=ge,this.logger=$e}isCachedDataFresh(N,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-K,$e=ge<=N;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${N}. Is cache hit: ${$e}.`),$e}fetch(N){var K=this;return(0,x.Z)(function*(){const[ge,$e]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if($e&&K.isCachedDataFresh(N.cacheMaxAgeMillis,ge))return $e;N.eTag=$e&&$e.eTag;const Je=yield K.client.fetch(N),Tt=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Je.status&&Tt.push(K.storage.setLastSuccessfulFetchResponse(Je)),yield Promise.all(Tt),Je})()}}function _n(R=navigator){return R.languages&&R.languages[0]||R.language}class it{constructor(N,K,ge,$e,Je,Tt){this.firebaseInstallations=N,this.sdkVersion=K,this.namespace=ge,this.projectId=$e,this.apiKey=Je,this.appId=Tt}fetch(N){var K=this;return(0,x.Z)(function*(){const[ge,$e]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),Tt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":N.eTag||"*"},Nn={sdk_version:K.sdkVersion,app_instance_id:ge,app_instance_id_token:$e,app_id:K.appId,language_code:_n()},bn={method:"POST",headers:ut,body:JSON.stringify(Nn)},Dn=fetch(Tt,bn),$t=new Promise((Ft,Ni)=>{N.signal.addEventListener(()=>{const Cn=new Error("The operation was aborted.");Cn.name="AbortError",Ni(Cn)})});let os;try{yield Promise.race([Dn,$t]),os=yield Dn}catch(Ft){let Ni="fetch-client-network";throw"AbortError"===Ft.name&&(Ni="fetch-timeout"),Te.create(Ni,{originalErrorMessage:Ft.message})}let di=os.status;const ia=os.headers.get("ETag")||void 0;let Zi,ke;if(200===os.status){let Ft;try{Ft=yield os.json()}catch(Ni){throw Te.create("fetch-client-parse",{originalErrorMessage:Ni.message})}Zi=Ft.entries,ke=Ft.state}if("INSTANCE_STATE_UNSPECIFIED"===ke?di=500:"NO_CHANGE"===ke?di=304:("NO_TEMPLATE"===ke||"EMPTY_CONFIG"===ke)&&(Zi={}),304!==di&&200!==di)throw Te.create("fetch-status",{httpStatus:di});return{status:di,eTag:ia,config:Zi}})()}}class un{constructor(N,K){this.client=N,this.storage=K}fetch(N){var K=this;return(0,x.Z)(function*(){const ge=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(N,ge)})()}attemptFetch(N,{throttleEndTimeMillis:K,backoffCount:ge}){var $e=this;return(0,x.Z)(function*(){yield function dt(R,N){return new Promise((K,ge)=>{const $e=Math.max(N-Date.now(),0),Je=setTimeout(K,$e);R.addEventListener(()=>{clearTimeout(Je),ge(Te.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(N.signal,K);try{const Je=yield $e.client.fetch(N);return yield $e.storage.deleteThrottleMetadata(),Je}catch(Je){if(!function mn(R){if(!(R instanceof pe.ZR&&R.customData))return!1;const N=Number(R.customData.httpStatus);return 429===N||500===N||503===N||504===N}(Je))throw Je;const Tt={throttleEndTimeMillis:Date.now()+(0,pe.$s)(ge),backoffCount:ge+1};return yield $e.storage.setThrottleMetadata(Tt),$e.attemptFetch(N,Tt)}})()}}class jt{constructor(N,K,ge,$e,Je){this.app=N,this._client=K,this._storageCache=ge,this._storage=$e,this._logger=Je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function St(R,N){const K=R.target.error||void 0;return Te.create(N,{originalErrorMessage:K&&K.message})}const tn="app_namespace_store";class xn{constructor(N,K,ge,$e=function hn(){return new Promise((R,N)=>{try{const K=indexedDB.open("firebase_remote_config",1);K.onerror=ge=>{N(St(ge,"storage-open"))},K.onsuccess=ge=>{R(ge.target.result)},K.onupgradeneeded=ge=>{0===ge.oldVersion&&ge.target.result.createObjectStore(tn,{keyPath:"compositeKey"})}}catch(K){N(Te.create("storage-open",{originalErrorMessage:K}))}})}()){this.appId=N,this.appName=K,this.namespace=ge,this.openDbPromise=$e}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(N){return this.set("last_fetch_status",N)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(N){return this.set("last_successful_fetch_timestamp_millis",N)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(N){return this.set("last_successful_fetch_response",N)}getActiveConfig(){return this.get("active_config")}setActiveConfig(N){return this.set("active_config",N)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(N){return this.set("active_config_etag",N)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(N){return this.set("throttle_metadata",N)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(N){var K=this;return(0,x.Z)(function*(){const ge=yield K.openDbPromise;return new Promise(($e,Je)=>{const ut=ge.transaction([tn],"readonly").objectStore(tn),Nn=K.createCompositeKey(N);try{const bn=ut.get(Nn);bn.onerror=Dn=>{Je(St(Dn,"storage-get"))},bn.onsuccess=Dn=>{const $t=Dn.target.result;$e($t?$t.value:void 0)}}catch(bn){Je(Te.create("storage-get",{originalErrorMessage:bn&&bn.message}))}})})()}set(N,K){var ge=this;return(0,x.Z)(function*(){const $e=yield ge.openDbPromise;return new Promise((Je,Tt)=>{const Nn=$e.transaction([tn],"readwrite").objectStore(tn),bn=ge.createCompositeKey(N);try{const Dn=Nn.put({compositeKey:bn,value:K});Dn.onerror=$t=>{Tt(St($t,"storage-set"))},Dn.onsuccess=()=>{Je()}}catch(Dn){Tt(Te.create("storage-set",{originalErrorMessage:Dn&&Dn.message}))}})})()}delete(N){var K=this;return(0,x.Z)(function*(){const ge=yield K.openDbPromise;return new Promise(($e,Je)=>{const ut=ge.transaction([tn],"readwrite").objectStore(tn),Nn=K.createCompositeKey(N);try{const bn=ut.delete(Nn);bn.onerror=Dn=>{Je(St(Dn,"storage-delete"))},bn.onsuccess=()=>{$e()}}catch(bn){Je(Te.create("storage-delete",{originalErrorMessage:bn&&bn.message}))}})})()}createCompositeKey(N){return[this.appId,this.appName,this.namespace,N].join()}}class qn{constructor(N){this.storage=N}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var N=this;return(0,x.Z)(function*(){const K=N.storage.getLastFetchStatus(),ge=N.storage.getLastSuccessfulFetchTimestampMillis(),$e=N.storage.getActiveConfig(),Je=yield K;Je&&(N.lastFetchStatus=Je);const Tt=yield ge;Tt&&(N.lastSuccessfulFetchTimestampMillis=Tt);const ut=yield $e;ut&&(N.activeConfig=ut)})()}setLastFetchStatus(N){return this.lastFetchStatus=N,this.storage.setLastFetchStatus(N)}setLastSuccessfulFetchTimestampMillis(N){return this.lastSuccessfulFetchTimestampMillis=N,this.storage.setLastSuccessfulFetchTimestampMillis(N)}setActiveConfig(N){return this.activeConfig=N,this.storage.setActiveConfig(N)}}function _t(){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,x.Z)(function*(){if(!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch(R){return!1}})).apply(this,arguments)}!function Xn(){(0,ie._registerComponent)(new Ee.wA("remote-config",function R(N,{instanceIdentifier:K}){const ge=N.getProvider("app").getImmediate(),$e=N.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Te.create("registration-window");if(!(0,pe.hl)())throw Te.create("indexed-db-unavailable");const{projectId:Je,apiKey:Tt,appId:ut}=ge.options;if(!Je)throw Te.create("registration-project-id");if(!Tt)throw Te.create("registration-api-key");if(!ut)throw Te.create("registration-app-id");const Nn=new xn(ut,ge.name,K=K||"firebase"),bn=new qn(Nn),Dn=new he.Yd(me);Dn.logLevel=he.in.ERROR;const $t=new it($e,ie.SDK_VERSION,K,Je,Tt,ut),os=new un($t,Nn),di=new At(os,Nn,bn,Dn),ia=new jt(ge,di,bn,Nn,Dn);return function Qe(R){const N=(0,pe.m9)(R);N._initializePromise||(N._initializePromise=N._storageCache.loadFromStorage().then(()=>{N._isInitializationComplete=!0}))}(ia),ia},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(me,z),(0,ie.registerVersion)(me,z,"esm2017")}();var Jt=M(8766);const Zt="/firebase-messaging-sw.js",Fn="/firebase-cloud-messaging-push-scope",Bn="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fn="google.c.a.c_id",Ln="google.c.a.c_l",Tr="google.c.a.ts",Rt="google.c.a.e";var nt=(()=>{return(R=nt||(nt={})).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",nt;var R})();function wn(R){const N=new Uint8Array(R);return btoa(String.fromCharCode(...N)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ar(R){const K=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ge=atob(K),$e=new Uint8Array(ge.length);for(let Je=0;Je<ge.length;++Je)$e[Je]=ge.charCodeAt(Je);return $e}const Nt="fcm_token_details_db",yn="fcm_token_object_Store";function nn(R){return F.apply(this,arguments)}function F(){return F=(0,x.Z)(function*(R){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Je=>Je.name).includes(Nt))return null;let N=null;return(yield(0,Jt.X3)(Nt,5,{upgrade:(ge=(0,x.Z)(function*($e,Je,Tt,ut){var Nn;if(Je<2||!$e.objectStoreNames.contains(yn))return;const bn=ut.objectStore(yn),Dn=yield bn.index("fcmSenderId").get(R);if(yield bn.clear(),Dn)if(2===Je){const $t=Dn;if(!$t.auth||!$t.p256dh||!$t.endpoint)return;N={token:$t.fcmToken,createTime:null!==(Nn=$t.createTime)&&void 0!==Nn?Nn:Date.now(),subscriptionOptions:{auth:$t.auth,p256dh:$t.p256dh,endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:"string"==typeof $t.vapidKey?$t.vapidKey:wn($t.vapidKey)}}}else if(3===Je){const $t=Dn;N={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:wn($t.auth),p256dh:wn($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:wn($t.vapidKey)}}}else if(4===Je){const $t=Dn;N={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:wn($t.auth),p256dh:wn($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:wn($t.vapidKey)}}}}),function(Je,Tt,ut,Nn){return ge.apply(this,arguments)})})).close(),yield(0,Jt.Lj)(Nt),yield(0,Jt.Lj)("fcm_vapid_details_db"),yield(0,Jt.Lj)("undefined"),q(N)?N:null;var ge}),F.apply(this,arguments)}function q(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:N}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof N.auth&&N.auth.length>0&&"string"==typeof N.p256dh&&N.p256dh.length>0&&"string"==typeof N.endpoint&&N.endpoint.length>0&&"string"==typeof N.swScope&&N.swScope.length>0&&"string"==typeof N.vapidKey&&N.vapidKey.length>0}const U="firebase-messaging-store";let X=null;function B(){return X||(X=(0,Jt.X3)("firebase-messaging-database",1,{upgrade:(R,N)=>{0===N&&R.createObjectStore(U)}})),X}function ee(R){return _e.apply(this,arguments)}function _e(){return(_e=(0,x.Z)(function*(R){const N=Q(R),ge=yield(yield B()).transaction(U).objectStore(U).get(N);if(ge)return ge;{const $e=yield nn(R.appConfig.senderId);if($e)return yield Ue(R,$e),$e}})).apply(this,arguments)}function Ue(R,N){return qe.apply(this,arguments)}function qe(){return(qe=(0,x.Z)(function*(R,N){const K=Q(R),$e=(yield B()).transaction(U,"readwrite");return yield $e.objectStore(U).put(N,K),yield $e.done,N})).apply(this,arguments)}function ze(R){return pt.apply(this,arguments)}function pt(){return(pt=(0,x.Z)(function*(R){const N=Q(R),ge=(yield B()).transaction(U,"readwrite");yield ge.objectStore(U).delete(N),yield ge.done})).apply(this,arguments)}function Q({appConfig:R}){return R.appId}const L=new pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Se(R,N){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,x.Z)(function*(R,N){const K=yield ur(R),ge=Vn(N),$e={method:"POST",headers:K,body:JSON.stringify(ge)};let Je;try{Je=yield(yield fetch(Sn(R.appConfig),$e)).json()}catch(Tt){throw L.create("token-subscribe-failed",{errorInfo:Tt})}if(Je.error)throw L.create("token-subscribe-failed",{errorInfo:Je.error.message});if(!Je.token)throw L.create("token-subscribe-no-token");return Je.token})).apply(this,arguments)}function at(R,N){return It.apply(this,arguments)}function It(){return(It=(0,x.Z)(function*(R,N){const K=yield ur(R),ge=Vn(N.subscriptionOptions),$e={method:"PATCH",headers:K,body:JSON.stringify(ge)};let Je;try{Je=yield(yield fetch(`${Sn(R.appConfig)}/${N.token}`,$e)).json()}catch(Tt){throw L.create("token-update-failed",{errorInfo:Tt})}if(Je.error)throw L.create("token-update-failed",{errorInfo:Je.error.message});if(!Je.token)throw L.create("token-update-no-token");return Je.token})).apply(this,arguments)}function zt(R,N){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,x.Z)(function*(R,N){const ge={method:"DELETE",headers:yield ur(R)};try{const Je=yield(yield fetch(`${Sn(R.appConfig)}/${N}`,ge)).json();if(Je.error)throw L.create("token-unsubscribe-failed",{errorInfo:Je.error.message})}catch($e){throw L.create("token-unsubscribe-failed",{errorInfo:$e})}})).apply(this,arguments)}function Sn({projectId:R}){return`https://fcmregistrations.googleapis.com/v1/projects/${R}/registrations`}function ur(R){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,x.Z)(function*({appConfig:R,installations:N}){const K=yield N.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function Vn({p256dh:R,auth:N,endpoint:K,vapidKey:ge}){const $e={web:{endpoint:K,auth:N,p256dh:R}};return ge!==Bn&&($e.web.applicationPubKey=ge),$e}const Sr=6048e5;function Zn(R){return ns.apply(this,arguments)}function ns(){return(ns=(0,x.Z)(function*(R){const N=yield kt(R.swRegistration,R.vapidKey),K={vapidKey:R.vapidKey,swScope:R.swRegistration.scope,endpoint:N.endpoint,auth:wn(N.getKey("auth")),p256dh:wn(N.getKey("p256dh"))},ge=yield ee(R.firebaseDependencies);if(ge){if(Ot(ge.subscriptionOptions,K))return Date.now()>=ge.createTime+Sr?W(R,{token:ge.token,createTime:Date.now(),subscriptionOptions:K}):ge.token;try{yield zt(R.firebaseDependencies,ge.token)}catch($e){console.warn($e)}return Le(R.firebaseDependencies,K)}return Le(R.firebaseDependencies,K)})).apply(this,arguments)}function wr(R){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,x.Z)(function*(R){const N=yield ee(R.firebaseDependencies);N&&(yield zt(R.firebaseDependencies,N.token),yield ze(R.firebaseDependencies));const K=yield R.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function W(R,N){return de.apply(this,arguments)}function de(){return(de=(0,x.Z)(function*(R,N){try{const K=yield at(R.firebaseDependencies,N),ge=Object.assign(Object.assign({},N),{token:K,createTime:Date.now()});return yield Ue(R.firebaseDependencies,ge),K}catch(K){throw yield wr(R),K}})).apply(this,arguments)}function Le(R,N){return gt.apply(this,arguments)}function gt(){return(gt=(0,x.Z)(function*(R,N){const ge={token:yield Se(R,N),createTime:Date.now(),subscriptionOptions:N};return yield Ue(R,ge),ge.token})).apply(this,arguments)}function kt(R,N){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,x.Z)(function*(R,N){return(yield R.pushManager.getSubscription())||R.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ar(N)})})).apply(this,arguments)}function Ot(R,N){return N.vapidKey===R.vapidKey&&N.endpoint===R.endpoint&&N.auth===R.auth&&N.p256dh===R.p256dh}function Rn(R){const N={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function gr(R,N){if(!N.notification)return;R.notification={};const K=N.notification.title;K&&(R.notification.title=K);const ge=N.notification.body;ge&&(R.notification.body=ge);const $e=N.notification.image;$e&&(R.notification.image=$e)}(N,R),function bt(R,N){!N.data||(R.data=N.data)}(N,R),function Hi(R,N){if(!N.fcmOptions)return;R.fcmOptions={};const K=N.fcmOptions.link;K&&(R.fcmOptions.link=K);const ge=N.fcmOptions.analytics_label;ge&&(R.fcmOptions.analyticsLabel=ge)}(N,R),N}function As(R){return"object"==typeof R&&!!R&&fn in R}function Ss(R,N){const K=[];for(let ge=0;ge<R.length;ge++)K.push(R.charAt(ge)),ge<N.length&&K.push(N.charAt(ge));return K.join("")}function Mn(R){return L.create("missing-app-config-values",{valueName:R})}Ss("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ss("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mi{constructor(N,K,ge){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $e=function Ms(R){if(!R||!R.options)throw Mn("App Configuration Object");if(!R.name)throw Mn("App Name");const N=["projectId","apiKey","appId","messagingSenderId"],{options:K}=R;for(const ge of N)if(!K[ge])throw Mn(ge);return{appName:R.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(N);this.firebaseDependencies={app:N,appConfig:$e,installations:K,analyticsProvider:ge}}_delete(){return Promise.resolve()}}function Gi(R){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,x.Z)(function*(R){try{R.swRegistration=yield navigator.serviceWorker.register(Zt,{scope:Fn}),R.swRegistration.update().catch(()=>{})}catch(N){throw L.create("failed-service-worker-registration",{browserErrorMessage:N.message})}})).apply(this,arguments)}function dn(R,N){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,x.Z)(function*(R,N){if(!N&&!R.swRegistration&&(yield Gi(R)),N||!R.swRegistration){if(!(N instanceof ServiceWorkerRegistration))throw L.create("invalid-sw-registration");R.swRegistration=N}})).apply(this,arguments)}function ro(R,N){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,x.Z)(function*(R,N){N?R.vapidKey=N:R.vapidKey||(R.vapidKey=Bn)})).apply(this,arguments)}function io(){return(io=(0,x.Z)(function*(R,N){if(!navigator)throw L.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw L.create("permission-blocked");return yield ro(R,null==N?void 0:N.vapidKey),yield dn(R,null==N?void 0:N.serviceWorkerRegistration),Zn(R)})).apply(this,arguments)}function so(R,N,K){return rs.apply(this,arguments)}function rs(){return(rs=(0,x.Z)(function*(R,N,K){const ge=Gr(N);(yield R.firebaseDependencies.analyticsProvider.get()).logEvent(ge,{message_id:K[fn],message_name:K[Ln],message_time:K[Tr],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gr(R){switch(R){case nt.NOTIFICATION_CLICKED:return"notification_open";case nt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zo(){return(Zo=(0,x.Z)(function*(R,N){const K=N.data;if(!K.isFirebaseMessaging)return;R.onMessageHandler&&K.messageType===nt.PUSH_RECEIVED&&("function"==typeof R.onMessageHandler?R.onMessageHandler(Rn(K)):R.onMessageHandler.next(Rn(K)));const ge=K.data;As(ge)&&"1"===ge[Rt]&&(yield so(R,K.messageType,ge))})).apply(this,arguments)}const oo="@firebase/messaging",Ju=R=>{const N=new Mi(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function Mc(R,N){return Zo.apply(this,arguments)}(N,K)),N},rf=R=>{const N=R.getProvider("messaging").getImmediate();return{getToken:ge=>function xr(R,N){return io.apply(this,arguments)}(N,ge)}};function xc(){return ao.apply(this,arguments)}function ao(){return(ao=(0,x.Z)(function*(){try{yield(0,pe.eu)()}catch(R){return!1}return"undefined"!=typeof window&&(0,pe.hl)()&&(0,pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xi(){(0,ie._registerComponent)(new Ee.wA("messaging",Ju,"PUBLIC")),(0,ie._registerComponent)(new Ee.wA("messaging-internal",rf,"PRIVATE")),(0,ie.registerVersion)(oo,"0.9.13"),(0,ie.registerVersion)(oo,"0.9.13","esm2017")}();var af=M(7982),el=M(4408),Hg=M(7565);const zi=new class Wa extends Hg.v{}(class is extends el.o{constructor(N,K){super(N,K),this.scheduler=N,this.work=K}schedule(N,K=0){return K>0?super.schedule(N,K):(this.delay=K,this.state=N,this.scheduler.flush(this),this)}execute(N,K){return K>0||this.closed?super.execute(N,K):this._execute(N,K)}requestAsyncId(N,K,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(N,K,ge):N.flush(this)}});var lo=M(4986),xs=M(8306),Yo=M(8505),tl=M(9468),Pc=M(5363);const ss=new d.GfV("7.3.0"),co="__angularfire_symbol__analyticsIsSupportedValue",Rs="__angularfire_symbol__analyticsIsSupported",ho="__angularfire_symbol__remoteConfigIsSupportedValue",Qo="__angularfire_symbol__remoteConfigIsSupported",mr="__angularfire_symbol__messagingIsSupportedValue",nr="__angularfire_symbol__messagingIsSupported";globalThis[Rs]||(globalThis[Rs]=(0,af.Gb)().then(R=>globalThis[co]=R).catch(()=>globalThis[co]=!1)),globalThis[nr]||(globalThis[nr]=xc().then(R=>globalThis[mr]=R).catch(()=>globalThis[mr]=!1)),globalThis[Qo]||(globalThis[Qo]=_t().then(R=>globalThis[ho]=R).catch(()=>globalThis[ho]=!1));const Jo={async:()=>globalThis[Rs],sync:()=>{const R=globalThis[co];if(void 0===R)throw new Error((R=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${R} in the constructor, first ensure that ${R} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${R})\`.`)("Analytics"));return R}};function Xo(R,N,K){if(N){if(1===N.length)return N[0];const Je=N.filter(Tt=>Tt.app===K);if(1===Je.length)return Je[0]}return K.container.getProvider(R).getImmediate({optional:!0})}const Ka=(R,N)=>{const K=N?[N]:(0,k.C6)(),ge=[];return K.forEach($e=>{$e.container.getProvider(R).instances.forEach(Tt=>{ge.includes(Tt)||ge.push(Tt)})}),ge};function qi(){}class nl{constructor(N,K=zi){this.zone=N,this.delegate=K}now(){return this.delegate.now()}schedule(N,K,ge){const $e=this.zone;return this.delegate.schedule(function(Tt){$e.runGuarded(()=>{N.apply(this,[Tt])})},K,ge)}}class In{constructor(N){this.zone=N,this.task=null}call(N,K){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qi,{},qi,qi)),K.pipe((0,Yo.b)({next:ge,complete:ge,error:ge})).subscribe(N).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ea=(()=>{class R{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new nl(Zone.current)),this.insideAngular=K.run(()=>new nl(Zone.current,lo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(K){return new(K||R)(d.LFG(d.R0b))},R.\u0275prov=d.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function Qr(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function vn(R){return Qr().ngZone.runOutsideAngular(()=>R())}function Wi(R){return Qr().ngZone.run(()=>R())}function yr(R){return Qr(),function ra(R){return function(K){return(K=K.lift(new In(R.ngZone))).pipe((0,tl.R)(R.outsideAngular),(0,Pc.Q)(R.insideAngular))}}(Qr())(R)}const fo=(R,N)=>function(){const ge=arguments;return N&&setTimeout(()=>{"scheduled"===N.state&&N.invoke()},10),Wi(()=>R.apply(void 0,ge))},Ri=(R,N)=>function(){let K;const ge=arguments;for(let Je=0;Je<arguments.length;Je++)"function"==typeof ge[Je]&&(N&&(K||(K=Wi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qi,{},qi,qi)))),ge[Je]=fo(ge[Je],K));const $e=vn(()=>R.apply(this,ge));if(!N){if($e instanceof xs.y){const Je=Qr();return $e.pipe((0,tl.R)(Je.outsideAngular),(0,Pc.Q)(Je.insideAngular))}return Wi(()=>$e)}return $e instanceof xs.y?$e.pipe(yr):$e instanceof Promise?Wi(()=>new Promise((Je,Tt)=>$e.then(ut=>Wi(()=>Je(ut)),ut=>Wi(()=>Tt(ut))))):"function"==typeof $e&&K?function(){return setTimeout(()=>{K&&"scheduled"===K.state&&K.invoke()},10),$e.apply(this,arguments)}:Wi(()=>$e)}},198:(ot,Ce,M)=>{M.d(Ce,{$:()=>Je,A:()=>j,B:()=>Te,G:()=>de,H:()=>Ot,J:()=>xi,L:()=>qe,M:()=>Wa,N:()=>xs,P:()=>Us,Q:()=>Yo,R:()=>Df,T:()=>tl,U:()=>lo,V:()=>Rs,W:()=>ho,X:()=>Oc,Y:()=>ra,Z:()=>Ri,_:()=>N,a:()=>ul,a0:()=>Dn,a1:()=>os,a2:()=>ia,a3:()=>ke,a4:()=>Ni,a5:()=>uf,a6:()=>Ki,a7:()=>Fc,a8:()=>Gg,a9:()=>zg,aA:()=>ga,aB:()=>cu,aC:()=>rd,aD:()=>fl,aE:()=>Ze,aI:()=>aa,aL:()=>ss,aa:()=>as,ab:()=>sa,ac:()=>qg,af:()=>Vc,ag:()=>cf,ah:()=>df,ak:()=>qi,al:()=>Yg,an:()=>al,ao:()=>w_,ap:()=>Sn,aq:()=>V,ar:()=>Pt,as:()=>at,at:()=>We,au:()=>wl,av:()=>ma,aw:()=>Oe,ax:()=>J,ay:()=>ae,az:()=>ze,b:()=>Jg,c:()=>au,d:()=>om,e:()=>ed,f:()=>Mf,g:()=>xf,h:()=>sd,i:()=>yo,j:()=>wo,k:()=>Ff,l:()=>Ji,m:()=>fm,n:()=>dd,o:()=>le,r:()=>im,s:()=>rm,u:()=>su});var d=M(5861),k=M(2090),x=M(9681),ie=M(655),pe=M(1877),Ee=M(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Te=function se(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new pe.Yd("@firebase/auth");function et(v,...p){be.logLevel<=pe.in.ERROR&&be.error(`Auth (${x.SDK_VERSION}): ${v}`,...p)}function We(v,...p){throw Qe(v,...p)}function Oe(v,...p){return Qe(v,...p)}function Ne(v,p,m){const w=Object.assign(Object.assign({},Be()),{[p]:m});return new k.LL("auth","Firebase",w).create(p,{appName:v.name})}function De(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&We(v,"argument-error"),Ne(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(v,...p){if("string"!=typeof v){const m=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return Ge.create(v,...p)}function J(v,p,...m){if(!v)throw Qe(p,...m)}function fe(v){const p="INTERNAL ASSERTION FAILED: "+v;throw et(p),new Error(p)}function V(v,p){v||fe(p)}const te=new Map;function ae(v){V(v instanceof Function,"Expected a class definition");let p=te.get(v);return p?(V(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,te.set(v,p),p)}function oe(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function vt(){return"http:"===At()||"https:"===At()}function At(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class dt{constructor(p,m){this.shortDelay=p,this.longDelay=m,V(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function _n(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(v,p){V(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class un{static initialize(p,m,w){this.fetchImpl=p,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new dt(3e4,6e4);function jt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function St(v,p,m,w){return tn.apply(this,arguments)}function tn(){return(tn=(0,d.Z)(function*(v,p,m,w,C={}){return Tn(v,C,(0,d.Z)(function*(){let P={},re={};w&&("GET"===p?re=w:P={body:JSON.stringify(w)});const Fe=(0,k.xO)(Object.assign({key:v.config.apiKey},re)).slice(1),lt=yield v._getAdditionalHeaders();return lt["Content-Type"]="application/json",v.languageCode&&(lt["X-Firebase-Locale"]=v.languageCode),un.fetch()(qn(v,v.config.apiHost,m,Fe),Object.assign({method:p,headers:lt,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Tn(v,p,m){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(v,p,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},pr),p);try{const C=new Xn(v),P=yield Promise.race([m(),C.promise]);C.clearNetworkTimeout();const re=yield P.json();if("needConfirmation"in re)throw An(v,"account-exists-with-different-credential",re);if(P.ok&&!("errorMessage"in re))return re;{const Fe=P.ok?re.errorMessage:re.error.message,[lt,wt]=Fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw An(v,"credential-already-in-use",re);if("EMAIL_EXISTS"===lt)throw An(v,"email-already-in-use",re);const Wt=w[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(wt)throw Ne(v,Wt,wt);We(v,Wt)}}catch(C){if(C instanceof k.ZR)throw C;We(v,"network-request-failed")}})).apply(this,arguments)}function hn(v,p,m,w){return xn.apply(this,arguments)}function xn(){return(xn=(0,d.Z)(function*(v,p,m,w,C={}){const P=yield St(v,p,m,w,C);return"mfaPendingCredential"in P&&We(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function qn(v,p,m,w){const C=`${p}${m}?${w}`;return v.config.emulator?mn(v.config,C):`${v.config.apiScheme}://${C}`}class Xn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Oe(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(v,p,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const C=Oe(v,p,w);return C.customData._tokenResponse=m,C}function _t(){return(_t=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Wn(v,p){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Zt(v,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Bn(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ln(){return(Ln=(0,d.Z)(function*(v,p=!1){const m=(0,k.m9)(v),w=yield m.getIdToken(p),C=Rt(w);J(C&&C.exp&&C.auth_time&&C.iat,m.auth,"internal-error");const P="object"==typeof C.firebase?C.firebase:void 0,re=null==P?void 0:P.sign_in_provider;return{claims:C,token:w,authTime:Bn(Tr(C.auth_time)),issuedAtTime:Bn(Tr(C.iat)),expirationTime:Bn(Tr(C.exp)),signInProvider:re||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function Tr(v){return 1e3*Number(v)}function Rt(v){const[p,m,w]=v.split(".");if(void 0===p||void 0===m||void 0===w)return et("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,k.tV)(m);return C?JSON.parse(C):(et("Failed to decode base64 JWT payload"),null)}catch(C){return et("Caught error parsing JWT payload as JSON",C),null}}function nt(v,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(w){throw w instanceof k.ZR&&Ar(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Ar({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Nt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const C=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class ar{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yn(v){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(v){var p;const m=v.auth,w=yield v.getIdToken(),C=yield nt(v,Zt(m,{idToken:w}));J(null==C?void 0:C.users.length,m,"internal-error");const P=C.users[0];v._notifyReloadListener(P);const re=(null===(p=P.providerUserInfo)||void 0===p?void 0:p.length)?Ie(P.providerUserInfo):[],Fe=Z(v.providerData,re),Wt=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==Fe?void 0:Fe.length)),Gn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Fe,metadata:new ar(P.createdAt,P.lastLoginAt),isAnonymous:Wt};Object.assign(v,Gn)})).apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(v){const p=(0,k.m9)(v);yield yn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Z(v,p){return[...v.filter(w=>!p.some(C=>C.providerId===w.providerId)),...p]}function Ie(v){return v.map(p=>{var{providerId:m}=p,w=(0,ie._T)(p,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function X(){return(X=(0,d.Z)(function*(v,p){const m=yield Tn(v,{},(0,d.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:C,apiKey:P}=v.config,re=qn(v,C,"/v1/token",`key=${P}`),Fe=yield v._getAdditionalHeaders();return Fe["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(re,{method:"POST",headers:Fe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class B{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){J(p.idToken,"internal-error"),J(void 0!==p.idToken,"internal-error"),J(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function ft(v){const p=Rt(v);return J(p,"internal-error"),J(void 0!==p.exp,"internal-error"),J(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var w=this;return(0,d.Z)(function*(){return J(!w.accessToken||w.refreshToken,p,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var w=this;return(0,d.Z)(function*(){const{accessToken:C,refreshToken:P,expiresIn:re}=yield function U(v,p){return X.apply(this,arguments)}(p,m);w.updateTokensAndExpiration(C,P,Number(re))})()}updateTokensAndExpiration(p,m,w){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,m){const{refreshToken:w,accessToken:C,expirationTime:P}=m,re=new B;return w&&(J("string"==typeof w,"internal-error",{appName:p}),re.refreshToken=w),C&&(J("string"==typeof C,"internal-error",{appName:p}),re.accessToken=C),P&&(J("number"==typeof P,"internal-error",{appName:p}),re.expirationTime=P),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new B,this.toJSON())}_performRefresh(){return fe("not implemented")}}function ee(v,p){J("string"==typeof v||void 0===v,"internal-error",{appName:p})}class _e{constructor(p){var{uid:m,auth:w,stsTokenManager:C}=p,P=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ar(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,d.Z)(function*(){const w=yield nt(m,m.stsTokenManager.getToken(m.auth,p));return J(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(p){return function fn(v){return Ln.apply(this,arguments)}(this,p)}reload(){return function F(v){return q.apply(this,arguments)}(this)}_assign(p){this!==p&&(J(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new _e(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var w=this;return(0,d.Z)(function*(){let C=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),C=!0),m&&(yield yn(w)),yield w.auth._persistUserIfCurrent(w),C&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,d.Z)(function*(){const m=yield p.getIdToken();return yield nt(p,function er(v,p){return _t.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var w,C,P,re,Fe,lt,wt,Wt;const Gn=null!==(w=m.displayName)&&void 0!==w?w:void 0,ei=null!==(C=m.email)&&void 0!==C?C:void 0,Ei=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Ao=null!==(re=m.photoURL)&&void 0!==re?re:void 0,ym=null!==(Fe=m.tenantId)&&void 0!==Fe?Fe:void 0,hd=null!==(lt=m._redirectEventId)&&void 0!==lt?lt:void 0,ps=null!==(wt=m.createdAt)&&void 0!==wt?wt:void 0,Uf=null!==(Wt=m.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:Il,emailVerified:Bf,isAnonymous:fd,providerData:bl,stsTokenManager:gu}=m;J(Il&&gu,p,"internal-error");const mu=B.fromJSON(this.name,gu);J("string"==typeof Il,p,"internal-error"),ee(Gn,p.name),ee(ei,p.name),J("boolean"==typeof Bf,p,"internal-error"),J("boolean"==typeof fd,p,"internal-error"),ee(Ei,p.name),ee(Ao,p.name),ee(ym,p.name),ee(hd,p.name),ee(ps,p.name),ee(Uf,p.name);const _a=new _e({uid:Il,auth:p,email:ei,emailVerified:Bf,displayName:Gn,isAnonymous:fd,photoURL:Ao,phoneNumber:Ei,tenantId:ym,stsTokenManager:mu,createdAt:ps,lastLoginAt:Uf});return bl&&Array.isArray(bl)&&(_a.providerData=bl.map(vm=>Object.assign({},vm))),hd&&(_a._redirectEventId=hd),_a}static _fromIdTokenResponse(p,m,w=!1){return(0,d.Z)(function*(){const C=new B;C.updateFromServerResponse(m);const P=new _e({uid:m.localId,auth:p,stsTokenManager:C,isAnonymous:w});return yield yn(P),P})()}}const qe=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var C=this;return(0,d.Z)(function*(){C.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const C=w.storage[m];return void 0===C?null:C})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function ze(v,p,m){return`firebase:${v}:${p}:${m}`}class pt{constructor(p,m,w){this.persistence=p,this.auth=m,this.userKey=w;const{config:C,name:P}=this.auth;this.fullUserKey=ze(this.userKey,C.apiKey,P),this.fullPersistenceKey=ze("persistence",C.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?_e._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,d.Z)(function*(){if(m.persistence===p)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new pt(ae(qe),p,w);const C=(yield Promise.all(m.map(function(){var wt=(0,d.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return wt.apply(this,arguments)}}()))).filter(wt=>wt);let P=C[0]||ae(qe);const re=ze(w,p.config.apiKey,p.name);let Fe=null;for(const wt of m)try{const Wt=yield wt._get(re);if(Wt){const Gn=_e._fromJSON(p,Wt);wt!==P&&(Fe=Gn),P=wt;break}}catch(Wt){}const lt=C.filter(wt=>wt._shouldAllowMigration);return P._shouldAllowMigration&&lt.length?(P=lt[0],Fe&&(yield P._set(re,Fe.toJSON())),yield Promise.all(m.map(function(){var wt=(0,d.Z)(function*(Wt){if(Wt!==P)try{yield Wt._remove(re)}catch(Gn){}});return function(Wt){return wt.apply(this,arguments)}}())),new pt(P,p,w)):new pt(P,p,w)})()}}function Q(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ye(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(H(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(It(p))return"Blackberry";if(zt(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||Se(p))&&!p.includes("edge/"))return"Chrome";if(at(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function H(v=(0,k.z$)()){return/firefox\//i.test(v)}function L(v=(0,k.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Se(v=(0,k.z$)()){return/crios\//i.test(v)}function Ye(v=(0,k.z$)()){return/iemobile/i.test(v)}function at(v=(0,k.z$)()){return/android/i.test(v)}function It(v=(0,k.z$)()){return/blackberry/i.test(v)}function zt(v=(0,k.z$)()){return/webos/i.test(v)}function Pt(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)}function Sn(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Vn(v=(0,k.z$)()){return Pt(v)||at(v)||zt(v)||It(v)||/windows phone/i.test(v)||Ye(v)}function Zn(v,p=[]){let m;switch(v){case"Browser":m=Q((0,k.z$)());break;case"Worker":m=`${Q((0,k.z$)())}-${v}`;break;default:m=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${x.SDK_VERSION}/${w}`}class ns{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const w=P=>new Promise((re,Fe)=>{try{re(p(P))}catch(lt){Fe(lt)}});w.onAbort=m,this.queue.push(w);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===p)return;const w=[];try{for(const C of m.queue)yield C(p),C.onAbort&&w.push(C.onAbort)}catch(C){w.reverse();for(const P of w)try{P()}catch(re){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:C.message})}})()}}class wr{constructor(p,m,w){this.app=p,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W(this),this.idTokenSubscription=new W(this),this.beforeStateQueue=new ns(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,m){var w=this;return m&&(this._popupRedirectResolver=ae(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var C,P;if(!w._deleted&&(w.persistenceManager=yield pt.create(w,p),!w._deleted)){if(null===(C=w._popupRedirectResolver)||void 0===C?void 0:C._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(re){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,d.Z)(function*(){var w;const C=yield m.assertedPersistence.getCurrentUser();let P=C,re=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Fe=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,lt=null==P?void 0:P._redirectEventId,wt=yield m.tryRedirectSignIn(p);(!Fe||Fe===lt)&&(null==wt?void 0:wt.user)&&(P=wt.user,re=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(re)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Fe){P=C,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Fe))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return J(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(C){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,d.Z)(function*(){try{yield yn(p)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function it(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,d.Z)(function*(){const w=p?(0,k.m9)(p):null;return w&&J(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(p,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return p&&J(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(ae(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new k.LL("auth","Firebase",p())}onAuthStateChanged(p,m,w){return this.registerStateListener(this.authStateSubscription,p,m,w)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,w){return this.registerStateListener(this.idTokenSubscription,p,m,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var w=this;return(0,d.Z)(function*(){const C=yield w.getOrInitRedirectPersistenceManager(m);return null===p?C.removeCurrentUser():C.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=p&&ae(p)||m._popupRedirectResolver;J(w,m,"argument-error"),m.redirectPersistenceManager=yield pt.create(m,[ae(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,d.Z)(function*(){var w,C;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===p?m._currentUser:(null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,d.Z)(function*(){if(p===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,w,C){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),re=this._isInitialized?Promise.resolve():this._initializationPromise;return J(re,this,"internal-error"),re.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,w,C):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const C=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return C&&(w["X-Firebase-Client"]=C),w})()}}function Ze(v){return(0,k.m9)(v)}class W{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function de(v,p,m){const w=Ze(v);J(w._canInitEmulator,w,"emulator-config-failed"),J(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const C=!!(null==m?void 0:m.disableWarnings),P=Le(p),{host:re,port:Fe}=function gt(v){const p=Le(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(w);if(C){const P=C[1];return{host:P,port:kt(w.substr(P.length+1))}}{const[P,re]=w.split(":");return{host:P,port:kt(re)}}}(p);w.config.emulator={url:`${P}//${re}${null===Fe?"":`:${Fe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:re,port:Fe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function Kt(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Le(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function kt(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Ot{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return fe("not implemented")}_getIdTokenResponse(p){return fe("not implemented")}_linkToIdToken(p,m){return fe("not implemented")}_getReauthenticationResolver(p){return fe("not implemented")}}function Rn(v,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:resetPassword",jt(v,p))})).apply(this,arguments)}function bt(v,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function As(v,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",jt(v,p))})).apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signInWithPassword",jt(v,p))})).apply(this,arguments)}function Mi(v,p){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:sendOobCode",jt(v,p))})).apply(this,arguments)}function Hr(v,p){return dn.apply(this,arguments)}function dn(){return(dn=(0,d.Z)(function*(v,p){return Mi(v,p)})).apply(this,arguments)}function Wo(v,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,d.Z)(function*(v,p){return Mi(v,p)})).apply(this,arguments)}function Mr(v,p){return xr.apply(this,arguments)}function xr(){return(xr=(0,d.Z)(function*(v,p){return Mi(v,p)})).apply(this,arguments)}function io(v,p){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(v,p){return Mi(v,p)})).apply(this,arguments)}function Gr(){return(Gr=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signInWithEmailLink",jt(v,p))})).apply(this,arguments)}function Zo(){return(Zo=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signInWithEmailLink",jt(v,p))})).apply(this,arguments)}class oo extends Ot{constructor(p,m,w,C=null){super("password",w),this._email=p,this._password=m,this._tenantId=C}static _fromEmailAndPassword(p,m){return new oo(p,m,"password")}static _fromEmailAndCode(p,m,w=null){return new oo(p,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function Ms(v,p){return Mn.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function rs(v,p){return Gr.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:We(p,"internal-error")}})()}_linkToIdToken(p,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return bt(p,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Mc(v,p){return Zo.apply(this,arguments)}(p,{idToken:m,email:w._email,oobCode:w._password});default:We(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function jn(v,p){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signInWithIdp",jt(v,p))})).apply(this,arguments)}class xi extends Ot{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new xi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):We("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:C}=m,P=(0,ie._T)(m,["providerId","signInMethod"]);if(!w||!C)return null;const re=new xi(w,C);return re.idToken=P.idToken||void 0,re.accessToken=P.accessToken||void 0,re.secret=P.secret,re.nonce=P.nonce,re.pendingToken=P.pendingToken||null,re}_getIdTokenResponse(p){return jn(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,jn(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,jn(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,k.xO)(m)}return p}}function xc(v,p){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:sendVerificationCode",jt(v,p))})).apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signInWithPhoneNumber",jt(v,p))})).apply(this,arguments)}function Rc(){return(Rc=(0,d.Z)(function*(v,p){const m=yield hn(v,"POST","/v1/accounts:signInWithPhoneNumber",jt(v,p));if(m.temporaryProof)throw An(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const $g={USER_NOT_FOUND:"user-not-found"};function Nc(){return(Nc=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signInWithPhoneNumber",jt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),$g)})).apply(this,arguments)}class uo extends Ot{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new uo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new uo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function sf(v,p){return Ko.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function of(v,p){return Rc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Xu(v,p){return Nc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:w,verificationCode:C}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:w,code:C}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:w,phoneNumber:C,temporaryProof:P}=p;return w||m||C||P?new uo({verificationId:m,verificationCode:w,phoneNumber:C,temporaryProof:P}):null}}class is{constructor(p){var m,w,C,P,re,Fe;const lt=(0,k.zd)((0,k.pd)(p)),wt=null!==(m=lt.apiKey)&&void 0!==m?m:null,Wt=null!==(w=lt.oobCode)&&void 0!==w?w:null,Gn=function af(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=lt.mode)&&void 0!==C?C:null);J(wt&&Wt&&Gn,"argument-error"),this.apiKey=wt,this.operation=Gn,this.code=Wt,this.continueUrl=null!==(P=lt.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(re=lt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Fe=lt.tenantId)&&void 0!==Fe?Fe:null}static parseLink(p){const m=function el(v){const p=(0,k.zd)((0,k.pd)(v)).link,m=p?(0,k.zd)((0,k.pd)(p)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||m||p||v}(p);try{return new is(m)}catch(w){return null}}}let Wa=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return oo._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const C=is.parseLink(w);return J(C,"argument-error"),oo._fromEmailAndCode(m,C.code,C.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class zi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ci extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class lo extends ci{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return J("providerId"in m&&"signInMethod"in m,"argument-error"),xi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return J(p.idToken||p.accessToken,"argument-error"),xi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return lo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return lo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:C,pendingToken:P,nonce:re,providerId:Fe}=p;if(!w&&!C&&!m&&!P||!Fe)return null;try{return new lo(Fe)._credential({idToken:m,accessToken:w,nonce:re,pendingToken:P})}catch(lt){return null}}}let xs=(()=>{class v extends ci{constructor(){super("facebook.com")}static credential(m){return xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Yo=(()=>{class v extends ci{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:C}=m;if(!w&&!C)return null;try{return v.credential(w,C)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),tl=(()=>{class v extends ci{constructor(){super("github.com")}static credential(m){return xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ss extends Ot{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return jn(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,jn(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,jn(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:C,pendingToken:P}=m;return w&&C&&P&&w===C?new ss(w,P):null}static _create(p,m){return new ss(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Rs extends zi{constructor(p){J(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Rs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Rs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=ss.fromJSON(p);return J(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:w}=p;if(!m||!w)return null;try{return ss._create(w,m)}catch(C){return null}}}let ho=(()=>{class v extends ci{constructor(){super("twitter.com")}static credential(m,w){return xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:C}=m;if(!w||!C)return null;try{return v.credential(w,C)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Qo(v,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signUp",jt(v,p))})).apply(this,arguments)}class nr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,w,C=!1){return(0,d.Z)(function*(){const P=yield _e._fromIdTokenResponse(p,w,C),re=Za(w);return new nr({user:P,providerId:re,_tokenResponse:w,operationType:m})})()}static _forOperation(p,m,w){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const C=Za(w);return new nr({user:p,providerId:C,_tokenResponse:w,operationType:m})})()}}function Za(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Oc(v){return kc.apply(this,arguments)}function kc(){return(kc=(0,d.Z)(function*(v){var p;const m=Ze(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new nr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Qo(m,{returnSecureToken:!0}),C=yield nr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(C.user),C})).apply(this,arguments)}class Jo extends k.ZR{constructor(p,m,w,C){var P;super(m.code,m.message),this.operationType=w,this.user=C,Object.setPrototypeOf(this,Jo.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,m,w,C){return new Jo(p,m,w,C)}}function Xo(v,p,m,w){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Jo._fromErrorAndOperation(v,P,p,w):P})}function Ka(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function qi(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(v,p){const m=(0,k.m9)(v);yield Qr(!0,m,p);const{providerUserInfo:w}=yield Wn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),C=Ka(w||[]);return m.providerData=m.providerData.filter(P=>C.has(P.providerId)),C.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function In(v,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,d.Z)(function*(v,p,m=!1){const w=yield nt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return nr._forOperation(v,"link",w)})).apply(this,arguments)}function Qr(v,p,m){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(v,p,m){yield yn(p);const C=!1===v?"provider-already-linked":"no-such-provider";J(Ka(p.providerData).has(m)===v,p.auth,C)})).apply(this,arguments)}function Wi(v,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,d.Z)(function*(v,p,m=!1){const{auth:w}=v,C="reauthenticate";try{const P=yield nt(v,Xo(w,C,p,v),m);J(P.idToken,w,"internal-error");const re=Rt(P.idToken);J(re,w,"internal-error");const{sub:Fe}=re;return J(v.uid===Fe,w,"user-mismatch"),nr._forOperation(v,C,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&We(w,"user-mismatch"),P}})).apply(this,arguments)}function na(v,p){return yr.apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(v,p,m=!1){const w="signIn",C=yield Xo(v,w,p),P=yield nr._fromIdTokenResponse(v,w,C);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function ra(v,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(v,p){return na(Ze(v),p)})).apply(this,arguments)}function Ri(v,p){return R.apply(this,arguments)}function R(){return(R=(0,d.Z)(function*(v,p){const m=(0,k.m9)(v);return yield Qr(!1,m,p.providerId),In(m,p)})).apply(this,arguments)}function N(v,p){return K.apply(this,arguments)}function K(){return(K=(0,d.Z)(function*(v,p){return Wi((0,k.m9)(v),p)})).apply(this,arguments)}function ge(v,p){return $e.apply(this,arguments)}function $e(){return($e=(0,d.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:signInWithCustomToken",jt(v,p))})).apply(this,arguments)}function Je(v,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,d.Z)(function*(v,p){const m=Ze(v),w=yield ge(m,{token:p,returnSecureToken:!0}),C=yield nr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(C.user),C})).apply(this,arguments)}class ut{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Nn._fromServerResponse(p,m):We(p,"internal-error")}}class Nn extends ut{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Nn(m)}}function bn(v,p,m){var w;J((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),J(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(J(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(J(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Dn(v,p,m){return $t.apply(this,arguments)}function $t(){return($t=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v),C={requestType:"PASSWORD_RESET",email:p};m&&bn(w,C,m),yield Wo(w,C)})).apply(this,arguments)}function os(v,p,m){return di.apply(this,arguments)}function di(){return(di=(0,d.Z)(function*(v,p,m){yield Rn((0,k.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function ia(v,p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,d.Z)(function*(v,p){yield As((0,k.m9)(v),{oobCode:p})})).apply(this,arguments)}function ke(v,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(v,p){const m=(0,k.m9)(v),w=yield Rn(m,{oobCode:p}),C=w.requestType;switch(J(C,m,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(w.mfaInfo,m,"internal-error");default:J(w.email,m,"internal-error")}let P=null;return w.mfaInfo&&(P=ut._fromServerResponse(Ze(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:C}})).apply(this,arguments)}function Ni(v,p){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,d.Z)(function*(v,p){const{data:m}=yield ke((0,k.m9)(v),p);return m.email})).apply(this,arguments)}function uf(v,p,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(v,p,m){const w=Ze(v),C=yield Qo(w,{returnSecureToken:!0,email:p,password:m}),P=yield nr._fromIdTokenResponse(w,"signIn",C);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Ki(v,p,m){return ra((0,k.m9)(v),Wa.credential(p,m))}function Fc(v,p,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v),C={requestType:"EMAIL_SIGNIN",email:p};J(m.handleCodeInApp,w,"argument-error"),m&&bn(w,C,m),yield Mr(w,C)})).apply(this,arguments)}function Gg(v,p){const m=is.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function zg(v,p,m){return lf.apply(this,arguments)}function lf(){return(lf=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v),C=Wa.credentialWithLink(p,m||oe());return J(C._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ra(w,C)})).apply(this,arguments)}function Qa(v,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:createAuthUri",jt(v,p))})).apply(this,arguments)}function as(v,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(v,p){const w={identifier:p,continueUri:vt()?oe():"http://localhost"},{signinMethods:C}=yield Qa((0,k.m9)(v),w);return C||[]})).apply(this,arguments)}function sa(v,p){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(v,p){const m=(0,k.m9)(v),C={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&bn(m.auth,C,p);const{email:P}=yield Hr(m.auth,C);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function qg(v,p,m){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&bn(w.auth,P,m);const{email:re}=yield io(w.auth,P);re!==v.email&&(yield v.reload())})).apply(this,arguments)}function Wg(v,p){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Vc(v,p){return sl.apply(this,arguments)}function sl(){return(sl=(0,d.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const w=(0,k.m9)(v),P={idToken:yield w.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},re=yield nt(w,Wg(w.auth,P));w.displayName=re.displayName||null,w.photoURL=re.photoUrl||null;const Fe=w.providerData.find(({providerId:lt})=>"password"===lt);Fe&&(Fe.displayName=w.displayName,Fe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(re)})).apply(this,arguments)}function cf(v,p){return hf((0,k.m9)(v),p,null)}function df(v,p){return hf((0,k.m9)(v),null,p)}function hf(v,p,m){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(v,p,m){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const re=yield nt(v,bt(w,P));yield v._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class po{constructor(p,m,w={}){this.isNewUser=p,this.providerId=m,this.profile=w}}class ff extends po{constructor(p,m,w,C){super(p,m,w),this.username=C}}class Zg extends po{constructor(p,m){super(p,"facebook.com",m)}}class Uc extends ff{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Oi extends po{constructor(p,m){super(p,"google.com",m)}}class Kg extends ff{constructor(p,m,w){super(p,"twitter.com",m,w)}}function Yg(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ol(v){var p,m;if(!v)return null;const{providerId:w}=v,C=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const re=null===(m=null===(p=Rt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(re)return new po(P,"anonymous"!==re&&"custom"!==re?re:null)}if(!w)return null;switch(w){case"facebook.com":return new Zg(P,C);case"github.com":return new Uc(P,C);case"google.com":return new Oi(P,C);case"twitter.com":return new Kg(P,C,v.screenName||null);case"custom":case"anonymous":return new po(P,null);default:return new po(P,w,C)}}(m)}class us{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new us("enroll",p)}static _fromMfaPendingCredential(p){return new us("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,w;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return us._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return us._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Xa{constructor(p,m,w){this.session=p,this.hints=m,this.signInResolver=w}static _fromError(p,m){const w=Ze(p),C=m.customData._serverResponse,P=(C.mfaInfo||[]).map(Fe=>ut._fromServerResponse(w,Fe));J(C.mfaPendingCredential,w,"internal-error");const re=us._fromMfaPendingCredential(C.mfaPendingCredential);return new Xa(re,P,function(){var Fe=(0,d.Z)(function*(lt){const wt=yield lt._process(w,re);delete C.mfaInfo,delete C.mfaPendingCredential;const Wt=Object.assign(Object.assign({},C),{idToken:wt.idToken,refreshToken:wt.refreshToken});switch(m.operationType){case"signIn":const Gn=yield nr._fromIdTokenResponse(w,m.operationType,Wt);return yield w._updateCurrentUser(Gn.user),Gn;case"reauthenticate":return J(m.user,w,"internal-error"),nr._forOperation(m.user,m.operationType,Wt);default:We(w,"internal-error")}});return function(lt){return Fe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,d.Z)(function*(){return m.signInResolver(p)})()}}function al(v,p){var m;const w=(0,k.m9)(v),C=p;return J(p.customData.operationType,w,"argument-error"),J(null===(m=C.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Xa._fromError(w,C)}function gf(v,p){return St(v,"POST","/v2/accounts/mfaEnrollment:start",jt(v,p))}class ls{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>ut._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new ls(p)}getSession(){var p=this;return(0,d.Z)(function*(){return us._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var w=this;return(0,d.Z)(function*(){const C=p,P=yield w.getSession(),re=yield nt(w.user,C._process(w.user.auth,P,m));return yield w.user._updateTokensIfNecessary(re),w.user.reload()})()}unenroll(p){var m=this;return(0,d.Z)(function*(){const w="string"==typeof p?p:p.uid,C=yield m.user.getIdToken(),P=yield nt(m.user,function E_(v,p){return St(v,"POST","/v2/accounts/mfaEnrollment:withdraw",jt(v,p))}(m.user.auth,{idToken:C,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:re})=>re!==w),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const oa=new WeakMap;function w_(v){const p=(0,k.m9)(v);return oa.has(p)||oa.set(p,ls._fromUser(p)),oa.get(p)}const Bc="__sak";class eu{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Bc,"1"),this.storage.removeItem(Bc),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jg=(()=>{class v extends eu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jc(){const v=(0,k.z$)();return L(v)||Pt(v)}()&&function Sr(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const C=this.storage.getItem(w),P=this.localCache[w];C!==P&&m(w,P,C)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Fe,lt,wt)=>{this.notifyListeners(Fe,wt)});const C=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Fe=this.storage.getItem(C);if(m.newValue!==Fe)null!==m.newValue?this.storage.setItem(C,m.newValue):this.storage.removeItem(C);else if(this.localCache[C]===m.newValue&&!w)return}const P=()=>{const Fe=this.storage.getItem(C);!w&&this.localCache[C]===Fe||this.notifyListeners(C,Fe)},re=this.storage.getItem(C);!function Vt(){return(0,k.w1)()&&10===document.documentMode}()||re===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,w){this.localCache[m]=w;const C=this.listeners[m];if(C)for(const P of Array.from(C))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var C=()=>super._set,P=this;return(0,d.Z)(function*(){yield C().call(P,m,w),P.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,C=this;return(0,d.Z)(function*(){const P=yield w().call(C,m);return C.localCache[m]=JSON.stringify(P),P})()}_remove(m){var w=()=>super._remove,C=this;return(0,d.Z)(function*(){yield w().call(C,m),delete C.localCache[m]})()}}return v.type="LOCAL",v})(),ul=(()=>{class v extends eu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let tu=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(P=>P.isListeningto(m));if(w)return w;const C=new v(m);return this.receivers.push(C),C}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const C=m,{eventId:P,eventType:re,data:Fe}=C.data,lt=w.handlersMap[re];if(!(null==lt?void 0:lt.size))return;C.ports[0].postMessage({status:"ack",eventId:P,eventType:re});const wt=Array.from(lt).map(function(){var Gn=(0,d.Z)(function*(ei){return ei(C.origin,Fe)});return function(ei){return Gn.apply(this,arguments)}}()),Wt=yield function Hc(v){return Promise.all(v.map(function(){var p=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return p.apply(this,arguments)}}()))}(wt);C.ports[0].postMessage({status:"done",eventId:P,eventType:re,response:Wt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function aa(v="",p=10){let m="";for(let w=0;w<p;w++)m+=Math.floor(10*Math.random());return v+m}class ua{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,w=50){var C=this;return(0,d.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let re,Fe;return new Promise((lt,wt)=>{const Wt=aa("",20);P.port1.start();const Gn=setTimeout(()=>{wt(new Error("unsupported_event"))},w);Fe={messageChannel:P,onMessage(ei){const Ei=ei;if(Ei.data.eventId===Wt)switch(Ei.data.status){case"ack":clearTimeout(Gn),re=setTimeout(()=>{wt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),lt(Ei.data.response);break;default:clearTimeout(Gn),clearTimeout(re),wt(new Error("invalid_response"))}}},C.handlers.add(Fe),P.port1.addEventListener("message",Fe.onMessage),C.target.postMessage({eventType:p,eventId:Wt,data:m},[P.port2])}).finally(()=>{Fe&&C.removeMessageHandler(Fe)})})()}}function pn(){return window}function Ct(){return void 0!==pn().WorkerGlobalScope&&"function"==typeof pn().importScripts}function la(){return(la=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const qc="firebaseLocalStorageDb",Yi="firebaseLocalStorage",zr="fbase_key";class go{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function mo(v,p){return v.transaction([Yi],p?"readwrite":"readonly").objectStore(Yi)}function ca(){const v=indexedDB.open(qc,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Yi,{keyPath:zr})}catch(C){m(C)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Yi)?p(w):(w.close(),yield function ll(){const v=indexedDB.deleteDatabase(qc);return new go(v).toPromise()}(),p(yield ca()))}))})}function yf(v,p,m){return ks.apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(v,p,m){const w=mo(v,!0).put({[zr]:p,value:m});return new go(w).toPromise()})).apply(this,arguments)}function nu(){return(nu=(0,d.Z)(function*(v,p){const m=mo(v,!1).get(p),w=yield new go(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function vr(v,p){const m=mo(v,!0).delete(p);return new go(m).toPromise()}const yo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield ca()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let C=0;for(;;)try{const P=yield w._openDb();return yield m(P)}catch(P){if(C++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Ct()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=tu._getInstance(function zc(){return Ct()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(C,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(C,P){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(C,P){return["keyChanged"]});return function(C,P){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,C;if(m.activeServiceWorker=yield function Gc(){return la.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ua(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(C=P[0])||void 0===C?void 0:C.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Xg(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(C){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ca();return yield yf(m,Bc,"1"),yield vr(m,Bc),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var C=this;return(0,d.Z)(function*(){return C._withPendingWrite((0,d.Z)(function*(){return yield C._withRetries(P=>yf(P,m,w)),C.localCache[m]=w,C.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const C=yield w._withRetries(P=>function cs(v,p){return nu.apply(this,arguments)}(P,m));return w.localCache[m]=C,C})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(C=>vr(C,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(re=>{const Fe=mo(re,!1).getAll();return new go(Fe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const C=[],P=new Set;for(const{fbase_key:re,value:Fe}of w)P.add(re),JSON.stringify(m.localCache[re])!==JSON.stringify(Fe)&&(m.notifyListeners(re,Fe),C.push(re));for(const re of Object.keys(m.localCache))m.localCache[re]&&!P.has(re)&&(m.notifyListeners(re,null),C.push(re));return C})()}notifyListeners(m,w){this.localCache[m]=w;const C=this.listeners[m];if(C)for(const P of Array.from(C))P(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function _f(v,p){return St(v,"POST","/v2/accounts/mfaSignIn:start",jt(v,p))}function ds(){return(ds=(0,d.Z)(function*(v){return(yield St(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ru(v){return new Promise((p,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=C=>{const P=Oe("internal-error");P.customData=C,m(P)},w.type="text/javascript",w.charset="UTF-8",function Kc(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function iu(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Qi=1e12;class Yc{constructor(p){this.auth=p,this.counter=Qi,this._widgets=new Map}render(p,m){const w=this.counter;return this._widgets.set(w,new cl(p,this.auth.name,m||{})),this.counter++,w}reset(p){var m;const w=p||Qi;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Qi))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(p||Qi))||void 0===w||w.execute(),""})()}}class cl{constructor(p,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof p?document.getElementById(p):p;J(C,"argument-error",{appName:m}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function da(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qc=iu("rcb"),Ef=new dt(3e4,6e4);class wf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!pn().grecaptcha}load(p,m=""){return J(function If(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(pn().grecaptcha):new Promise((w,C)=>{const P=pn().setTimeout(()=>{C(Oe(p,"network-request-failed"))},Ef.get());pn()[Qc]=()=>{pn().clearTimeout(P),delete pn()[Qc];const Fe=pn().grecaptcha;if(!Fe)return void C(Oe(p,"internal-error"));const lt=Fe.render;Fe.render=(wt,Wt)=>{const Gn=lt(wt,Wt);return this.counter++,Gn},this.hostLanguage=m,w(Fe)},ru(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Qc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),C(Oe(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!pn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tm{load(p){return(0,d.Z)(function*(){return new Yc(p)})()}clearedOneInstance(){}}const bf="recaptcha",nm={theme:"light",type:"image"};class Df{constructor(p,m=Object.assign({},nm),w){this.parameters=m,this.type=bf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ze(w),this.isInvisible="invisible"===this.parameters.size,J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof p?document.getElementById(p):p;J(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tm:new wf,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(m)||new Promise(P=>{const re=Fe=>{!Fe||(p.tokenChangeListeners.delete(re),P(Fe))};p.tokenChangeListeners.add(re),p.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof p)p(m);else if("string"==typeof p){const w=pn()[p];"function"==typeof w&&w(m)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){J(vt()&&!Ct(),p.auth,"internal-error"),yield function Jc(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Zc(v){return ds.apply(this,arguments)}(p.auth);J(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ls{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=uo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function rm(v,p,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(v,p,m){const w=Ze(v),C=yield Jr(w,p,(0,k.m9)(m));return new Ls(C,P=>ra(w,P))})).apply(this,arguments)}function Ji(v,p,m){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v);yield Qr(!1,w,"phone");const C=yield Jr(w.auth,p,(0,k.m9)(m));return new Ls(C,P=>Ri(w,P))})).apply(this,arguments)}function im(v,p,m){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v),C=yield Jr(w.auth,p,(0,k.m9)(m));return new Ls(C,P=>N(w,P))})).apply(this,arguments)}function Jr(v,p,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(v,p,m){var w;const C=yield m.verify();try{let P;if(J("string"==typeof C,v,"argument-error"),J(m.type===bf,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const re=P.session;if("phoneNumber"in P)return J("enroll"===re.type,v,"internal-error"),(yield gf(v,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{J("signin"===re.type,v,"internal-error");const Fe=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return J(Fe,v,"missing-multi-factor-info"),(yield _f(v,{mfaPendingCredential:re.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield xc(v,{phoneNumber:P.phoneNumber,recaptchaToken:C});return re}}finally{m._reset()}})).apply(this,arguments)}function su(v,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,d.Z)(function*(v,p){yield In((0,k.m9)(v),p)})).apply(this,arguments)}let Us=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Ze(m)}verifyPhoneNumber(m,w){return Jr(this.auth,m,(0,k.m9)(w))}static credential(m,w){return uo._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:C}=m;return w&&C?uo._fromTokenResponse(w,C):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Bs(v,p){return p?ae(p):(J(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ou extends Ot{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return jn(p,this._buildIdpRequest())}_linkToIdToken(p,m){return jn(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return jn(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function sm(v){return na(v.auth,new ou(v),v.bypassAuthState)}function PI(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),Wi(m,new ou(v),v.bypassAuthState)}function OI(v){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,d.Z)(function*(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),In(m,new ou(v),v.bypassAuthState)})).apply(this,arguments)}class hi{constructor(p,m,w,C,P=!1){this.auth=p,this.resolver=w,this.user=C,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,d.Z)(function*(w,C){p.pendingPromise={resolve:w,reject:C};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(w,C){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:C,postBody:P,tenantId:re,error:Fe,type:lt}=p;if(Fe)return void m.reject(Fe);const wt={auth:m.auth,requestUri:w,sessionId:C,tenantId:re||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(lt)(wt))}catch(Wt){m.reject(Wt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return sm;case"linkViaPopup":case"linkViaRedirect":return OI;case"reauthViaPopup":case"reauthViaRedirect":return PI;default:We(this.auth,"internal-error")}}resolve(p){V(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){V(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tf=new dt(2e3,1e4);function au(v,p,m){return Af.apply(this,arguments)}function Af(){return(Af=(0,d.Z)(function*(v,p,m){const w=Ze(v);De(v,p,zi);const C=Bs(w,m);return new ha(w,"signInViaPopup",p,C).executeNotNull()})).apply(this,arguments)}function ed(v,p,m){return td.apply(this,arguments)}function td(){return(td=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v);De(w.auth,p,zi);const C=Bs(w.auth,m);return new ha(w.auth,"reauthViaPopup",p,C,w).executeNotNull()})).apply(this,arguments)}function om(v,p,m){return nd.apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v);De(w.auth,p,zi);const C=Bs(w.auth,m);return new ha(w.auth,"linkViaPopup",p,C,w).executeNotNull()})).apply(this,arguments)}let ha=(()=>{class v extends hi{constructor(m,w,C,P,re){super(m,w,P,re),this.provider=C,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return J(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){V(1===m.filter.length,"Popup operations only handle one event");const w=aa();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(C=>{m.reject(C)}),m.resolver._isIframeWebStorageSupported(m.auth,C=>{C||m.reject(Oe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,C;this.pollId=(null===(C=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===C?void 0:C.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Tf.get())};m()}}return v.currentPopupAction=null,v})();const fs=new Map;class fa extends hi{constructor(p,m,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=fs.get(m.auth._key());if(!w){try{const P=(yield function dl(v,p){return hl.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;w=()=>Promise.resolve(P)}catch(C){w=()=>Promise.reject(C)}fs.set(m.auth._key(),w)}return m.bypassAuthState||fs.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(w,p);if("unknown"!==p.type){if(p.eventId){const C=yield w.auth._redirectUserForId(p.eventId);if(C)return w.user=C,m().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function hl(){return(hl=(0,d.Z)(function*(v,p){const m=id(p),w=Sf(v);if(!(yield w._isAvailable()))return!1;const C="true"===(yield w._get(m));return yield w._remove(m),C})).apply(this,arguments)}function Xi(v,p){return lu.apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(v,p){return Sf(v)._set(id(p),"true")})).apply(this,arguments)}function fl(){fs.clear()}function rd(v,p){fs.set(v._key(),p)}function Sf(v){return ae(v._redirectPersistence)}function id(v){return ze("pendingRedirect",v.config.apiKey,v.name)}function Mf(v,p,m){return function b_(v,p,m){return _o.apply(this,arguments)}(v,p,m)}function _o(){return(_o=(0,d.Z)(function*(v,p,m){const w=Ze(v);De(v,p,zi);const C=Bs(w,m);return yield Xi(C,w),C._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function sd(v,p,m){return function D_(v,p,m){return Yn.apply(this,arguments)}(v,p,m)}function Yn(){return(Yn=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v);De(w.auth,p,zi);const C=Bs(w.auth,m);yield Xi(C,w.auth);const P=yield js(w);return C._openRedirect(w.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function xf(v,p,m){return function Rf(v,p,m){return Eo.apply(this,arguments)}(v,p,m)}function Eo(){return(Eo=(0,d.Z)(function*(v,p,m){const w=(0,k.m9)(v);De(w.auth,p,zi);const C=Bs(w.auth,m);yield Qr(!1,w,p.providerId),yield Xi(C,w.auth);const P=yield js(w);return C._openRedirect(w.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function wo(v,p){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,d.Z)(function*(v,p){return yield Ze(v)._initializationPromise,cu(v,p,!1)})).apply(this,arguments)}function cu(v,p){return Io.apply(this,arguments)}function Io(){return(Io=(0,d.Z)(function*(v,p,m=!1){const w=Ze(v),C=Bs(w,p),re=yield new fa(w,C,m).execute();return re&&!m&&(delete re.user._redirectEventId,yield w._persistUserIfCurrent(re.user),yield w._setRedirectUser(null,p)),re})).apply(this,arguments)}function js(v){return _i.apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(v){const p=aa(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class ga{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(m=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function du(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gl(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var w;if(p.error&&!gl(p)){const C=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Oe(this.auth,C))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const w=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pl(p))}saveEventToCache(p){this.cachedEventUids.add(pl(p)),this.lastProcessedEventTime=Date.now()}}function pl(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function gl({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function ma(v){return bo.apply(this,arguments)}function bo(){return(bo=(0,d.Z)(function*(v,p={}){return St(v,"GET","/v1/projects",p)})).apply(this,arguments)}const od=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ml=/^https?/;function $s(){return($s=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield ma(v);for(const m of p)try{if(Pf(m))return}catch(w){}We(v,"unauthorized-domain")})).apply(this,arguments)}function Pf(v){const p=oe(),{protocol:m,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const re=new URL(v);return""===re.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&re.hostname===w}if(!ml.test(m))return!1;if(od.test(v))return w===v;const C=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(w)}const am=new dt(3e4,6e4);function hu(){const v=pn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let ya=null;function Of(v){return ya=ya||function ad(v){return new Promise((p,m)=>{var w,C,P;function re(){hu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{hu(),m(Oe(v,"network-request-failed"))},timeout:am.get()})}if(null===(C=null===(w=pn().gapi)||void 0===w?void 0:w.iframes)||void 0===C?void 0:C.Iframe)p(gapi.iframes.getContext());else{if(!(null===(P=pn().gapi)||void 0===P?void 0:P.load)){const Fe=iu("iframefcb");return pn()[Fe]=()=>{gapi.load?re():m(Oe(v,"network-request-failed"))},ru(`https://apis.google.com/js/api.js?onload=${Fe}`).catch(lt=>m(lt))}re()}}).catch(p=>{throw ya=null,p})}(v),ya}const um=new dt(5e3,15e3),yl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C_(v){const p=v.config;J(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?mn(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:x.SDK_VERSION},C=pu.get(v.config.apiHost);C&&(w.eid=C);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${m}?${(0,k.xO)(w).slice(1)}`}function lm(){return lm=(0,d.Z)(function*(v){const p=yield Of(v),m=pn().gapi;return J(m,v,"internal-error"),p.open({where:document.body,url:C_(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yl,dontclear:!0},w=>new Promise(function(){var C=(0,d.Z)(function*(P,re){yield w.restyle({setHideOnLeave:!1});const Fe=Oe(v,"network-request-failed"),lt=pn().setTimeout(()=>{re(Fe)},um.get());function wt(){pn().clearTimeout(lt),P(w)}w.ping(wt).then(wt,()=>{re(Fe)})});return function(P,re){return C.apply(this,arguments)}}()))}),lm.apply(this,arguments)}const vl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class va{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function wl(v,p,m,w,C,P){J(v.config.authDomain,v,"auth-domain-config-required"),J(v.config.apiKey,v,"invalid-api-key");const re={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:x.SDK_VERSION,eventId:C};if(p instanceof zi){p.setDefaultLanguage(v.languageCode),re.providerId=p.providerId||"",(0,k.xb)(p.getCustomParameters())||(re.customParameters=JSON.stringify(p.getCustomParameters()));for(const[lt,wt]of Object.entries(P||{}))re[lt]=wt}if(p instanceof ci){const lt=p.getScopes().filter(wt=>""!==wt);lt.length>0&&(re.scopes=lt.join(","))}v.tenantId&&(re.tid=v.tenantId);const Fe=re;for(const lt of Object.keys(Fe))void 0===Fe[lt]&&delete Fe[lt];return`${function Hs({config:v}){return v.emulator?mn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,k.xO)(Fe).slice(1)}`}const Gs="webStorageSupport",Ff=class hm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ul,this._completeRedirectFn=cu,this._overrideRedirectResult=rd}_openPopup(p,m,w,C){var P=this;return(0,d.Z)(function*(){var re;V(null===(re=P.eventManagers[p._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Fe=wl(p,m,w,oe(),C);return function cm(v,p,m,w=500,C=600){const P=Math.max((window.screen.availHeight-C)/2,0).toString(),re=Math.max((window.screen.availWidth-w)/2,0).toString();let Fe="";const lt=Object.assign(Object.assign({},vl),{width:w.toString(),height:C.toString(),top:P,left:re}),wt=(0,k.z$)().toLowerCase();m&&(Fe=Se(wt)?"_blank":m),H(wt)&&(p=p||"http://localhost",lt.scrollbars="yes");const Wt=Object.entries(lt).reduce((ei,[Ei,Ao])=>`${ei}${Ei}=${Ao},`,"");if(function ur(v=(0,k.z$)()){var p;return Pt(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(wt)&&"_self"!==Fe)return function El(v,p){const m=document.createElement("a");m.href=v,m.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(p||"",Fe),new va(null);const Gn=window.open(p||"",Fe,Wt);J(Gn,v,"popup-blocked");try{Gn.focus()}catch(ei){}return new va(Gn)}(p,Fe,aa())})()}_openRedirect(p,m,w,C){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(p),function Nr(v){pn().location.href=v}(wl(p,m,w,oe(),C)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:C,promise:P}=this.eventManagers[m];return C?Promise.resolve(C):(V(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(p);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(p){var m=this;return(0,d.Z)(function*(){const w=yield function T_(v){return lm.apply(this,arguments)}(p),C=new ga(p);return w.register("authEvent",P=>(J(null==P?void 0:P.authEvent,p,"invalid-auth-event"),{status:C.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:C},m.iframes[p._key()]=w,C})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Gs,{type:Gs},C=>{var P;const re=null===(P=null==C?void 0:C[0])||void 0===P?void 0:P[Gs];void 0!==re&&m(!!re),We(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Do(v){return $s.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Vn()||L()||Pt()}};class Vf extends class Lf{constructor(p){this.factorId=p}_process(p,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,w);case"signin":return this._finalizeSignIn(p,m.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Vf(p)}_finalizeEnroll(p,m,w){return function Qg(v,p){return St(v,"POST","/v2/accounts/mfaEnrollment:finalize",jt(v,p))}(p,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Wc(v,p){return St(v,"POST","/v2/accounts/mfaSignIn:finalize",jt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fm=(()=>{class v{constructor(){}static assertion(m){return Vf._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var pm="@firebase/auth";class gm{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(w=>{var C;p((null===(C=w)||void 0===C?void 0:C.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dd(v=(0,x.getApp)()){const p=(0,x._getProvider)(v,"auth");return p.isInitialized()?p.getImmediate():function ce(v,p){const m=(0,x._getProvider)(v,"auth");if(m.isInitialized()){const C=m.getImmediate(),P=m.getOptions();if((0,k.vZ)(P,null!=p?p:{}))return C;We(C,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Ff,persistence:[yo,Jg,ul]})}!function mm(v){(0,x._registerComponent)(new Ee.wA("auth",(p,{options:m})=>{const w=p.getProvider("app").getImmediate(),C=p.getProvider("heartbeat"),{apiKey:P,authDomain:re}=w.options;return((Fe,lt)=>{J(P&&!P.includes(":"),"invalid-api-key",{appName:Fe.name}),J(!(null==re?void 0:re.includes(":")),"argument-error",{appName:Fe.name});const wt={apiKey:P,authDomain:re,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zn(v)},Wt=new wr(Fe,lt,wt);return function Re(v,p){const m=(null==p?void 0:p.persistence)||[],w=(Array.isArray(m)?m:[m]).map(ae);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(Wt,m),Wt})(w,C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,w)=>{p.getProvider("auth-internal").initialize()})),(0,x._registerComponent)(new Ee.wA("auth-internal",p=>{const m=Ze(p.getProvider("auth").getImmediate());return new gm(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,x.registerVersion)(pm,"0.20.1",function cd(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,x.registerVersion)(pm,"0.20.1","esm2017")}("Browser")},2090:(ot,Ce,M)=>{M.d(Ce,{$s:()=>Nt,BH:()=>He,G6:()=>J,L:()=>le,LL:()=>oe,Mn:()=>De,Sg:()=>Te,UG:()=>ye,US:()=>Ee,ZB:()=>j,ZR:()=>Re,b$:()=>We,d:()=>Oe,eu:()=>V,hl:()=>fe,jU:()=>be,m9:()=>nn,ne:()=>er,pd:()=>Xn,r3:()=>jt,ru:()=>et,tV:()=>me,uI:()=>Ge,vZ:()=>Cr,w1:()=>Ne,xO:()=>xn,xb:()=>tn,z$:()=>Be,zI:()=>te,zd:()=>qn});const ie=function(F){const q=[];let Z=0;for(let Ie=0;Ie<F.length;Ie++){let U=F.charCodeAt(Ie);U<128?q[Z++]=U:U<2048?(q[Z++]=U>>6|192,q[Z++]=63&U|128):55296==(64512&U)&&Ie+1<F.length&&56320==(64512&F.charCodeAt(Ie+1))?(U=65536+((1023&U)<<10)+(1023&F.charCodeAt(++Ie)),q[Z++]=U>>18|240,q[Z++]=U>>12&63|128,q[Z++]=U>>6&63|128,q[Z++]=63&U|128):(q[Z++]=U>>12|224,q[Z++]=U>>6&63|128,q[Z++]=63&U|128)}return q},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(F,q){if(!Array.isArray(F))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let U=0;U<F.length;U+=3){const X=F[U],B=U+1<F.length,ee=B?F[U+1]:0,_e=U+2<F.length,Ue=_e?F[U+2]:0;let pt=(15&ee)<<2|Ue>>6,Q=63&Ue;_e||(Q=64,B||(pt=64)),Ie.push(Z[X>>2],Z[(3&X)<<4|ee>>4],Z[pt],Z[Q])}return Ie.join("")},encodeString(F,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(F):this.encodeByteArray(ie(F),q)},decodeString(F,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(F):function(F){const q=[];let Z=0,Ie=0;for(;Z<F.length;){const U=F[Z++];if(U<128)q[Ie++]=String.fromCharCode(U);else if(U>191&&U<224){const X=F[Z++];q[Ie++]=String.fromCharCode((31&U)<<6|63&X)}else if(U>239&&U<365){const _e=((7&U)<<18|(63&F[Z++])<<12|(63&F[Z++])<<6|63&F[Z++])-65536;q[Ie++]=String.fromCharCode(55296+(_e>>10)),q[Ie++]=String.fromCharCode(56320+(1023&_e))}else{const X=F[Z++],B=F[Z++];q[Ie++]=String.fromCharCode((15&U)<<12|(63&X)<<6|63&B)}}return q.join("")}(this.decodeStringToByteArray(F,q))},decodeStringToByteArray(F,q){this.init_();const Z=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let U=0;U<F.length;){const X=Z[F.charAt(U++)],ee=U<F.length?Z[F.charAt(U)]:0;++U;const Ue=U<F.length?Z[F.charAt(U)]:64;++U;const ze=U<F.length?Z[F.charAt(U)]:64;if(++U,null==X||null==ee||null==Ue||null==ze)throw Error();Ie.push(X<<2|ee>>4),64!==Ue&&(Ie.push(ee<<4&240|Ue>>2),64!==ze&&Ie.push(Ue<<6&192|ze))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let F=0;F<this.ENCODED_VALS.length;F++)this.byteToCharMap_[F]=this.ENCODED_VALS.charAt(F),this.charToByteMap_[this.byteToCharMap_[F]]=F,this.byteToCharMapWebSafe_[F]=this.ENCODED_VALS_WEBSAFE.charAt(F),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[F]]=F,F>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(F)]=F,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(F)]=F)}}},le=function(F){return function(F){const q=ie(F);return Ee.encodeByteArray(q,!0)}(F).replace(/\./g,"")},me=function(F){try{return Ee.decodeString(F,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(F,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===F&&(F={});break;case Array:F=[];break;default:return q}for(const Z in q)!q.hasOwnProperty(Z)||!se(Z)||(F[Z]=j(F[Z],q[Z]));return F}function se(F){return"__proto__"!==F}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Z)=>{this.resolve=q,this.reject=Z})}wrapCallback(q){return(Z,Ie)=>{Z?this.reject(Z):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Z):q(Z,Ie))}}}function Te(F,q){if(F.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",U=F.iat||0,X=F.sub||F.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const B=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:U,exp:U+3600,auth_time:U,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},F);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(B)),""].join(".")}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(F){return!1}}function be(){return"object"==typeof self&&self.self===self}function et(){const F="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof F&&void 0!==F.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Oe(){return Be().indexOf("Electron/")>=0}function Ne(){const F=Be();return F.indexOf("MSIE ")>=0||F.indexOf("Trident/")>=0}function De(){return Be().indexOf("MSAppHost/")>=0}function J(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function V(){return new Promise((F,q)=>{try{let Z=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(Ie);U.onsuccess=()=>{U.result.close(),Z||self.indexedDB.deleteDatabase(Ie),F(!0)},U.onupgradeneeded=()=>{Z=!1},U.onerror=()=>{var X;q((null===(X=U.error)||void 0===X?void 0:X.message)||"")}}catch(Z){q(Z)}})}function te(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Re extends Error{constructor(q,Z,Ie){super(Z),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(q,Z,Ie){this.service=q,this.serviceName=Z,this.errors=Ie}create(q,...Z){const Ie=Z[0]||{},U=`${this.service}/${q}`,X=this.errors[q],B=X?function vt(F,q){return F.replace(At,(Z,Ie)=>{const U=q[Ie];return null!=U?String(U):`<${Ie}?>`})}(X,Ie):"Error";return new Re(U,`${this.serviceName}: ${B} (${U}).`,Ie)}}const At=/\{\$([^}]+)}/g;function jt(F,q){return Object.prototype.hasOwnProperty.call(F,q)}function tn(F){for(const q in F)if(Object.prototype.hasOwnProperty.call(F,q))return!1;return!0}function Cr(F,q){if(F===q)return!0;const Z=Object.keys(F),Ie=Object.keys(q);for(const U of Z){if(!Ie.includes(U))return!1;const X=F[U],B=q[U];if(hn(X)&&hn(B)){if(!Cr(X,B))return!1}else if(X!==B)return!1}for(const U of Ie)if(!Z.includes(U))return!1;return!0}function hn(F){return null!==F&&"object"==typeof F}function xn(F){const q=[];for(const[Z,Ie]of Object.entries(F))Array.isArray(Ie)?Ie.forEach(U=>{q.push(encodeURIComponent(Z)+"="+encodeURIComponent(U))}):q.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function qn(F){const q={};return F.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[U,X]=Ie.split("=");q[decodeURIComponent(U)]=decodeURIComponent(X)}}),q}function Xn(F){const q=F.indexOf("?");if(!q)return"";const Z=F.indexOf("#",q);return F.substring(q,Z>0?Z:void 0)}function er(F,q){const Z=new _t(F,q);return Z.subscribe.bind(Z)}class _t{constructor(q,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(Z=>{Z.next(q)})}error(q){this.forEachObserver(Z=>{Z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Z,Ie){let U;if(void 0===q&&void 0===Z&&void 0===Ie)throw new Error("Missing Observer.");U=function Jt(F,q){if("object"!=typeof F||null===F)return!1;for(const Z of q)if(Z in F&&"function"==typeof F[Z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Z,complete:Ie},void 0===U.next&&(U.next=Zt),void 0===U.error&&(U.error=Zt),void 0===U.complete&&(U.complete=Zt);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch(B){}}),this.observers.push(U),X}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,q)}sendOne(q,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Z(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zt(){}function Nt(F,q=1e3,Z=2){const Ie=q*Math.pow(Z,F),U=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+U)}function nn(F){return F&&F._delegate?F._delegate:F}},5718:(ot,Ce,M)=>{var d=M(5e3);let k=null;function x(){return k}const he=new d.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function me(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const z=new d.OlP("Location Initialized");let j=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return x().getBaseHref(this._doc)}onPopState(t){const r=x().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=x().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){se()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){se()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function He(){return new j((0,d.LFG)(he))}()},providedIn:"platform"}),n})();function se(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(n){const e=(0,d.LFG)(he).location;return new We((0,d.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const et=new d.OlP("appBaseHref");let We=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+Ge(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+Ge(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(et,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+Ge(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+Ge(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(et,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Be(J(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function Qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,J(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Te,n.stripTrailingSlash=Be,n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function De(){return new Ne((0,d.LFG)(ye),(0,d.LFG)(le))}()},providedIn:"root"}),n})();function J(n){return n.replace(/\/index.html$/,"")}class Ms{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ms(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,h),Mi(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Mi(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Mi(n,e){n.context.$implicit=e.item}class Ju{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class rf{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const xi=new rf,xc=new Ju;let ao=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return xi;if((0,d.F4k)(t))return xc;throw function jn(n,e){return new d.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1}),n})(),ss=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const co="browser";function nr(n){return"server"===n}let Jo=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Xo((0,d.LFG)(he),window)}),n})();class Xo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function qi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ka(this.window.history)||Ka(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ka(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qr extends class ea extends class Ee{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function pe(n){k||(k=n)}(new Qr)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Wi(){return vn=vn||document.querySelector("base"),vn?vn.getAttribute("href"):null}();return null==t?null:function na(n){ta=ta||document.createElement("a"),ta.setAttribute("href",n);const e=ta.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Hi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ta,vn=null;const yr=new d.OlP("TRANSITION_ID"),fo=[{provide:d.ip1,useFactory:function ra(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=x(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[yr,he,d.zs3],multi:!0}];class Ri{static init(){(0,d.VLi)(new Ri)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const g=function(E){h=h||E,u--,0==u&&r(h)};o.forEach(function(E){E.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?x().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let R=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const N=new d.OlP("EventManagerPlugins");let K=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(N),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ge{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=x().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let $e=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Je=(()=>{class n extends $e{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Tt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Tt))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Tt(n){x().remove(n)}const ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nn=/%COMP%/g;function Zi(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Zi(n,o,t):(o=o.replace(Nn,n),t.push(o))}return t}function ke(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ni=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Cn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ki(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new Fc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Zi(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(K),d.LFG(Je),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Cn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ut[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ut[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ut[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ke(r)):this.eventManager.addEventListener(e,t,ke(r))}}class Ki extends Cn{constructor(e,t,r,o){super(e),this.component=r;const u=Zi(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function di(n){return"_ngcontent-%COMP%".replace(Nn,n)}(o+"-"+r.id),this.hostAttr=function ia(n){return"_nghost-%COMP%".replace(Nn,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fc extends Cn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Zi(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const g=document.createElement("style");g.textContent=u[h],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ya=(()=>{class n extends ge{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Gg=["alt","control","meta","shift"],lf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qa={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ir={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let as=(()=>{class n extends ge{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>x().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(Gg.forEach(E=>{const b=r.indexOf(E);b>-1&&(r.splice(b,1),h+=E+".")}),h+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=h,g}static getEventFullKey(t){let r="",o=function rl(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Qa.hasOwnProperty(e)&&(e=Qa[e]))}return lf[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Gg.forEach(u=>{u!=o&&Ir[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wg=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:co},{provide:d.g9A,useValue:function sa(){Qr.makeCurrent(),Ri.init()},multi:!0},{provide:he,useFactory:function qg(){return(0,d.RDi)(document),document},deps:[]}]),Lc=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Pi(){return new d.qLn},deps:[]},{provide:N,useClass:Ya,multi:!0,deps:[he,d.R0b,d.Lbi]},{provide:N,useClass:as,multi:!0,deps:[he]},{provide:Ni,useClass:Ni,deps:[K,Je,d.AFp]},{provide:d.FYo,useExisting:Ni},{provide:$e,useExisting:Je},{provide:Je,useClass:Je,deps:[he]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:K,useClass:K,deps:[N,d.R0b]},{provide:class In{},useClass:R,deps:[]}];let Vc=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:yr,useExisting:d.AFp},fo]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Lc,imports:[ss,d.hGG]}),n})(),Ja=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function hf(){return new Ja((0,d.LFG)(he))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;var $n=M(8996),Os=M(8306);const{isArray:Jg}=Array,{getPrototypeOf:$c,prototype:ul,keys:Hc}=Object;function tu(n){if(1===n.length){const e=n[0];if(Jg(e))return{args:e,keys:null};if(function aa(n){return n&&"object"==typeof n&&$c(n)===ul}(e)){const t=Hc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ua=M(8421),pn=M(7669),Nr=M(5403),Ct=M(4004);const{isArray:Gc}=Array;function Xg(n){return(0,Ct.U)(e=>function la(n,e){return Gc(e)?n(...e):n(e)}(n,e))}function zc(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let mf=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Yi=(()=>{class n extends mf{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const zr=new d.OlP("NgValueAccessor"),ll={provide:zr,useExisting:(0,d.Gpc)(()=>ks),multi:!0},yf=new d.OlP("CompositionEventMode");let ks=(()=>{class n extends mf{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ca(){const n=x()?x().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(yf,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([ll]),d.qOj]}),n})();const vr=new d.OlP("NgValidators"),Fs=new d.OlP("NgAsyncValidators");function Wc(n){return function cs(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function hs(n){return null}function vo(n){return null!=n}function Qi(n){const e=(0,d.QGY)(n)?(0,$n.D)(n):n;return(0,d.CqO)(e),e}function Yc(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function cl(n,e){return e.map(t=>t(n))}function Qc(n){return n.map(e=>function da(n){return!n.validate}(e)?e:t=>e.validate(t))}function Pn(n){return null!=n?function Ef(n){if(!n)return null;const e=n.filter(vo);return 0==e.length?null:function(t){return Yc(cl(t,e))}}(Qc(n)):null}function If(n){return null!=n?function wf(n){if(!n)return null;const e=n.filter(vo);return 0==e.length?null:function(t){return function qc(...n){const e=(0,pn.jO)(n),{args:t,keys:r}=tu(n),o=new Os.y(u=>{const{length:h}=t;if(!h)return void u.complete();const g=new Array(h);let E=h,b=h;for(let A=0;A<h;A++){let S=!1;(0,ua.Xf)(t[A]).subscribe((0,Nr.x)(u,$=>{S||(S=!0,b--),g[A]=$},()=>E--,void 0,()=>{(!E||!S)&&(b||u.next(r?zc(r,g):g),u.complete())}))}});return e?o.pipe(Xg(e)):o}(cl(t,e).map(Qi)).pipe((0,Ct.U)(Yc))}}(Qc(n)):null}function tm(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bf(n){return n._rawValidators}function nm(n){return n._rawAsyncValidators}function Df(n){return n?Array.isArray(n)?n:[n]:[]}function Jc(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ls(n,e){const t=Df(e);return Df(n).forEach(o=>{Jc(t,o)||t.push(o)}),t}function rm(n,e){return Df(e).filter(t=>!Jc(n,t))}class Hn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Pn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=If(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ji extends Hn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kn extends Hn{get formDirective(){return null}get path(){return null}}class im{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Xr=(()=>{class n extends im{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ji,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),su=(()=>{class n extends im{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kn,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function uu(n,e){hl(n,e),e.valueAccessor.writeValue(n.value),function lu(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&rd(n,e)})}(n,e),function Sf(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fl(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&rd(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fs(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Xi(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hl(n,e){const t=bf(n);null!==e.validator?n.setValidators(tm(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=nm(n);null!==e.asyncValidator?n.setAsyncValidators(tm(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();fa(e._rawValidators,o),fa(e._rawAsyncValidators,o)}function Xi(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=bf(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=nm(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return fa(e._rawValidators,r),fa(e._rawAsyncValidators,r),t}function rd(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function id(n,e){hl(n,e)}function Rf(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function wo(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Io="VALID",js="INVALID",_i="PENDING",pa="DISABLED";function pl(n){return(bo(n)?n.validators:n)||null}function gl(n){return Array.isArray(n)?Pn(n):n||null}function du(n,e){return(bo(e)?e.asyncValidators:n)||null}function ma(n){return Array.isArray(n)?If(n):n||null}function bo(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const od=n=>n instanceof ad,ml=n=>n instanceof ya,Do=n=>n instanceof Of;function $s(n){return od(n)?n.value:n.getRawValue()}function Pf(n,e){const t=ml(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function am(n,e){ml(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})}class hu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=gl(this._rawValidators),this._composedAsyncValidatorFn=ma(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Io}get invalid(){return this.status===js}get pending(){return this.status==_i}get disabled(){return this.status===pa}get enabled(){return this.status!==pa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=gl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ma(e)}addValidators(e){this.setValidators(Ls(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ls(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rm(e,this._rawAsyncValidators))}hasValidator(e){return Jc(this._rawValidators,e)}hasAsyncValidator(e){return Jc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_i,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pa,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Io,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Io||this.status===_i)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pa:Io}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_i,this._hasOwnPendingAsyncValidator=!0;const t=Qi(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function ga(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=ml(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:Do(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?pa:this.errors?js:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_i)?_i:this._anyControlsHaveStatus(js)?js:Io}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bo(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ad extends hu{constructor(e=null,t,r){super(pl(t),du(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bo(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wo(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wo(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ya extends hu{constructor(e,t,r){super(pl(t),du(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){am(this,e),Object.keys(e).forEach(r=>{Pf(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=$s(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Of extends hu{constructor(e,t,r){super(pl(t),du(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){am(this,e),e.forEach((r,o)=>{Pf(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>$s(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const um={provide:Kn,useExisting:(0,d.Gpc)(()=>Co)},fu=(()=>Promise.resolve(null))();let Co=(()=>{class n extends Kn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new ya({},Pn(t),If(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),uu(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fu.then(()=>{const r=this._findContainer(t.path),o=new ya({});id(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Rf(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(vr,10),d.Y36(Fs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([um]),d.qOj]}),n})(),va=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const cm={provide:zr,useExisting:(0,d.Gpc)(()=>El),multi:!0};let El=(()=>{class n extends Yi{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([cm]),d.qOj]}),n})(),wl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Lf=new d.OlP("NgModelWithFormControlWarning"),pm={provide:Kn,useExisting:(0,d.Gpc)(()=>To)};let To=(()=>{class n extends Kn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return uu(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){fs(t.control||null,t,!1),wo(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Rf(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(fs(r||null,t),od(o)&&(uu(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);id(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Mf(n,e){return Xi(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hl(this.form,this),this._oldForm&&Xi(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(vr,10),d.Y36(Fs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([pm]),d.qOj,d.TTD]}),n})();const p={provide:Ji,useExisting:(0,d.Gpc)(()=>m)};let m=(()=>{class n extends Ji{constructor(t,r,o,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Eo(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===ks?t=u:function xf(n){return Object.getPrototypeOf(n.constructor)===Yi}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Yn(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ha(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Kn,13),d.Y36(vr,10),d.Y36(Fs,10),d.Y36(zr,10),d.Y36(Lf,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([p]),d.qOj,d.TTD]}),n})();const w={provide:zr,useExisting:(0,d.Gpc)(()=>re),multi:!0};function C(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let re=(()=>{class n extends Yi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=C(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function P(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([w]),d.qOj]}),n})(),Fe=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(C(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(re,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const lt={provide:zr,useExisting:(0,d.Gpc)(()=>ei),multi:!0};function wt(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ei=(()=>{class n extends Yi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,h)=>{u._setSelected(o.indexOf(h.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const h=u;for(let g=0;g<h.length;g++){const b=this._getOptionValue(h[g].value);o.push(b)}}else{const h=r.options;for(let g=0;g<h.length;g++){const E=h[g];if(E.selected){const b=this._getOptionValue(E.value);o.push(b)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Wt(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([lt]),d.qOj]}),n})(),Ei=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(wt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wt(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(ei,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ps=(()=>{class n{constructor(){this._validator=hs}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):hs,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const bl={provide:vr,useExisting:(0,d.Gpc)(()=>mu),multi:!0};let mu=(()=>{class n extends ps{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function ym(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Wc}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([bl]),d.qOj]}),n})(),LI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[wl]]}),n})(),ZA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[LI]}),n})(),Dl=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Lf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[LI]}),n})(),jf=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let g,u=null,h=null;return null!=r&&(function fi(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,g=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new ya(o,{asyncValidators:h,updateOn:g,validators:u})}control(t,r,o){return new ad(t,r,o)}array(t,r,o){const u=t.map(h=>this._createControl(h));return new Of(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return od(t)||ml(t)||Do(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:Dl}),n})();var ti=M(2011),qr=M(655);function Dt(...n){const e=(0,pn.yG)(n);return(0,$n.D)(n,e)}var So=M(515),pd=M(5363),wi=M(4482);function _r(n,e){return(0,wi.e)((t,r)=>{let o=null,u=0,h=!1;const g=()=>h&&!o&&r.complete();t.subscribe((0,Nr.x)(r,E=>{null==o||o.unsubscribe();let b=0;const A=u++;(0,ua.Xf)(n(E,A)).subscribe(o=(0,Nr.x)(r,S=>r.next(e?e(E,S,A,b++):S),()=>{o=null,g()}))},()=>{h=!0,g()}))})}var Mo=M(7579),x_=M(6063);class UI extends Mo.x{constructor(e=1/0,t=1/0,r=x_.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let g=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)g=E;g&&r.splice(0,g+1)}}}var R_=M(3099);function wm(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,R_.B)({connector:()=>new UI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var Xt=M(880),Im=M(7982);class gs extends Mo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var gd=M(4671),bm=M(9672);function md(n,e,t){n?(0,bm.f)(t,n,e):e()}var Dm=M(576);function $f(n,e){const t=(0,Dm.m)(n)?n:()=>n,r=o=>o.error(t());return new Os.y(e?o=>e.schedule(r,0,o):r)}const Hf=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Gf=M(8189);function Cm(...n){return function N_(){return(0,Gf.J)(1)}()((0,$n.D)(n,(0,pn.yG)(n)))}function P_(n){return new Os.y(e=>{(0,ua.Xf)(n()).subscribe(e)})}var O_=M(727);function k_(){return(0,wi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Nr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class HI extends Os.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,wi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new O_.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Nr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=O_.w0.EMPTY)}return e}refCount(){return k_()(this)}}var Tm=M(5698);function yd(...n){const e=(0,pn.yG)(n);return(0,wi.e)((t,r)=>{(e?Cm(n,t,e):Cm(n,t)).subscribe(r)})}function GI(n,e,t,r,o){return(u,h)=>{let g=t,E=e,b=0;u.subscribe((0,Nr.x)(h,A=>{const S=b++;E=g?n(E,A,S):(g=!0,A),r&&h.next(E)},o&&(()=>{g&&h.next(E),h.complete()})))}}function zs(n,e){return(0,wi.e)(GI(n,e,arguments.length>=2,!0))}function cr(n,e){return(0,wi.e)((t,r)=>{let o=0;t.subscribe((0,Nr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function yu(n){return(0,wi.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Nr.x)(t,void 0,void 0,h=>{u=(0,ua.Xf)(n(h,yu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var ni=M(5577);function vu(n,e){return(0,Dm.m)(e)?(0,ni.z)(n,e,1):(0,ni.z)(n,1)}function F_(n){return n<=0?()=>So.E:(0,wi.e)((e,t)=>{let r=[];e.subscribe((0,Nr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ms(n=Am){return(0,wi.e)((e,t)=>{let r=!1;e.subscribe((0,Nr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Am(){return new Hf}function zf(n){return(0,wi.e)((e,t)=>{let r=!1;e.subscribe((0,Nr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ea(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cr((o,u)=>n(o,u,r)):gd.y,(0,Tm.q)(1),t?zf(e):ms(()=>new Hf))}var Wr=M(8505);class qs{constructor(e,t){this.id=e,this.url=t}}class vd extends qs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _u extends qs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sm extends qs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class KA extends qs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cl extends qs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mm extends qs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V_ extends qs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qI extends qs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xm extends qs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U_{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class B_{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class WI{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZI{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KI{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j_{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rm{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class $_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wa(n){return new $_(n)}const H_="ngNavigationCancelingError";function Nm(n){const e=Error("NavigationCancelingError: "+n);return e[H_]=!0,e}function z_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],g=n[u];if(h.startsWith(":"))o[h.substring(1)]=g;else if(h!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ys(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Pm(n[o],e[o]))return!1;return!0}function Pm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function q_(n){return Array.prototype.concat.apply([],n)}function _d(n){return n.length>0?n[n.length-1]:null}function Pr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function vs(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,$n.D)(Promise.resolve(n)):Dt(n)}const Om={exact:function Fm(n,e,t){if(!ba(n.segments,e.segments)||!Ia(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Fm(n.children[r],e.children[r],t))return!1;return!0},subset:Vm},km={exact:function qf(n,e){return ys(n,e)},subset:function Lm(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pm(n[t],e[t]))},ignored:()=>!0};function Ed(n,e,t){return Om[t.paths](n.root,e.root,t.matrixParams)&&km[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vm(n,e,t){return Wf(n,e,e.segments,t)}function Wf(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ba(o,t)||e.hasChildren()||!Ia(o,t,r))}if(n.segments.length===t.length){if(!ba(n.segments,t)||!Ia(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Vm(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ba(n.segments,o)&&Ia(n.segments,o,r)&&n.children[Yt])&&Wf(n.children[Yt],e,u,r)}}function Ia(n,e,t){return e.every((r,o)=>km[t](n[o].parameters,r.parameters))}class wu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wa(this.queryParams)),this._queryParamMap}toString(){return Z_.serialize(this)}}class sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Pr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zf(this)}}class wd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wa(this.parameters)),this._parameterMap}toString(){return Q_(this)}}function ba(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Bm{}class QI{parse(e){const t=new eE(e);return new wu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Tl(e.root,!0)}`,r=function XI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Kf(t)}=${Kf(o)}`).join("&"):`${Kf(t)}=${Kf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _s(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Z_=new QI;function Zf(n){return n.segments.map(e=>Q_(e)).join("/")}function Tl(n,e){if(!n.hasChildren())return Zf(n);if(e){const t=n.children[Yt]?Tl(n.children[Yt],!1):"",r=[];return Pr(n.children,(o,u)=>{u!==Yt&&r.push(`${u}:${Tl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Um(n,e){let t=[];return Pr(n.children,(r,o)=>{o===Yt&&(t=t.concat(e(r,o)))}),Pr(n.children,(r,o)=>{o!==Yt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Yt?[Tl(n.children[Yt],!1)]:[`${o}:${Tl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${Zf(n)}/${t[0]}`:`${Zf(n)}/(${t.join("//")})`}}function K_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kf(n){return K_(n).replace(/%3B/gi,";")}function jm(n){return K_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Id(n){return decodeURIComponent(n)}function Y_(n){return Id(n.replace(/\+/g,"%20"))}function Q_(n){return`${jm(n.path)}${function JI(n){return Object.keys(n).map(e=>`;${jm(e)}=${jm(n[e])}`).join("")}(n.parameters)}`}const J_=/^[^\/()?;=#]+/;function Yf(n){const e=n.match(J_);return e?e[0]:""}const eb=/^[^=?&#]+/,Ut=/^[^&#]+/;class eE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new sn(e,t)),r}parseSegment(){const e=Yf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new wd(Id(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Yf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Yf(this.remaining);o&&(r=o,this.capture(r))}e[Id(t)]=Id(r)}parseQueryParam(e){const t=function tb(n){const e=n.match(eb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function X_(n){const e=n.match(Ut);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Y_(t),u=Y_(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Yf(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Yt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Yt]:new sn([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class $m{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Al(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Al(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ki(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ki(e,this._root).map(t=>t.value)}}function Al(n,e){if(n===e.value)return e;for(const t of e.children){const r=Al(n,t);if(r)return r}return null}function ki(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ki(n,t);if(r.length)return r.unshift(e),r}return[]}class Ws{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Qf extends $m{constructor(e,t){super(e),this.snapshot=t,Ml(this,e)}toString(){return this.snapshot.toString()}}function Zs(n,e){const t=function Hm(n,e){const h=new bd([],{},{},"",{},Yt,e,null,n.root,-1,{});return new nb("",new Ws(h,[]))}(n,e),r=new gs([new wd("",{})]),o=new gs({}),u=new gs({}),h=new gs({}),g=new gs(""),E=new Iu(r,o,h,g,u,Yt,e,t.root);return E.snapshot=t.root,new Qf(new Ws(E,[]),t)}class Iu{constructor(e,t,r,o,u,h,g,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=g,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>wa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>wa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Jf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function QA(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class bd{constructor(e,t,r,o,u,h,g,E,b,A,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=g,this.routeConfig=E,this._urlSegment=b,this._lastPathIndex=A,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nb extends $m{constructor(e,t){super(t),this.url=e,Ml(this,t)}toString(){return Dd(this._root)}}function Ml(n,e){e.value._routerState=n,e.children.forEach(t=>Ml(n,t))}function Dd(n){const e=n.children.length>0?` { ${n.children.map(Dd).join(", ")} } `:"";return`${n.value}${e}`}function Cd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ys(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ys(e.params,t.params)||n.params.next(t.params),function Eu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ys(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ys(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Td(n,e){const t=ys(n.params,e.params)&&function YI(n,e){return ba(n,e)&&n.every((t,r)=>ys(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Td(n.parent,e.parent))}function Xf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function rb(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Xf(n,r,o);return Xf(n,r)})}(n,e,t);return new Ws(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(g=>Xf(n,g)),h}}const r=function ib(n){return new Iu(new gs(n.url),new gs(n.params),new gs(n.queryParams),new gs(n.fragment),new gs(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Xf(n,u));return new Ws(r,o)}}function ep(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xl(n){return"object"==typeof n&&null!=n&&n.outlets}function tE(n,e,t,r,o){let u={};if(r&&Pr(r,(g,E)=>{u[E]=Array.isArray(g)?g.map(b=>`${b}`):`${g}`}),n===e)return new wu(t,u,o);const h=nE(n,e,t);return new wu(h,u,o)}function nE(n,e,t){const r={};return Pr(n.children,(o,u)=>{r[u]=o===e?t:nE(o,e,t)}),new sn(n.segments,r)}class ob{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ep(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(xl);if(o&&o!==_d(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ub(n,e,t){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return qm(n,e,t);const r=function XA(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],g=t[r];if(xl(g))break;const E=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&b&&"object"==typeof b&&void 0===b.outlets){if(!cb(E,b,h))return u;r+=2}else{if(!cb(E,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new sn(n.segments.slice(0,r.pathIndex),{});return u.children[Yt]=new sn(n.segments.slice(r.pathIndex),n.children),qm(u,0,o)}return r.match&&0===o.length?new sn(n.segments,{}):r.match&&!n.hasChildren()?iE(n,e,t):r.match?qm(n,0,o):iE(n,e,t)}function qm(n,e,t){if(0===t.length)return new sn(n.segments,{});{const r=function JA(n){return xl(n[0])?n[0].outlets:{[Yt]:n}}(t),o={};return Pr(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=ub(n.children[h],e,u))}),Pr(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new sn(n.segments,o)}}function iE(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(xl(u)){const E=eS(u.outlets);return new sn(r,E)}if(0===o&&ep(t[0])){r.push(new wd(n.segments[e].path,lb(t[0]))),o++;continue}const h=xl(u)?u.outlets[Yt]:`${u}`,g=o<t.length-1?t[o+1]:null;h&&g&&ep(g)?(r.push(new wd(h,lb(g))),o+=2):(r.push(new wd(h,{})),o++)}return new sn(r,{})}function eS(n){const e={};return Pr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=iE(new sn([],{}),0,t))}),e}function lb(n){const e={};return Pr(n,(t,r)=>e[r]=`${t}`),e}function cb(n,e,t){return n==t.path&&ys(e,t.parameters)}class nS{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Sl(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Pr(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Sl(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Sl(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Sl(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new j_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ZI(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Cd(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(g.contexts),h.attachRef=g.componentRef,h.route=g.route.value,h.outlet&&h.outlet.attach(g.componentRef,g.route.value),Cd(g.route.value),this.activateChildRoutes(e,null,h.children)}else{const g=function Da(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=g?g.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=E,h.outlet&&h.outlet.activateWith(o,E),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class Ad{constructor(e,t){this.routes=e,this.module=t}}function Ca(n){return"function"==typeof n}function xo(n){return n instanceof wu}const Rl=Symbol("INITIAL_VALUE");function Sd(){return _r(n=>function BI(...n){const e=(0,pn.yG)(n),t=(0,pn.jO)(n),{args:r,keys:o}=tu(n);if(0===r.length)return(0,$n.D)([],e);const u=new Os.y(function jI(n,e,t=gd.y){return r=>{md(e,()=>{const{length:o}=n,u=new Array(o);let h=o,g=o;for(let E=0;E<o;E++)md(e,()=>{const b=(0,$n.D)(n[E],e);let A=!1;b.subscribe((0,Nr.x)(r,S=>{u[E]=S,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>zc(o,h):gd.y));return t?u.pipe(Xg(t)):u}(n.map(e=>e.pipe((0,Tm.q)(1),yd(Rl)))).pipe(zs((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==Rl?o:(u===Rl&&(r=!0),r||!1!==u&&h!==t.length-1&&!xo(u)?o:u),e)},Rl),cr(e=>e!==Rl),(0,Ct.U)(e=>xo(e)?e:!0===e),(0,Tm.q)(1)))}class Zm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Md,this.attachRef=null}}class Md{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Zm,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let np=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||Yt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,E=new hb(t,g,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Md),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class hb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Iu?this.route:e===Md?this.childContexts:this.parent.get(e,t)}}let Km=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[np],encapsulation:2}),n})();function Nl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Pl(r,Ym(e,r))}}function Pl(n,e){n.children&&Nl(n.children,e)}function Ym(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Aa(n){const e=n.children&&n.children.map(Aa),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=Km),t}function ri(n){return n.outlet||Yt}function bu(n,e){const t=n.filter(r=>ri(r)===e);return t.push(...n.filter(r=>ri(r)!==e)),t}const aE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},aE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||z_)(t,n,e);if(!u)return Object.assign({},aE);const h={};Pr(u.posParams,(E,b)=>{h[b]=E.path});const g=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Rd(n,e,t,r,o="corrected"){if(t.length>0&&function uE(n,e,t){return t.some(r=>ip(n,e,r)&&ri(r)!==Yt)}(n,t,r)){const h=new sn(e,function Jm(n,e,t,r){const o={};o[Yt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ri(u)!==Yt){const h=new sn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[ri(u)]=h}return o}(n,e,r,new sn(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function rp(n,e,t){return t.some(r=>ip(n,e,r))}(n,t,r)){const h=new sn(n.segments,function Qm(n,e,t,r,o,u){const h={};for(const g of r)if(ip(n,t,g)&&!o[ri(g)]){const E=new sn([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[ri(g)]=E}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new sn(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ip(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Xm(n,e,t,r){return!!(ri(n)===r||r!==Yt&&ip(e,t,n))&&("**"===n.path||xd(e,n,t).matched)}function fb(n,e,t){return 0===e.length&&!n.children[t]}class Nd{constructor(e){this.segmentGroup=e||null}}class ey{constructor(e){this.urlTree=e}}function Pd(n){return $f(new Nd(n))}function ty(n){return $f(new ey(n))}class mb{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Rd(this.urlTree.root,[],[],this.config).segmentGroup,t=new sn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Yt).pipe((0,Ct.U)(u=>this.createUrlTree(lE(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yu(u=>{if(u instanceof ey)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Nd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Yt).pipe((0,Ct.U)(o=>this.createUrlTree(lE(o),e.queryParams,e.fragment))).pipe(yu(o=>{throw o instanceof Nd?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new sn([],{[Yt]:e}):e;return new wu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(u=>new sn([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,$n.D)(o).pipe(vu(u=>{const h=r.children[u],g=bu(t,u);return this.expandSegmentGroup(e,g,h,u).pipe((0,Ct.U)(E=>({segment:E,outlet:u})))}),zs((u,h)=>(u[h.outlet]=h.segment,u),{}),function zI(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cr((o,u)=>n(o,u,r)):gd.y,F_(1),t?zf(e):ms(()=>new Hf))}())}expandSegment(e,t,r,o,u,h){return(0,$n.D)(r).pipe(vu(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,h).pipe(yu(b=>{if(b instanceof Nd)return Dt(null);throw b}))),Ea(g=>!!g),yu((g,E)=>{if(g instanceof Hf||"EmptyError"===g.name)return fb(t,o,u)?Dt(new sn([],{})):Pd(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,h,g){return Xm(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):Pd(t):Pd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ty(u):this.lineralizeSegments(r,u).pipe((0,ni.z)(h=>{const g=new sn(h,{});return this.expandSegment(e,g,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:g,consumedSegments:E,remainingSegments:b,positionalParamSegments:A}=xd(t,o,u);if(!g)return Pd(t);const S=this.applyRedirectCommands(E,o.redirectTo,A);return o.redirectTo.startsWith("/")?ty(S):this.lineralizeSegments(o,S).pipe((0,ni.z)($=>this.expandSegment(e,t,r,$.concat(b),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Dt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ct.U)(S=>(r._loadedConfig=S,new sn(o,{})))):Dt(new sn(o,{}));const{matched:h,consumedSegments:g,remainingSegments:E}=xd(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,ni.z)(A=>{const S=A.module,$=A.routes,{segmentGroup:Y,slicedSegments:ue}=Rd(t,g,E,$),Ve=new sn(Y.segments,Y.children);if(0===ue.length&&Ve.hasChildren())return this.expandChildren(S,$,Ve).pipe((0,Ct.U)(on=>new sn(g,on)));if(0===$.length&&0===ue.length)return Dt(new sn(g,{}));const Xe=ri(r)===u;return this.expandSegment(S,Ve,$,ue,Xe?Yt:u,!0).pipe((0,Ct.U)(Bt=>new sn(g.concat(Bt.segments),Bt.children)))})):Pd(t)}getChildConfig(e,t,r){return t.children?Dt(new Ad(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Dt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ni.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Ct.U)(u=>(t._loadedConfig=u,u))):function gb(n){return $f(Nm(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Dt(new Ad([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Dt(o.map(h=>{const g=e.get(h);let E;if(function oE(n){return n&&Ca(n.canLoad)}(g))E=g.canLoad(t,r);else{if(!Ca(g))throw new Error("Invalid CanLoad guard");E=g(t,r)}return vs(E)})).pipe(Sd(),(0,Wr.b)(h=>{if(!xo(h))return;const g=Nm(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw g.url=h,g}),(0,Ct.U)(h=>!0===h)):Dt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Dt(r);if(o.numberOfChildren>1||!o.children[Yt])return $f(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new wu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Pr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Pr(t.children,(g,E)=>{h[E]=this.createSegmentGroup(e,g,r,o)}),new sn(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function lE(n){const e={};for(const r of Object.keys(n.children)){const u=lE(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function yb(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new sn(n.segments.concat(e.segments),e.children)}return n}(new sn(n.segments,e))}class ny{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ry{constructor(e,t){this.component=e,this.route=t}}function vb(n,e,t){const r=n._root;return kd(r,e?e._root:null,t,[r.value])}function Od(n,e,t){const r=function _b(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function kd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Sl(e);return n.children.forEach(h=>{(function Eb(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const E=function cE(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ba(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ba(n.url,e.url)||!ys(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Td(n,e)||!ys(n.queryParams,e.queryParams);default:return!Td(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new ny(r)):(u.data=h.data,u._resolvedData=h._resolvedData),kd(n,e,u.component?g?g.children:null:t,r,o),E&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new ry(g.outlet.component,h))}else h&&Fd(e,g,o),o.canActivateChecks.push(new ny(r)),kd(n,null,u.component?g?g.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Pr(u,(h,g)=>Fd(h,t.getContext(g),o)),o}function Fd(n,e,t){const r=Sl(n),o=n.value;Pr(r,(u,h)=>{Fd(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new ry(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Db{}function pE(n){return new Os.y(e=>e.error(n))}class gE{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Rd(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Yt);if(null===t)return null;const r=new bd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ws(r,t),u=new nb(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Jf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],g=bu(e,u),E=this.processSegmentGroup(g,h,u);if(null===E)return null;r.push(...E)}const o=sp(r);return function Cb(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return fb(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Xm(e,t,r,o))return null;let u,h=[],g=[];if("**"===e.path){const Y=r.length>0?_d(r).parameters:{};u=new bd(r,Y,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,op(e),ri(e),e.component,e,mE(t),Ld(t)+r.length,yE(e))}else{const Y=xd(t,e,r);if(!Y.matched)return null;h=Y.consumedSegments,g=Y.remainingSegments,u=new bd(h,Y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,op(e),ri(e),e.component,e,mE(t),Ld(t)+h.length,yE(e))}const E=function Tb(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=Rd(t,h,g,E.filter(Y=>void 0===Y.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const Y=this.processChildren(E,b);return null===Y?null:[new Ws(u,Y)]}if(0===E.length&&0===A.length)return[new Ws(u,[])];const S=ri(e)===o,$=this.processSegment(E,b,A,S?Yt:o);return null===$?null:[new Ws(u,$)]}}function Ab(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function sp(n){const e=[],t=new Set;for(const r of n){if(!Ab(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=sp(r.children);e.push(new Ws(r.value,o))}return e.filter(r=>!t.has(r))}function mE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ld(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function op(n){return n.data||{}}function yE(n){return n.resolve||{}}function Sb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _E(n){return _r(e=>{const t=n(e);return t?(0,$n.D)(t).pipe((0,Ct.U)(()=>e)):Dt(e)})}class wE extends class EE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ap=new d.OlP("ROUTES");class ly{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Ct.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new Ad(q_(h.injector.get(ap,void 0,d.XFs.Self|d.XFs.Optional)).map(Aa),h)}),yu(u=>{throw t._loader$=void 0,u}));return t._loader$=new HI(o,()=>new Mo.x).pipe(k_()),t._loader$}loadModuleFactory(e){return vs(e()).pipe((0,ni.z)(t=>t instanceof d.YKP?Dt(t):(0,$n.D)(this.compiler.compileModuleAsync(t))))}}class Ro{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function up(n){throw n}function xb(n,e,t){return e.parse("/")}function bE(n,e){return Dt(null)}const aS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class n{constructor(t,r,o,u,h,g,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mo.x,this.errorHandler=up,this.malformedUriErrorHandler=xb,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:bE,afterPreactivation:bE},this.urlHandlingStrategy=new Ro,this.routeReuseStrategy=new wE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const S=h.get(d.R0b);this.isNgZoneEnabled=S instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function W_(){return new wu(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ly(h,g,$=>this.triggerEvent(new U_($)),$=>this.triggerEvent(new B_($))),this.routerState=Zs(this.currentUrlTree,this.rootComponentType),this.transitions=new gs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(cr(o=>0!==o.id),(0,Ct.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),_r(o=>{let u=!1,h=!1;return Dt(o).pipe((0,Wr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_r(g=>{const E=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Ol(g.source)&&(this.browserUrlTree=g.extractedUrl),Dt(g).pipe(_r(S=>{const $=this.transitions.getValue();return r.next(new vd(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),$!==this.transitions.getValue()?So.E:Promise.resolve(S)}),function rS(n,e,t,r){return _r(o=>function Fi(n,e,t,r,o){return new mb(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ct.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function oy(n,e,t,r,o){return(0,ni.z)(u=>function iS(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new gE(n,e,t,r,o,u).recognize();return null===h?pE(new Db):Dt(h)}catch(h){return pE(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Ct.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(Y,S)}this.browserUrlTree=S.urlAfterRedirects}const $=new Cl(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next($)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Y,source:ue,restoredState:Ve,extras:Xe}=g,Gt=new vd($,this.serializeUrl(Y),ue,Ve);r.next(Gt);const Bt=Zs(Y,this.rootComponentType).snapshot;return Dt(Object.assign(Object.assign({},g),{targetSnapshot:Bt,urlAfterRedirects:Y,extras:Object.assign(Object.assign({},Xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),So.E}),_E(g=>{const{targetSnapshot:E,id:b,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:$,replaceUrl:Y}}=g;return this.hooks.beforePreactivation(E,{navigationId:b,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!$,replaceUrl:!!Y})}),(0,Wr.b)(g=>{const E=new Mm(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(E)}),(0,Ct.U)(g=>Object.assign(Object.assign({},g),{guards:vb(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function dE(n,e){return(0,ni.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?Dt(Object.assign(Object.assign({},t),{guardsResult:!0})):function wb(n,e,t,r){return(0,$n.D)(n).pipe((0,ni.z)(o=>function sy(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Dt(u.map(g=>{const E=Od(g,e,o);let b;if(function Ta(n){return n&&Ca(n.canDeactivate)}(E))b=vs(E.canDeactivate(n,e,t,r));else{if(!Ca(E))throw new Error("Invalid CanDeactivate guard");b=vs(E(n,e,t,r))}return b.pipe(Ea())})).pipe(Sd()):Dt(!0)}(o.component,o.route,t,e,r)),Ea(o=>!0!==o,!0))}(h,r,o,n).pipe((0,ni.z)(g=>g&&function sE(n){return"boolean"==typeof n}(g)?function Ib(n,e,t,r){return(0,$n.D)(e).pipe(vu(o=>Cm(function fE(n,e){return null!==n&&e&&e(new WI(n)),Dt(!0)}(o.route.parent,r),function hE(n,e){return null!==n&&e&&e(new KI(n)),Dt(!0)}(o.route,r),function Ks(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function iy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>P_(()=>Dt(h.guards.map(E=>{const b=Od(E,h.node,t);let A;if(function db(n){return n&&Ca(n.canActivateChild)}(b))A=vs(b.canActivateChild(r,n));else{if(!Ca(b))throw new Error("Invalid CanActivateChild guard");A=vs(b(r,n))}return A.pipe(Ea())})).pipe(Sd())));return Dt(u).pipe(Sd())}(n,o.path,t),function bb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Dt(!0);const o=r.map(u=>P_(()=>{const h=Od(u,e,t);let g;if(function Wm(n){return n&&Ca(n.canActivate)}(h))g=vs(h.canActivate(e,n));else{if(!Ca(h))throw new Error("Invalid CanActivate guard");g=vs(h(e,n))}return g.pipe(Ea())}));return Dt(o).pipe(Sd())}(n,o.route,t))),Ea(o=>!0!==o,!0))}(r,u,n,e):Dt(g)),(0,Ct.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Wr.b)(g=>{if(xo(g.guardsResult)){const b=Nm(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw b.url=g.guardsResult,b}const E=new V_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(E)}),cr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),_E(g=>{if(g.guards.canActivateChecks.length)return Dt(g).pipe((0,Wr.b)(E=>{const b=new qI(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}),_r(E=>{let b=!1;return Dt(E).pipe(function ay(n,e){return(0,ni.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Dt(t);let u=0;return(0,$n.D)(o).pipe(vu(h=>function vE(n,e,t,r){return function oS(n,e,t,r){const o=Sb(n);if(0===o.length)return Dt({});const u={};return(0,$n.D)(o).pipe((0,ni.z)(h=>function uy(n,e,t,r){const o=Od(n,e,r);return vs(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Wr.b)(g=>{u[h]=g}))),F_(1),(0,ni.z)(()=>Sb(u).length===o.length?Dt(u):So.E))}(n._resolve,n,e,r).pipe((0,Ct.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Jf(n,t).resolve),null)))}(h.route,r,n,e)),(0,Wr.b)(()=>u++),F_(1),(0,ni.z)(h=>u===o.length?Dt(t):So.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Wr.b)(E=>{const b=new xm(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}))}),_E(g=>{const{targetSnapshot:E,id:b,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:$,replaceUrl:Y}}=g;return this.hooks.afterPreactivation(E,{navigationId:b,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!$,replaceUrl:!!Y})}),(0,Ct.U)(g=>{const E=function Gm(n,e,t){const r=Xf(n,e._root,t?t._root:void 0);return new Qf(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:E})}),(0,Wr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new nS(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Wr.b)({next(){u=!0},complete(){u=!0}}),function L_(n){return(0,wi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),yu(g=>{if(h=!0,function G_(n){return n&&n[H_]}(g)){const E=xo(g.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const b=new Sm(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(b),E?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ol(o.source)};this.scheduleNavigation(A,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new KA(o.id,this.serializeUrl(o.extractedUrl),g);r.next(E);try{o.resolve(this.errorHandler(g))}catch(b){o.reject(b)}}return So.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const E=Object.assign({},h);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Nl(t),this.config=t.map(Aa),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:g,preserveFragment:E}=r,b=o||this.routerState.root,A=E?this.currentUrlTree.fragment:h;let S=null;switch(g){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function sb(n,e,t,r,o){if(0===t.length)return tE(e.root,e.root,e.root,r,o);const u=function rE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ob(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Pr(u.outlets,(E,b)=>{g[b]="string"==typeof E?E.split("/"):E}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((g,E)=>{0==E&&"."===g||(0==E&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new ob(t,e,r)}(t);if(u.toRoot())return tE(e.root,e.root,new sn([],{}),r,o);const h=function ab(n,e,t){if(n.isAbsolute)return new tp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new tp(u,u===e.root,0)}const r=ep(n.commands[0])?0:1;return function zm(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new tp(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=h.processChildren?qm(h.segmentGroup,h.index,u.commands):ub(h.segmentGroup,h.index,u.commands);return tE(e.root,h.segmentGroup,g,r,o)}(b,this.currentUrlTree,t,S,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=xo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function dy(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},aS):!1===r?Object.assign({},cy):r,xo(t))return Ed(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Ed(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new _u(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var g,E;if(this.disposed)return Promise.resolve(!1);let b,A,S;h?(b=h.resolve,A=h.reject,S=h.promise):S=new Promise((ue,Ve)=>{b=ue,A=Ve});const $=++this.navigationId;let Y;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Y=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Y=0,this.setTransition({id:$,targetPageId:Y,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(ue=>Promise.reject(ue))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Sm(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ol(n){return"imperative"!==n}let Du=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Mo.x,this.subscription=t.events.subscribe(u=>{u instanceof _u&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,h){if(0!==t||r||o||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const g={skipLocationChange:Cu(this.skipLocationChange),replaceUrl:Cu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(pi),d.Y36(Iu),d.Y36(ye))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function Cu(n){return""===n||!!n}class TE{}class AE{preload(e,t){return Dt(null)}}let SE=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new ly(o,r,E=>t.triggerEvent(new U_(E)),E=>t.triggerEvent(new B_(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(cr(t=>t instanceof _u),vu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,$n.D)(o).pipe((0,Gf.J)(),(0,Ct.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Dt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ni.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pi),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(TE))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),lp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _u&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Rm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Sa=new d.OlP("ROUTER_CONFIGURATION"),ME=new d.OlP("ROUTER_FORROOT_GUARD"),Rb=[Ne,{provide:Bm,useClass:QI},{provide:pi,useFactory:function py(n,e,t,r,o,u,h={},g,E){const b=new pi(null,n,e,t,r,o,q_(u));return g&&(b.urlHandlingStrategy=g),E&&(b.routeReuseStrategy=E),function RE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,b),h.enableTracing&&b.events.subscribe(A=>{var S,$;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===($=console.groupEnd)||void 0===$||$.call(console)}),b},deps:[Bm,Md,Ne,d.zs3,d.Sil,ap,Sa,[class IE{},new d.FiY],[class Mb{},new d.FiY]]},Md,{provide:Iu,useFactory:function NE(n){return n.routerState.root},deps:[pi]},SE,AE,class fy{preload(e,t){return t().pipe(yu(()=>Dt(null)))}},{provide:Sa,useValue:{enableTracing:!1}}];function kl(){return new d.PXZ("Router",pi)}let xE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Rb,Es(t),{provide:ME,useFactory:Ob,deps:[[pi,new d.FiY,new d.tp0]]},{provide:Sa,useValue:r||{}},{provide:ye,useFactory:Pb,deps:[le,[new d.tBr(et),new d.FiY],Sa]},{provide:lp,useFactory:Nb,deps:[pi,Jo,Sa]},{provide:TE,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:AE},{provide:d.PXZ,multi:!0,useFactory:kl},[cp,{provide:d.ip1,multi:!0,useFactory:PE,deps:[cp]},{provide:OE,useFactory:kb,deps:[cp]},{provide:d.tb,multi:!0,useExisting:OE}]]}}static forChild(t){return{ngModule:n,providers:[Es(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ME,8),d.LFG(pi,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Nb(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new lp(n,e,t)}function Pb(n,e,t={}){return t.useHash?new Oe(n,e):new We(n,e)}function Ob(n){return"guarded"}function Es(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:ap,multi:!0,useValue:n}]}let cp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mo.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(pi),h=this.injector.get(Sa);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Dt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Sa),o=this.injector.get(SE),u=this.injector.get(lp),h=this.injector.get(pi),g=this.injector.get(d.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function PE(n){return n.appInitializer.bind(n)}function kb(n){return n.bootstrapListener.bind(n)}const OE=new d.OlP("Router Initializer");var kE=M(6451);function Lb(n,e){return(0,Dm.m)(e)?_r(()=>n,e):_r(()=>n)}var dp=M(9468),Ma=M(5867);class Tu{constructor(e){return e}}class FE{constructor(){return(0,Ma.C6)()}}const my=new d.OlP("angularfire2._apps"),LE={provide:Tu,useFactory:function gy(n){return n&&1===n.length?n[0]:new Tu((0,Ma.Mq)())},deps:[[new d.FiY,my]]},VE={provide:FE,deps:[[new d.FiY,my]]};function lS(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Tu(r)}}let ws=(()=>{class n{constructor(t){(0,Ma.KN)("angularfire",Xt.q4.full,"core"),(0,Ma.KN)("angularfire",Xt.q4.full,"app"),(0,Ma.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[LE,VE]}),n})();function cS(n,...e){return{ngModule:ws,providers:[{provide:my,useFactory:lS(n),multi:!0,deps:[d.R0b,d.zs3,Xt.HU,...e]}]}}const UE=(0,Xt.u3)(Ma.ZF,!0);var Ae=M(5861),No=M(9681),Fl=M(4859),rn=M(2090),xa=M(1877);const BE=new Map,jb={activated:!1,tokenObservers:[]},$b={initialized:!1,enabled:!1};function Or(n){return BE.get(n)||jb}function Ii(n,e){BE.set(n,e)}function Po(){return $b}class Bd{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ae.Z)(function*(){t.stop();try{t.pending=new rn.BH,yield function ii(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const kr=new rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fp(n){if(!Or(n).activated)throw kr.create("use-before-activation",{appName:n.name})}function Na(n,e){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,Ae.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const S=yield o.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,g;try{h=yield fetch(n,u)}catch(S){throw kr.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==h.status)throw kr.create("fetch-status-error",{httpStatus:h.status});try{g=yield h.json()}catch(S){throw kr.create("fetch-parse-error",{originalErrorMessage:S.message})}const E=g.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const b=1e3*Number(E[1]),A=Date.now();return{token:g.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}})).apply(this,arguments)}function Bl(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const $l="firebase-app-check-store";let jd=null;function _y(){return jd||(jd=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(kr.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($l,{keyPath:"compositeKey"})}}catch(t){e(kr.create("storage-open",{originalErrorMessage:t.message}))}}),jd)}function pp(){return(pp=(0,Ae.Z)(function*(n,e){const r=(yield _y()).transaction($l,"readwrite"),u=r.objectStore($l).put({compositeKey:n,value:e});return new Promise((h,g)=>{u.onsuccess=E=>{h()},r.onerror=E=>{var b;g(kr.create("storage-set",{originalErrorMessage:null===(b=E.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const $d=new xa.Yd("@firebase/app-check");function ZE(n,e){return(0,rn.hl)()?function HE(n,e){return function qE(n,e){return pp.apply(this,arguments)}(function wy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{$d.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YE(){return Po().enabled}function qb(){return by.apply(this,arguments)}function by(){return(by=(0,Ae.Z)(function*(){const n=Po();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Cy={error:"UNKNOWN_ERROR"};function Wb(n){return rn.US.encodeString(JSON.stringify(n),!1)}function Ty(n){return QE.apply(this,arguments)}function QE(){return(QE=(0,Ae.Z)(function*(n,e=!1){const t=n.app;fp(t);const r=Or(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&ko(E)&&(o=E)}if(!e&&o&&ko(o))return{token:o.token};let g,h=!1;if(YE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Na(Bl(t,yield qb()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),h=!0);const E=yield r.exchangeTokenPromise;return yield ZE(t,E),Ii(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),h=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?$d.warn(E.message):$d.error(E),u=E}return o?(g={token:o.token},Ii(t,Object.assign(Object.assign({},r),{token:o})),yield ZE(t,o)):g=Zb(u),h&&XE(t,g),g})).apply(this,arguments)}function Ay(n,e){const t=Or(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ii(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Sy(n){const{app:e}=n,t=Or(e);let r=t.tokenRefresher;r||(r=function hS(n){const{app:e}=n;return new Bd((0,Ae.Z)(function*(){let r;if(r=Or(e).token?yield Ty(n,!0):yield Ty(n),r.error)throw r.error}),()=>!0,()=>{const t=Or(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ii(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function XE(n,e){const t=Or(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function ko(n){return n.expireTimeMillis-Date.now()>0}function Zb(n){return{token:Wb(Cy),error:n}}class e0{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Or(this.app);for(const t of e)Ay(this.app,t.next);return Promise.resolve()}}const rD="app-check-internal";!function iD(){(0,No._registerComponent)(new Fl.wA("app-check",n=>function Kb(n,e){return new e0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rD).initialize()})),(0,No._registerComponent)(new Fl.wA(rD,n=>function t0(n){return{getToken:e=>Ty(n,e),addTokenListener:e=>function JE(n,e,t,r){const{app:o}=n,u=Or(o),h={next:t,error:r,type:e};if(Ii(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&ko(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),Sy(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Sy(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ay(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,No.registerVersion)("@firebase/app-check","0.5.8")}();class zl{constructor(){return(0,Xt.vb)("app-check")}}"undefined"!=typeof window&&window;var ql=M(127);const Fy=new d.OlP("angularfire2.auth.use-emulator"),Ly=new d.OlP("angularfire2.auth.settings"),Vy=new d.OlP("angularfire2.auth.tenant-id"),Uy=new d.OlP("angularfire2.auth.langugage-code"),By=new d.OlP("angularfire2.auth.use-device-language"),jy=new d.OlP("angularfire.auth.persistence"),$y=(n,e,t,r,o,u,h,g)=>(0,ti.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),h)for(const[b,A]of Object.entries(h))E.settings[b]=A;return g&&E.setPersistence(g),E},[t,r,o,u,h,g]);let f0=(()=>{class n{constructor(t,r,o,u,h,g,E,b,A,S,$,Y){const ue=new Mo.x,Ve=Dt(void 0).pipe((0,pd.Q)(h.outsideAngular),_r(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,5881)))),(0,Ct.U)(()=>(0,ti.on)(t,u,r)),(0,Ct.U)(Xe=>$y(Xe,u,g,b,A,S,E,$)),wm({bufferSize:1,refCount:!1}));if(nr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Dt(null);else{Ve.pipe(Ea()).subscribe();const Gt=Ve.pipe(_r(qt=>qt.getRedirectResult().then(an=>an,()=>null)),Xt.iC,wm({bufferSize:1,refCount:!1})),Bt=Ve.pipe(_r(qt=>new Os.y(an=>({unsubscribe:u.runOutsideAngular(()=>qt.onAuthStateChanged(En=>an.next(En),En=>an.error(En),()=>an.complete()))})))),on=Ve.pipe(_r(qt=>new Os.y(an=>({unsubscribe:u.runOutsideAngular(()=>qt.onIdTokenChanged(En=>an.next(En),En=>an.error(En),()=>an.complete()))}))));this.authState=Gt.pipe(Lb(Bt),(0,dp.R)(h.outsideAngular),(0,pd.Q)(h.insideAngular)),this.user=Gt.pipe(Lb(on),(0,dp.R)(h.outsideAngular),(0,pd.Q)(h.insideAngular)),this.idToken=this.user.pipe(_r(qt=>qt?(0,$n.D)(qt.getIdToken()):Dt(null))),this.idTokenResult=this.user.pipe(_r(qt=>qt?(0,$n.D)(qt.getIdTokenResult()):Dt(null))),this.credential=(0,kE.T)(Gt,ue,this.authState.pipe(cr(qt=>!qt))).pipe((0,Ct.U)(qt=>(null==qt?void 0:qt.user)?qt:null),(0,dp.R)(h.outsideAngular),(0,pd.Q)(h.insideAngular))}return(0,ti.pX)(this,Ve,u,{spy:{apply:(Xe,Gt,Bt)=>{(Xe.startsWith("signIn")||Xe.startsWith("createUser"))&&Bt.then(on=>ue.next(on))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Xt.HU),d.LFG(Fy,8),d.LFG(Ly,8),d.LFG(Vy,8),d.LFG(Uy,8),d.LFG(By,8),d.LFG(jy,8),d.LFG(zl,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Hy(n,e=gd.y){return n=null!=n?n:fD,(0,wi.e)((t,r)=>{let o,u=!0;t.subscribe((0,Nr.x)(r,h=>{const g=e(h);(u||!n(o,g))&&(u=!1,o=g,r.next(h))}))})}function fD(n,e){return n===e}function ir(){return(0,wi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Nr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}const Is="firebase_screen_id",Li="outlet",qd="screen_class",v0="screen_name";let Wd=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const qy={},_0=n=>{const e=[n[qd],n[Li]].join("#");if(qy.hasOwnProperty(e))return qy[e];{const t=Wd++;return qy[e]=t,t}},w0=new d.OlP("angularfire2.analytics.analyticsCollectionEnabled"),I0=new d.OlP("angularfire2.analytics.appVersion"),b0=new d.OlP("angularfire2.analytics.appName"),D0=new d.OlP("angularfire2.analytics.debugMode"),C0=new d.OlP("angularfire2.analytics.config"),bp="dataLayer";let Zd=(()=>{class n{constructor(t,r,o,u,h,g,E,b,A){if(this.analyticsInitialized=new Promise(()=>{}),function mr(n){return n===co}(E)){window[bp]=window[bp]||[];const $=(...Ve)=>"config"===Ve[0]&&"firebase"===Ve[2].origin&&(this.measurementId=Ve[1],!0),Y=Ve=>{window.gtag=(...Xe)=>{Ve&&Ve(...Xe),"event"===Xe[0]&&Xe[2].send_to===this.measurementId&&(u&&(Xe[2].app_name=u),o&&(Xe[2].app_version=o)),h&&"undefined"!=typeof console&&console.info(...Xe),function(...Gt){window[bp].push(arguments)}(...Xe)}};window[bp].some($)?(this.analyticsInitialized=Promise.resolve(),Y()):this.analyticsInitialized=new Promise(Ve=>{Y((...Xe)=>{$(...Xe)&&Ve()})}),g&&this.updateConfig(g),h&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const S=Dt(void 0).pipe((0,pd.Q)(A.outsideAngular),_r(Im.Gb),_r($=>$?b.runOutsideAngular(()=>M.e(643).then(M.bind(M,8643))):So.E),(0,Ct.U)(()=>(0,ti.cc)("analytics","AngularFireAnalytics",t.name,()=>{const $=t.analytics();return!1===r&&$.setAnalyticsCollectionEnabled(!1),$},[t,r,g,h])),wm({bufferSize:1,refCount:!1}));return(0,ti.pX)(this,S,b)}updateConfig(t){return(0,qr.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Ot),d.LFG(w0,8),d.LFG(I0,8),d.LFG(b0,8),d.LFG(D0,8),d.LFG(C0,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Xt.HU))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),M0=(()=>{class n{constructor(t,r,o,u){if(this.disposables=[],ql.Z.registerVersion("angularfire",Xt.q4.full,"compat-user-tracking"),nr(r))this.initialized=Promise.resolve();else{let h;this.initialized=u.runOutsideAngular(()=>new Promise(g=>h=g)),this.disposables=[o.authState.subscribe(g=>{t.setUserId(null==g?void 0:g.uid),h()}),o.credential.subscribe(g=>{if(g){const E=g.user.isAnonymous?"anonymous":g.additionalUserInfo.providerId;g.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:E}),t.logEvent("login",{method:E})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zd),d.LFG(d.Lbi),d.LFG(f0),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ND=(()=>{class n{constructor(t,r,o,u,h,g){if(ql.Z.registerVersion("angularfire",Xt.q4.full,"compat-screen-tracking"),!r||!t)return this;h.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(cr(o=>o instanceof j_)).pipe(_r(o=>{var u;const g=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,Y=>Y.replace("://",":///"))).root.children[o.snapshot.outlet])||void 0===u?void 0:u.toString())||"",E=n.routerState.root.children.map(Y=>Y).find(Y=>Y.outlet===o.snapshot.outlet);if(!E)return Dt(null);let b=E;for(;b.firstChild;)b=b.firstChild;const A=b.pathFromRoot.map(Y=>{var ue;return null===(ue=Y.routeConfig)||void 0===ue?void 0:ue.path}).filter(Y=>Y).join("/")||"/",S={[v0]:A,page_path:`/${g}`,firebase_event_origin:"auto",firebase_screen:A,[Li]:o.snapshot.outlet};e&&(S.page_title=e.getTitle());let $=E.component;if($){if($===Km){let Y=o.snapshot;for(;Y.firstChild;)Y=Y.firstChild;$=Y.component}}else $=o.snapshot.component;if("string"==typeof $)return Dt(Object.assign(Object.assign({},S),{[qd]:$}));if($){const Y=t.resolveComponentFactory($);return Dt(Object.assign(Object.assign({},S),{[qd]:Y.selector}))}return Dt(null)}),cr(o=>!!o),(0,Ct.U)(o=>Object.assign({firebase_screen_class:o[qd],[Is]:_0(o)},o)),function hD(n,e,t,r){return(0,wi.e)((o,u)=>{let h;e&&"function"!=typeof e?({duration:t,element:h,connector:r}=e):h=e;const g=new Map,E=ue=>{g.forEach(ue),ue(u)},b=ue=>E(Ve=>Ve.error(ue));let A=0,S=!1;const $=new Nr.Q(u,ue=>{try{const Ve=n(ue);let Xe=g.get(Ve);if(!Xe){g.set(Ve,Xe=r?r():new Mo.x);const Gt=function Y(ue,Ve){const Xe=new Os.y(Gt=>{A++;const Bt=Ve.subscribe(Gt);return()=>{Bt.unsubscribe(),0==--A&&S&&$.unsubscribe()}});return Xe.key=ue,Xe}(Ve,Xe);if(u.next(Gt),t){const Bt=(0,Nr.x)(Xe,()=>{Xe.complete(),null==Bt||Bt.unsubscribe()},void 0,void 0,()=>g.delete(Ve));$.add((0,ua.Xf)(t(Gt)).subscribe(Bt))}}Xe.next(h?h(ue):ue)}catch(Ve){b(Ve)}},()=>E(ue=>ue.complete()),b,()=>g.clear(),()=>(S=!0,0===A));o.subscribe($)})}(o=>o[Li]),(0,ni.z)(o=>o.pipe(Hy((u,h)=>JSON.stringify(u)===JSON.stringify(h)),yd(void 0),ir(),(0,Ct.U)(([u,h])=>u?Object.assign({firebase_previous_class:u[qd],firebase_previous_screen:u[v0],firebase_previous_id:u[Is]},h):h)))))(r,o,u).pipe(_r(E=>(0,qr.mG)(this,void 0,void 0,function*(){return g&&(yield g.initialized),yield t.logEvent("screen_view",E)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zd),d.LFG(pi,8),d.LFG(Ja,8),d.LFG(d._Vd),d.LFG(d.R0b),d.LFG(M0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),PD=(()=>{class n{constructor(t,r,o){ql.Z.registerVersion("angularfire",Xt.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zd),d.LFG(ND,8),d.LFG(M0,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Zd]}),n})();var mt,OD=M(4986),kD=(M(5881),M(3942)),FD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fo={},Ky=Ky||{},Lt=FD||self;function Kd(){}function Dp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cp="closure_uid_"+(1e9*Math.random()>>>0),R0=0;function N0(n,e,t){return n.call.apply(n.bind,arguments)}function P0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Fr(n,e,t){return(Fr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?N0:P0).apply(null,arguments)}function Yd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Lr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),g=2;g<arguments.length;g++)h[g-2]=arguments[g];return e.prototype[o].apply(r,h)}}function bi(){this.s=this.s,this.o=this.o}var VD={};bi.prototype.s=!1,bi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function x0(n){return Object.prototype.hasOwnProperty.call(n,Cp)&&n[Cp]||(n[Cp]=++R0)}(this);delete VD[n]}},bi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Su=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},UD=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function BD(n){return Array.prototype.concat.apply([],arguments)}function Tp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Qd(n){return/^[\s\xa0]*$/.test(n)}var mi,jD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yt(n,e){return-1!=n.indexOf(e)}function Qy(n,e){return n<e?-1:n>e?1:0}e:{var O0=Lt.navigator;if(O0){var Jd=O0.userAgent;if(Jd){mi=Jd;break e}}mi=""}function Jy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Xd(n){const e={};for(const t in n)e[t]=n[t];return e}var eh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qn(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<eh.length;u++)t=eh[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function k0(n){return k0[" "](n),n}k0[" "]=Kd;var Sp,n,$D=yt(mi,"Opera"),Zl=yt(mi,"Trident")||yt(mi,"MSIE"),Xy=yt(mi,"Edge"),Ap=Xy||Zl,ev=yt(mi,"Gecko")&&!(yt(mi.toLowerCase(),"webkit")&&!yt(mi,"Edge"))&&!(yt(mi,"Trident")||yt(mi,"MSIE"))&&!yt(mi,"Edge"),L0=yt(mi.toLowerCase(),"webkit")&&!yt(mi,"Edge");function V0(){var n=Lt.document;return n?n.documentMode:void 0}e:{var tv="",Mu=(n=mi,ev?/rv:([^\);]+)(\)|;)/.exec(n):Xy?/Edge\/([\d\.]+)/.exec(n):Zl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):L0?/WebKit\/(\S+)/.exec(n):$D?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Mu&&(tv=Mu?Mu[1]:""),Zl){var nv=V0();if(null!=nv&&nv>parseFloat(tv)){Sp=String(nv);break e}}Sp=tv}var HD={};var U0=Lt.document&&Zl&&(V0()||parseInt(Sp,10))||void 0,B0=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",Kd,e),Lt.removeEventListener("test",Kd,e)}catch(t){}return n}();function si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Lo(n,e){if(si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ev){e:{try{k0(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:th[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Lo.Z.h.call(this)}}si.prototype.h=function(){this.defaultPrevented=!0},Lr(Lo,si);var th={2:"touch",3:"pen",4:"mouse"};Lo.prototype.h=function(){Lo.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var nh="closure_listenable_"+(1e6*Math.random()|0),zD=0;function qD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++zD,this.ca=this.fa=!1}function rh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ih(n){this.src=n,this.g={},this.h=0}function Mp(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Su(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(rh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function iv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}ih.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=iv(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new qD(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var xp="closure_lm_"+(1e6*Math.random()|0),sv={};function j0(n,e,t,r,o){if(r&&r.once)return ZD(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)j0(n,e[u],t,r,o);return null}return t=xu(t),n&&n[nh]?n.N(e,t,Wl(r)?!!r.capture:!!r,o):WD(n,e,t,!1,r,o)}function WD(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=Wl(o)?!!o.capture:!!o,g=ov(n);if(g||(n[xp]=g=new ih(n)),(t=g.add(e,t,r,h,u)).proxy)return t;if(r=function DS(){var e=YD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)B0||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(sh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ZD(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ZD(n,e[u],t,r,o);return null}return t=xu(t),n&&n[nh]?n.O(e,t,Wl(r)?!!r.capture:!!r,o):WD(n,e,t,!0,r,o)}function KD(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)KD(n,e[u],t,r,o);else r=Wl(r)?!!r.capture:!!r,t=xu(t),n&&n[nh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=iv(u=n.g[e],t,r,o))&&(rh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=ov(n))&&(e=n.g[e.toString()],n=-1,e&&(n=iv(e,t,r,o)),(t=-1<n?e[n]:null)&&Rp(t))}function Rp(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[nh])Mp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(sh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ov(e))?(Mp(t,n),0==t.h&&(t.src=null,e[xp]=null)):rh(n)}}}function sh(n){return n in sv?sv[n]:sv[n]="on"+n}function YD(n,e){if(n.ca)n=!0;else{e=new Lo(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Rp(n),n=t.call(r,e)}return n}function ov(n){return(n=n[xp])instanceof ih?n:null}var Np="__closure_events_fn_"+(1e9*Math.random()>>>0);function xu(n){return"function"==typeof n?n:(n[Np]||(n[Np]=function(e){return n.handleEvent(e)}),n[Np])}function Vr(){bi.call(this),this.i=new ih(this),this.P=this,this.I=null}function Zr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new si(e,n);else if(e instanceof si)e.target=e.target||n;else{var o=e;Qn(e=new si(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=Pp(h,r,!0,e)&&o}if(o=Pp(h=e.g=n,r,!0,e)&&o,o=Pp(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Pp(h=e.g=t[u],r,!1,e)&&o}function Pp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var g=h.listener,E=h.ia||h.src;h.fa&&Mp(n.i,h),o=!1!==g.call(E,r)&&o}}return o&&!r.defaultPrevented}Lr(Vr,bi),Vr.prototype[nh]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){KD(this,n,e,t,r)},Vr.prototype.M=function(){if(Vr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rh(t[r]);delete n.g[e],n.h--}}this.I=null},Vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var av=Lt.JSON.stringify;function QD(){var n=G0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Op,H0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new JD,n=>n.reset());class JD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yl(n){Lt.setTimeout(()=>{throw n},0)}function uv(n,e){Op||function XD(){var n=Lt.Promise.resolve(void 0);Op=function(){n.then(z0)}}(),kp||(Op(),kp=!0),G0.add(n,e)}var kp=!1,G0=new class $0{constructor(){this.h=this.g=null}add(e,t){const r=H0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function z0(){for(var n;n=QD();){try{n.h.call(n.g)}catch(t){Yl(t)}var e=H0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}kp=!1}function Fp(n,e){Vr.call(this),this.h=n||1,this.g=e||Lt,this.j=Fr(this.kb,this),this.l=Date.now()}function oh(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function lv(n,e,t){if("function"==typeof n)t&&(n=Fr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function cv(n){n.g=lv(()=>{n.g=null,n.i&&(n.i=!1,cv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Lr(Fp,Vr),(mt=Fp.prototype).da=!1,mt.S=null,mt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zr(this,"tick"),this.da&&(oh(this),this.start()))}},mt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){Fp.Z.M.call(this),oh(this),delete this.g};class q0 extends bi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cv(this)}M(){super.M(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ah(n){bi.call(this),this.h=n,this.g={}}Lr(ah,bi);var W0=[];function Z0(n,e,t,r){Array.isArray(t)||(t&&(W0[0]=t.toString()),t=W0);for(var o=0;o<t.length;o++){var u=j0(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Lp(n){Jy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Rp(e)},n),n.g={}}function Vp(){this.g=!0}function Ql(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return av(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}ah.prototype.M=function(){ah.Z.M.call(this),Lp(this)},ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vp.prototype.Aa=function(){this.g=!1},Vp.prototype.info=function(){};var Ru={},Y0=null;function Up(){return Y0=Y0||new Vr}function Q0(n){si.call(this,Ru.Ma,n)}function Jl(n){const e=Up();Zr(e,new Q0(e,n))}function dv(n,e){si.call(this,Ru.STAT_EVENT,n),this.stat=e}function yi(n){const e=Up();Zr(e,new dv(e,n))}function J0(n,e){si.call(this,Ru.Na,n),this.size=e}function Xl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}Ru.Ma="serverreachability",Lr(Q0,si),Ru.STAT_EVENT="statevent",Lr(dv,si),Ru.Na="timingevent",Lr(J0,si);var Bp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},X0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hv(){}function $p(){}hv.prototype.h=null;var pv,ec={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function uh(){si.call(this,"d")}function fv(){si.call(this,"c")}function tc(){}function lh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ah(this),this.P=rC,this.W=new Fp(n=Ap?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gv}function gv(){this.i=null,this.g="",this.h=!1}Lr(uh,si),Lr(fv,si),Lr(tc,hv),tc.prototype.g=function(){return new XMLHttpRequest},tc.prototype.i=function(){return{}},pv=new tc;var rC=45e3,Hp={},Gp={};function zp(n,e,t){n.K=1,n.v=Jp(Vo(e)),n.s=t,n.U=!0,iC(n,null)}function iC(n,e){n.F=Date.now(),Js(n),n.A=Vo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),_v(t.h,"t",r),n.C=0,t=n.l.H,n.h=new gv,n.g=Nv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new q0(Fr(n.Ia,n,n.g),n.O)),Z0(n.V,n.g,"readystatechange",n.gb),e=n.H?Xd(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Jl(1),function K0(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",g=u.split("&"),E=0;E<g.length;E++){var b=g[E].split("=");if(1<b.length){var A=b[0];b=b[1];var S=A.split("_");h=2<=S.length&&"type"==S[1]?h+(A+"=")+b+"&":h+(A+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ew(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ch(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=sC(n,t),o==Gp){4==e&&(n.o=4,yi(14),r=!1),Ql(n.j,n.m,null,"[Incomplete Response]");break}if(o==Hp){n.o=4,yi(15),Ql(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ql(n.j,n.m,o,null),mv(n,o)}ew(n)&&o!=Gp&&o!=Hp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Sv(e),e.L=!0,yi(11))):(Ql(n.j,n.m,t,"[Invalid Chunked Response]"),Oa(n),Wp(n))}function sC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Gp:(t=Number(e.substring(t,r)),isNaN(t)?Hp:(r+=1)+t>e.length?Gp:(e=e.substr(r,t),n.C=r+t,e))}function Js(n){n.Y=Date.now()+n.P,nc(n,n.P)}function nc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xl(Fr(n.eb,n),e)}function qp(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Wp(n){0==n.l.G||n.I||xv(n.l,n)}function Oa(n){qp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,oh(n.W),Lp(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function mv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ev(t.i,n)))if(t.I=n.N,!n.J&&Ev(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xl(Fr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ac(t),rg(t)}Av(t),yi(18)}if(1>=ow(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Fa(t,11)}else if((n.J||t.g==n)&&ac(t),!Qd(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const S=b[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.K=r=1.5*$,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const ue=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ue){var u=r.i;!u.g&&(yt(ue,"spdy")||yt(ue,"quic")||yt(ue,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(wv(u,u.h),u.h=null))}if(r.D){const Ve=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(r.sa=Ve,On(r.F,r.D,Ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Ew(r,r.H?r.la:null,r.W),h.J){sc(r.i,h);var g=h,E=r.K;E&&g.setTimeout(E),g.B&&(qp(g),Js(g)),r.g=h}else vw(r);0<t.l.length&&oc(t)}else"stop"!=b[0]&&"close"!=b[0]||Fa(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Fa(t,7):Tv(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Jl(4)}catch(b){}}function yv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Dp(n)||"string"==typeof n)UD(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Dp(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function oC(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Dp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function rc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof rc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Zp(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ka(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ka(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ka(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(mt=lh.prototype).setTimeout=function(n){this.P=n},mt.gb=function(n){n=n.target;const e=this.L;e&&3==Uo(n)?e.l():this.Ia(n)},mt.Ia=function(n){try{if(n==this.g)e:{const A=Uo(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>A)&&(3!=A||Ap||this.g&&(this.h.h||this.g.ga()||pw(this.g)))){this.I||4!=A||7==e||Jl(8==e||0>=S?3:2),qp(this);var t=this.g.ba();this.N=t;t:if(ew(this)){var r=pw(this.g);n="";var o=r.length,u=4==Uo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Oa(this),Wp(this);var h="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function eC(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,E=this.g;if((g=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qd(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,yi(12),Oa(this),Wp(this);break e}Ql(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mv(this,t)}this.U?(ch(this,A,h),Ap&&this.i&&3==A&&(Z0(this.V,this.W,"tick",this.fb),this.W.start())):(Ql(this.j,this.m,h,null),mv(this,h)),4==A&&Oa(this),this.i&&!this.I&&(4==A?xv(this.l,this):(this.i=!1,Js(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,yi(12)):(this.o=0,yi(13)),Oa(this),Wp(this)}}}catch(A){}},mt.fb=function(){if(this.g){var n=Uo(this.g),e=this.g.ga();this.C<e.length&&(qp(this),ch(this,n,e),this.i&&4!=n&&Js(this))}},mt.cancel=function(){this.I=!0,Oa(this)},mt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function tC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jl(3),yi(17)),Oa(this),this.o=2,Wp(this)):nc(this,this.Y-n)},(mt=rc.prototype).R=function(){Zp(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},mt.T=function(){return Zp(this),this.g.concat()},mt.get=function(n,e){return ka(this.h,n)?this.h[n]:e},mt.set=function(n,e){ka(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},mt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Kp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ds(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ds){this.g=void 0!==e?e:n.g,dh(this,n.j),this.s=n.s,hh(this,n.i),Qp(this,n.m),this.l=n.l,e=n.h;var t=new ic;t.i=e.i,e.g&&(t.g=new rc(e.g),t.h=e.h),tw(this,t),this.o=n.o}else n&&(t=String(n).match(Kp))?(this.g=!!e,dh(this,t[1]||"",!0),this.s=fh(t[2]||""),hh(this,t[3]||"",!0),Qp(this,t[4]),this.l=fh(t[5]||"",!0),tw(this,t[6]||"",!0),this.o=fh(t[7]||"")):(this.g=!!e,this.h=new ic(null,this.g))}function Vo(n){return new Ds(n)}function dh(n,e,t){n.j=t?fh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hh(n,e,t){n.i=t?fh(e,!0):e}function Qp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function tw(n,e,t){e instanceof ic?(n.h=e,function lC(n,e){e&&!n.j&&(Pu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(vv(this,r),_v(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Xs(e,uC)),n.h=new ic(e,n.g))}function On(n,e,t){n.h.set(e,t)}function Jp(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xs(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ds.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xs(e,Nu,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xs(e,Nu,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xs(t,"/"==t.charAt(0)?rw:TS,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xs(t,AS)),n.join("")};var Nu=/[#\/\?@]/g,TS=/[#\?:]/g,rw=/[#\?]/g,uC=/[#\?@]/g,AS=/#/g;function ic(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pu(n){n.g||(n.g=new rc,n.h=0,n.i&&function Yp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function vv(n,e){Pu(n),e=Ou(n,e),ka(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ka((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Zp(n)))}function Xp(n,e){return Pu(n),e=Ou(n,e),ka(n.g.h,e)}function _v(n,e,t){vv(n,e),0<t.length&&(n.i=null,n.g.set(Ou(n,e),Tp(t)),n.h+=t.length)}function Ou(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function iw(n){this.l=n||dC,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ea&&Lt.g.Ea()&&Lt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=ic.prototype).add=function(n,e){Pu(this),this.i=null,n=Ou(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},mt.forEach=function(n,e){Pu(this),this.g.forEach(function(t,r){UD(t,function(o){n.call(e,o,r,this)},this)},this)},mt.T=function(){Pu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},mt.R=function(n){Pu(this);var e=[];if("string"==typeof n)Xp(this,n)&&(e=BD(e,this.g.get(Ou(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=BD(e,n[t])}return e},mt.set=function(n,e){return Pu(this),this.i=null,Xp(this,n=Ou(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},mt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var dC=10;function sw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ow(n){return n.h?1:n.g?n.g.size:0}function Ev(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function wv(n,e){n.g?n.g.add(e):n.h=e}function sc(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Iv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Tp(n.i)}function eg(){}function aw(){this.g=new eg}function uw(n,e,t){const r=t||"";try{yv(n,function(o,u){let h=o;Wl(o)&&(h=av(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function ph(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function gh(n){this.l=n.$b||null,this.j=n.ib||!1}function mh(n,e){Vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iw.prototype.cancel=function(){if(this.i=Iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},eg.prototype.stringify=function(n){return Lt.JSON.stringify(n,void 0)},eg.prototype.parse=function(n){return Lt.JSON.parse(n,void 0)},Lr(gh,hv),gh.prototype.g=function(){return new mh(this.l,this.j)},gh.prototype.i=function(n){return function(){return n}}({}),Lr(mh,Vr);var bv=0;function cw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function yh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vh(n)}function vh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=mh.prototype).open=function(n,e){if(this.readyState!=bv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vh(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Lt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yh(this)),this.readyState=bv},mt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vh(this)),this.g&&(this.readyState=3,vh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Lt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},mt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yh(this):vh(this),3==this.readyState&&cw(this)}},mt.Ua=function(n){this.g&&(this.response=this.responseText=n,yh(this))},mt.Ta=function(n){this.g&&(this.response=n,yh(this))},mt.ha=function(){this.g&&yh(this)},mt.setRequestHeader=function(n,e){this.v.append(n,e)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _h=Lt.JSON.parse;function Er(n){Vr.call(this),this.headers=new rc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tg,this.K=this.L=!1}Lr(Er,Vr);var tg="",eo=/^https?$/i,hC=["POST","PUT"];function Eh(n){return"content-type"==n.toLowerCase()}function dw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,hw(n),ku(n)}function hw(n){n.D||(n.D=!0,Zr(n,"complete"),Zr(n,"error"))}function fw(n){if(n.h&&void 0!==Ky&&(!n.C[1]||4!=Uo(n)||2!=n.ba()))if(n.v&&4==Uo(n))lv(n.Fa,0,n);else if(Zr(n,"readystatechange"),4==Uo(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Kp)[1]||null;if(!o&&Lt.self&&Lt.self.location){var u=Lt.self.location.protocol;o=u.substr(0,u.length-1)}r=!eo.test(o?o.toLowerCase():"")}t=r}if(t)Zr(n,"complete"),Zr(n,"success");else{n.m=6;try{var h=2<Uo(n)?n.g.statusText:""}catch(E){h=""}n.j=h+" ["+n.ba()+"]",hw(n)}}finally{ku(n)}}}function ku(n,e){if(n.g){wh(n);const t=n.g,r=n.C[0]?Kd:null;n.g=null,n.C=null,e||Zr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function wh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function Uo(n){return n.g?n.g.readyState:0}function pw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ng(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function gw(n){let e="";return Jy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):On(n,e,t))}function Fu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Cv(n){this.za=0,this.l=[],this.h=new Vp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fu("baseRetryDelayMs",5e3,n),this.$a=Fu("retryDelaySeedMs",1e4,n),this.Ya=Fu("forwardChannelMaxRetries",2,n),this.ra=Fu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new iw(n&&n.concurrentRequestLimit),this.Ca=new aw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Tv(n){if(fC(n),3==n.G){var e=n.V++,t=Vo(n.F);On(t,"SID",n.J),On(t,"RID",e),On(t,"TYPE","terminate"),Lu(n,t),(e=new lh(n,n.h,e,void 0)).K=2,e.v=Jp(Vo(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(t=Lt.navigator.sendBeacon(e.v.toString(),"")),!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Nv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Js(e)}Rv(n)}function rg(n){n.g&&(Sv(n),n.g.cancel(),n.g=null)}function fC(n){rg(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),ac(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function Ih(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&oc(n)}function oc(n){sw(n.i)||n.m||(n.m=!0,uv(n.Ha,n),n.C=0)}function ig(n,e){var t;t=e?e.m:n.V++;const r=Vo(n.F);On(r,"SID",n.J),On(r,"RID",t),On(r,"AID",n.U),Lu(n,r),n.o&&n.s&&ng(r,n.o,n.s),t=new lh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=yw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),wv(n.i,t),zp(t,r,e)}function Lu(n,e){n.j&&yv({},function(t,r){On(e,r,t)})}function yw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Fr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let g=!0;for(let E=0;E<t;E++){let b=o[E].h;const A=o[E].g;if(b-=u,0>b)u=Math.max(0,o[E].h-100),g=!1;else try{uw(A,h,"req"+b+"_")}catch(S){r&&r(A)}}if(g){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function vw(n){n.g||n.u||(n.Y=1,uv(n.Ga,n),n.A=0)}function Av(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xl(Fr(n.Ga,n),_w(n,n.A)),n.A++,0))}function Sv(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Mv(n){n.g=new lh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Vo(n.oa);On(e,"RID","rpc"),On(e,"SID",n.J),On(e,"CI",n.N?"0":"1"),On(e,"AID",n.U),Lu(n,e),On(e,"TYPE","xmlhttp"),n.o&&n.s&&ng(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Jp(Vo(e)),t.s=null,t.U=!0,iC(t,n)}function ac(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function xv(n,e){var t=null;if(n.g==e){ac(n),Sv(n),n.g=null;var r=2}else{if(!Ev(n.i,e))return;t=e.D,sc(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Zr(r=Up(),new J0(r,t,e,o)),oc(n)}else vw(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function mw(n,e){return!(ow(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xl(Fr(n.Ha,n,e),_w(n,n.C)),n.C++,0)))}(n,e)||2==r&&Av(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Fa(n,5);break;case 4:Fa(n,10);break;case 3:Fa(n,6);break;default:Fa(n,2)}}function _w(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Fa(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Fr(n.jb,n);t||(t=new Ds("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||dh(t,"https"),Jp(t)),function lw(n,e){const t=new Vp;if(Lt.Image){const r=new Image;r.onload=Yd(ph,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yd(ph,t,r,"TestLoadImage: error",!1,e),r.onabort=Yd(ph,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yd(ph,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yi(2);n.G=0,n.j&&n.j.va(e),Rv(n),fC(n)}function Rv(n){n.G=0,n.I=-1,n.j&&((0!=Iv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Tp(n.l),n.l.length=0),n.j.ua())}function Ew(n,e,t){let r=function CS(n){return n instanceof Ds?Vo(n):new Ds(n,void 0)}(t);if(""!=r.i)e&&hh(r,e+"."+r.i),Qp(r,r.m);else{const o=Lt.location;r=function aC(n,e,t,r){var o=new Ds(null,void 0);return n&&dh(o,n),e&&hh(o,e),t&&Qp(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Jy(n.aa,function(o,u){On(r,u,o)}),t=n.sa,(e=n.D)&&t&&On(r,e,t),On(r,"VER",n.ma),Lu(n,r),r}function Nv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new gh({ib:!0}):n.qa)).L=n.H,e}function Pv(){}function sg(){if(Zl&&!(10<=Number(U0)))throw Error("Environmental error: no available transport.")}function Di(n,e){Vr.call(this),this.g=new Cv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Qd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cs(this)}function ww(n){uh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oi(){fv.call(this),this.status=1}function Cs(n){this.g=n}(mt=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pv.g(),this.C=function jp(n){return n.h||(n.h=n.i())}(this.u?this.u:pv),this.g.onreadystatechange=Fr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void dw(this,u)}n=t||"";const o=new rc(this.headers);r&&yv(r,function(u,h){o.set(h,u)}),r=function Yy(n){e:{var e=Eh;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Lt.FormData&&n instanceof Lt.FormData,!(0<=Su(hC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wh(this),0<this.B&&((this.K=function Dv(n){return Zl&&function GD(){return function F0(n){var e=HD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=jD(String(Sp)).split("."),t=jD("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Qy(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Qy(0==o[2].length,0==u[2].length)||Qy(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fr(this.pa,this)):this.A=lv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){dw(this,u)}},mt.pa=function(){void 0!==Ky&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zr(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zr(this,"complete"),Zr(this,"abort"),ku(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ku(this,!0)),Er.Z.M.call(this)},mt.Fa=function(){this.s||(this.F||this.v||this.l?fw(this):this.cb())},mt.cb=function(){fw(this)},mt.ba=function(){try{return 2<Uo(this)?this.g.status:-1}catch(n){return-1}},mt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},mt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_h(e)}},mt.Da=function(){return this.m},mt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=Cv.prototype).ma=8,mt.G=1,mt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},mt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new lh(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Xd(u),Qn(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yw(this,o,e),On(t=Vo(this.F),"RID",n),On(t,"CVER",22),this.D&&On(t,"X-HTTP-Session-Id",this.D),Lu(this,t),this.o&&u&&ng(t,this.o,u),wv(this.i,o),this.Ra&&On(t,"TYPE","init"),this.ja?(On(t,"$req",e),On(t,"SID","null"),o.$=!0,zp(o,t,null)):zp(o,t,e),this.G=2}}else 3==this.G&&(n?ig(this,n):0==this.l.length||sw(this.i)||ig(this))},mt.Ga=function(){if(this.u=null,Mv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xl(Fr(this.bb,this),n)}},mt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yi(10),rg(this),Mv(this))},mt.ab=function(){null!=this.v&&(this.v=null,rg(this),Av(this),yi(19))},mt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),yi(2)):(this.h.info("Failed to ping google.com"),yi(1))},(mt=Pv.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Oa=function(){},sg.prototype.g=function(n,e){return new Di(n,e)},Lr(Di,Vr),Di.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),uv(Fr(n.hb,n,e))),yi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Ew(n,null,n.W),oc(n)},Di.prototype.close=function(){Tv(this.g)},Di.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ih(this.g,e)}else this.v?((e={}).__data__=av(n),Ih(this.g,e)):Ih(this.g,n)},Di.prototype.M=function(){this.g.j=null,delete this.j,Tv(this.g),delete this.g,Di.Z.M.call(this)},Lr(ww,uh),Lr(oi,fv),Lr(Cs,Pv),Cs.prototype.xa=function(){Zr(this.g,"a")},Cs.prototype.wa=function(n){Zr(this.g,new ww(n))},Cs.prototype.va=function(n){Zr(this.g,new oi(n))},Cs.prototype.ua=function(){Zr(this.g,"b")},sg.prototype.createWebChannel=sg.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,Bp.NO_ERROR=0,Bp.TIMEOUT=8,Bp.HTTP_ERROR=6,X0.COMPLETE="complete",$p.EventType=ec,ec.OPEN="a",ec.CLOSE="b",ec.ERROR="c",ec.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var pC=Fo.createWebChannelTransport=function(){return new sg},gC=Fo.getStatEventTarget=function(){return Up()},Iw=Fo.ErrorCode=Bp,bh=Fo.EventType=X0,mC=Fo.Event=Ru,og=Fo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yC=Fo.FetchXmlHttpFactory=gh,Dh=Fo.WebChannel=$p,vC=Fo.XhrIo=Er;const bw="@firebase/firestore";class br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");let Vu="9.8.0";const Bo=new xa.Yd("@firebase/firestore");function uc(){return Bo.logLevel}function Ke(n,...e){if(Bo.logLevel<=xa.in.DEBUG){const t=e.map(ag);Bo.debug(`Firestore (${Vu}): ${n}`,...t)}}function dr(n,...e){if(Bo.logLevel<=xa.in.ERROR){const t=e.map(ag);Bo.error(`Firestore (${Vu}): ${n}`,...t)}}function Ch(n,...e){if(Bo.logLevel<=xa.in.WARN){const t=e.map(ag);Bo.warn(`Firestore (${Vu}): ${n}`,...t)}}function ag(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${Vu}) INTERNAL ASSERTION FAILED: `+n;throw dr(e),new Error(e)}function xt(n,e){n||ht()}function st(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Dw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(br.UNAUTHENTICATED))}shutdown(){}}class Tw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class EC{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let h=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ur,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=h;e.enqueueRetryable((0,Ae.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},E=b=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>E(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?E(b):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ur)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new Dw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new br(e)}}class Aw{constructor(e,t,r){this.type="FirstParty",this.user=br.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Sw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Aw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new Mw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Vi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function xw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Vi.A=-1;class kv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=xw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Uu(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Rw(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new hr(0,0))}static max(){return new Mt(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Fv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ug{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ug.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ug?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends ug{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const SS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Br extends ug{construct(e,t,r){return new Br(e,t,r)}static isValidIdentifier(e){return SS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Br(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new je(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new je(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new je(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===g?(h=!h,o++):"."!==g||h?(r+=g,o++):(u(),o++)}if(u(),h)throw new je(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Br(t)}static emptyPath(){return new Br([])}}class Th{constructor(e){this.fields=e,e.sort(Br.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new sr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const xS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(n){if(xt(!!n),"string"==typeof n){let e=0;const t=xS.exec(n);if(xt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function La(n){return"string"==typeof n?sr.fromBase64String(n):sr.fromUint8Array(n)}function lg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function DC(n){const e=n.mapValue.fields.__previous_value__;return lg(e)?DC(e):e}function Bu(n){const e=jo(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}class Nw{constructor(e,t,r,o,u,h,g,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.useFetchStreams=E}}class $o{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $o("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}function cc(n){return null==n}function cg(n){return 0===n&&1/n==-1/0}function Pw(n){return"number"==typeof n&&Number.isInteger(n)&&!cg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(ln.fromString(e))}static fromName(e){return new rt(ln.fromString(e).popFirst(5))}static empty(){return new rt(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new ln(e.slice()))}}const to={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dg={nullValue:"NULL_VALUE"};function dc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lg(n)?4:Lw(n)?9007199254740991:10:ht()}function Ho(n,e){if(n===e)return!0;const t=dc(n);if(t!==dc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bu(n).isEqual(Bu(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=jo(r.timestampValue),h=jo(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,La(n.bytesValue).isEqual(La(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return zn(r.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return zn(r.integerValue)===zn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=zn(r.doubleValue),h=zn(o.doubleValue);return u===h?cg(u)===cg(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Uu(n.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Fv(u)!==Fv(h))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===h[g]||!Ho(u[g],h[g])))return!1;return!0}(n,e);default:return ht()}var o}function hg(n,e){return void 0!==(n.values||[]).find(t=>Ho(t,e))}function Va(n,e){if(n===e)return 0;const t=dc(n),r=dc(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=zn(o.integerValue||o.doubleValue),g=zn(u.integerValue||u.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(n,e);case 3:return Ow(n.timestampValue,e.timestampValue);case 4:return Ow(Bu(n),Bu(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,u){const h=La(o),g=La(u);return h.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),g=u.split("/");for(let E=0;E<h.length&&E<g.length;E++){const b=Ht(h[E],g[E]);if(0!==b)return b}return Ht(h.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Ht(zn(o.latitude),zn(u.latitude));return 0!==h?h:Ht(zn(o.longitude),zn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],g=u.values||[];for(let E=0;E<h.length&&E<g.length;++E){const b=Va(h[E],g[E]);if(b)return b}return Ht(h.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===to.mapValue&&u===to.mapValue)return 0;if(o===to.mapValue)return 1;if(u===to.mapValue)return-1;const h=o.fields||{},g=Object.keys(h),E=u.fields||{},b=Object.keys(E);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const S=Ht(g[A],b[A]);if(0!==S)return S;const $=Va(h[g[A]],E[b[A]]);if(0!==$)return $}return Ht(g.length,b.length)}(n.mapValue,e.mapValue);default:throw ht()}}function Ow(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=jo(n),r=jo(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function hc(n){return kw(n)}function kw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=jo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?La(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=kw(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const g of o)h?h=!1:u+=",",u+=`${g}:${kw(r.fields[g])}`;return u+"}"}(n.mapValue):ht();var e}function ju(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ah(n){return!!n&&"integerValue"in n}function Sh(n){return!!n&&"arrayValue"in n}function es(n){return!!n&&"nullValue"in n}function Fw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fc(n){return!!n&&"mapValue"in n}function Mh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return lc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Lv(n){return"nullValue"in n?dg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ju($o.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function Vw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ju($o.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?to:ht()}function Vv(n,e){const t=Va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Uw(n,e){const t=Va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mh(t)}setAll(e){let t=Br.emptyPath(),r={},o=[];e.forEach((h,g)=>{if(!t.isImmediateParentOf(g)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=g.popLast()}h?r[g.lastSegment()]=Mh(h):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());fc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];fc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){lc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Kr(Mh(this.value))}}function Bw(n){const e=[];return lc(n.fields,(t,r)=>{const o=new Br([t]);if(fc(r)){const u=Bw(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Th(e)}class Un{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Un(e,0,Mt.min(),Mt.min(),Kr.empty(),0)}static newFoundDocument(e,t,r){return new Un(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new Un(e,2,t,Mt.min(),Kr.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,Mt.min(),Kr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function xh(n){return n.fields.find(e=>2===e.kind)}function Ui(n){return n.fields.filter(e=>2!==e.kind)}fg.UNKNOWN_ID=-1;class Rh{constructor(e,t){this.fieldPath=e,this.kind=t}}class pc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pc(0,Ts.min())}}function jw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Mt.fromTimestamp(1e9===r?new hr(t+1,0):new hr(t,r));return new Ts(o,rt.empty(),e)}function RS(n){return new Ts(n.readTime,n.key,-1)}class Ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ts(Mt.min(),rt.empty(),-1)}static max(){return new Ts(Mt.max(),rt.empty(),-1)}}function $w(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}class fr{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Yr.RED,this.left=null!=o?o:Yr.EMPTY,this.right=null!=u?u:Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Yr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Yr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Yr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CC(this.data.getIterator())}getIteratorFrom(e){return new CC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class CC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ua(n){return n.hasNext()?n.getNext():void 0}class Hw{constructor(e,t=null,r=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.P=null}}function Gw(n,e=null,t=[],r=[],o=null,u=null,h=null){return new Hw(n,e,t,r,o,u,h)}function $u(n){const e=st(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+hc(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hc(r)).join(",")),e.P=t}return e.P}function Hu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!PS(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ho(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PC(n.startAt,e.startAt)&&PC(n.endAt,e.endAt)}function gc(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ph(n,e){return n.filters.filter(t=>t instanceof jr&&t.field.isEqual(e))}function qw(n,e,t){let r=dg,o=!0;for(const u of Ph(n,e)){let h=dg,g=!0;switch(u.op){case"<":case"<=":h=Lv(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,g=!1;break;case"!=":case"not-in":h=dg}Vv({value:r,inclusive:o},{value:h,inclusive:g})<0&&(r=h,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];Vv({value:r,inclusive:o},{value:h,inclusive:t.inclusive})<0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}function Uv(n,e,t){let r=to,o=!0;for(const u of Ph(n,e)){let h=to,g=!0;switch(u.op){case">=":case">":h=Vw(u.value),g=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,g=!1;break;case"!=":case"not-in":h=to}Uw({value:r,inclusive:o},{value:h,inclusive:g})>0&&(r=h,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];Uw({value:r,inclusive:o},{value:h,inclusive:t.inclusive})>0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}class jr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new TC(e,t,r):"array-contains"===t?new Ww(e,r):"in"===t?new MC(e,r):"not-in"===t?new xC(e,r):"array-contains-any"===t?new RC(e,r):new jr(e,t,r)}static V(e,t,r){return"in"===t?new AC(e,r):new NS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Va(t,this.value)):null!==t&&dc(this.value)===dc(t)&&this.v(Va(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class TC extends jr{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.v(t)}}class AC extends jr{constructor(e,t){super(e,"in",t),this.keys=SC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class NS extends jr{constructor(e,t){super(e,"not-in",t),this.keys=SC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function SC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class Ww extends jr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sh(t)&&hg(t.arrayValue,this.value)}}class MC extends jr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hg(this.value.arrayValue,t)}}class xC extends jr{constructor(e,t){super(e,"not-in",t)}matches(e){if(hg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hg(this.value.arrayValue,t)}}class RC extends jr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hg(this.value.arrayValue,r))}}class Gu{constructor(e,t){this.position=e,this.inclusive=t}}class Oh{constructor(e,t="asc"){this.field=e,this.dir=t}}function PS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function NC(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?rt.comparator(rt.fromName(h.referenceValue),t.key):Va(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function PC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ho(n.position[t],e.position[t]))return!1;return!0}class Go{constructor(e,t=null,r=[],o=[],u=null,h="F",g=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=E,this.D=null,this.C=null}}function kh(n,e,t,r,o,u,h,g){return new Go(n,e,t,r,o,u,h,g)}function mc(n){return new Go(n)}function pg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function zo(n){for(const e of n.filters)if(e.S())return e.field;return null}function gg(n){return null!==n.collectionGroup}function Ba(n){const e=st(n);if(null===e.D){e.D=[];const t=zo(e),r=pg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Oh(t)),e.D.push(new Oh(Br.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Oh(Br.keyField(),u))}}}return e.D}function Ci(n){const e=st(n);if(!e.C)if("F"===e.limitType)e.C=Gw(e.path,e.collectionGroup,Ba(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ba(e))t.push(new Oh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Gu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Gu(e.startAt.position,e.startAt.inclusive):null;e.C=Gw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Zw(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zu(n,e){return Hu(Ci(n),Ci(e))&&n.limitType===e.limitType}function mg(n){return`${$u(Ci(n))}|lt:${n.limitType}`}function yc(n){return`Query(target=${function zw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${hc(r.value)}`;var r}).join(", ")}]`),cc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>hc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>hc(t)).join(",")),`Target(${e})`}(Ci(n))}; limitType=${n.limitType})`}function Kw(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):rt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const g=NC(o,u,h);return o.inclusive?g<=0:g<0}(t.startAt,Ba(t),r)||t.endAt&&!function(o,u,h){const g=NC(o,u,h);return o.inclusive?g>=0:g>0}(t.endAt,Ba(t),r)));var t,r}function kC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FC(n){return(e,t)=>{let r=!1;for(const o of Ba(n)){const u=OS(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function OS(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(o,u,h){const g=u.data.field(o),E=h.data.field(o);return null!==g&&null!==E?Va(g,E):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function Bv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cg(e)?"-0":e}}function Yw(n){return{integerValue:""+n}}function Qw(n,e){return Pw(e)?Yw(e):Bv(n,e)}class yg{constructor(){this._=void 0}}function LC(n,e,t){return n instanceof qu?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Wu?Xw(n,e):n instanceof ja?vg(n,e):function(r,o){const u=jv(r,o),h=$v(u)+$v(r.k);return Ah(u)&&Ah(r.k)?Yw(h):Bv(r.M,h)}(n,e)}function Jw(n,e,t){return n instanceof Wu?Xw(n,e):n instanceof ja?vg(n,e):t}function jv(n,e){return n instanceof Fh?Ah(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qu extends yg{}class Wu extends yg{constructor(e){super(),this.elements=e}}function Xw(n,e){const t=_g(e);for(const r of n.elements)t.some(o=>Ho(o,r))||t.push(r);return{arrayValue:{values:t}}}class ja extends yg{constructor(e){super(),this.elements=e}}function vg(n,e){let t=_g(e);for(const r of n.elements)t=t.filter(o=>!Ho(o,r));return{arrayValue:{values:t}}}class Fh extends yg{constructor(e,t){super(),this.M=e,this.k=t}}function $v(n){return zn(n.integerValue||n.doubleValue)}function _g(n){return Sh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Lh{constructor(e,t){this.field=e,this.transform=t}}class kS{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wg{}function FS(n,e,t){n instanceof Vh?function(r,o,u){const h=r.value.clone(),g=$C(r.fieldTransforms,o,u.transformResults);h.setAll(g),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof vc?function(r,o,u){if(!Eg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=$C(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(jC(r)),g.setAll(h),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function eI(n,e,t){var o;n instanceof Vh?function(r,o,u){if(!Eg(r.precondition,o))return;const h=r.value.clone(),g=HC(r.fieldTransforms,u,o);h.setAll(g),o.convertToFoundDocument(BC(o),h).setHasLocalMutations()}(n,e,t):n instanceof vc?function(r,o,u){if(!Eg(r.precondition,o))return;const h=HC(r.fieldTransforms,u,o),g=o.data;g.setAll(jC(r)),g.setAll(h),o.convertToFoundDocument(BC(o),g).setHasLocalMutations()}(n,e,t):Eg(n.precondition,o=e)&&o.convertToNoDocument(Mt.min())}function LS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=jv(r.transform,o||null);null!=u&&(null==t&&(t=Kr.empty()),t.set(r.field,u))}return t||null}function UC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Uu(t,r,(o,u)=>function VC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wu&&r instanceof Wu||t instanceof ja&&r instanceof ja?Uu(t.elements,r.elements,Ho):t instanceof Fh&&r instanceof Fh?Ho(t.k,r.k):t instanceof qu&&r instanceof qu);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function BC(n){return n.isFoundDocument()?n.version:Mt.min()}class Vh extends wg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class vc extends wg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function jC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $C(n,e,t){const r=new Map;xt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,g=e.data.field(u.field);r.set(u.field,Jw(h,g,t[o]))}return r}function HC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,LC(u,h,e))}return r}class i extends wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class s extends wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class a{constructor(e){this.count=e}}var l,c;function f(n){switch(n){default:return ht();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function y(n){if(void 0===n)return dr("GRPC error has no .code"),ve.UNKNOWN;switch(n){case l.OK:return ve.OK;case l.CANCELLED:return ve.CANCELLED;case l.UNKNOWN:return ve.UNKNOWN;case l.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case l.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case l.INTERNAL:return ve.INTERNAL;case l.UNAVAILABLE:return ve.UNAVAILABLE;case l.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case l.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case l.NOT_FOUND:return ve.NOT_FOUND;case l.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case l.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case l.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case l.ABORTED:return ve.ABORTED;case l.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case l.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case l.DATA_LOSS:return ve.DATA_LOSS;default:return ht()}}(c=l||(l={}))[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS";class _{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){lc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return bC(this.inner)}size(){return this.innerSize}}const I=new fr(rt.comparator);function D(){return I}const T=new fr(rt.comparator);function O(...n){let e=T;for(const t of n)e=e.insert(t.key,t);return e}function G(){return new _(n=>n.toString(),(n,e)=>n.isEqual(e))}const ne=new fr(rt.comparator),Me=new kn(rt.comparator);function xe(...n){let e=Me;for(const t of n)e=e.add(t);return e}const tt=new kn(Ht);function ct(){return tt}class Pe{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Et.createSynthesizedTargetChangeForCurrentChange(e,t)),new Pe(Mt.min(),r,ct(),D(),xe())}}class Et{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Et(sr.EMPTY_BYTE_STRING,t,xe(),xe(),xe())}}class Qt{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class gn{constructor(e,t){this.targetId=e,this.$=t}}class Ti{constructor(e,t,r=sr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class $a{constructor(){this.B=0,this.L=bg(),this.U=sr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=xe(),t=xe(),r=xe();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ht()}}),new Et(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=bg()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Hv{constructor(e){this.nt=e,this.st=new Map,this.it=D(),this.rt=Ig(),this.ot=new kn(Ht)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(gc(u))if(0===r){const h=new rt(u.path);this.ct(t,h,Un.newNoDocument(h,Mt.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const g=this.wt(h);if(g){if(u.current&&gc(g.target)){const E=new rt(g.target.path);null!==this.it.get(E)||this.It(h,E)||this.ct(h,E,Un.newNoDocument(E,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=xe();this.rt.forEach((u,h)=>{let g=!0;h.forEachWhile(E=>{const b=this.wt(E);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new Pe(e,t,this.ot,this.it,r);return this.it=D(),this.rt=Ig(),this.ot=new kn(Ht),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new $a,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new kn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new $a),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Ig(){return new fr(rt.comparator)}function bg(){return new fr(rt.comparator)}const Gv={asc:"ASCENDING",desc:"DESCENDING"},zv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class qv{constructor(e,t){this.databaseId=e,this.N=t}}function Zu(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dg(n,e){return n.N?e.toBase64():e.toUint8Array()}function Wv(n,e){return Zu(n,e.toTimestamp())}function ai(n){return xt(!!n),Mt.fromTimestamp(function(e){const t=jo(e);return new hr(t.seconds,t.nanos)}(n))}function GC(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function VS(n){const e=ln.fromString(n);return xt(WS(e)),e}function Zv(n,e){return GC(n.databaseId,e.path)}function Ha(n,e){const t=VS(e);if(t.get(1)!==n.databaseId.projectId)throw new je(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(BS(t))}function zC(n,e){return GC(n.databaseId,e)}function US(n){const e=VS(n);return 4===e.length?ln.emptyPath():BS(e)}function Kv(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BS(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jS(n,e,t){return{name:Zv(n,e),fields:t.value.mapValue.fields}}function $S(n,e,t){const r=Ha(n,e.name),o=ai(e.updateTime),u=new Kr({mapValue:{fields:e.fields}}),h=Un.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Yv(n,e){let t;if(e instanceof Vh)t={update:jS(n,e.key,e.value)};else if(e instanceof i)t={delete:Zv(n,e.key)};else if(e instanceof vc)t={update:jS(n,e.key,e.data),updateMask:RR(e.fieldMask)};else{if(!(e instanceof s))return ht();t={verify:Zv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof qu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Wu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ja)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Fh)return{fieldPath:u.field.canonicalString(),increment:h.k};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Wv(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ht()),t;var o}function qC(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Dr.updateTime(ai(o.updateTime)):void 0!==o.exists?Dr.exists(o.exists):Dr.none():Dr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let g=null;"setToServerValue"in h?(xt("REQUEST_TIME"===h.setToServerValue),g=new qu):"appendMissingElements"in h?g=new Wu(h.appendMissingElements.values||[]):"removeAllFromArray"in h?g=new ja(h.removeAllFromArray.values||[]):"increment"in h?g=new Fh(u,h.increment):ht();const E=Br.fromServerFormat(h.fieldPath);return new Lh(E,g)}(n,o)):[];var o;if(e.update){const o=Ha(n,e.update.name),u=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Th((e.updateMask.fieldPaths||[]).map(b=>Br.fromServerFormat(b)));return new vc(o,u,h,t,r)}return new Vh(o,u,t,r)}if(e.delete){const o=Ha(n,e.delete);return new i(o,t)}if(e.verify){const o=Ha(n,e.verify);return new s(o,t)}return ht()}function HS(n,e){return{documents:[zC(n,e.path)]}}function GS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const b=E.map(A=>function(S){if("=="===S.op){if(Fw(S.value))return{unaryFilter:{field:Cg(S.field),op:"IS_NAN"}};if(es(S.value))return{unaryFilter:{field:Cg(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Fw(S.value))return{unaryFilter:{field:Cg(S.field),op:"IS_NOT_NAN"}};if(es(S.value))return{unaryFilter:{field:Cg(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cg(S.field),op:SR(S.op),value:S.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(b=>{return{field:Cg((A=b).field),direction:AR(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(b=e.limit,n.N||cc(b)?b:{value:b});var b,g,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function zS(n){let e=US(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){xt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=qS(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(A=>{return new Oh(Tg((S=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let g=null;t.limit&&(g=function(A){let S;return S="object"==typeof A?A.value:A,cc(S)?null:S}(t.limit));let E=null;var A;t.startAt&&(E=new Gu((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Gu(A.values||[],!A.before)}(t.endAt)),kh(e,o,h,u,g,"F",E,b)}function qS(n){return n?void 0!==n.unaryFilter?[xR(n)]:void 0!==n.fieldFilter?[MR(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>qS(e)).reduce((e,t)=>e.concat(t)):ht():[]}function AR(n){return Gv[n]}function SR(n){return zv[n]}function Cg(n){return{fieldPath:n.canonicalString()}}function Tg(n){return Br.fromServerFormat(n.fieldPath)}function MR(n){return jr.create(Tg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function xR(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Tg(n.unaryFilter.field);return jr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Tg(n.unaryFilter.field);return jr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Tg(n.unaryFilter.field);return jr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Tg(n.unaryFilter.field);return jr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function RR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZS(e)),e=NR(n.get(t),e);return ZS(e)}function NR(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ZS(n){return n+"\x01\x01"}function Ga(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&ht(),n.charAt(h+1)){case"\x01":const g=n.substring(u,h);let E;0===o.length?E=g:(o+=g,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:ht()}u=h+2}return new ln(r)}const KS=["userId","batchId"];function tI(n,e){return[n,Bi(e)]}function YS(n,e,t){return[n,Bi(e),t]}const PR={},OR=["prefixPath","collectionGroup","readTime","documentId"],kR=["prefixPath","collectionGroup","documentId"],FR=["collectionGroup","readTime","prefixPath","documentId"],LR=["canonicalId","targetId"],VR=["targetId","path"],UR=["path","targetId"],BR=["collectionId","parent"],jR=["indexId","uid"],$R=["uid","sequenceNumber"],HR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GR=["indexId","uid","orderedDocumentKey"],zR=["userId","collectionPath","documentId"],qR=["userId","collectionPath","largestBatchId"],WR=["userId","collectionGroup","largestBatchId"],QS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZR=[...QS,"documentOverlays"],JS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KR=[...JS,"indexConfiguration","indexState","indexEntries"],XS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):we.reject(t)}static resolve(e){return new we((t,r)=>{t(e)})}static reject(e){return new we((t,r)=>{r(e)})}static waitFor(e){return new we((t,r)=>{let o=0,u=0,h=!1;e.forEach(g=>{++o,g.next(()=>{++u,h&&u===o&&t()},E=>r(E))}),h=!0,u===o&&t()})}static or(e){let t=we.resolve(!1);for(const r of e)t=t.next(o=>o?we.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class nI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ur,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Qv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=WC(r.target.error);this.At.reject(new Qv(e,o))}}static open(e,t,r,o){try{return new nI(t,e.transaction(o,r))}catch(u){throw new Qv(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QR(t)}}class qo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===qo.Vt((0,rn.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),Bh(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,rn.hl)())return!1;if(qo.St())return!0;const e=(0,rn.z$)(),t=qo.Vt(e),r=0<t&&t<10,o=qo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ae.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new Qv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const g=h.target.error;o("VersionError"===g.name?new je(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new je(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Qv(e,g))},u.onupgradeneeded=h=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ae.Z)(function*(){const h="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const E=nI.open(u.db,e,h?"readonly":"readwrite",r),b=o(E).next(A=>(E.bt(),A)).catch(A=>(E.abort(A),we.reject(A))).toPromise();return b.catch(()=>{}),yield E.Rt,b}catch(E){const b="FirebaseError"!==E.name&&g<3;if(Ke("SimpleDb","Transaction failed with error:",E.message,"Retrying:",b),u.close(),!b)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class YR{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bh(this.Ft.delete())}}class Qv extends je{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uh(n){return"IndexedDbTransactionError"===n.name}class QR{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bh(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),Bh(this.store.add(e))}get(e){return Bh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),Bh(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),Bh(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(h,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new we((u,h)=>{o.onerror=g=>{h(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new we((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,h,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new we((r,o)=>{t.onerror=u=>{const h=WC(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(g=>{g?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new we((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const g=h.target.result;if(!g)return void o();const E=new YR(g),b=t(g.primaryKey,g.value,E);if(b instanceof we){const A=b.catch(S=>(E.done(),we.reject(S)));r.push(A)}E.isDone?o():null===E.Lt?g.continue():g.continue(E.Lt)}}).next(()=>we.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bh(n){return new we((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=WC(r.target.error);t(o)}})}let tM=!1;function WC(n){const e=qo.Vt((0,rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tM||(tM=!0,setTimeout(()=>{throw r},0)),r}}return n}class nM extends eM{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ui(n,e){const t=st(n);return qo.xt(t.Ht,e)}class ZC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&FS(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&eI(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&eI(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Mt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&Uu(this.mutations,e.mutations,(t,r)=>UC(t,r))&&Uu(this.baseMutations,e.baseMutations,(t,r)=>UC(t,r))}}class KC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){xt(e.mutations.length===r.length);let o=ne;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new KC(e,t,r,o)}}class YC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _c{constructor(e,t,r,o,u=Mt.min(),h=Mt.min(),g=sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g}withSequenceNumber(e){return new _c(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new _c(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new _c(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class rM{constructor(e){this.Jt=e}}function iM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zv(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Zu(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jh(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:jh(e.version)}}var o,u;return r}function rI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $h(n){const e=new hr(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Ag(n,e){const t=(e.baseMutations||[]).map(u=>qC(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>qC(n.Jt,u)),o=hr.fromMillis(e.localWriteTimeMs);return new ZC(e.batchId,o,t,r)}function Jv(n){const e=$h(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$h(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var o;return void 0!==n.query.documents?(xt(1===(o=n.query).documents.length),r=Ci(mc(US(o.documents[0])))):r=Ci(zS(n.query)),new _c(r,n.targetId,0,n.lastListenSequenceNumber,e,t,sr.fromBase64String(n.resumeToken))}function sM(n,e){const t=jh(e.snapshotVersion),r=jh(e.lastLimboFreeSnapshotVersion);let o;o=gc(e.target)?HS(n.Jt,e.target):GS(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$u(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function QC(n){const e=zS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Zw(e,e.limit,"L"):e}function JC(n,e){return new YC(e.largestBatchId,qC(n.Jt,e.overlayMutation))}function oM(n,e){const t=e.path.lastSegment();return[n,Bi(e.path.popLast()),t]}class XR{getBundleMetadata(e,t){return aM(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:$h(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return aM(e).put({bundleId:(r=t).id,createTime:jh(ai(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return uM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:QC(o.bundledQuery),readTime:$h(o.readTime)};var o})}saveNamedQuery(e,t){return uM(e).put({name:(r=t).name,readTime:jh(ai(r.readTime)),bundledQuery:r.bundledQuery});var r}}function aM(n){return ui(n,"bundles")}function uM(n){return ui(n,"namedQueries")}class XC{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new XC(e,t.uid||"")}getOverlay(e,t){return Xv(e).get(oM(this.userId,t)).next(r=>r?JC(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const g=new YC(t,h);o.push(this.Xt(e,g))}),we.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Bi(h.getCollectionPath())));const u=[];return o.forEach(h=>{const g=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(Xv(e).Qt("collectionPathOverlayIndex",g))}),we.waitFor(u)}getOverlaysForCollection(e,t,r){const o=G(),u=Bi(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Xv(e).qt("collectionPathOverlayIndex",h).next(g=>{for(const E of g){const b=JC(this.M,E);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=G();let h;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xv(e).Wt({index:"collectionGroupOverlayIndex",range:g},(E,b,A)=>{const S=JC(this.M,b);u.size()<o||S.largestBatchId===h?(u.set(S.getKey(),S),h=S.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return Xv(e).put(function(r,o,u){const[h,g,E]=oM(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Yv(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Xv(n){return ui(n,"documentOverlays")}class Hh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),cg(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(La(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Lw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ht()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),rt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function eN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function lM(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=eN(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Hh.fe=new Hh;class tN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=lM(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=lM(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class nN{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class rN{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class e_{constructor(){this.De=new tN,this.Ce=new nN(this.De),this.xe=new rN(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Gh{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gh(this.indexId,this.documentKey,this.arrayValue,r)}}function zh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=cM(n.arrayValue,e.arrayValue),0!==t?t:(t=cM(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function cM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class iN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=xh(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ui(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sN{constructor(){this.qe=new eT}addToCollectionParentIndex(e,t){return this.qe.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(Ts.min())}updateCollectionGroup(e,t,r){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class eT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new kn(ln.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new kn(ln.comparator)).toArray()}}const iI=new Uint8Array(0);class oN{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new eT,this.Ge=new _(r=>$u(r),(r,o)=>Hu(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Bi(o)};return dM(e).put(u)}return we.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Rw(t),""],!1,!0);return dM(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(Ga(h.parent))}return r})}addFieldIndex(e,t){const r=sI(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=sI(e),o=oI(e),u=t_(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=t_(e);let o=!0;const u=new Map;return we.forEach(this.Qe(t),h=>this.je(e,h).next(g=>{o&&(o=!!g),u.set(h,g)})).next(()=>{if(o){let h=xe();const g=[];return we.forEach(u,(E,b)=>{var A;Ke("IndexedDbIndexManager",`Using index ${A=E,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(on=>`${on.fieldPath}:${on.kind}`).join(",")}`} to execute ${$u(t)}`);const S=function(on,qt){const an=xh(qt);if(void 0===an)return null;for(const En of Ph(on,an.fieldPath))switch(En.op){case"array-contains-any":return En.value.arrayValue.values||[];case"array-contains":return[En.value]}return null}(b,E),$=function(on,qt){const an=new Map;for(const En of Ui(qt))for(const Si of Ph(on,En.fieldPath))switch(Si.op){case"==":case"in":an.set(En.fieldPath.canonicalString(),Si.value);break;case"not-in":case"!=":return an.set(En.fieldPath.canonicalString(),Si.value),Array.from(an.values())}return null}(b,E),Y=function(on,qt){const an=[];let En=!0;for(const Si of Ui(qt)){const y_=0===Si.kind?qw(on,Si.fieldPath,on.startAt):Uv(on,Si.fieldPath,on.startAt);an.push(y_.value),En&&(En=y_.inclusive)}return new Gu(an,En)}(b,E),ue=function(on,qt){const an=[];let En=!0;for(const Si of Ui(qt)){const y_=0===Si.kind?Uv(on,Si.fieldPath,on.endAt):qw(on,Si.fieldPath,on.endAt);an.push(y_.value),En&&(En=y_.inclusive)}return new Gu(an,En)}(b,E),Ve=this.We(E,b,Y),Xe=this.We(E,b,ue),Gt=this.ze(E,b,$),Bt=this.He(E.indexId,S,Ve,Y.inclusive,Xe,ue.inclusive,Gt);return we.forEach(Bt,on=>r.Gt(on,t.limit).next(qt=>{qt.forEach(an=>{const En=rt.fromSegments(an.documentKey);h.has(En)||(h=h.add(En),g.push(En))})}))}).next(()=>g)}return we.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,h,g){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),b=E/(null!=t?t.length:1),A=[];for(let S=0;S<E;++S){const $=t?this.Je(t[S/b]):iI,Y=this.Ye(e,$,r[S%b],o),ue=this.Xe(e,$,u[S%b],h),Ve=g.map(Xe=>this.Ye(e,$,Xe,!0));A.push(...this.createRange(Y,ue,Ve))}return A}Ye(e,t,r,o){const u=new Gh(e,rt.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Gh(e,rt.empty(),t,r);return o?u.ke():u}je(e,t){const r=new iN(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let h=null;for(const g of u)r.$e(g)&&(!h||g.fields.length>h.fields.length)&&(h=g);return h})}getIndexType(e,t){let r=2;return we.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(h){let g=new kn(Br.comparator),E=!1;for(const b of h.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?E=!0:g=g.add(A.field))}for(const b of h.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new e_;for(const o of Ui(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);Hh.fe.Zt(u,h)}return r.Se()}Je(e){const t=new e_;return Hh.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new e_;return Hh.fe.Zt(ju(this.databaseId,t),r.Ne(function(o){const u=Ui(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new e_);let u=0;for(const h of Ui(e)){const g=r[u++];for(const E of o)if(this.en(t,h.fieldPath)&&Sh(g))o=this.nn(o,h,g);else{const b=E.Ne(h.kind);Hh.fe.Zt(g,b)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const g of o){const E=new e_;E.seed(g.Se()),Hh.fe.Zt(h,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof jr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sI(e),o=oI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return we.forEach(u,g=>o.get([g.indexId,this.uid]).next(E=>{h.push(function(b,A){const S=A?new pc(A.sequenceNumber,new Ts($h(A.readTime),new rt(Ga(A.documentKey)),A.largestBatchId)):pc.empty(),$=b.fields.map(([Y,ue])=>new Rh(Br.fromServerFormat(Y),ue));return new fg(b.indexId,b.collectionGroup,$,S)}(g,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ht(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=sI(e),u=oI(e);return this.rn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>we.forEach(g,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:jh(($=r).readTime),documentKey:Bi($.documentKey.path),largestBatchId:$.largestBatchId});var $})))}updateIndexEntries(e,t){const r=new Map;return we.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?we.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),we.forEach(g,E=>this.on(e,o,E).next(b=>{const A=this.un(u,E);return b.isEqual(A)?we.resolve():this.an(e,u,E,b,A)}))))})}cn(e,t,r,o){return t_(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return t_(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=t_(e);let u=new kn(zh);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,g)=>{u=u.add(new Gh(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}un(e,t){let r=new kn(zh);const o=this.Ze(t,e);if(null==o)return r;const u=xh(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Sh(h))for(const g of h.arrayValue.values||[])r=r.add(new Gh(t.indexId,e.key,this.Je(g),o))}else r=r.add(new Gh(t.indexId,e.key,iI,o));return r}an(e,t,r,o,u){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(g,E,b,A,S){const $=g.getIterator(),Y=E.getIterator();let ue=Ua($),Ve=Ua(Y);for(;ue||Ve;){let Xe=!1,Gt=!1;if(ue&&Ve){const Bt=b(ue,Ve);Bt<0?Gt=!0:Bt>0&&(Xe=!0)}else null!=ue?Gt=!0:Xe=!0;Xe?(A(Ve),Ve=Ua(Y)):Gt?(S(ue),ue=Ua($)):(ue=Ua($),Ve=Ua(Y))}}(o,u,zh,g=>{h.push(this.cn(e,t,r,g))},g=>{h.push(this.hn(e,t,r,g))}),we.waitFor(h)}rn(e){let t=1;return oI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,g)=>zh(h,g)).filter((h,g,E)=>!g||0!==zh(h,E[g-1]));const o=[];o.push(e);for(const h of r){const g=zh(h,e),E=zh(h,t);if(0===g)o[0]=e.ke();else if(g>0&&E<0)o.push(h),o.push(h.ke());else if(E>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,iI,[]],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,iI,[]]));return u}getMinOffset(e,t){let r;return we.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||$w(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Ts.min()})).next(()=>r)}}function dM(n){return ui(n,"collectionParents")}function t_(n){return ui(n,"indexEntries")}function sI(n){return ui(n,"indexConfiguration")}function oI(n){return ui(n,"indexState")}const hM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let g=0;const E=r.Wt({range:h},(A,S,$)=>(g++,$.delete()));u.push(E.next(()=>{xt(1===g)}));const b=[];for(const A of t.mutations){const S=YS(e,A.key.path,t.batchId);u.push(o.delete(S)),b.push(A.key)}return we.waitFor(u).next(()=>b)}function aI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class tT{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){xt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new tT(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ec(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Sg(e),h=Ec(e);return h.add({}).next(g=>{xt("number"==typeof g);const E=new ZC(g,t,r,o),b=function($,Y,ue){const Ve=ue.baseMutations.map(Gt=>Yv($.Jt,Gt)),Xe=ue.mutations.map(Gt=>Yv($.Jt,Gt));return{userId:Y,batchId:ue.batchId,localWriteTimeMs:ue.localWriteTime.toMillis(),baseMutations:Ve,mutations:Xe}}(this.M,this.userId,E),A=[];let S=new kn(($,Y)=>Ht($.canonicalString(),Y.canonicalString()));for(const $ of o){const Y=YS(this.userId,$.key.path,g);S=S.add($.key.path.popLast()),A.push(h.put(b)),A.push(u.put(Y,PR))}return S.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.ln[g]=E.keys()}),we.waitFor(A).next(()=>E)})}lookupMutationBatch(e,t){return Ec(e).get(t).next(r=>r?(xt(r.userId===this.userId),Ag(this.M,r)):null)}fn(e,t){return this.ln[t]?we.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ec(e).Wt({index:"userMutationsIndex",range:o},(h,g,E)=>{g.userId===this.userId&&(xt(g.batchId>=r),u=Ag(this.M,g)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ec(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ec(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Ag(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tI(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Sg(e).Wt({range:o},(h,g,E)=>{const[b,A,S]=h,$=Ga(A);if(b===this.userId&&t.path.isEqual($))return Ec(e).get(S).next(Y=>{if(!Y)throw ht();xt(Y.userId===this.userId),u.push(Ag(this.M,Y))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Ht);const o=[];return t.forEach(u=>{const h=tI(this.userId,u.path),g=IDBKeyRange.lowerBound(h),E=Sg(e).Wt({range:g},(b,A,S)=>{const[$,Y,ue]=b,Ve=Ga(Y);$===this.userId&&u.path.isEqual(Ve)?r=r.add(ue):S.done()});o.push(E)}),we.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=tI(this.userId,r),h=IDBKeyRange.lowerBound(u);let g=new kn(Ht);return Sg(e).Wt({range:h},(E,b,A)=>{const[S,$,Y]=E,ue=Ga($);S===this.userId&&r.isPrefixOf(ue)?ue.length===o&&(g=g.add(Y)):A.done()}).next(()=>this.dn(e,g))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ec(e).get(u).next(h=>{if(null===h)throw ht();xt(h.userId===this.userId),r.push(Ag(this.M,h))}))}),we.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return fM(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),we.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return we.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Sg(e).Wt({range:r},(u,h,g)=>{if(u[0]===this.userId){const E=Ga(u[1]);o.push(E)}else g.done()}).next(()=>{xt(0===o.length)})})}containsKey(e,t){return pM(e,this.userId,t)}wn(e){return gM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pM(n,e,t){const r=tI(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Sg(n).Wt({range:u,jt:!0},(g,E,b)=>{const[A,S,$]=g;A===e&&S===o&&(h=!0),b.done()}).next(()=>h)}function Ec(n){return ui(n,"mutations")}function Sg(n){return ui(n,"documentMutations")}function gM(n){return ui(n,"mutationQueues")}class qh{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new qh(0)}static yn(){return new qh(-1)}}class aN{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new qh(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Mt.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mg(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Mg(e).Wt((h,g)=>{const E=Jv(g);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>we.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Mg(e).Wt((r,o)=>{const u=Jv(o);t(u)})}pn(e){return mM(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}In(e,t){return mM(e).put("targetGlobalKey",t)}Tn(e,t){return Mg(e).put(sM(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$u(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Mg(e).Wt({range:o,index:"queryTargetsIndex"},(h,g,E)=>{const b=Jv(g);Hu(t,b.target)&&(u=b,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=wc(e);return t.forEach(h=>{const g=Bi(h.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,h))}),we.waitFor(o)}removeMatchingKeys(e,t,r){const o=wc(e);return we.forEach(t,u=>{const h=Bi(u.path);return we.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=wc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=wc(e);let u=xe();return o.Wt({range:r,jt:!0},(h,g,E)=>{const b=Ga(h[1]),A=new rt(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Bi(t.path),o=IDBKeyRange.bound([r],[Rw(r)],!1,!0);let u=0;return wc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,g],E,b)=>{0!==h&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Mg(e).get(t).next(r=>r?Jv(r):null)}}function Mg(n){return ui(n,"targets")}function mM(n){return ui(n,"targetGlobal")}function wc(n){return ui(n,"targetDocuments")}function Wh(n){return nT.apply(this,arguments)}function nT(){return nT=(0,Ae.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==XS)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),nT.apply(this,arguments)}function yM([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class uN{constructor(e){this.An=e,this.buffer=new kn(yM),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lN{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ae.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Uh(o)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Wh(o)}yield t.Sn(e)}))}}class cN{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return we.resolve(Vi.A);const r=new uN(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(hM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hM):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,h,g,E,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,g=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(b=Date.now(),uc()<=xa.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-A}ms\n\tDetermined least recently used ${o} in `+(g-h)+`ms\n\tRemoved ${u} targets in `+(E-g)+`ms\n\tRemoved ${S} documents in `+(b-E)+`ms\nTotal Duration: ${b-A}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class dN{constructor(e,t){this.db=e,this.garbageCollector=new cN(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return uI(e,r)}removeReference(e,t,r){return uI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uI(e,t)}On(e,t){return function(r,o){let u=!1;return gM(r).zt(h=>pM(r,h,o).next(g=>(g&&(u=!0),we.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(h,g)=>{if(g<=t){const E=this.On(e,h).next(b=>{if(!b)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,Mt.min()),wc(e).delete([0,Bi(h.path)])))});o.push(E)}}).next(()=>we.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uI(e,t)}Mn(e,t){const r=wc(e);let o,u=Vi.A;return r.Wt({index:"documentTargetsIndex"},([h,g],{path:E,sequenceNumber:b})=>{0===h?(u!==Vi.A&&t(new rt(Ga(o)),u),u=b,o=E):u=Vi.A}).next(()=>{u!==Vi.A&&t(new rt(Ga(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uI(n,e){return wc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Bi(e.path),sequenceNumber:r}));var r}class vM{constructor(){this.changes=new _(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?we.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hN{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zh(e).put(r)}removeEntry(e,t,r){return Zh(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],rI(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Un.newInvalidDocument(t);return Zh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(n_(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Un.newInvalidDocument(t)};return Zh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(n_(t))},(o,u)=>{r={document:this.$n(t,u),size:aI(u)}}).next(()=>r)}getEntries(e,t){let r=D();return this.Ln(e,t,(o,u)=>{const h=this.$n(o,u);r=r.insert(o,h)}).next(()=>r)}Un(e,t){let r=D(),o=new fr(rt.comparator);return this.Ln(e,t,(u,h)=>{const g=this.$n(u,h);r=r.insert(u,g),o=o.insert(u,aI(h))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return we.resolve();let o=new kn(wM);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(n_(o.first()),n_(o.last())),h=o.getIterator();let g=h.getNext();return Zh(e).Wt({index:"documentKeyIndex",range:u},(E,b,A)=>{const S=rt.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&wM(g,S)<0;)r(g,null),g=h.getNext();g&&g.isEqual(S)&&(r(g,b),g=h.hasNext()?h.getNext():null),g?A.Ut(n_(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),rI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zh(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let g=D();for(const E of h){const b=this.$n(rt.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=D();const h=EM(t,r),g=EM(t,Ts.max());return Zh(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,g,!0)},(E,b,A)=>{const S=this.$n(rt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(S.key,S),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new fN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _M(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Fn(e,t){return _M(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function JR(n,e){let t;if(e.document)t=$S(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),o=$h(e.noDocument.readTime);t=Un.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=rt.fromSegments(e.unknownDocument.path),o=$h(e.unknownDocument.version);t=Un.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new hr(r[0],r[1]);return Mt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Un.newInvalidDocument(e)}}class fN extends vM{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new _(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new kn((u,h)=>Ht(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const g=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,g.readTime)),h.isValidDocument()){const E=iM(this.Kn.M,h);o=o.add(u.path.popLast()),r+=aI(E)-g.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=g.size,this.trackRemovals){const E=iM(this.Kn.M,h.convertToNoDocument(Mt.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),we.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function _M(n){return ui(n,"remoteDocumentGlobal")}function Zh(n){return ui(n,"remoteDocumentsV14")}function n_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function EM(n,e){const t=e.documentKey.path.toArray();return[n,rI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ht(t[u],r[u]),o)return o;return o=Ht(t.length,r.length),o||(o=Ht(t[t.length-2],r[r.length-2]),o||Ht(t[t.length-1],r[r.length-1]))}class pN{constructor(e){this.M=e}kt(e,t,r,o){const u=new nI("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KS,{unique:!0}),g.createObjectStore("documentMutations"),IM(e),function(g){g.createObjectStore("remoteDocuments")}(e));let h=we.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),IM(e)),h=h.next(()=>function(g){const E=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(g,E){return E.store("mutations").qt().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KS,{unique:!0});const A=E.store("mutations"),S=b.map($=>A.put($));return we.waitFor(S)})}(e,u))),h=h.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Qn(u))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(h=h.next(()=>this.Wn(u))),r<8&&o>=8&&(h=h.next(()=>this.zn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.Hn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(g){const E=g.createObjectStore("documentOverlays",{keyPath:zR});E.createIndex("collectionPathOverlayIndex",qR,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",WR,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(g){const E=g.createObjectStore("remoteDocumentsV14",{keyPath:OR});E.createIndex("documentKeyIndex",kR),E.createIndex("collectionGroupIndex",FR)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:jR}).createIndex("sequenceNumberIndex",$R,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:HR}).createIndex("documentKeyIndex",GR,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=aI(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>we.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(g=>we.forEach(g,E=>{xt(E.userId===u.userId);const b=Ag(this.M,E);return fM(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,g)=>{const E=new ln(h),b=[0,Bi(E)];u.push(t.get(b).next(A=>A?we.resolve():t.put({targetId:0,path:Bi(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>we.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:BR});const r=t.store("collectionParents"),o=new eT,u=h=>{if(o.add(h)){const g=h.lastSegment(),E=h.popLast();return r.put({collectionId:g,parent:Bi(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,g)=>{const E=new ln(h);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,g,E],b)=>{const A=Ga(g);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Jv(o),h=sM(this.M,u);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const g=t.store("remoteDocumentsV14"),E=(b=h,b.document?new rt(ln.fromString(b.document.name).popFirst(5)):b.noDocument?rt.fromSegments(b.noDocument.path):b.unknownDocument?rt.fromSegments(b.unknownDocument.path):ht()).path.toArray();var b;const A={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(g.put(A))}).next(()=>we.waitFor(o))}}function IM(n){n.createObjectStore("targetDocuments",{keyPath:VR}).createIndex("documentTargetsIndex",UR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LR,{unique:!0}),n.createObjectStore("targetGlobal")}const rT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iT{constructor(e,t,r,o,u,h,g,E,b,A,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=h,this.document=g,this.Xn=b,this.Zn=A,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=$=>Promise.resolve(),!iT.vt())throw new je(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dN(this,o),this.hs=t+"main",this.M=new rM(E),this.ls=new qo(this.hs,this.ts,new pN(this.M)),this.fs=new aN(this.referenceDelegate,this.M),this.ds=new hN(this.M),this._s=new XR,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(ve.FAILED_PRECONDITION,rT);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Vi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ae.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ae.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Uh(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return r_(e).get("owner").next(t=>we.resolve(this.Ps(t)))}Vs(e){return lI(e).delete(this.clientId)}vs(){var e=this;return(0,Ae.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ui(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ds(u,18e5),g=u.filter(E=>-1===h.indexOf(E));return we.forEach(g,E=>o.delete(E.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?we.resolve(!0):r_(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new je(ve.FAILED_PRECONDITION,rT);return!1}}return!(!this.networkEnabled||!this.inForeground)||lI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ae.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new nM(t,Vi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>lI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return tT.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new oN(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return XC.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.ts)?KR:13===h?JS:12===h?ZR:11===h?QS:void ht();var h;let g;return this.ls.runTransaction(e,o,u,E=>(g=new nM(E,this.es?this.es.next():Vi.A),"readwrite-primary"===t?this.Es(g).next(b=>!!b||this.As(g)).next(b=>{if(!b)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new je(ve.FAILED_PRECONDITION,XS);return r(g)}).next(b=>this.bs(g).next(()=>b)):this.$s(g).next(()=>r(g)))).then(E=>(g.raiseOnCommittedEvent(),E))}$s(e){return r_(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(ve.FAILED_PRECONDITION,rT)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return r_(e).put("owner",t)}static vt(){return qo.vt()}Rs(e){const t=r_(e);return t.get("owner").next(r=>this.Ps(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):we.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,rn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function r_(n){return ui(n,"owner")}function lI(n){return ui(n,"clientMetadata")}function sT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gN{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return rt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):gg(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new rt(t)).next(r=>{let o=O();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=O();return this.indexManager.getCollectionParents(e,o).next(h=>we.forEach(h,g=>{const E=(b=t,A=g.child(o),new Go(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.zs(e,E,r).next(b=>{b.forEach((A,S)=>{u=u.insert(A,S)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const g of h.mutations){const E=g.key;let b=o.get(E);null==b&&(b=Un.newInvalidDocument(E),o=o.insert(E,b)),eI(g,b,h.localWriteTime),b.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,h)=>{Kw(t,h)||(o=o.remove(u))}),o))}}class oT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=xe(),o=xe();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new oT(e,t.fromCache,r,o)}}class bM{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return we.resolve(null)}ei(e,t,r,o){return function OC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Mt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const h=this.si(t,u);return this.ii(t,h,r,o)?this.ni(e,t):(uc()<=xa.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yc(t)),this.ri(e,h,t,jw(o,-1)))})}si(e,t){let r=new kn(FC(e));return t.forEach((o,u)=>{Kw(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return uc()<=xa.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",yc(t)),this.Zs.Qs(e,t,Ts.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}class mN{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new fr(Ht),this.ai=new _(u=>$u(u),Hu),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new gN(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function DM(n,e,t,r){return new mN(n,e,t,r)}function CM(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,Ae.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const h=[],g=[];let E=xe();for(const b of o){h.push(b.batchId);for(const A of b.mutations)E=E.add(A.key)}for(const b of u){g.push(b.batchId);for(const A of b.mutations)E=E.add(A.key)}return t.fi.Ks(r,E).next(b=>({di:b,removedBatchIds:h,addedBatchIds:g}))})})}),aT.apply(this,arguments)}function yN(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(h,g,E,b){const A=E.batch,S=A.keys();let $=we.resolve();return S.forEach(Y=>{$=$.next(()=>b.getEntry(g,Y)).next(ue=>{const Ve=E.docVersions.get(Y);xt(null!==Ve),ue.version.compareTo(Ve)<0&&(A.applyToRemoteDocument(ue,E),ue.isValidDocument()&&(ue.setReadTime(E.commitVersion),b.addEntry(ue)))})}),$.next(()=>h.Bs.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function TM(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function vN(n,e){const t=st(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const g=[];e.targetChanges.forEach((b,A)=>{const S=o.get(A);if(!S)return;g.push(t.fs.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,A)));let $=S.withSequenceNumber(u.currentSequenceNumber);var Y,ue,Ve;e.targetMismatches.has(A)?$=$.withResumeToken(sr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):b.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(b.resumeToken,r)),o=o.insert(A,$),ue=$,Ve=b,(0===(Y=S).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&g.push(t.fs.updateTargetData(u,$))});let E=D();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),g.push(AM(u,h,e.documentUpdates).next(b=>{E=b})),!r.isEqual(Mt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(b)}return we.waitFor(g).next(()=>h.apply(u)).next(()=>t.fi.Gs(u,E)).next(()=>E)}).then(u=>(t.ui=o,u))}function AM(n,e,t){let r=xe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=D();return t.forEach((h,g)=>{const E=o.get(h);g.isNoDocument()&&g.version.isEqual(Mt.min())?(e.removeEntry(h,g.readTime),u=u.insert(h,g)):!E.isValidDocument()||g.version.compareTo(E.version)>0||0===g.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(g),u=u.insert(h,g)):Ke("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",g.version)}),u})}function _N(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function xg(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,we.resolve(o)):t.fs.allocateTargetId(r).next(h=>(o=new _c(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Rg(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=(0,Ae.Z)(function*(n,e,t){const r=st(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Uh(h))throw h;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),uT.apply(this,arguments)}function cI(n,e,t){const r=st(n);let o=Mt.min(),u=xe();return r.persistence.runTransaction("Execute query","readonly",h=>function(g,E,b){const A=st(g),S=A.ai.get(b);return void 0!==S?we.resolve(A.ui.get(S)):A.fs.getTargetData(E,b)}(r,h,Ci(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,g.targetId).next(E=>{u=E})}).next(()=>r.oi.Qs(h,e,t?o:Mt.min(),t?u:xe())).next(g=>(xM(r,kC(e),g),{documents:g,_i:u})))}function SM(n,e){const t=st(n),r=st(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function MM(n,e){const t=st(n),r=t.ci.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,jw(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(xM(t,e,o),o))}function xM(n,e,t){let r=Mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function lT(){return lT=(0,Ae.Z)(function*(n,e,t,r){const o=st(n);let u=xe(),h=D();for(const b of t){const A=e.wi(b.metadata.name);b.document&&(u=u.add(A));const S=e.mi(b);S.setReadTime(e.gi(b.metadata.readTime)),h=h.insert(A,S)}const g=o.hi.newChangeBuffer({trackRemovals:!0}),E=yield xg(o,(b=r,Ci(mc(ln.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>AM(b,g,h).next(A=>(g.apply(b),A)).next(A=>o.fs.removeMatchingKeysForTargetId(b,E.targetId).next(()=>o.fs.addMatchingKeys(b,u,E.targetId)).next(()=>o.fi.Gs(b,A)).next(()=>A)))}),lT.apply(this,arguments)}function wN(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,Ae.Z)(function*(n,e,t=xe()){const r=yield xg(n,Ci(QC(e.bundledQuery))),o=st(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=ai(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o._s.saveNamedQuery(u,e);const g=r.withResumeToken(sr.EMPTY_BYTE_STRING,h);return o.ui=o.ui.insert(g.targetId,g),o.fs.updateTargetData(u,g).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),cT.apply(this,arguments)}class IN{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return we.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:ai(r.createTime)}),we.resolve()}getNamedQuery(e,t){return we.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:QC(r.bundledQuery),readTime:ai(r.readTime)}),we.resolve();var r}}class bN{constructor(){this.overlays=new fr(rt.comparator),this.Ii=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),we.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),we.resolve()}getOverlaysForCollection(e,t,r){const o=G(),u=t.length+1,h=new rt(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const E=g.getNext().value,b=E.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return we.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new fr((b,A)=>b-A);const h=this.overlays.getIterator();for(;h.hasNext();){const b=h.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=G(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const g=G(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((b,A)=>g.set(b,A)),!(g.size()>=o)););return we.resolve(g)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new YC(t,r));let u=this.Ii.get(t);void 0===u&&(u=xe(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class dT{constructor(){this.Ti=new kn(li.Ei),this.Ai=new kn(li.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new li(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new li(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new rt(new ln([])),r=new li(t,e),o=new li(t,e+1),u=[];return this.Ai.forEachInRange([r,o],h=>{this.Pi(h),u.push(h.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new rt(new ln([])),r=new li(t,e),o=new li(t,e+1);let u=xe();return this.Ai.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new li(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class li{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return rt.comparator(e.key,t.key)||Ht(e.Ci,t.Ci)}static Ri(e,t){return Ht(e.Ci,t.Ci)||rt.comparator(e.key,t.key)}}class DN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new kn(li.Ei)}checkEmpty(e){return we.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const h=new ZC(u,t,r,o);this.Bs.push(h);for(const g of o)this.Ni=this.Ni.add(new li(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return we.resolve(h)}lookupMutationBatch(e,t){return we.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return we.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return we.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new li(t,0),o=new li(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],h=>{const g=this.ki(h.Ci);u.push(g)}),we.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Ht);return t.forEach(o=>{const u=new li(o,0),h=new li(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,h],g=>{r=r.add(g.Ci)})}),we.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const h=new li(new rt(u),0);let g=new kn(Ht);return this.Ni.forEachWhile(E=>{const b=E.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(E.Ci)),!0)},h),we.resolve(this.Oi(g))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){xt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return we.forEach(t.mutations,o=>{const u=new li(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new li(t,0),o=this.Ni.firstAfterOrEqual(r);return we.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return we.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class CN{constructor(e){this.$i=e,this.docs=new fr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return we.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=D();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Un.newInvalidDocument(o))}),we.resolve(r)}getAllFromCollection(e,t,r){let o=D();const u=new rt(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:g,value:{document:E}}=h.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||$w(RS(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,t,r,o){ht()}Bi(e,t){return we.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new TN(this)}getSize(e){return we.resolve(this.size)}}class TN extends vM{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),we.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class AN{constructor(e){this.persistence=e,this.Li=new _(t=>$u(t),Hu),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new dT,this.targetCount=0,this.Ki=qh.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),we.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new qh(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.Tn(t),we.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((h,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Li.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),we.waitFor(u).next(()=>o)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return we.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),we.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),we.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),we.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return we.resolve(r)}containsKey(e,t){return we.resolve(this.qi.containsKey(t))}}class SN{constructor(e,t){this.Gi={},this.overlays={},this.es=new Vi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new AN(this),this.indexManager=new sN,this.ds=new CN(r=>this.referenceDelegate.Qi(r)),this.M=new rM(t),this._s=new IN(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new DN(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const o=new MN(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return we.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class MN extends eM{constructor(e){super(),this.currentSequenceNumber=e}}class hT{constructor(e){this.persistence=e,this.Hi=new dT,this.Ji=null}static Yi(e){return new hT(e)}get Xi(){if(this.Ji)return this.Ji;throw ht()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),we.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),we.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.Xi,r=>{const o=rt.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,Mt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return we.or([()=>we.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function RM(n,e){return`firestore_clients_${n}_${e}`}function NM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function fT(n,e){return`firestore_targets_${n}_${e}`}class dI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new je(o.error.code,o.error.message))),h?new dI(e,t,o.state,u):(dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class i_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new je(r.error.code,r.error.message))),u?new i_(e,r.state,o):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=ct();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=Pw(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new hI(e,u):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pT{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pT(t.clientId,t.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gT{constructor(){this.activeTargetIds=ct()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mT{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new fr(Ht),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=RM(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new gT),this.dr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(RM(e.persistenceKey,o));if(u){const h=hI.tr(o,u);h&&(e.ar=e.ar.insert(h.clientId,h))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(fT(this.persistenceKey,e));if(r){const o=i_.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fT(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let h=Vi.A;if(null!=u)try{const g=JSON.parse(u);xt("number"==typeof g),h=g}catch(g){dr("SharedClientState","Failed to read sequence number from WebStorage",g)}return h}(r.newValue);o!==Vi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new dI(this.currentUser,e,t,r),u=NM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=NM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=fT(this.persistenceKey,e),u=new i_(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return hI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return dI.tr(new br(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return i_.tr(o,t)}pr(e){return pT.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),h=[],g=[];return u.forEach(E=>{o.has(E)||h.push(E)}),o.forEach(E=>{u.has(E)||g.push(E)}),this.syncEngine.Lr(h,g).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=ct();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class PM{constructor(){this.Ur=new gT,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new gT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xN{Kr(e){}shutdown(){}}class OM{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const RN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class NN{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class PN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const h=this.ho(e,t);Ke("RestConnection","Sending: ",h,r);const g={};return this.lo(g,o,u),this.fo(e,h,g,r).then(E=>(Ke("RestConnection","Received: ",E),E),E=>{throw Ch("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${RN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,h)=>{const g=new vC;g.listenOnce(bh.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Iw.NO_ERROR:const b=g.getResponseJson();Ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Iw.TIMEOUT:Ke("Connection",'RPC "'+e+'" timed out'),h(new je(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Iw.HTTP_ERROR:const A=g.getStatus();if(Ke("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){const S=g.getResponseJson().error;if(S&&S.status&&S.message){const $=function(Y){const ue=Y.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(ue)>=0?ue:ve.UNKNOWN}(S.status);h(new je($,S.message))}else h(new je(ve.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new je(ve.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Ke("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);g.send(t,"POST",E,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=pC(),h=gC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new yC({})),this.lo(g.initMessageHeaders,t,r),(0,rn.uI)()||(0,rn.b$)()||(0,rn.d)()||(0,rn.w1)()||(0,rn.Mn)()||(0,rn.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Ke("Connection","Creating WebChannel: "+E,g);const b=u.createWebChannel(E,g);let A=!1,S=!1;const $=new NN({Jr:ue=>{S?Ke("Connection","Not sending because WebChannel is closed:",ue):(A||(Ke("Connection","Opening WebChannel transport."),b.open(),A=!0),Ke("Connection","WebChannel sending:",ue),b.send(ue))},Yr:()=>b.close()}),Y=(ue,Ve,Xe)=>{ue.listen(Ve,Gt=>{try{Xe(Gt)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return Y(b,Dh.EventType.OPEN,()=>{S||Ke("Connection","WebChannel transport opened.")}),Y(b,Dh.EventType.CLOSE,()=>{S||(S=!0,Ke("Connection","WebChannel transport closed"),$.ro())}),Y(b,Dh.EventType.ERROR,ue=>{S||(S=!0,Ch("Connection","WebChannel transport errored:",ue),$.ro(new je(ve.UNAVAILABLE,"The operation could not be completed")))}),Y(b,Dh.EventType.MESSAGE,ue=>{var Ve;if(!S){const Xe=ue.data[0];xt(!!Xe);const Gt=Xe,Bt=Gt.error||(null===(Ve=Gt[0])||void 0===Ve?void 0:Ve.error);if(Bt){Ke("Connection","WebChannel received error:",Bt);const on=Bt.status;let qt=function(En){const Si=l[En];if(void 0!==Si)return y(Si)}(on),an=Bt.message;void 0===qt&&(qt=ve.INTERNAL,an="Unknown error status: "+on+" with message "+Bt.message),S=!0,$.ro(new je(qt,an)),b.close()}else Ke("Connection","WebChannel received:",Xe),$.oo(Xe)}}),Y(h,mC.STAT_EVENT,ue=>{ue.stat===og.PROXY?Ke("Connection","Detected buffering proxy"):ue.stat===og.NOPROXY&&Ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.io()},0),$}}function kM(){return"undefined"!=typeof window?window:null}function fI(){return"undefined"!=typeof document?document:null}function s_(n){return new qv(n,!0)}class yT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class FM{constructor(e,t,r,o,u,h,g,E){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new yT(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ae.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ae.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ae.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(dr(t.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new je(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ae.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ON extends FM{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function DR(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:ht(),o=e.targetChange.targetIds||[],u=function(E,b){return E.N?(xt(void 0===b||"string"==typeof b),sr.fromBase64String(b||"")):(xt(void 0===b||b instanceof Uint8Array),sr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&function(E){const b=void 0===E.code?ve.UNKNOWN:y(E.code);return new je(b,E.message||"")}(h);t=new Ti(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Ha(n,r.document.name),u=ai(r.document.updateTime),h=new Kr({mapValue:{fields:r.document.fields}}),g=Un.newFoundDocument(o,u,h);t=new Qt(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Ha(n,r.document),u=r.readTime?ai(r.readTime):Mt.min(),h=Un.newNoDocument(o,u);t=new Qt([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Ha(n,r.document);t=new Qt([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ht();{const r=e.filter,u=new a(r.count||0);t=new gn(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?ai(u.readTime):Mt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Kv(this.M),t.addTarget=function(o,u){let h;const g=u.target;return h=gc(g)?{documents:HS(o,g)}:{query:GS(o,g)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=Dg(o,u.resumeToken):u.snapshotVersion.compareTo(Mt.min())>0&&(h.readTime=Zu(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function TR(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Kv(this.M),t.removeTarget=e,this.Lo(t)}}class kN extends FM{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function CR(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,o){let u=ai(r.updateTime?r.updateTime:o);return u.isEqual(Mt.min())&&(u=ai(o)),new kS(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ai(e.commitTime);return this.listener.tu(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Kv(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Yv(this.M,r))};this.Lo(t)}}class FN extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new je(ve.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(ve.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(ve.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class LN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(dr(t),this.uu=!1):Ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class VN{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(g=>{r.enqueueAndForget((0,Ae.Z)(function*(){var E;Ic(h)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,Ae.Z)(function*(b){const A=st(b);A.wu.add(4),yield Ng(A),A.yu.set("Unknown"),A.wu.delete(4),yield o_(A)}),function(b){return E.apply(this,arguments)})(h))}))}),this.yu=new LN(r,o)}}function o_(n){return vT.apply(this,arguments)}function vT(){return vT=(0,Ae.Z)(function*(n){if(Ic(n))for(const e of n.mu)yield e(!0)}),vT.apply(this,arguments)}function Ng(n){return _T.apply(this,arguments)}function _T(){return _T=(0,Ae.Z)(function*(n){for(const e of n.mu)yield e(!1)}),_T.apply(this,arguments)}function pI(n,e){const t=st(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),IT(t)?wT(t):Og(t).Mo()&&ET(t,e))}function a_(n,e){const t=st(n),r=Og(t);t._u.delete(e),r.Mo()&&LM(t,e),0===t._u.size&&(r.Mo()?r.$o():Ic(t)&&t.yu.set("Unknown"))}function ET(n,e){n.pu.Z(e.targetId),Og(n).Ho(e)}function LM(n,e){n.pu.Z(e),Og(n).Jo(e)}function wT(n){n.pu=new Hv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Og(n).start(),n.yu.au()}function IT(n){return Ic(n)&&!Og(n).ko()&&n._u.size>0}function Ic(n){return 0===st(n).wu.size}function VM(n){n.pu=void 0}function UN(n){return bT.apply(this,arguments)}function bT(){return bT=(0,Ae.Z)(function*(n){n._u.forEach((e,t)=>{ET(n,e)})}),bT.apply(this,arguments)}function BN(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,Ae.Z)(function*(n,e){VM(n),IT(n)?(n.yu.lu(e),wT(n)):n.yu.set("Unknown")}),DT.apply(this,arguments)}function jN(n,e,t){return CT.apply(this,arguments)}function CT(){return CT=(0,Ae.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Ti&&2===e.state&&e.cause)try{yield(r=(0,Ae.Z)(function*(o,u){const h=u.cause;for(const g of u.targetIds)o._u.has(g)&&(yield o.remoteSyncer.rejectListen(g,h),o._u.delete(g),o.pu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gI(n,r)}else if(e instanceof Qt?n.pu.ut(e):e instanceof gn?n.pu._t(e):n.pu.ht(e),!t.isEqual(Mt.min()))try{const r=yield TM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.pu.yt(u);return h.targetChanges.forEach((g,E)=>{if(g.resumeToken.approximateByteSize()>0){const b=o._u.get(E);b&&o._u.set(E,b.withResumeToken(g.resumeToken,u))}}),h.targetMismatches.forEach(g=>{const E=o._u.get(g);if(!E)return;o._u.set(g,E.withResumeToken(sr.EMPTY_BYTE_STRING,E.snapshotVersion)),LM(o,g);const b=new _c(E.target,g,1,E.sequenceNumber);ET(o,b)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield gI(n,r)}var r}),CT.apply(this,arguments)}function gI(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,Ae.Z)(function*(n,e,t){if(!Uh(e))throw e;n.wu.add(1),yield Ng(n),n.yu.set("Offline"),t||(t=()=>TM(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ae.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield o_(n)}))}),TT.apply(this,arguments)}function UM(n,e){return e().catch(t=>gI(n,t,e))}function Pg(n){return AT.apply(this,arguments)}function AT(){return AT=(0,Ae.Z)(function*(n){const e=st(n),t=bc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;$N(e);)try{const o=yield _N(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,HN(e,o)}catch(o){yield gI(e,o)}BM(e)&&jM(e)}),AT.apply(this,arguments)}function $N(n){return Ic(n)&&n.du.length<10}function HN(n,e){n.du.push(e);const t=bc(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function BM(n){return Ic(n)&&!bc(n).ko()&&n.du.length>0}function jM(n){bc(n).start()}function GN(n){return ST.apply(this,arguments)}function ST(){return ST=(0,Ae.Z)(function*(n){bc(n).nu()}),ST.apply(this,arguments)}function zN(n){return MT.apply(this,arguments)}function MT(){return MT=(0,Ae.Z)(function*(n){const e=bc(n);for(const t of n.du)e.Zo(t.mutations)}),MT.apply(this,arguments)}function qN(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,Ae.Z)(function*(n,e,t){const r=n.du.shift(),o=KC.from(r,e,t);yield UM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Pg(n)}),xT.apply(this,arguments)}function WN(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,Ae.Z)(function*(n,e){var t;e&&bc(n).Xo&&(yield(t=(0,Ae.Z)(function*(r,o){if(f(u=o.code)&&u!==ve.ABORTED){const h=r.du.shift();bc(r).Fo(),yield UM(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Pg(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),BM(n)&&jM(n)}),RT.apply(this,arguments)}function $M(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,Ae.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=Ic(t);t.wu.add(3),yield Ng(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield o_(t)}),NT.apply(this,arguments)}function PT(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,Ae.Z)(function*(n,e){const t=st(n);e?(t.wu.delete(2),yield o_(t)):e||(t.wu.add(2),yield Ng(t),t.yu.set("Unknown"))}),OT.apply(this,arguments)}function Og(n){return n.Iu||(n.Iu=function(e,t,r){const o=st(e);return o.iu(),new ON(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:UN.bind(null,n),eo:BN.bind(null,n),zo:jN.bind(null,n)}),n.mu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Iu.Fo(),IT(n)?wT(n):n.yu.set("Unknown")):(yield n.Iu.stop(),VM(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function bc(n){return n.Tu||(n.Tu=function(e,t,r){const o=st(e);return o.iu(),new kN(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:GN.bind(null,n),eo:WN.bind(null,n),eu:zN.bind(null,n),tu:qN.bind(null,n)}),n.mu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Tu.Fo(),yield Pg(n)):(yield n.Tu.stop(),n.du.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class kT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,g=new kT(e,t,h,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(n,e){if(dr("AsyncQueue",`${e}: ${n}`),Uh(n))return new je(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Fg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=O(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new Fg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Fg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HM{constructor(){this.Eu=new fr(rt.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ht():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lg{constructor(e,t,r,o,u,h,g,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Lg(e,t,Fg.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class ZN{constructor(){this.Ru=void 0,this.listeners=[]}}class KN{constructor(){this.queries=new _(e=>mg(e),zu),this.onlineState="Unknown",this.bu=new Set}}function FT(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,Ae.Z)(function*(n,e){const t=st(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new ZN),o)try{u.Ru=yield t.onListen(r)}catch(h){const g=kg(h,`Initialization of query '${yc(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&BT(t)}),LT.apply(this,arguments)}function VT(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,Ae.Z)(function*(n,e){const t=st(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),UT.apply(this,arguments)}function YN(n,e){const t=st(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const g of h.listeners)g.Vu(o)&&(r=!0);h.Ru=o}}r&&BT(t)}function QN(n,e,t){const r=st(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function BT(n){n.bu.forEach(e=>{e.next()})}class jT{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Lg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Lg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class JN{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class GM{constructor(e){this.M=e}wi(e){return Ha(this.M,e)}mi(e){return e.metadata.exists?$S(this.M,e.document,!1):Un.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return ai(e)}}class XN{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new GM(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const h of o.metadata.queries){const g=(t.get(h)||xe()).add(u);t.set(h,g)}}return t}complete(){var e=this;return(0,Ae.Z)(function*(){const t=yield function EN(n,e,t,r){return lT.apply(this,arguments)}(e.localStore,new GM(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield wN(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function zM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qM{constructor(e){this.key=e}}class WM{constructor(e){this.key=e}}class ZM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=xe(),this.mutatedKeys=xe(),this.Gu=FC(e),this.Qu=new Fg(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new HM,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,S)=>{const $=o.get(A),Y=Kw(this.query,S)?S:null,ue=!!$&&this.mutatedKeys.has($.key),Ve=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Xe=!1;$&&Y?$.data.isEqual(Y.data)?ue!==Ve&&(r.track({type:3,doc:Y}),Xe=!0):this.Hu($,Y)||(r.track({type:2,doc:Y}),Xe=!0,(E&&this.Gu(Y,E)>0||b&&this.Gu(Y,b)<0)&&(g=!0)):!$&&Y?(r.track({type:0,doc:Y}),Xe=!0):$&&!Y&&(r.track({type:1,doc:$}),Xe=!0,(E||b)&&(g=!0)),Xe&&(Y?(h=h.add(Y),u=Ve?u.add(A):u.delete(A)):(h=h.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const A="F"===this.query.limitType?h.last():h.first();h=h.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:h,zu:r,ii:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,A)=>function(S,$){const Y=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return Y(S)-Y($)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const h=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,E=g!==this.qu;return this.qu=g,0!==u.length||E?{snapshot:new Lg(this.query,e.Qu,o,u,e.mutatedKeys,0===g,E,!1),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new HM,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=xe(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new WM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new qM(r))}),t}ta(e){this.Uu=e._i,this.Ku=xe();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Lg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class e1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class t1{constructor(e){this.key=e,this.na=!1}}class n1{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.sa={},this.ia=new _(g=>mg(g),zu),this.ra=new Map,this.oa=new Set,this.ua=new fr(rt.comparator),this.aa=new Map,this.ca=new dT,this.ha={},this.la=new Map,this.fa=qh.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function r1(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,Ae.Z)(function*(n,e){const t=dA(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const h=yield xg(t.localStore,Ci(e));t.isPrimaryClient&&pI(t.remoteStore,h);const g=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield HT(t,e,r,"current"===g)}return o}),$T.apply(this,arguments)}function HT(n,e,t,r){return GT.apply(this,arguments)}function GT(){return GT=(0,Ae.Z)(function*(n,e,t,r){n._a=(A,S,$)=>{return(Y=(0,Ae.Z)(function*(ue,Ve,Xe,Gt){let Bt=Ve.view.Wu(Xe);Bt.ii&&(Bt=yield cI(ue.localStore,Ve.query,!1).then(({documents:an})=>Ve.view.Wu(an,Bt)));const on=Gt&&Gt.targetChanges.get(Ve.targetId),qt=Ve.view.applyChanges(Bt,ue.isPrimaryClient,on);return eA(ue,Ve.targetId,qt.Xu),qt.snapshot}),function(ue,Ve,Xe,Gt){return Y.apply(this,arguments)})(n,A,S,$);var Y};const o=yield cI(n.localStore,e,!0),u=new ZM(e,o._i),h=u.Wu(o.documents),g=Et.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(h,n.isPrimaryClient,g);eA(n,t,E.Xu);const b=new e1(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),E.snapshot}),GT.apply(this,arguments)}function s1(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,Ae.Z)(function*(n,e){const t=st(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!zu(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rg(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),a_(t.remoteStore,r.targetId),Vg(t,r.targetId)}).catch(Wh))):(Vg(t,r.targetId),yield Rg(t.localStore,r.targetId,!0))}),zT.apply(this,arguments)}function qT(){return qT=(0,Ae.Z)(function*(n,e,t){const r=hA(n);try{const o=yield function(u,h){const g=st(u),E=hr.now(),b=h.reduce((S,$)=>S.add($.key),xe());let A;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>g.fi.Ks(S,b).next($=>{A=$;const Y=[];for(const ue of h){const Ve=LS(ue,A.get(ue.key));null!=Ve&&Y.push(new vc(ue.key,Ve,Bw(Ve.value.mapValue),Dr.exists(!0)))}return g.Bs.addMutationBatch(S,E,Y,h)})).then(S=>(S.applyToLocalDocumentSet(A),{batchId:S.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,g){let E=u.ha[u.currentUser.toKey()];E||(E=new fr(Ht)),E=E.insert(h,g),u.ha[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Ku(r,o.changes),yield Pg(r.remoteStore)}catch(o){const u=kg(o,"Failed to persist write");t.reject(u)}}),qT.apply(this,arguments)}function KM(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,Ae.Z)(function*(n,e){const t=st(n);try{const r=yield vN(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.aa.get(u);h&&(xt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.na=!0:o.modifiedDocuments.size>0?xt(h.na):o.removedDocuments.size>0&&(xt(h.na),h.na=!1))}),yield Ku(t,r,e)}catch(r){yield Wh(r)}}),WT.apply(this,arguments)}function YM(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,h)=>{const g=h.view.Pu(e);g.snapshot&&o.push(g.snapshot)}),function(u,h){const g=st(u);g.onlineState=h;let E=!1;g.queries.forEach((b,A)=>{for(const S of A.listeners)S.Pu(h)&&(E=!0)}),E&&BT(g)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a1(n,e,t){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Ae.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let h=new fr(rt.comparator);h=h.insert(u,Un.newNoDocument(u,Mt.min()));const g=xe().add(u),E=new Pe(Mt.min(),new Map,new kn(Ht),h,g);yield KM(r,E),r.ua=r.ua.remove(u),r.aa.delete(e),tA(r)}else yield Rg(r.localStore,e,!1).then(()=>Vg(r,e,t)).catch(Wh)}),ZT.apply(this,arguments)}function u1(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,Ae.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const o=yield yN(t.localStore,e);XT(t,r,null),JT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ku(t,o)}catch(o){yield Wh(o)}}),KT.apply(this,arguments)}function l1(n,e,t){return YT.apply(this,arguments)}function YT(){return YT=(0,Ae.Z)(function*(n,e,t){const r=st(n);try{const o=yield function(u,h){const g=st(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let b;return g.Bs.lookupMutationBatch(E,h).next(A=>(xt(null!==A),b=A.keys(),g.Bs.removeMutationBatch(E,A))).next(()=>g.Bs.performConsistencyCheck(E)).next(()=>g.fi.Ks(E,b))})}(r.localStore,e);XT(r,e,t),JT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ku(r,o)}catch(o){yield Wh(o)}}),YT.apply(this,arguments)}function QT(){return QT=(0,Ae.Z)(function*(n,e){const t=st(n);Ic(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=st(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>h.Bs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=kg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),QT.apply(this,arguments)}function JT(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function XT(n,e,t){const r=st(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Vg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||QM(n,r)})}function QM(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(a_(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),tA(n))}function eA(n,e,t){for(const r of t)r instanceof qM?(n.ca.addReference(r.key,e),d1(n,r)):r instanceof WM?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||QM(n,r.key)):ht()}function d1(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),tA(n))}function tA(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new rt(ln.fromString(e)),r=n.fa.next();n.aa.set(r,new t1(t)),n.ua=n.ua.insert(t,r),pI(n.remoteStore,new _c(Ci(mc(t.path)),r,2,Vi.A))}}function Ku(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,Ae.Z)(function*(n,e,t){const r=st(n),o=[],u=[],h=[];var g;r.ia.isEmpty()||(r.ia.forEach((g,E)=>{h.push(r._a(E,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,b.fromCache?"not-current":"current"),o.push(b);const A=oT.Ys(E.targetId,b);u.push(A)}}))}),yield Promise.all(h),r.sa.zo(o),yield(g=(0,Ae.Z)(function*(E,b){const A=st(E);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>we.forEach(b,$=>we.forEach($.Hs,Y=>A.persistence.referenceDelegate.addReference(S,$.targetId,Y)).next(()=>we.forEach($.Js,Y=>A.persistence.referenceDelegate.removeReference(S,$.targetId,Y)))))}catch(S){if(!Uh(S))throw S;Ke("LocalStore","Failed to update sequence numbers: "+S)}for(const S of b){const $=S.targetId;if(!S.fromCache){const Y=A.ui.get($),Ve=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);A.ui=A.ui.insert($,Ve)}}}),function(E,b){return g.apply(this,arguments)})(r.localStore,u))}),nA.apply(this,arguments)}function h1(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,Ae.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield CM(t.localStore,e);t.currentUser=e,(o=t).la.forEach(h=>{h.forEach(g=>{g.reject(new je(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ku(t,r.di)}var o}),rA.apply(this,arguments)}function f1(n,e){const t=st(n),r=t.aa.get(e);if(r&&r.na)return xe().add(r.key);{let o=xe();const u=t.ra.get(e);if(!u)return o;for(const h of u){const g=t.ia.get(h);o=o.unionWith(g.view.ju)}return o}}function p1(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,Ae.Z)(function*(n,e){const t=st(n),r=yield cI(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&eA(t,e.targetId,o.Xu),o}),iA.apply(this,arguments)}function g1(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,Ae.Z)(function*(n,e){const t=st(n);return MM(t.localStore,e).then(r=>Ku(t,r))}),sA.apply(this,arguments)}function m1(n,e,t,r){return oA.apply(this,arguments)}function oA(){return oA=(0,Ae.Z)(function*(n,e,t,r){const o=st(n),u=yield function(h,g){const E=st(h),b=st(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.fn(A,g).next(S=>S?E.fi.Ks(A,S):we.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Pg(o.remoteStore):"acknowledged"===t||"rejected"===t?(XT(o,e,r||null),JT(o,e),g=e,st(st(o.localStore).Bs)._n(g)):ht(),yield Ku(o,u)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),oA.apply(this,arguments)}function aA(){return aA=(0,Ae.Z)(function*(n,e){const t=st(n);if(dA(t),hA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield JM(t,r.toArray());t.da=!0,yield PT(t.remoteStore,!0);for(const u of o)pI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Vg(t,h),Rg(t.localStore,h,!0))),a_(t.remoteStore,h)}),yield o,yield JM(t,r),function(u){const h=st(u);h.aa.forEach((g,E)=>{a_(h.remoteStore,E)}),h.ca.Si(),h.aa=new Map,h.ua=new fr(rt.comparator)}(t),t.da=!1,yield PT(t.remoteStore,!1)}}),aA.apply(this,arguments)}function JM(n,e,t){return uA.apply(this,arguments)}function uA(){return uA=(0,Ae.Z)(function*(n,e,t){const r=st(n),o=[],u=[];for(const h of e){let g;const E=r.ra.get(h);if(E&&0!==E.length){g=yield xg(r.localStore,Ci(E[0]));for(const b of E){const A=r.ia.get(b),S=yield p1(r,A);S.snapshot&&u.push(S.snapshot)}}else{const b=yield SM(r.localStore,h);g=yield xg(r.localStore,b),yield HT(r,XM(b),h,!1)}o.push(g)}return r.sa.zo(u),o}),uA.apply(this,arguments)}function XM(n){return kh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function v1(n){const e=st(n);return st(st(e.localStore).persistence).Fs()}function _1(n,e,t,r){return lA.apply(this,arguments)}function lA(){return lA=(0,Ae.Z)(function*(n,e,t,r){const o=st(n);if(o.da)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield MM(o.localStore,kC(u[0])),g=Pe.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ku(o,h,g);break}case"rejected":yield Rg(o.localStore,e,!0),Vg(o,e,r);break;default:ht()}}),lA.apply(this,arguments)}function E1(n,e,t){return cA.apply(this,arguments)}function cA(){return cA=(0,Ae.Z)(function*(n,e,t){const r=dA(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ke("SyncEngine","Adding an already active target "+o);continue}const u=yield SM(r.localStore,o),h=yield xg(r.localStore,u);yield HT(r,XM(u),h.targetId,!1),pI(r.remoteStore,h)}for(const o of t)r.ra.has(o)&&(yield Rg(r.localStore,o,!1).then(()=>{a_(r.remoteStore,o),Vg(r,o)}).catch(Wh))}}),cA.apply(this,arguments)}function dA(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a1.bind(null,e),e.sa.zo=YN.bind(null,e.eventManager),e.sa.wa=QN.bind(null,e.eventManager),e}function hA(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l1.bind(null,e),e}class ex{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ae.Z)(function*(){t.M=s_(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return DM(this.persistence,new bM,e.initialUser,this.M)}ya(e){return new SN(hT.Yi,this.M)}ga(e){return new PM}terminate(){var e=this;return(0,Ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tx extends ex{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield hA(r.Ta.syncEngine),yield Pg(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return DM(this.persistence,new bM,e.initialUser,this.M)}pa(e){return new lN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=sT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new iT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kM(),fI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new PM}}class I1 extends tx{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof mT&&(r.sharedClientState.syncEngine={$r:m1.bind(null,o),Br:_1.bind(null,o),Lr:E1.bind(null,o),Fs:v1.bind(null,o),Fr:g1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ae.Z)(function*(h){yield function y1(n,e){return aA.apply(this,arguments)}(r.Ta.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}ga(e){const t=kM();if(!mT.vt(t))throw new je(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class fA{initialize(e,t){var r=this;return(0,Ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>YM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=h1.bind(null,r.syncEngine),yield PT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KN}createDatastore(e){const t=s_(e.databaseInfo.databaseId),r=new PN(e.databaseInfo);return new FN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>YM(this.syncEngine,g,0),h=OM.vt()?new OM:new xN,new VN(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,g,E,b){const A=new n1(r,o,u,h,g,E);return b&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ae.Z)(function*(t){const r=st(t);Ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Ng(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nx(n,e=10240){let t=0;return{read:()=>(0,Ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class b1{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ae.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ae.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new JN(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ae.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class D1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new je(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ae.Z)(function*(u,h){const g=st(u),E=Kv(g.M)+"/documents",b={documents:h.map(Y=>Zv(g.M,Y))},A=yield g._o("BatchGetDocuments",E,b),S=new Map;A.forEach(Y=>{const ue=function bR(n,e){return"found"in e?function(t,r){xt(!!r.found);const o=Ha(t,r.found.name),u=ai(r.found.updateTime),h=new Kr({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const o=Ha(t,r.missing),u=ai(r.readTime);return Un.newNoDocument(o,u)}(n,e):ht()}(g.M,Y);S.set(ue.key.toString(),ue)});const $=[];return h.forEach(Y=>{const ue=S.get(Y.toString());xt(!!ue),$.push(ue)}),$}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new i(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=rt.fromPath(o);e.mutations.push(new s(u,e.precondition(u)))}),yield(r=(0,Ae.Z)(function*(o,u){const h=st(o),g=Kv(h.M)+"/documents",E={writes:u.map(b=>Yv(h.M,b))};yield h.co("Commit",g,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Dr.updateTime(t):Dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new je(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dr.updateTime(t)}return Dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class C1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new yT(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ae.Z)(function*(){const t=new D1(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!cc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!f(t)}return!1}}class T1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=br.UNAUTHENTICATED,this.clientId=kv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,Ae.Z)(function*(g){Ke("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Ke("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,Ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=kg(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function rx(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ae.Z)(function*(u){r.isEqual(u)||(yield CM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),pA.apply(this,arguments)}function ix(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield mA(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>$M(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>$M(e.remoteStore,u)),n.onlineComponents=e}),gA.apply(this,arguments)}function mA(n){return yA.apply(this,arguments)}function yA(){return yA=(0,Ae.Z)(function*(n){return n.offlineComponents||(Ke("FirestoreClient","Using default OfflineComponentProvider"),yield rx(n,new ex)),n.offlineComponents}),yA.apply(this,arguments)}function yI(n){return vA.apply(this,arguments)}function vA(){return vA=(0,Ae.Z)(function*(n){return n.onlineComponents||(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield ix(n,new fA)),n.onlineComponents}),vA.apply(this,arguments)}function sx(n){return mA(n).then(e=>e.persistence)}function _A(n){return mA(n).then(e=>e.localStore)}function ox(n){return yI(n).then(e=>e.remoteStore)}function EA(n){return yI(n).then(e=>e.syncEngine)}function Ug(n){return wA.apply(this,arguments)}function wA(){return wA=(0,Ae.Z)(function*(n){const e=yield yI(n),t=e.eventManager;return t.onListen=r1.bind(null,e.syncEngine),t.onUnlisten=s1.bind(null,e.syncEngine),t}),wA.apply(this,arguments)}function ax(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,u,h,g,E){const b=new mI({next:S=>{u.enqueueAndForget(()=>VT(o,A));const $=S.docs.has(h);!$&&S.fromCache?E.reject(new je(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&S.fromCache&&g&&"server"===g.source?E.reject(new je(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(S)},error:S=>E.reject(S)}),A=new jT(mc(h.path),b,{includeMetadataChanges:!0,ku:!0});return FT(o,A)}(yield Ug(n),n.asyncQueue,e,t,r)})),r.promise}function ux(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,u,h,g,E){const b=new mI({next:S=>{u.enqueueAndForget(()=>VT(o,A)),S.fromCache&&"server"===g.source?E.reject(new je(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(S)},error:S=>E.reject(S)}),A=new jT(h,b,{includeMetadataChanges:!0,ku:!0});return FT(o,A)}(yield Ug(n),n.asyncQueue,e,t,r)})),r.promise}const lx=new Map;function IA(n,e,t){if(!t)throw new je(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cx(n,e,t,r){if(!0===e&&!0===r)throw new je(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dx(n){if(!rt.isDocumentKey(n))throw new je(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hx(n){if(rt.isDocumentKey(n))throw new je(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vI(n);throw new je(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fx(n,e){if(e<=0)throw new je(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class px{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new je(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u_{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new px({}),this._settingsFrozen=!1,e instanceof $o?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new je(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(o.options.projectId)}(e))}get app(){if(!this._app)throw new je(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new px(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Cw;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Sw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new je(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lx.get(e);t&&(Ke("ComponentProvider","Removing Datastore"),lx.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class Ai{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class za extends Ai{constructor(e,t,r){super(e,t,mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new rt(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function gx(n,e,...t){if(n=(0,rn.m9)(n),IA("collection","path",e),n instanceof u_){const r=ln.fromString(e,...t);return hx(r),new za(n,null,r)}{if(!(n instanceof Jn||n instanceof za))throw new je(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return hx(r),new za(n.firestore,null,r)}}function _I(n,e,...t){if(n=(0,rn.m9)(n),1===arguments.length&&(e=kv.R()),IA("doc","path",e),n instanceof u_){const r=ln.fromString(e,...t);return dx(r),new Jn(n,null,new rt(r))}{if(!(n instanceof Jn||n instanceof za))throw new je(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return dx(r),new Jn(n.firestore,n instanceof za?n.converter:null,new rt(r))}}function mx(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),(n instanceof Jn||n instanceof za)&&(e instanceof Jn||e instanceof za)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function yx(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),n instanceof Ai&&e instanceof Ai&&n.firestore===e.firestore&&zu(n._query,e._query)&&n.converter===e.converter}class L1{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new yT(this,"async_queue_retry"),this.Qa=()=>{const t=fI();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=fI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=fI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ur;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ae.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Uh(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,dr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=kT.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&ht()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ae.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function bA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class V1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends u_{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new L1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||vx(this),this._firestoreClient.terminate()}}function B1(n=(0,No.getApp)()){return(0,No._getProvider)(n,"firestore").getImmediate()}function $r(n){return n._firestoreClient||vx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Nw(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new T1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function _x(n,e,t){const r=new Ur;return n.asyncQueue.enqueue((0,Ae.Z)(function*(){try{yield rx(n,t),yield ix(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ve.FAILED_PRECONDITION||u.code===ve.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function Ex(n){if(n._initialized||n._terminated)throw new je(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(sr.fromBase64String(e))}catch(t){throw new je(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qa(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kh{constructor(e){this._methodName=e}}class EI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const K1=/^__.*__$/;class Y1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new vc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vh(e,this.data,t,this.fieldTransforms)}}class wx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ix(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class wI{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new wI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return DI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ix(this.ec)&&K1.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Q1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||s_(e)}lc(e,t,r,o=!1){return new wI({ec:e,methodName:t,hc:r,path:Br.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Yh(n){const e=n._freezeSettings(),t=s_(n._databaseId);return new Q1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function II(n,e,t,r,o,u={}){const h=n.lc(u.merge||u.mergeFields?2:0,e,t,o);AA("Data must be an object, but it was:",h,r);const g=Cx(r,h);let E,b;if(u.merge)E=new Th(h.fieldMask),b=h.fieldTransforms;else if(u.mergeFields){const A=[];for(const S of u.mergeFields){const $=SA(e,S,t);if(!h.contains($))throw new je(ve.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);Ax(A,$)||A.push($)}E=new Th(A),b=h.fieldTransforms.filter(S=>E.covers(S.field))}else E=null,b=h.fieldTransforms;return new Y1(new Kr(g),E,b)}class l_ extends Kh{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof l_}}function bx(n,e,t){return new wI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class DA extends Kh{_toFieldTransform(e){return new Lh(e.path,new qu)}isEqual(e){return e instanceof DA}}class J1 extends Kh{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=bx(this,e,!0),r=this.fc.map(u=>Qh(u,t)),o=new Wu(r);return new Lh(e.path,o)}isEqual(e){return this===e}}class X1 extends Kh{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=bx(this,e,!0),r=this.fc.map(u=>Qh(u,t)),o=new ja(r);return new Lh(e.path,o)}isEqual(e){return this===e}}class eP extends Kh{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Fh(e.M,Qw(e.M,this.dc));return new Lh(e.path,t)}isEqual(e){return this===e}}function CA(n,e,t,r){const o=n.lc(1,e,t);AA("Data must be an object, but it was:",o,r);const u=[],h=Kr.empty();lc(r,(E,b)=>{const A=bI(e,E,t);b=(0,rn.m9)(b);const S=o.oc(A);if(b instanceof l_)u.push(A);else{const $=Qh(b,S);null!=$&&(u.push(A),h.set(A,$))}});const g=new Th(u);return new wx(h,g,o.fieldTransforms)}function TA(n,e,t,r,o,u){const h=n.lc(1,e,t),g=[SA(e,r,t)],E=[o];if(u.length%2!=0)throw new je(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(SA(e,u[$])),E.push(u[$+1]);const b=[],A=Kr.empty();for(let $=g.length-1;$>=0;--$)if(!Ax(b,g[$])){const Y=g[$];let ue=E[$];ue=(0,rn.m9)(ue);const Ve=h.oc(Y);if(ue instanceof l_)b.push(Y);else{const Xe=Qh(ue,Ve);null!=Xe&&(b.push(Y),A.set(Y,Xe))}}const S=new Th(b);return new wx(A,S,h.fieldTransforms)}function Dx(n,e,t,r=!1){return Qh(t,n.lc(r?4:3,e))}function Qh(n,e){if(Tx(n=(0,rn.m9)(n)))return AA("Unsupported field value:",e,n),Cx(n,e);if(n instanceof Kh)return function(t,r){if(!Ix(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let g=Qh(h,r.uc(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=hr.fromDate(t);return{timestampValue:Zu(r.M,o)}}if(t instanceof hr){const o=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zu(r.M,o)}}if(t instanceof EI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qa)return{bytesValue:Dg(r.M,t._byteString)};if(t instanceof Jn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GC(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${vI(t)}`)}(n,e)}function Cx(n,e){const t={};return bC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lc(n,(r,o)=>{const u=Qh(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Tx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof EI||n instanceof qa||n instanceof Jn||n instanceof Kh)}function AA(n,e,t){if(!Tx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function SA(n,e,t){if((e=(0,rn.m9)(e))instanceof Yu)return e._internalPath;if("string"==typeof e)return bI(n,e);throw DI("Field path arguments must be of type string or ",n,!1,void 0,t)}const tP=new RegExp("[~\\*/\\[\\]]");function bI(n,e,t){if(e.search(tP)>=0)throw DI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yu(...e.split("."))._internalPath}catch(r){throw DI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function DI(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${r}`),h&&(E+=` in document ${o}`),E+=")"),new je(ve.INVALID_ARGUMENT,g+n+E)}function Ax(n,e){return n.some(t=>t.isEqual(e))}class c_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(CI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nP extends c_{data(){return super.data()}}function CI(n,e){return"string"==typeof e?bI(n,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}class Jh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qu extends c_{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new d_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(CI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class d_ extends Qu{data(e={}){return super.data(e)}}class Dc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Jh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new d_(this._firestore,this._userDataWriter,r.key,r,new Jh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new d_(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Jh(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const g=new d_(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Jh(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,b=-1;return 0!==h.type&&(E=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),b=u.indexOf(h.doc.key)),{type:rP(h.type),doc:g,oldIndex:E,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function Sx(n,e){return n instanceof Qu&&e instanceof Qu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dc&&e instanceof Dc&&n._firestore===e._firestore&&yx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Mx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new je(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h_{}function Cc(n,...e){for(const t of e)n=t._apply(n);return n}class iP extends h_{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Yh(e.firestore),r=function(o,u,h,g,E,b,A){let S;if(E.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new je(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){kx(A,b);const Y=[];for(const ue of A)Y.push(Ox(g,o,ue));S={arrayValue:{values:Y}}}else S=Ox(g,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||kx(A,b),S=Dx(h,"where",A,"in"===b||"not-in"===b);const $=jr.create(E,b,S);return function(Y,ue){if(ue.S()){const Xe=zo(Y);if(null!==Xe&&!Xe.isEqual(ue.field))throw new je(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Xe.toString()}' and '${ue.field.toString()}'`);const Gt=pg(Y);null!==Gt&&Fx(0,ue.field,Gt)}const Ve=function(Xe,Gt){for(const Bt of Xe.filters)if(Gt.indexOf(Bt.op)>=0)return Bt.op;return null}(Y,function(Xe){switch(Xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ue.op));if(null!==Ve)throw new je(ve.INVALID_ARGUMENT,Ve===ue.op?`Invalid query. You cannot use more than one '${ue.op.toString()}' filter.`:`Invalid query. You cannot use '${ue.op.toString()}' filters with '${Ve.toString()}' filters.`)}(o,$),$}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Ai(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new Go(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class oP extends h_{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new je(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new je(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Oh(o,u);return function(g,E){if(null===pg(g)){const b=zo(g);null!==b&&Fx(0,b,E.field)}}(r,h),h}(e._query,this._c,this.gc);return new Ai(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Go(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xx extends h_{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Ai(e.firestore,e.converter,Zw(e._query,this.yc,this.Ic))}}class Rx extends h_{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Px(e,this.type,this.Tc,this.Ec);return new Ai(e.firestore,e.converter,(o=t,new Go((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Nx extends h_{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Px(e,this.type,this.Tc,this.Ec);return new Ai(e.firestore,e.converter,(o=t,new Go((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Px(n,e,t,r){if(t[0]=(0,rn.m9)(t[0]),t[0]instanceof c_)return function(o,u,h,g,E){if(!g)throw new je(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const b=[];for(const A of Ba(o))if(A.field.isKeyField())b.push(ju(u,g.key));else{const S=g.data.field(A.field);if(lg(S))throw new je(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const $=A.field.canonicalString();throw new je(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(S)}return new Gu(b,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Yh(n.firestore);return function(u,h,g,E,b,A){const S=u.explicitOrderBy;if(b.length>S.length)throw new je(ve.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Y=0;Y<b.length;Y++){const ue=b[Y];if(S[Y].field.isKeyField()){if("string"!=typeof ue)throw new je(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ue}`);if(!gg(u)&&-1!==ue.indexOf("/"))throw new je(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ue}' contains a slash.`);const Ve=u.path.child(ln.fromString(ue));if(!rt.isDocumentKey(Ve))throw new je(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const Xe=new rt(Ve);$.push(ju(h,Xe))}else{const Ve=Dx(g,E,ue);$.push(Ve)}}return new Gu($,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Ox(n,e,t){if("string"==typeof(t=(0,rn.m9)(t))){if(""===t)throw new je(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gg(e)&&-1!==t.indexOf("/"))throw new je(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!rt.isDocumentKey(r))throw new je(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(n,new rt(r))}if(t instanceof Jn)return ju(n,t._key);throw new je(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vI(t)}.`)}function kx(n,e){if(!Array.isArray(n)||0===n.length)throw new je(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new je(ve.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Fx(n,e,t){if(!t.isEqual(e))throw new je(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const pP={maxAttempts:5};class MA{convertValue(e,t="none"){switch(dc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(La(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return lc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new EI(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=DC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){const t=jo(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);xt(WS(r));const o=new $o(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(t)||dr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function TI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gP extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class Lx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yh(e)}set(e,t,r){this._verifyNotCommitted();const o=Tc(e,this._firestore),u=TI(o.converter,t,r),h=II(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Dr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Tc(e,this._firestore);let h;return h="string"==typeof(t=(0,rn.m9)(t))||t instanceof Yu?TA(this._dataReader,"WriteBatch.update",u._key,t,r,o):CA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tc(e,this._firestore);return this._mutations=this._mutations.concat(new i(t._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tc(n,e){if((n=(0,rn.m9)(n)).firestore!==e)throw new je(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Xh extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function Vx(n,e,t){n=cn(n,Jn);const r=cn(n.firestore,or),o=TI(n.converter,e,t);return Bg(r,[II(Yh(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Dr.none())])}function Ux(n,e,t,...r){n=cn(n,Jn);const o=cn(n.firestore,or),u=Yh(o);let h;return h="string"==typeof(e=(0,rn.m9)(e))||e instanceof Yu?TA(u,"updateDoc",n._key,e,t,r):CA(u,"updateDoc",n._key,e),Bg(o,[h.toMutation(n._key,Dr.exists(!0))])}function Bx(n,...e){var t,r,o;n=(0,rn.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||bA(e[h])||(u=e[h],h++);const g={includeMetadataChanges:u.includeMetadataChanges};if(bA(e[h])){const S=e[h];e[h]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[h+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[h+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let E,b,A;if(n instanceof Jn)b=cn(n.firestore,or),A=mc(n._key.path),E={next:S=>{e[h]&&e[h](xA(b,n,S))},error:e[h+1],complete:e[h+2]};else{const S=cn(n,Ai);b=cn(S.firestore,or),A=S._query;const $=new Xh(b);E={next:Y=>{e[h]&&e[h](new Dc(b,$,S,Y))},error:e[h+1],complete:e[h+2]},Mx(n._query)}return function(S,$,Y,ue){const Ve=new mI(ue),Xe=new jT($,Ve,Y);return S.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return FT(yield Ug(S),Xe)})),()=>{Ve.Aa(),S.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return VT(yield Ug(S),Xe)}))}}($r(b),A,g,E)}function Bg(n,e){return function(t,r){const o=new Ur;return t.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function o1(n,e,t){return qT.apply(this,arguments)}(yield EA(t),r,o)})),o.promise}($r(n),e)}function xA(n,e,t){const r=t.docs.get(e._key),o=new Xh(n);return new Qu(n,o,e._key,r,new Jh(t.hasPendingWrites,t.fromCache),e.converter)}class CP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yh(e)}get(e){const t=Tc(e,this._firestore),r=new gP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ht();const u=o[0];if(u.isFoundDocument())return new c_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new c_(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const o=Tc(e,this._firestore),u=TI(o.converter,t,r),h=II(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=Tc(e,this._firestore);let h;return h="string"==typeof(t=(0,rn.m9)(t))||t instanceof Yu?TA(this._dataReader,"Transaction.update",u._key,t,r,o):CA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=Tc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Tc(e,this._firestore),r=new Xh(this._firestore);return super.get(e).then(o=>new Qu(this._firestore,r,t._key,o._document,new Jh(!1,!1),t.converter))}}function RA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $x(){if("undefined"==typeof Uint8Array)throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function Hx(){if(!function MS(){return"undefined"!=typeof atob}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vu=No.SDK_VERSION,(0,No._registerComponent)(new Fl.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new or(o,new EC(t.getProvider("auth-internal")),new wC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,No.registerVersion)(bw,"3.4.9",n),(0,No.registerVersion)(bw,"3.4.9","esm2017")}();class f_{constructor(e){this._delegate=e}static fromBase64String(e){return Hx(),new f_(qa.fromBase64String(e))}static fromUint8Array(e){return $x(),new f_(qa.fromUint8Array(e))}toBase64(){return Hx(),this._delegate.toBase64()}toUint8Array(){return $x(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NA(n){return function OP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class kP{enableIndexedDbPersistence(e,t){return function j1(n,e){Ex(n=cn(n,or));const t=$r(n),r=n._freezeSettings(),o=new fA;return _x(t,o,new tx(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $1(n){Ex(n=cn(n,or));const e=$r(n),t=n._freezeSettings(),r=new fA;return _x(e,r,new I1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function H1(n){if(n._initialized&&!n._terminated)throw new je(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{yield(t=(0,Ae.Z)(function*(r){if(!qo.vt())return Promise.resolve();const o=r+"main";yield qo.delete(o)}),function(r){return t.apply(this,arguments)})(sT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Gx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $o||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ch("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function k1(n,e,t,r={}){var o;const u=(n=cn(n,u_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ch("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,g;if("string"==typeof r.mockUserToken)h=r.mockUserToken,g=br.MOCK_USER;else{h=(0,rn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new je(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new br(E)}n._authCredentials=new Tw(new Dw(h,g))}}(this._delegate,e,t,r)}enableNetwork(){return function z1(n){return function A1(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield sx(n),t=yield ox(n);return e.setNetworkEnabled(!0),function(r){const o=st(r);return o.wu.delete(0),o_(o)}(t)}))}($r(n=cn(n,or)))}(this._delegate)}disableNetwork(){return function q1(n){return function S1(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield sx(n),t=yield ox(n);return e.setNetworkEnabled(!1),(r=(0,Ae.Z)(function*(o){const u=st(o);u.wu.add(0),yield Ng(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}($r(n=cn(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function G1(n){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function c1(n,e){return QT.apply(this,arguments)}(yield EA(e),t)})),t.promise}($r(n=cn(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function DP(n,e){return function R1(n,e){const t=new mI(e);return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield Ug(n),o=t,st(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield Ug(n),o=t,void st(r).bu.delete(o);var r,o}))}}($r(n=cn(n,or)),bA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jg(this,gx(this._delegate,e))}catch(t){throw ji(t,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,_I(this._delegate,e))}catch(t){throw ji(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $i(this,function F1(n,e){if(n=cn(n,u_),IA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ai(n,null,(t=e,new Go(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ji(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function TP(n,e,t){n=cn(n,or);const r=Object.assign(Object.assign({},pP),t);return function(o){if(o.maxAttempts<1)throw new je(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function N1(n,e,t){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){const o=yield(u=n,yI(u).then(h=>h.datastore));var u;new C1(n.asyncQueue,o,t,e,r).run()})),r.promise}($r(n),o=>e(new CP(n,o)),r)}(this._delegate,t=>e(new zx(this,t)))}batch(){return $r(this._delegate),new qx(new Lx(this._delegate,e=>Bg(this._delegate,e)))}loadBundle(e){return function W1(n,e){const t=$r(n=cn(n,or)),r=new V1;return function P1(n,e,t,r){const o=function(u,h){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,b){if(E instanceof Uint8Array)return nx(E,b);if(E instanceof ArrayBuffer)return nx(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new b1(E,h);var E}(t,s_(e));n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){!function w1(n,e,t){const r=st(n);var o;(o=(0,Ae.Z)(function*(u,h,g){try{const E=yield h.getMetadata();if(yield function($,Y){const ue=st($),Ve=ai(Y.createTime);return ue.persistence.runTransaction("hasNewerBundle","readonly",Xe=>ue._s.getBundleMetadata(Xe,Y.id)).then(Xe=>!!Xe&&Xe.createTime.compareTo(Ve)>=0)}(u.localStore,E))return yield h.close(),g._completeWith({taskState:"Success",documentsLoaded:($=E).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(zM(E));const b=new XN(E,u.localStore,h.M);let A=yield h.ma();for(;A;){const $=yield b.Fu(A);$&&g._updateProgress($),A=yield h.ma()}const S=yield b.complete();return yield Ku(u,S.Lu,void 0),yield function($,Y){const ue=st($);return ue.persistence.runTransaction("Save bundle","readwrite",Ve=>ue._s.saveBundleMetadata(Ve,Y))}(u.localStore,E),g._completeWith(S.progress),Promise.resolve(S.Bu)}catch(E){return Ch("SyncEngine",`Loading bundle failed with ${E}`),g._failWith(E),Promise.resolve(new Set)}var $}),function(u,h,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield EA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Z1(n,e){return function O1(n,e){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){return function(t,r){const o=st(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield _A(n),e)}))}($r(n=cn(n,or)),e).then(t=>t?new Ai(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $i(this,t):null)}}class AI extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new f_(new qa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(t,this.firestore,null)}}class zx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AI(e)}get(e){const t=tf(e);return this._delegate.get(t).then(r=>new p_(this._firestore,new Qu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=tf(e);return r?(RA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=tf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=tf(e);return this._delegate.delete(t),this}}class qx{constructor(e){this._delegate=e}set(e,t,r){const o=tf(e);return r?(RA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=tf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=tf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ef{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new d_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new g_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ef.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new ef(e,new AI(e),t),o.set(t,u)),u}}ef.INSTANCES=new WeakMap;class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new no(t,new Jn(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new no(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new jg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jg(this.firestore,gx(this._delegate,e))}catch(t){throw ji(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.m9)(e))instanceof Jn&&mx(this._delegate,e)}set(e,t){t=RA("DocumentReference.set",t);try{return t?Vx(this._delegate,e,t):Vx(this._delegate,e)}catch(r){throw ji(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ux(this._delegate,e):Ux(this._delegate,e,t,...r)}catch(o){throw ji(o,"updateDoc()","DocumentReference.update()")}}delete(){return function IP(n){return Bg(cn(n.firestore,or),[new i(n._key,Dr.none())])}(this._delegate)}onSnapshot(...e){const t=Wx(e),r=Zx(e,o=>new p_(this.firestore,new Qu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Bx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yP(n){n=cn(n,Jn);const e=cn(n.firestore,or),t=$r(e),r=new Xh(e);return function M1(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,u,h){try{const g=yield function(E,b){const A=st(E);return A.persistence.runTransaction("read document","readonly",S=>A.fi.Ls(S,b))}(o,u);g.isFoundDocument()?h.resolve(g):g.isNoDocument()?h.resolve(null):h.reject(new je(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const E=kg(g,`Failed to get document '${u} from cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield _A(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Qu(e,r,n._key,o,new Jh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function vP(n){n=cn(n,Jn);const e=cn(n.firestore,or);return ax($r(e),n._key,{source:"server"}).then(t=>xA(e,n,t))}(this._delegate):function mP(n){n=cn(n,Jn);const e=cn(n.firestore,or);return ax($r(e),n._key).then(t=>xA(e,n,t))}(this._delegate),t.then(r=>new p_(this.firestore,new Qu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?ef.getInstance(this.firestore,e):null))}}function ji(n,e,t){return n.message=n.message.replace(e,t),n}function Wx(n){for(const e of n)if("object"==typeof e&&!NA(e))return e;return{}}function Zx(n,e){var t,r;let o;return o=NA(n[0])?n[0]:NA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class p_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Sx(this._delegate,e._delegate)}}class g_ extends p_{data(e){const t=this._delegate.data(e);return function _C(n,e){n||ht()}(void 0!==t),t}}class $i{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AI(e)}where(e,t,r){try{return new $i(this.firestore,Cc(this._delegate,function sP(n,e,t){const r=e,o=CI("where",n);return new iP(o,r,t)}(e,t,r)))}catch(o){throw ji(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $i(this.firestore,Cc(this._delegate,function aP(n,e="asc"){const t=e,r=CI("orderBy",n);return new oP(r,t)}(e,t)))}catch(r){throw ji(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $i(this.firestore,Cc(this._delegate,function uP(n){return fx("limit",n),new xx("limit",n,"F")}(e)))}catch(t){throw ji(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $i(this.firestore,Cc(this._delegate,function lP(n){return fx("limitToLast",n),new xx("limitToLast",n,"L")}(e)))}catch(t){throw ji(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $i(this.firestore,Cc(this._delegate,function cP(...n){return new Rx("startAt",n,!0)}(...e)))}catch(t){throw ji(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $i(this.firestore,Cc(this._delegate,function dP(...n){return new Rx("startAfter",n,!1)}(...e)))}catch(t){throw ji(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $i(this.firestore,Cc(this._delegate,function hP(...n){return new Nx("endBefore",n,!1)}(...e)))}catch(t){throw ji(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $i(this.firestore,Cc(this._delegate,function fP(...n){return new Nx("endAt",n,!0)}(...e)))}catch(t){throw ji(t,"endAt()","Query.endAt()")}}isEqual(e){return yx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function EP(n){n=cn(n,Ai);const e=cn(n.firestore,or),t=$r(e),r=new Xh(e);return function x1(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,u,h){try{const g=yield cI(o,u,!0),E=new ZM(u,g._i),b=E.Wu(g.documents),A=E.applyChanges(b,!1);h.resolve(A.snapshot)}catch(g){const E=kg(g,`Failed to execute query '${u} against cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield _A(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Dc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function wP(n){n=cn(n,Ai);const e=cn(n.firestore,or),t=$r(e),r=new Xh(e);return ux(t,n._query,{source:"server"}).then(o=>new Dc(e,r,n,o))}(this._delegate):function _P(n){n=cn(n,Ai);const e=cn(n.firestore,or),t=$r(e),r=new Xh(e);return Mx(n._query),ux(t,n._query).then(o=>new Dc(e,r,n,o))}(this._delegate),t.then(r=>new PA(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Wx(e),r=Zx(e,o=>new PA(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Bx(this._delegate,t,r)}withConverter(e){return new $i(this.firestore,this._delegate.withConverter(e?ef.getInstance(this.firestore,e):null))}}class LP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new g_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $i(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new g_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new LP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new g_(this._firestore,r))})}isEqual(e){return Sx(this._delegate,e._delegate)}}class jg extends $i{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return new no(this.firestore,void 0===e?_I(this._delegate):_I(this._delegate,e))}catch(t){throw ji(t,"doc()","CollectionReference.doc()")}}add(e){return function bP(n,e){const t=cn(n.firestore,or),r=_I(n),o=TI(n.converter,e);return Bg(t,[II(Yh(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new no(this.firestore,t))}isEqual(e){return mx(this._delegate,e._delegate)}withConverter(e){return new jg(this.firestore,this._delegate.withConverter(e?ef.getInstance(this.firestore,e):null))}}function tf(n){return cn(n,Jn)}class OA{constructor(...e){this._delegate=new Yu(...e)}static documentId(){return new OA(Br.keyField().canonicalString())}isEqual(e){return(e=(0,rn.m9)(e))instanceof Yu&&this._delegate._internalPath.isEqual(e._internalPath)}}class nf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function SP(){return new DA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new nf(e)}static delete(){const e=function AP(){return new l_("deleteField")}();return e._methodName="FieldValue.delete",new nf(e)}static arrayUnion(...e){const t=function MP(...n){return new J1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new nf(t)}static arrayRemove(...e){const t=function xP(...n){return new X1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new nf(t)}static increment(e){const t=function RP(n){return new eP("increment",n)}(e);return t._methodName="FieldValue.increment",new nf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const VP={Firestore:Gx,GeoPoint:EI,Timestamp:hr,Blob:f_,Transaction:zx,WriteBatch:qx,DocumentReference:no,DocumentSnapshot:p_,Query:$i,QueryDocumentSnapshot:g_,QuerySnapshot:PA,CollectionReference:jg,FieldPath:OA,FieldValue:nf,setLogLevel:function FP(n){!function Ov(n){Bo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Kx(n,e){return function jP(n,e=OD.z){return new Os.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function kA(n,e){return Kx(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function SI(n,e){return kA(n,e).pipe(yd(void 0),ir(),(0,Ct.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,g)=>{const E=o.find(A=>A.doc.ref.isEqual(h.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&b&&JSON.stringify(b.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:h}})}),u}))}function Yx(n,e,t){return SI(n,t).pipe(zs((r,o)=>function HP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function GP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),Hy(),(0,Ct.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function FA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Qx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function BP(n){(function UP(n,e){n.INTERNAL.registerComponent(new Fl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},VP)))})(n,(e,t)=>new Gx(e,t,new kP)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(kD.Z);class Jx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=SI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(yd(void 0),ir(),cr(([r,o])=>o.length>0||!r),(0,Ct.U)(([r,o])=>o),Xt.iC)}auditTrail(e){return this.stateChanges(e).pipe(zs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qx(e);return Yx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(e={}){return kA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Xt.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(Xt.iC)}add(e){return this.ref.add(e)}doc(e){return new Xx(this.ref.doc(e),this.afs)}}class Xx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=nR(r,t);return new Jx(o,u,this.afs)}snapshotChanges(){return function $P(n,e){return Kx(n,e).pipe(yd(void 0),ir(),(0,Ct.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,$n.D)(this.ref.get(e)).pipe(Xt.iC)}}class zP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),cr(t=>t.length>0),Xt.iC):SI(this.query,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}auditTrail(e){return this.stateChanges(e).pipe(zs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qx(e);return Yx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(e={}){return kA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Xt.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(Xt.iC)}}const eR=new d.OlP("angularfire2.enableFirestorePersistence"),tR=new d.OlP("angularfire2.firestore.persistenceSettings"),qP=new d.OlP("angularfire2.firestore.settings"),WP=new d.OlP("angularfire2.firestore.use-emulator");function nR(n,e=(t=>t)){return{query:e(n),ref:n}}let LA=(()=>{class n{constructor(t,r,o,u,h,g,E,b,A,S,$,Y,ue,Ve,Xe,Gt,Bt){this.schedulers=E;const on=(0,ti.on)(t,g,r),qt=A;S&&$y(on,g,$,ue,Ve,Xe,Y,Gt),[this.firestore,this.persistenceEnabled$]=(0,ti.cc)(`${on.name}.firestore`,"AngularFirestore",on.name,()=>{const an=g.runOutsideAngular(()=>on.firestore());if(u&&an.settings(u),qt&&an.useEmulator(...qt),o&&!nr(h)){const En=()=>{try{return(0,$n.D)(an.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Si){return"undefined"!=typeof console&&console.warn(Si),Dt(!1)}};return[an,g.runOutsideAngular(En)]}return[an,Dt(!1)]},[u,qt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=nR(o,r),g=this.schedulers.ngZone.run(()=>u);return new Jx(g,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new zP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Xx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(eR,8),d.LFG(qP,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Xt.HU),d.LFG(tR,8),d.LFG(WP,8),d.LFG(f0,8),d.LFG(Fy,8),d.LFG(Ly,8),d.LFG(Vy,8),d.LFG(Uy,8),d.LFG(By,8),d.LFG(jy,8),d.LFG(zl,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZP=(()=>{class n{constructor(){ql.Z.registerVersion("angularfire",Xt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eR,useValue:!0},{provide:tR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[LA]}),n})(),MI=(()=>{class n{constructor(t){this.db=t}alta(t,r){var o=this;return(0,Ae.Z)(function*(){try{return yield o.db.collection(r).add(t)}catch(u){return console.log("Error al realizar alta a Firebase: ",u),u}})()}baja(t,r){var o=this;return(0,Ae.Z)(function*(){try{return yield o.db.collection(r).doc(t).delete()}catch(u){return console.log("Error al realizar baja a Firebase: ",u),u}})()}getCollection(t){var r=this;return(0,Ae.Z)(function*(){try{return yield r.db.collection(t).snapshotChanges()}catch(o){return console.log("Error al obtener los objetos de Firebase: ",o),o}})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(LA))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KP{}class Ac{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(h):this.headers.set(u,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ac?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ac;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ac?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let h=this.headers.get(t);if(!h)return;h=h.filter(g=>-1===u.indexOf(g)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class YP{encodeKey(e){return rR(e)}encodeValue(e){return rR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const JP=/%(\d[a-f0-9])/gi,XP={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function rR(n){return encodeURIComponent(n).replace(JP,(e,t)=>{var r;return null!==(r=XP[t])&&void 0!==r?r:e})}function iR(n){return`${n}`}class Sc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new YP,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function QP(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[h,g]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],E=t.get(h)||[];E.push(g),t.set(h,E)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Sc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(iR(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(iR(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class eO{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function sR(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function oR(n){return"undefined"!=typeof Blob&&n instanceof Blob}function aR(n){return"undefined"!=typeof FormData&&n instanceof FormData}class m_{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function tO(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ac),this.context||(this.context=new eO),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+h}}else this.params=new Sc,this.urlWithParams=t}serializeBody(){return null===this.body?null:sR(this.body)||oR(this.body)||aR(this.body)||function nO(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||aR(this.body)?null:oR(this.body)?this.body.type||null:sR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,u=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,g=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,E=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,A=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce(($,Y)=>$.set(Y,e.setHeaders[Y]),b)),e.setParams&&(A=Object.keys(e.setParams).reduce(($,Y)=>$.set(Y,e.setParams[Y]),A)),new m_(r,o,h,{params:A,headers:b,context:S,reportProgress:E,responseType:u,withCredentials:g})}}var vi=(()=>((vi=vi||{})[vi.Sent=0]="Sent",vi[vi.UploadProgress=1]="UploadProgress",vi[vi.ResponseHeader=2]="ResponseHeader",vi[vi.DownloadProgress=3]="DownloadProgress",vi[vi.Response=4]="Response",vi[vi.User=5]="User",vi))();class VA extends class rO{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ac,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=vi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new VA({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function UA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let iO=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof m_)u=t;else{let E,b;E=o.headers instanceof Ac?o.headers:new Ac(o.headers),o.params&&(b=o.params instanceof Sc?o.params:new Sc({fromObject:o.params})),u=new m_(t,r,void 0!==o.body?o.body:null,{headers:E,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=Dt(u).pipe(vu(E=>this.handler.handle(E)));if(t instanceof m_||"events"===o.observe)return h;const g=h.pipe(cr(E=>E instanceof VA));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,Ct.U)(E=>{if(null!==E.body&&!(E.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return E.body}));case"blob":return g.pipe((0,Ct.U)(E=>{if(null!==E.body&&!(E.body instanceof Blob))throw new Error("Response is not a Blob.");return E.body}));case"text":return g.pipe((0,Ct.U)(E=>{if(null!==E.body&&"string"!=typeof E.body)throw new Error("Response is not a string.");return E.body}));default:return g.pipe((0,Ct.U)(E=>E.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Sc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,UA(o,r))}post(t,r,o={}){return this.request("POST",t,UA(o,r))}put(t,r,o={}){return this.request("PUT",t,UA(o,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(KP))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),oO=(()=>{class n{constructor(t){this.httpClient=t,this.url="https://restcountries.com/v3.1/subregion/europe",this.urlPelis="https://api.themoviedb.org/3/movie/",this.apiKey="e286de8cab14e42ecc0868b49545d5cf",this.arrayPelis=[]}getPaises(){return this.httpClient.get(this.url)}getPeliculas(){return this.httpClient.get(this.urlPelis+20+"?api_key="+this.apiKey)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(iO))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aO=function(n){return[n]};function uO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"ul",5)(1,"li",6),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().getPaisSeleccionado(u)}),d.TgZ(2,"div")(3,"h6",7),d._uU(4),d.qZA(),d.TgZ(5,"small",2),d._uU(6),d.qZA()(),d.TgZ(7,"span",2),d._UZ(8,"img",8),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(4),d.Oqu(t.translations.spa.common),d.xp6(2),d.Oqu(t.capital),d.xp6(2),d.Q6J("src",d.VKq(3,aO,t.flags.png),d.LSH)}}let lO=(()=>{class n{constructor(t){this.http=t,this.paises=[],this.pelis=[],this.paisSeleccionado=new d.vpe,t.getPaises().subscribe(r=>{this.paises=r,console.log(this.paises)})}ngOnInit(){}getPaisSeleccionado(t){this.paisSeleccionado.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(oO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-paises"]],outputs:{paisSeleccionado:"paisSeleccionado"},decls:6,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[1,"col","listaPaises"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed","paisContainer",3,"click"],[1,"my-0"],["alt","","width","84px","height","56px",1,"float-right",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),d._uU(3,"Nacionalidad"),d.qZA()(),d.TgZ(4,"div",3),d.YNc(5,uO,9,5,"ul",4),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.paises))},directives:[Mn],styles:[".container[_ngcontent-%COMP%]{height:65vh}.listaPaises[_ngcontent-%COMP%]{height:75%;overflow-y:scroll}.paisContainer[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}"]}),n})(),cO=(()=>{class n{constructor(t,r){this.fb=t,this.db=r,this.formGroup=this.fb.group({nombre:"",apellido:"",alias:"",edad:"",sexo:"",nacionalidad:""})}ngOnInit(){}obtenerNacionalidadActor(t){this.nacionalidad=t,this.formGroup.controls.nacionalidad.setValue(t.translations.spa.common)}altaActor(){var t=this;return(0,Ae.Z)(function*(){let r=t.formGroup.value;(yield t.db.alta(r,"Actor"))&&t.formGroup.reset()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jf),d.Y36(MI))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-alta"]],decls:80,vars:2,consts:[[1,"container"],[1,"py-5","text-center"],["src","../../../assets/bradPitt.png","alt","","width","100","height","100",1,"d-block","mx-auto","mb-4"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"paisSeleccionado"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup","submit"],[1,"col-md-6","mb-3"],["for","nombre"],["type","text","id","nombre","placeholder","","value","","formControlName","nombre","required","",1,"form-control"],[1,"invalid-feedback"],["for","apellido"],["type","text","id","apellido","placeholder","","value","","formControlName","apellido","required","",1,"form-control"],["for","alias"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","alias","placeholder","Username","formControlName","alias","required","",1,"form-control"],[1,"invalid-feedback",2,"width","100%"],["for","sexo"],["id","sexo","formControlName","sexo","required","",1,"custom-select","d-block","w-100"],["value",""],["value","femenino"],["value","masculino"],["value","otro"],["for","edad"],[1,"text-muted"],["type","number","id","edad","placeholder","30","formControlName","edad",1,"form-control"],["for","nacionalidad"],["type","text","id","nacionalidad","placeholder","Ingrese una nacionalidad","formControlName","nacionalidad","required","","readonly","",1,"form-control"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h2"),d._uU(4,"Alta actores"),d.qZA()(),d.TgZ(5,"div",3)(6,"div",4)(7,"app-tabla-paises",5),d.NdJ("paisSeleccionado",function(u){return r.obtenerNacionalidadActor(u)}),d.qZA()(),d.TgZ(8,"div",6)(9,"h4",7),d._uU(10,"Nuevo actor"),d.qZA(),d.TgZ(11,"form",8),d.NdJ("submit",function(){return r.altaActor()}),d.TgZ(12,"div",3)(13,"div",9)(14,"label",10),d._uU(15,"Nombre"),d.qZA(),d._UZ(16,"input",11),d.TgZ(17,"div",12),d._uU(18," Valid first name is required. "),d.qZA()(),d.TgZ(19,"div",9)(20,"label",13),d._uU(21,"Apellido"),d.qZA(),d._UZ(22,"input",14),d.TgZ(23,"div",12),d._uU(24," Valid last name is required. "),d.qZA()()(),d.TgZ(25,"div",7)(26,"label",15),d._uU(27,"Alias"),d.qZA(),d.TgZ(28,"div",16)(29,"div",17)(30,"span",18),d._uU(31,"@"),d.qZA()(),d._UZ(32,"input",19),d.TgZ(33,"div",20),d._uU(34," Your username is required. "),d.qZA()()(),d.TgZ(35,"div",3)(36,"div",9)(37,"label",21),d._uU(38,"G\xe9nero"),d.qZA(),d.TgZ(39,"select",22)(40,"option",23),d._uU(41,"Elegir..."),d.qZA(),d.TgZ(42,"option",24),d._uU(43,"Femenino"),d.qZA(),d.TgZ(44,"option",25),d._uU(45,"Masculino"),d.qZA(),d.TgZ(46,"option",26),d._uU(47,"Otro"),d.qZA()(),d.TgZ(48,"div",12),d._uU(49," Por favor seleccionar uno. "),d.qZA()(),d.TgZ(50,"div",9)(51,"label",27),d._uU(52,"Edad "),d.TgZ(53,"span",28),d._uU(54,"(Optional)"),d.qZA()(),d._UZ(55,"input",29),d.TgZ(56,"div",12),d._uU(57," Please enter a valid email address for shipping updates. "),d.qZA()()(),d.TgZ(58,"div",7)(59,"label",30),d._uU(60,"Nacionalidad"),d.qZA(),d._UZ(61,"input",31),d.TgZ(62,"div",12),d._uU(63," Por favor ingrese un pa\xeds. "),d.qZA()(),d._UZ(64,"hr",32),d.TgZ(65,"button",33),d._uU(66,"ALTA"),d.qZA()()()(),d.TgZ(67,"footer",34)(68,"p",35),d._uU(69,"\xa9 2017-2020 Company Name"),d.qZA(),d.TgZ(70,"ul",36)(71,"li",37)(72,"a",38),d._uU(73,"Privacy"),d.qZA()(),d.TgZ(74,"li",37)(75,"a",38),d._uU(76,"Terms"),d.qZA()(),d.TgZ(77,"li",37)(78,"a",38),d._uU(79,"Support"),d.qZA()()()()()),2&t&&(d.xp6(11),d.Q6J("formGroup",r.formGroup),d.xp6(54),d.Q6J("disabled",r.formGroup.invalid))},directives:[lO,va,su,To,ks,Xr,m,mu,re,Fe,Ei,El],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin-top:1rem}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}"]}),n})();function dO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"ul",5)(1,"li",6),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().getActorSeleccionado(u)}),d.TgZ(2,"div")(3,"h6",7),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.qZA()(),d.TgZ(7,"small",2),d._uU(8),d.qZA()()()()}if(2&n){const t=e.$implicit;d.xp6(4),d.hij("",t.nombre," "),d.xp6(2),d.Oqu(t.apellido),d.xp6(2),d.Oqu(t.edad)}}let lR=(()=>{class n{constructor(t){this.srv=t,this.actores=[],this.actorSeleccionado=new d.vpe}ngOnInit(){this.srv.getCollection("Actor").then(t=>t.subscribe(r=>{r.forEach(o=>{this.actores.push(o.payload.doc.data())})}))}getActorSeleccionado(t){this.actorSeleccionado.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(MI))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-listado"]],outputs:{actorSeleccionado:"actorSeleccionado"},decls:6,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[1,"col","listaPaises"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed","paisContainer",3,"click"],[1,"my-0"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),d._uU(3,"Actores"),d.qZA()(),d.TgZ(4,"div",3),d.YNc(5,dO,9,3,"ul",4),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.actores))},directives:[Mn],styles:[""]}),n})(),hO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenido"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"bienvenido works!"),d.qZA())},styles:[""]}),n})();class fO{constructor(e,t,r,o,u,h,g){this.id=e,this.nombre=t,this.tipo=r,this.fechaEstreno=o,this.cantidadPublico=u,this.fotoPelicula=h,this.actor=g}}const pO=function(){return["/altaPelicula"]},gO=function(){return["/altaActor"]};let cR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:22,vars:4,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["href","#",1,"nav-link"],[1,"sr-only"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"form-inline","my-2","my-lg-0"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","mr-sm-2"],["type","submit",1,"btn","btn-outline-success","my-2","my-sm-0"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._uU(2,"Navbar"),d.qZA(),d.TgZ(3,"button",2),d._UZ(4,"span",3),d.qZA(),d.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),d._uU(9,"Home "),d.TgZ(10,"span",8),d._uU(11,"(current)"),d.qZA()()(),d.TgZ(12,"li",9)(13,"a",10),d._uU(14,"Alta Peliculas"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",10),d._uU(17,"Alta Actores"),d.qZA()()(),d.TgZ(18,"form",11),d._UZ(19,"input",12),d.TgZ(20,"button",13),d._uU(21,"Search"),d.qZA()()()()),2&t&&(d.xp6(13),d.Q6J("routerLink",d.DdM(2,pO)),d.xp6(3),d.Q6J("routerLink",d.DdM(3,gO)))},directives:[Du,va,su,Co],styles:[""]}),n})();function mO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td")(6,"button",3),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().mostrarDetallePelicula(u)}),d._uU(7,"VER DETALLE"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.id),d.xp6(2),d.Oqu(t.nombre)}}let yO=(()=>{class n{constructor(){this.peliculaSeleccionada=new d.vpe}ngOnInit(){}mostrarDetallePelicula(t){this.peliculaSeleccionada.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-pelicula"]],inputs:{inputTablaPeliculas:"inputTablaPeliculas"},outputs:{peliculaSeleccionada:"peliculaSeleccionada"},decls:11,vars:1,consts:[[1,"table","table-striped","table-dark"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),d._uU(4,"#"),d.qZA(),d.TgZ(5,"th",1),d._uU(6,"Nombre"),d.qZA(),d.TgZ(7,"th",1),d._uU(8,"Detalle"),d.qZA()()(),d.TgZ(9,"tbody"),d.YNc(10,mO,8,2,"tr",2),d.qZA()()),2&t&&(d.xp6(10),d.Q6J("ngForOf",r.inputTablaPeliculas))},directives:[Mn],styles:[".listaPaises[_ngcontent-%COMP%]{height:10%;overflow-y:scroll}"]}),n})(),vO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detalle-pelicula"]],inputs:{inputDetallePelicula:"inputDetallePelicula"},decls:22,vars:5,consts:[[1,"col-md-4"],[1,"card",2,"width","18rem"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,r){1&t&&(d._uU(0,"<"),d.TgZ(1,"div",0)(2,"h2")(3,"strong"),d._uU(4,"Detalle"),d.qZA()(),d.TgZ(5,"div",1),d._UZ(6,"img",2),d.TgZ(7,"div",3)(8,"h5",4),d._uU(9),d.qZA(),d.TgZ(10,"p",5),d._uU(11,"Genero: "),d.TgZ(12,"span"),d._uU(13),d.qZA()(),d.TgZ(14,"p",5),d._uU(15,"Fecha de estreno: "),d.TgZ(16,"span"),d._uU(17),d.qZA()(),d.TgZ(18,"p",5),d._uU(19,"Espectadores: "),d.TgZ(20,"span"),d._uU(21),d.qZA()()()()()),2&t&&(d.xp6(6),d.Q6J("src",r.inputDetallePelicula.fotoPelicula,d.LSH),d.xp6(3),d.Oqu(r.inputDetallePelicula.nombre),d.xp6(4),d.Oqu(r.inputDetallePelicula.tipo),d.xp6(4),d.Oqu(r.inputDetallePelicula.fechaEstreno),d.xp6(4),d.Oqu(r.inputDetallePelicula.cantidadPublico))},styles:[""]}),n})();function _O(n,e){if(1&n&&(d.TgZ(0,"ul",1)(1,"li",2),d._uU(2),d.TgZ(3,"span",3),d._uU(4),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(2),d.hij(" ",t.nombre," "),d.xp6(2),d.Oqu(t.cantidadPublico)}}let dR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-listado"]],inputs:{inputListadoPeliculas:"inputListadoPeliculas"},decls:4,vars:1,consts:[["class","list-group",4,"ngFor","ngForOf"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","badge-primary","badge-pill"]],template:function(t,r){1&t&&(d.TgZ(0,"h2")(1,"strong"),d._uU(2,"Listado pel\xedculas"),d.qZA()(),d.YNc(3,_O,5,2,"ul",0)),2&t&&(d.xp6(3),d.Q6J("ngForOf",r.inputListadoPeliculas))},directives:[Mn],styles:[""]}),n})();const EO=function(){return["/altaActor"]},wO=[{path:"bienvenido",component:hO},{path:"busqueda",component:(()=>{class n{constructor(t){this.db=t,this.listadoPeliculas=[],this.peliculaParaMostrar=new fO(0,"El Cabellero de la noche","Accion","13/08/2008",15e5,"https://image.tmdb.org/t/p/original/tSIH3DTA4oFQDhPaJgHxxQZoqHh.jpg","Christian Bale")}ngOnInit(){this.getPeliculas()}tomarPeliculaParaDetalle(t){this.peliculaParaMostrar=t}getPeliculas(){this.db.getCollection("peliculas").then(t=>t.subscribe(r=>{r.forEach(o=>{console.log(o.payload.doc.data()),this.listadoPeliculas.push(o.payload.doc.data())})}))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(MI))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-busqueda"]],decls:29,vars:5,consts:[["role","main"],[1,"jumbotron"],[1,"container"],[1,"display-3"],[3,"inputTablaPeliculas","peliculaSeleccionada"],[1,"row"],[1,"col-md-4"],[3,"inputDetallePelicula"],[3,"inputListadoPeliculas"],[1,"widget","clearfix"],[1,"widgettitle"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-link",3,"routerLink"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.TgZ(1,"main",0)(2,"div",1)(3,"div",2)(4,"h1",3),d._uU(5,"Tabla Pel\xedculas"),d.qZA(),d.TgZ(6,"app-tabla-pelicula",4),d.NdJ("peliculaSeleccionada",function(u){return r.tomarPeliculaParaDetalle(u)}),d.qZA()()(),d.TgZ(7,"div",2)(8,"div",5)(9,"div",6),d._UZ(10,"app-detalle-pelicula",7),d.qZA(),d.TgZ(11,"div",6),d._UZ(12,"app-pelicula-listado",8),d.qZA(),d.TgZ(13,"div",6)(14,"section",9)(15,"h4",10),d._uU(16,"Alta actor"),d.qZA(),d.TgZ(17,"div",11)(18,"div",12)(19,"h5",13),d._uU(20,"Alta actor"),d.qZA(),d.TgZ(21,"p",14),d._uU(22,"Secci\xf3n que permite cargar un nuevo actor en nuestra base de datos"),d.qZA(),d.TgZ(23,"a",15),d._uU(24,"ALTA"),d.qZA()()()()()(),d._UZ(25,"hr"),d.qZA()(),d.TgZ(26,"footer",2)(27,"p"),d._uU(28,"\xa9 Company 2017-2020"),d.qZA()()),2&t&&(d.xp6(6),d.Q6J("inputTablaPeliculas",r.listadoPeliculas),d.xp6(4),d.Q6J("inputDetallePelicula",r.peliculaParaMostrar),d.xp6(2),d.Q6J("inputListadoPeliculas",r.listadoPeliculas),d.xp6(11),d.Q6J("routerLink",d.DdM(4,EO)))},directives:[cR,yO,vO,dR,Du],styles:[""]}),n})()},{path:"peliculas/alta",component:(()=>{class n{constructor(t,r){this.fb=t,this.srv=r,this.peliculaGroup=this.fb.group({nombre:"",tipo:"",cantidadPublico:"",fechaEstreno:"",fotoPelicula:"",actor:""})}ngOnInit(){}obtenerActorSeleccionado(t){this.actor=t,this.peliculaGroup.controls.actor.setValue(t.nombre+" "+t.apellido)}altaPelicula(){var t=this;return(0,Ae.Z)(function*(){let r=t.peliculaGroup.value;(yield t.srv.alta(r,"peliculas"))&&t.peliculaGroup.reset()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jf),d.Y36(MI))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-alta"]],decls:81,vars:1,consts:[[1,"container","mt-6"],[1,"py-5","text-center"],["src","../../../assets/1f37f.png","alt","","width","100","height","100",1,"d-block","mx-auto","mb-4"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"actorSeleccionado"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup","submit"],[1,"col-md-12","mb-3"],["for","nombre"],["type","text","id","nombre","placeholder","","value","","formControlName","nombre","required","",1,"form-control"],[1,"invalid-feedback"],["for","apellido"],["id","tipo","formControlName","tipo","required","",1,"custom-select","d-block","w-100"],["value",""],["value","terror"],["value","cienciaFiccion"],["value","romantica"],["value","drama"],["value","otro"],[1,"col-md-6","mb-3"],["for","cantidadPublico"],["type","number","id","cantidadPublico","formControlName","cantidadPublico","required","",1,"form-control"],["for","fechaEstreno"],[1,"input-group"],["type","date","id","fechaEstreno","formControlName","fechaEstreno","required","",1,"form-control"],[1,"invalid-feedback",2,"width","100%"],["for","actor"],["type","text","id","actor","placeholder","Ingrese un actor","formControlName","actor","required","","readonly","",1,"form-control"],["for","fotoPelicula"],["type","text","id","fotoPelicula","placeholder","Ingrese un link con la foto de la pel\xedcula (momentaneo)","formControlName","fotoPelicula","required","",1,"form-control"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h2"),d._uU(4,"Alta Pel\xedculas"),d.qZA()(),d.TgZ(5,"div",3)(6,"div",4)(7,"app-actor-listado",5),d.NdJ("actorSeleccionado",function(u){return r.obtenerActorSeleccionado(u)}),d.qZA()(),d.TgZ(8,"div",6)(9,"h4",7),d._uU(10,"Nueva pel\xedcula"),d.qZA(),d.TgZ(11,"form",8),d.NdJ("submit",function(){return r.altaPelicula()}),d.TgZ(12,"div",3)(13,"div",9)(14,"label",10),d._uU(15,"Nombre"),d.qZA(),d._UZ(16,"input",11),d.TgZ(17,"div",12),d._uU(18," Valid first name is required. "),d.qZA()(),d.TgZ(19,"div",9)(20,"label",13),d._uU(21,"Tipo"),d.qZA(),d.TgZ(22,"select",14)(23,"option",15),d._uU(24,"Elegir..."),d.qZA(),d.TgZ(25,"option",16),d._uU(26,"Terror"),d.qZA(),d.TgZ(27,"option",17),d._uU(28,"Ciencia ficci\xf3n"),d.qZA(),d.TgZ(29,"option",18),d._uU(30,"Rom\xe1ntica"),d.qZA(),d.TgZ(31,"option",19),d._uU(32,"Drama"),d.qZA(),d.TgZ(33,"option",19),d._uU(34,"Infantil"),d.qZA(),d.TgZ(35,"option",20),d._uU(36,"Otro"),d.qZA()(),d.TgZ(37,"div",12),d._uU(38," Por favor seleccionar uno. "),d.qZA()()(),d.TgZ(39,"div",3)(40,"div",21)(41,"label",22),d._uU(42,"Cantidad de p\xfablico"),d.qZA(),d._UZ(43,"input",23),d.TgZ(44,"div",12),d._uU(45," Por favor seleccionar uno. "),d.qZA()(),d.TgZ(46,"div",21)(47,"label",24),d._uU(48,"Fecha de Estreno"),d.qZA(),d.TgZ(49,"div",25),d._UZ(50,"input",26),d.TgZ(51,"div",27),d._uU(52," Your username is required. "),d.qZA()()()(),d.TgZ(53,"div",7)(54,"label",28),d._uU(55,"Actor"),d.qZA(),d._UZ(56,"input",29),d.TgZ(57,"div",12),d._uU(58," Por favor ingrese un pa\xeds. "),d.qZA()(),d.TgZ(59,"div",7)(60,"label",30),d._uU(61,"Flyer"),d.qZA(),d._UZ(62,"input",31),d.TgZ(63,"div",12),d._uU(64," Por favor ingrese un pa\xeds. "),d.qZA()(),d._UZ(65,"hr",32),d.TgZ(66,"button",33),d._uU(67,"ALTA"),d.qZA()()()(),d.TgZ(68,"footer",34)(69,"p",35),d._uU(70,"\xa9 2017-2020 Company Name"),d.qZA(),d.TgZ(71,"ul",36)(72,"li",37)(73,"a",38),d._uU(74,"Privacy"),d.qZA()(),d.TgZ(75,"li",37)(76,"a",38),d._uU(77,"Terms"),d.qZA()(),d.TgZ(78,"li",37)(79,"a",38),d._uU(80,"Support"),d.qZA()()()()()),2&t&&(d.xp6(11),d.Q6J("formGroup",r.peliculaGroup))},directives:[lR,va,su,To,ks,Xr,m,mu,re,Fe,Ei,El],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin-top:1rem}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}"]}),n})()},{path:"actor/alta",component:cO},{path:"actor/listado",component:lR},{path:"peliculas/listado",component:dR}];let IO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[xE.forRoot(wO)],xE]}),n})();function bO(n,e){if(1&n&&(d.TgZ(0,"li",2),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.hij(" ",t.name," ")}}let DO=(()=>{class n{constructor(t){this.items=t.collection("items").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(LA))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:3,consts:[["class","text",4,"ngFor","ngForOf"],["rel","stylesheet","href","http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"],[1,"text"]],template:function(t,r){1&t&&(d.TgZ(0,"ul"),d.YNc(1,bO,2,1,"li",0),d.ALo(2,"async"),d.qZA(),d._UZ(3,"link",1)(4,"app-navbar")(5,"router-outlet")),2&t&&(d.xp6(1),d.Q6J("ngForOf",d.lcZ(2,1,r.items)))},directives:[Mn,cR,np],pipes:[ao],styles:[""]}),n})();const BA_firebase={projectId:"modelo-de-1er-parcial-736d1",appId:"1:822576261708:web:ab14873f31b9a478ebe2e9",storageBucket:"modelo-de-1er-parcial-736d1.appspot.com",apiKey:"AIzaSyDksQDCsskBRq84ORjQ4bMyiFOuPyBCuyg",authDomain:"modelo-de-1er-parcial-736d1.firebaseapp.com",messagingSenderId:"822576261708"};var CO=M(198);class jA{constructor(e){return e}}class fR{constructor(){return(0,Xt.vb)("auth")}}const $A=new d.OlP("angularfire2.auth-instances");function AO(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new jA(r)}}const SO={provide:fR,deps:[[new d.FiY,$A]]},MO={provide:jA,useFactory:function TO(n,e){const t=(0,Xt.JM)("auth",n,e);return t&&new jA(t)},deps:[[new d.FiY,$A],Tu]};let xO=(()=>{class n{constructor(){(0,Ma.KN)("angularfire",Xt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[MO,SO]}),n})();function RO(n,...e){return{ngModule:xO,providers:[{provide:$A,useFactory:AO(n),multi:!0,deps:[d.R0b,d.zs3,Xt.HU,FE,[new d.FiY,zl],...e]}]}}const NO=(0,Xt.u3)(CO.n,!0);class HA{constructor(e){return e}}const pR="firestore",GA=new d.OlP("angularfire2.firestore-instances");function kO(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new HA(r)}}const FO={provide:class PO{constructor(){return(0,Xt.vb)(pR)}},deps:[[new d.FiY,GA]]},LO={provide:HA,useFactory:function OO(n,e){const t=(0,Xt.JM)(pR,n,e);return t&&new HA(t)},deps:[[new d.FiY,GA],Tu]};let VO=(()=>{class n{constructor(){(0,Ma.KN)("angularfire",Xt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[LO,FO]}),n})();function UO(n,...e){return{ngModule:VO,providers:[{provide:GA,useFactory:kO(n),multi:!0,deps:[d.R0b,d.zs3,Xt.HU,FE,[new d.FiY,fR],[new d.FiY,zl],...e]}]}}const BO=(0,Xt.u3)(B1,!0);let jO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[DO]}),n.\u0275inj=d.cJS({providers:[],imports:[[Vc,ti.hO.initializeApp(BA_firebase),IO,PD,ZP,ZA,Dl,cS(()=>UE(BA_firebase)),RO(()=>NO()),UO(()=>BO())]]}),n})();(0,d.G48)(),Wg().bootstrapModule(jO).catch(n=>console.error(n))},7982:(ot,Ce,M)=>{M.d(Ce,{Gb:()=>d.Gb});var d=M(579)},5867:(ot,Ce,M)=>{M.d(Ce,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=M(9681);(0,d.registerVersion)("firebase","9.8.1","app")},127:(ot,Ce,M)=>{M.d(Ce,{Z:()=>d.Z});var d=M(3942);d.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(ot,Ce,M)=>{M.r(Ce);var d=M(5861),k=M(3942),x=M(198),ie=M(2090),he=(M(9681),M(1877),M(4859));function le(){return window}function j(){return(j=(0,d.Z)(function*(Q,H,L){var Se;const{BuildInfo:Ye}=le();(0,x.aq)(H.sessionId,"AuthEvent did not contain a session ID");const at=yield be(H.sessionId),It={};return(0,x.ar)()?It.ibi=Ye.packageName:(0,x.as)()?It.apn=Ye.packageName:(0,x.at)(Q,"operation-not-supported-in-this-environment"),Ye.displayName&&(It.appDisplayName=Ye.displayName),It.sessionId=at,(0,x.au)(Q,L,H.type,void 0,null!==(Se=H.eventId)&&void 0!==Se?Se:void 0,It)})).apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(Q){const{BuildInfo:H}=le(),L={};(0,x.ar)()?L.iosBundleId=H.packageName:(0,x.as)()?L.androidPackageName=H.packageName:(0,x.at)(Q,"operation-not-supported-in-this-environment"),yield(0,x.av)(Q,L)})).apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(Q,H,L){const{cordova:Se}=le();let Ye=()=>{};try{yield new Promise((at,It)=>{let zt=null;function Pt(){var Vt;at();const Vn=null===(Vt=Se.plugins.browsertab)||void 0===Vt?void 0:Vt.close;"function"==typeof Vn&&Vn(),"function"==typeof(null==L?void 0:L.close)&&L.close()}function Sn(){zt||(zt=window.setTimeout(()=>{It((0,x.aw)(Q,"redirect-cancelled-by-user"))},2e3))}function ur(){"visible"===(null==document?void 0:document.visibilityState)&&Sn()}H.addPassiveListener(Pt),document.addEventListener("resume",Sn,!1),(0,x.as)()&&document.addEventListener("visibilitychange",ur,!1),Ye=()=>{H.removePassiveListener(Pt),document.removeEventListener("resume",Sn,!1),document.removeEventListener("visibilitychange",ur,!1),zt&&window.clearTimeout(zt)}})}finally{Ye()}})).apply(this,arguments)}function be(Q){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(Q){const H=We(Q),L=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(L)).map(Ye=>Ye.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(Q){if((0,x.aq)(/[0-9a-zA-Z]+/.test(Q),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Q);const H=new ArrayBuffer(Q.length),L=new Uint8Array(H);for(let Se=0;Se<Q.length;Se++)L[Se]=Q.charCodeAt(Se);return L}class Ne extends x.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(H)),super.onEvent(H)}initialized(){var H=this;return(0,d.Z)(function*(){yield H.initPromise})()}}function J(Q){return fe.apply(this,arguments)}function fe(){return(fe=(0,d.Z)(function*(Q){const H=yield ae()._get(ce(Q));return H&&(yield ae()._remove(ce(Q))),H})).apply(this,arguments)}function te(){const Q=[],H="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const Se=Math.floor(Math.random()*H.length);Q.push(H.charAt(Se))}return Q.join("")}function ae(){return(0,x.ay)(x.b)}function ce(Q){return(0,x.az)("authEvent",Q.config.apiKey,Q.name)}function vt(Q){if(!(null==Q?void 0:Q.includes("?")))return{};const[H,...L]=Q.split("?");return(0,ie.zd)(L.join("?"))}function dt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aw)("no-auth-event")}}function jt(){var Q;return(null===(Q=null==self?void 0:self.location)||void 0===Q?void 0:Q.protocol)||null}function tn(Q=(0,ie.z$)()){return!("file:"!==jt()&&"ionic:"!==jt()||!Q.toLowerCase().match(/iphone|ipad|ipod|android/))}function qn(){try{const Q=self.localStorage,H=x.aI();if(Q)return Q.setItem(H,"1"),Q.removeItem(H),!function xn(Q=(0,ie.z$)()){return function Cr(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function hn(Q=(0,ie.z$)()){return/Edge\/\d+/.test(Q)}(Q)}()||(0,ie.hl)()}catch(Q){return Xn()&&(0,ie.hl)()}return!1}function Xn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function An(){return(function St(){return"http:"===jt()||"https:"===jt()}()||(0,ie.ru)()||tn())&&!function Tn(){return(0,ie.b$)()||(0,ie.UG)()}()&&qn()&&!Xn()}function er(){return tn()&&"undefined"!=typeof document}function Wn(){return(Wn=(0,d.Z)(function*(){return!!er()&&new Promise(Q=>{const H=setTimeout(()=>{Q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(H),Q(!0)})})})).apply(this,arguments)}const Zt={LOCAL:"local",NONE:"none",SESSION:"session"},Fn=x.ax,Bn="persistence";function fn(Q){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,d.Z)(function*(Q){yield Q._initializationPromise;const H=Rt(),L=x.az(Bn,Q.config.apiKey,Q.name);H&&H.setItem(L,Q._getPersistence())})).apply(this,arguments)}function Rt(){var Q;try{return(null===(Q=function Jt(){return"undefined"!=typeof window?window:null}())||void 0===Q?void 0:Q.sessionStorage)||null}catch(H){return null}}const ft=x.ax;class nt{constructor(){this.browserResolver=x.ay(x.k),this.cordovaResolver=x.ay(class _n{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aB,this._overrideRedirectResult=x.aC}_initialize(H){var L=this;return(0,d.Z)(function*(){const Se=H._key();let Ye=L.eventManagers.get(Se);return Ye||(Ye=new Ne(H),L.eventManagers.set(Se,Ye),L.attachCallbackListeners(H,Ye)),Ye})()}_openPopup(H){(0,x.at)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,L,Se,Ye){var at=this;return(0,d.Z)(function*(){!function ye(Q){var H,L,Se,Ye,at,It,zt,Pt,Sn,ur;const Vt=le();(0,x.ax)("function"==typeof(null===(H=null==Vt?void 0:Vt.universalLinks)||void 0===H?void 0:H.subscribe),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.ax)(void 0!==(null===(L=null==Vt?void 0:Vt.BuildInfo)||void 0===L?void 0:L.packageName),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.ax)("function"==typeof(null===(at=null===(Ye=null===(Se=null==Vt?void 0:Vt.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===at?void 0:at.openUrl),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.ax)("function"==typeof(null===(Pt=null===(zt=null===(It=null==Vt?void 0:Vt.cordova)||void 0===It?void 0:It.plugins)||void 0===zt?void 0:zt.browsertab)||void 0===Pt?void 0:Pt.isAvailable),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.ax)("function"==typeof(null===(ur=null===(Sn=null==Vt?void 0:Vt.cordova)||void 0===Sn?void 0:Sn.InAppBrowser)||void 0===ur?void 0:ur.open),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const It=yield at._initialize(H);yield It.initialized(),It.resetRedirect(),(0,x.aD)(),yield at._originValidation(H);const zt=function De(Q,H,L=null){return{type:H,eventId:L,urlResponse:null,sessionId:te(),postBody:null,tenantId:Q.tenantId,error:(0,x.aw)(Q,"no-auth-event")}}(H,Se,Ye);yield function Qe(Q,H){return ae()._set(ce(Q),H)}(H,zt);const Pt=yield function z(Q,H,L){return j.apply(this,arguments)}(H,zt,L),Sn=yield function Te(Q){const{cordova:H}=le();return new Promise(L=>{H.plugins.browsertab.isAvailable(Se=>{let Ye=null;Se?H.plugins.browsertab.openUrl(Q):Ye=H.InAppBrowser.open(Q,(0,x.ap)()?"_blank":"_system","location=yes"),L(Ye)})})}(Pt);return function Be(Q,H,L){return Ge.apply(this,arguments)}(H,It,Sn)})()}_isIframeWebStorageSupported(H,L){throw new Error("Method not implemented.")}_originValidation(H){const L=H._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function se(Q){return He.apply(this,arguments)}(H)),this.originValidationPromises[L]}attachCallbackListeners(H,L){const{universalLinks:Se,handleOpenURL:Ye,BuildInfo:at}=le(),It=setTimeout((0,d.Z)(function*(){yield J(H),L.onEvent(dt())}),500),zt=function(){var ur=(0,d.Z)(function*(Vt){clearTimeout(It);const Vn=yield J(H);let Sr=null;Vn&&(null==Vt?void 0:Vt.url)&&(Sr=function V(Q,H){var L,Se;const Ye=function oe(Q){const H=vt(Q),L=H.link?decodeURIComponent(H.link):void 0,Se=vt(L).link,Ye=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return vt(Ye).link||Ye||Se||L||Q}(H);if(Ye.includes("/__/auth/callback")){const at=vt(Ye),It=at.firebaseError?function Re(Q){try{return JSON.parse(Q)}catch(H){return null}}(decodeURIComponent(at.firebaseError)):null,zt=null===(Se=null===(L=null==It?void 0:It.code)||void 0===L?void 0:L.split("auth/"))||void 0===Se?void 0:Se[1],Pt=zt?(0,x.aw)(zt):null;return Pt?{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,error:Pt,urlResponse:null,sessionId:null,postBody:null}:{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,sessionId:Q.sessionId,urlResponse:Ye,postBody:null}}return null}(Vn,Vt.url)),L.onEvent(Sr||dt())});return function(Vn){return ur.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,zt);const Pt=Ye,Sn=`${at.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var ur=(0,d.Z)(function*(Vt){if(Vt.toLowerCase().startsWith(Sn)&&zt({url:Vt}),"function"==typeof Pt)try{Pt(Vt)}catch(Vn){console.error(Vn)}});return function(Vt){return ur.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aB,this._overrideRedirectResult=x.aC}_initialize(H){var L=this;return(0,d.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,L,Se,Ye){var at=this;return(0,d.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(H,L,Se,Ye)})()}_openRedirect(H,L,Se,Ye){var at=this;return(0,d.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(H,L,Se,Ye)})()}_isIframeWebStorageSupported(H,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,L)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return er()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,d.Z)(function*(){if(H.underlyingResolver)return;const L=yield function _t(){return Wn.apply(this,arguments)}();H.underlyingResolver=L?H.cordovaResolver:H.browserResolver})()}}function wn(Q){return Q.unwrap()}function Nt(Q){return yn(Q)}function yn(Q){const{_tokenResponse:H}=Q instanceof ie.ZR?Q.customData:Q;if(!H)return null;if(!(Q instanceof ie.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return x.P.credentialFromResult(Q);const L=H.providerId;if(!L||L===x.o.PASSWORD)return null;let Se;switch(L){case x.o.GOOGLE:Se=x.Q;break;case x.o.FACEBOOK:Se=x.N;break;case x.o.GITHUB:Se=x.T;break;case x.o.TWITTER:Se=x.W;break;default:const{oauthIdToken:Ye,oauthAccessToken:at,oauthTokenSecret:It,pendingToken:zt,nonce:Pt}=H;return at||It||Ye||zt?zt?L.startsWith("saml.")?x.aL._create(L,zt):x.J._fromParams({providerId:L,signInMethod:L,pendingToken:zt,idToken:Ye,accessToken:at}):new x.U(L).credential({idToken:Ye,accessToken:at,rawNonce:Pt}):null}return Q instanceof ie.ZR?Se.credentialFromError(Q):Se.credentialFromResult(Q)}function nn(Q,H){return H.catch(L=>{throw L instanceof ie.ZR&&function ar(Q,H){var L;const Se=null===(L=H.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===H.code)H.resolver=new Z(Q,x.an(Q,H));else if(Se){const Ye=yn(H),at=H;Ye&&(at.credential=Ye,at.tenantId=Se.tenantId||void 0,at.email=Se.email||void 0,at.phoneNumber=Se.phoneNumber||void 0)}}(Q,L),L}).then(L=>{const Ye=L.user;return{operationType:L.operationType,credential:Nt(L),additionalUserInfo:x.al(L),user:Ie.getOrCreate(Ye)}})}function F(Q,H){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(Q,H){const L=yield H;return{verificationId:L.verificationId,confirm:Se=>nn(Q,L.confirm(Se))}})).apply(this,arguments)}class Z{constructor(H,L){this.resolver=L,this.auth=function Ar(Q){return Q.wrapped()}(H)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return nn(wn(this.auth),this.resolver.resolveSignIn(H))}}class Ie{constructor(H){this._delegate=H,this.multiFactor=x.ao(H)}static getOrCreate(H){return Ie.USER_MAP.has(H)||Ie.USER_MAP.set(H,new Ie(H)),Ie.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var L=this;return(0,d.Z)(function*(){return nn(L.auth,x.Z(L._delegate,H))})()}linkWithPhoneNumber(H,L){var Se=this;return(0,d.Z)(function*(){return F(Se.auth,x.l(Se._delegate,H,L))})()}linkWithPopup(H){var L=this;return(0,d.Z)(function*(){return nn(L.auth,x.d(L._delegate,H,nt))})()}linkWithRedirect(H){var L=this;return(0,d.Z)(function*(){return yield fn(x.aE(L.auth)),x.g(L._delegate,H,nt)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var L=this;return(0,d.Z)(function*(){return nn(L.auth,x._(L._delegate,H))})()}reauthenticateWithPhoneNumber(H,L){return F(this.auth,x.r(this._delegate,H,L))}reauthenticateWithPopup(H){return nn(this.auth,x.e(this._delegate,H,nt))}reauthenticateWithRedirect(H){var L=this;return(0,d.Z)(function*(){return yield fn(x.aE(L.auth)),x.h(L._delegate,H,nt)})()}sendEmailVerification(H){return x.ab(this._delegate,H)}unlink(H){var L=this;return(0,d.Z)(function*(){return yield x.ak(L._delegate,H),L})()}updateEmail(H){return x.ag(this._delegate,H)}updatePassword(H){return x.ah(this._delegate,H)}updatePhoneNumber(H){return x.u(this._delegate,H)}updateProfile(H){return x.af(this._delegate,H)}verifyBeforeUpdateEmail(H,L){return x.ac(this._delegate,H,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ie.USER_MAP=new WeakMap;const U=x.ax;let X=(()=>{class Q{constructor(L,Se){if(this.app=L,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ye}=L.options;U(Ye,"invalid-api-key",{appName:L.name}),U(Ye,"invalid-api-key",{appName:L.name});const at="undefined"!=typeof window?nt:void 0;this._delegate=Se.initialize({options:{persistence:ee(Ye,L.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(x.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ie.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,Se){x.G(this._delegate,L,Se)}applyActionCode(L){return x.a2(this._delegate,L)}checkActionCode(L){return x.a3(this._delegate,L)}confirmPasswordReset(L,Se){return x.a1(this._delegate,L,Se)}createUserWithEmailAndPassword(L,Se){var Ye=this;return(0,d.Z)(function*(){return nn(Ye._delegate,x.a5(Ye._delegate,L,Se))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return x.aa(this._delegate,L)}isSignInWithEmailLink(L){return x.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,d.Z)(function*(){U(An(),L._delegate,"operation-not-supported-in-this-environment");const Se=yield x.j(L._delegate,nt);return Se?nn(L._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function mn(Q,H){(0,x.aE)(Q)._logFramework(H)}(this._delegate,L)}onAuthStateChanged(L,Se,Ye){const{next:at,error:It,complete:zt}=B(L,Se,Ye);return this._delegate.onAuthStateChanged(at,It,zt)}onIdTokenChanged(L,Se,Ye){const{next:at,error:It,complete:zt}=B(L,Se,Ye);return this._delegate.onIdTokenChanged(at,It,zt)}sendSignInLinkToEmail(L,Se){return x.a7(this._delegate,L,Se)}sendPasswordResetEmail(L,Se){return x.a0(this._delegate,L,Se||void 0)}setPersistence(L){var Se=this;return(0,d.Z)(function*(){let Ye;switch(function tr(Q,H){Fn(Object.values(Zt).includes(H),Q,"invalid-persistence-type"),(0,ie.b$)()?Fn(H!==Zt.SESSION,Q,"unsupported-persistence-type"):(0,ie.UG)()?Fn(H===Zt.NONE,Q,"unsupported-persistence-type"):Xn()?Fn(H===Zt.NONE||H===Zt.LOCAL&&(0,ie.hl)(),Q,"unsupported-persistence-type"):Fn(H===Zt.NONE||qn(),Q,"unsupported-persistence-type")}(Se._delegate,L),L){case Zt.SESSION:Ye=x.a;break;case Zt.LOCAL:Ye=(yield x.ay(x.i)._isAvailable())?x.i:x.b;break;case Zt.NONE:Ye=x.L;break;default:return x.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Ye)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return nn(this._delegate,x.X(this._delegate))}signInWithCredential(L){return nn(this._delegate,x.Y(this._delegate,L))}signInWithCustomToken(L){return nn(this._delegate,x.$(this._delegate,L))}signInWithEmailAndPassword(L,Se){return nn(this._delegate,x.a6(this._delegate,L,Se))}signInWithEmailLink(L,Se){return nn(this._delegate,x.a9(this._delegate,L,Se))}signInWithPhoneNumber(L,Se){return F(this._delegate,x.s(this._delegate,L,Se))}signInWithPopup(L){var Se=this;return(0,d.Z)(function*(){return U(An(),Se._delegate,"operation-not-supported-in-this-environment"),nn(Se._delegate,x.c(Se._delegate,L,nt))})()}signInWithRedirect(L){var Se=this;return(0,d.Z)(function*(){return U(An(),Se._delegate,"operation-not-supported-in-this-environment"),yield fn(Se._delegate),x.f(Se._delegate,L,nt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return x.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Q.Persistence=Zt,Q})();function B(Q,H,L){let Se=Q;"function"!=typeof Q&&({next:Se,error:H,complete:L}=Q);const Ye=Se;return{next:It=>Ye(It&&Ie.getOrCreate(It)),error:H,complete:L}}function ee(Q,H){const L=function Tr(Q,H){const L=Rt();if(!L)return[];const Se=x.az(Bn,Q,H);switch(L.getItem(Se)){case Zt.NONE:return[x.L];case Zt.LOCAL:return[x.i,x.a];case Zt.SESSION:return[x.a];default:return[]}}(Q,H);if("undefined"!=typeof self&&!L.includes(x.i)&&L.push(x.i),"undefined"!=typeof window)for(const Se of[x.b,x.a])L.includes(Se)||L.push(Se);return L.includes(x.L)||L.push(x.L),L}class _e{constructor(){this.providerId="phone",this._delegate=new x.P(wn(k.Z.auth()))}static credential(H,L){return x.P.credential(H,L)}verifyPhoneNumber(H,L){return this._delegate.verifyPhoneNumber(H,L)}unwrap(){return this._delegate}}_e.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,_e.PROVIDER_ID=x.P.PROVIDER_ID;const Ue=x.ax;class qe{constructor(H,L,Se=k.Z.app()){var Ye;Ue(null===(Ye=Se.options)||void 0===Ye?void 0:Ye.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new x.R(H,L,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function pt(Q){Q.INTERNAL.registerComponent(new he.wA("auth-compat",H=>{const L=H.getProvider("app-compat").getImmediate(),Se=H.getProvider("auth");return new X(L,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.M,FacebookAuthProvider:x.N,GithubAuthProvider:x.T,GoogleAuthProvider:x.Q,OAuthProvider:x.U,SAMLAuthProvider:x.V,PhoneAuthProvider:_e,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:qe,TwitterAuthProvider:x.W,Auth:X,AuthCredential:x.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Q.registerVersion("@firebase/auth-compat","0.2.14")}(k.Z)},8306:(ot,Ce,M)=>{M.d(Ce,{y:()=>z});var d=M(2961),k=M(727),x=M(8822),ie=M(4671);var he=M(2416),le=M(576),me=M(2806);let z=(()=>{class Te{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ye=new Te;return ye.source=this,ye.operator=Ge,ye}subscribe(Ge,ye,be){const et=function He(Te){return Te&&Te instanceof d.Lv||function se(Te){return Te&&(0,le.m)(Te.next)&&(0,le.m)(Te.error)&&(0,le.m)(Te.complete)}(Te)&&(0,k.Nn)(Te)}(Ge)?Ge:new d.Hp(Ge,ye,be);return(0,me.x)(()=>{const{operator:We,source:Oe}=this;et.add(We?We.call(et,Oe):Oe?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ye){Ge.error(ye)}}forEach(Ge,ye){return new(ye=j(ye))((be,et)=>{const We=new d.Hp({next:Oe=>{try{Ge(Oe)}catch(Ne){et(Ne),We.unsubscribe()}},error:et,complete:be});this.subscribe(We)})}_subscribe(Ge){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Ge)}[x.L](){return this}pipe(...Ge){return function Ee(Te){return 0===Te.length?ie.y:1===Te.length?Te[0]:function(Ge){return Te.reduce((ye,be)=>be(ye),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=j(Ge))((ye,be)=>{let et;this.subscribe(We=>et=We,We=>be(We),()=>ye(et))})}}return Te.create=Be=>new Te(Be),Te})();function j(Te){var Be;return null!==(Be=null!=Te?Te:he.v.Promise)&&void 0!==Be?Be:Promise}},7579:(ot,Ce,M)=>{M.d(Ce,{x:()=>he});var d=M(8306),k=M(727);const ie=(0,M(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=M(8737),Ee=M(2806);let he=(()=>{class me extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const se=new le(this,this);return se.operator=j,se}_throwIfClosed(){if(this.closed)throw new ie}next(j){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(j)}})}error(j){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:se}=this;for(;se.length;)se.shift().error(j)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:se,isStopped:He,observers:Te}=this;return se||He?k.Lc:(this.currentObservers=null,Te.push(j),new k.w0(()=>{this.currentObservers=null,(0,pe.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:se,thrownError:He,isStopped:Te}=this;se?j.error(He):Te&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return me.create=(z,j)=>new le(z,j),me})();class le extends he{constructor(z,j){super(),this.destination=z,this.source=j}next(z){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===se||se.call(j,z)}error(z){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===se||se.call(j,z)}complete(){var z,j;null===(j=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===j||j.call(z)}_subscribe(z){var j,se;return null!==(se=null===(j=this.source)||void 0===j?void 0:j.subscribe(z))&&void 0!==se?se:k.Lc}}},2961:(ot,Ce,M)=>{M.d(Ce,{Hp:()=>Ge,Lv:()=>se});var d=M(576),k=M(727),x=M(2416),ie=M(7849);function pe(){}const Ee=me("C",void 0,void 0);function me(Oe,Ne,De){return{kind:Oe,value:Ne,error:De}}var z=M(3410),j=M(2806);class se extends k.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,k.Nn)(Ne)&&Ne.add(this)):this.destination=We}static create(Ne,De,Qe){return new Ge(Ne,De,Qe)}next(Ne){this.isStopped?et(function le(Oe){return me("N",Oe,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?et(function he(Oe){return me("E",void 0,Oe)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?et(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(Oe,Ne){return He.call(Oe,Ne)}class Be{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:De}=this;if(De.next)try{De.next(Ne)}catch(Qe){ye(Qe)}}error(Ne){const{partialObserver:De}=this;if(De.error)try{De.error(Ne)}catch(Qe){ye(Qe)}else ye(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(De){ye(De)}}}class Ge extends se{constructor(Ne,De,Qe){let J;if(super(),(0,d.m)(Ne)||!Ne)J={next:null!=Ne?Ne:void 0,error:null!=De?De:void 0,complete:null!=Qe?Qe:void 0};else{let fe;this&&x.v.useDeprecatedNextContext?(fe=Object.create(Ne),fe.unsubscribe=()=>this.unsubscribe(),J={next:Ne.next&&Te(Ne.next,fe),error:Ne.error&&Te(Ne.error,fe),complete:Ne.complete&&Te(Ne.complete,fe)}):J=Ne}this.destination=new Be(J)}}function ye(Oe){x.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Oe):(0,ie.h)(Oe)}function et(Oe,Ne){const{onStoppedNotification:De}=x.v;De&&z.z.setTimeout(()=>De(Oe,Ne))}const We={closed:!0,next:pe,error:function be(Oe){throw Oe},complete:pe}},727:(ot,Ce,M)=>{M.d(Ce,{Lc:()=>Ee,w0:()=>pe,Nn:()=>he});var d=M(576);const x=(0,M(3888).d)(me=>function(j){me(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((se,He)=>`${He+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ie=M(8737);class pe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:se}=this;if((0,d.m)(se))try{se()}catch(Te){z=Te instanceof x?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{le(Te)}catch(Be){z=null!=z?z:[],Be instanceof x?z=[...z,...Be.errors]:z.push(Be)}}if(z)throw new x(z)}}add(z){var j;if(z&&z!==this)if(this.closed)le(z);else{if(z instanceof pe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(z)}}_hasParent(z){const{_parentage:j}=this;return j===z||Array.isArray(j)&&j.includes(z)}_addParent(z){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(z),j):j?[j,z]:z}_removeParent(z){const{_parentage:j}=this;j===z?this._parentage=null:Array.isArray(j)&&(0,ie.P)(j,z)}remove(z){const{_finalizers:j}=this;j&&(0,ie.P)(j,z),z instanceof pe&&z._removeParent(this)}}pe.EMPTY=(()=>{const me=new pe;return me.closed=!0,me})();const Ee=pe.EMPTY;function he(me){return me instanceof pe||me&&"closed"in me&&(0,d.m)(me.remove)&&(0,d.m)(me.add)&&(0,d.m)(me.unsubscribe)}function le(me){(0,d.m)(me)?me():me.unsubscribe()}},2416:(ot,Ce,M)=>{M.d(Ce,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Ce,M)=>{M.d(Ce,{E:()=>k});const k=new(M(8306).y)(pe=>pe.complete())},8996:(ot,Ce,M)=>{M.d(Ce,{D:()=>Ne});var d=M(8421),k=M(5363),x=M(9468),Ee=M(8306),le=M(2202),me=M(576),z=M(9672);function se(De,Qe){if(!De)throw new Error("Iterable cannot be null");return new Ee.y(J=>{(0,z.f)(J,Qe,()=>{const fe=De[Symbol.asyncIterator]();(0,z.f)(J,Qe,()=>{fe.next().then(V=>{V.done?J.complete():J.next(V.value)})},0,!0)})})}var He=M(3670),Te=M(8239),Be=M(1144),Ge=M(6495),ye=M(2206),be=M(4532),et=M(3260);function Ne(De,Qe){return Qe?function Oe(De,Qe){if(null!=De){if((0,He.c)(De))return function ie(De,Qe){return(0,d.Xf)(De).pipe((0,x.R)(Qe),(0,k.Q)(Qe))}(De,Qe);if((0,Be.z)(De))return function he(De,Qe){return new Ee.y(J=>{let fe=0;return Qe.schedule(function(){fe===De.length?J.complete():(J.next(De[fe++]),J.closed||this.schedule())})})}(De,Qe);if((0,Te.t)(De))return function pe(De,Qe){return(0,d.Xf)(De).pipe((0,x.R)(Qe),(0,k.Q)(Qe))}(De,Qe);if((0,ye.D)(De))return se(De,Qe);if((0,Ge.T)(De))return function j(De,Qe){return new Ee.y(J=>{let fe;return(0,z.f)(J,Qe,()=>{fe=De[le.h](),(0,z.f)(J,Qe,()=>{let V,te;try{({value:V,done:te}=fe.next())}catch(ae){return void J.error(ae)}te?J.complete():J.next(V)},0,!0)}),()=>(0,me.m)(null==fe?void 0:fe.return)&&fe.return()})}(De,Qe);if((0,et.L)(De))return function We(De,Qe){return se((0,et.Q)(De),Qe)}(De,Qe)}throw(0,be.z)(De)}(De,Qe):(0,d.Xf)(De)}},8421:(ot,Ce,M)=>{M.d(Ce,{Xf:()=>He});var d=M(655),k=M(1144),x=M(8239),ie=M(8306),pe=M(3670),Ee=M(2206),he=M(4532),le=M(6495),me=M(3260),z=M(576),j=M(7849),se=M(8822);function He(Oe){if(Oe instanceof ie.y)return Oe;if(null!=Oe){if((0,pe.c)(Oe))return function Te(Oe){return new ie.y(Ne=>{const De=Oe[se.L]();if((0,z.m)(De.subscribe))return De.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Oe);if((0,k.z)(Oe))return function Be(Oe){return new ie.y(Ne=>{for(let De=0;De<Oe.length&&!Ne.closed;De++)Ne.next(Oe[De]);Ne.complete()})}(Oe);if((0,x.t)(Oe))return function Ge(Oe){return new ie.y(Ne=>{Oe.then(De=>{Ne.closed||(Ne.next(De),Ne.complete())},De=>Ne.error(De)).then(null,j.h)})}(Oe);if((0,Ee.D)(Oe))return be(Oe);if((0,le.T)(Oe))return function ye(Oe){return new ie.y(Ne=>{for(const De of Oe)if(Ne.next(De),Ne.closed)return;Ne.complete()})}(Oe);if((0,me.L)(Oe))return function et(Oe){return be((0,me.Q)(Oe))}(Oe)}throw(0,he.z)(Oe)}function be(Oe){return new ie.y(Ne=>{(function We(Oe,Ne){var De,Qe,J,fe;return(0,d.mG)(this,void 0,void 0,function*(){try{for(De=(0,d.KL)(Oe);!(Qe=yield De.next()).done;)if(Ne.next(Qe.value),Ne.closed)return}catch(V){J={error:V}}finally{try{Qe&&!Qe.done&&(fe=De.return)&&(yield fe.call(De))}finally{if(J)throw J.error}}Ne.complete()})})(Oe,Ne).catch(De=>Ne.error(De))})}},6451:(ot,Ce,M)=>{M.d(Ce,{T:()=>Ee});var d=M(8189),k=M(8421),x=M(515),ie=M(7669),pe=M(8996);function Ee(...he){const le=(0,ie.yG)(he),me=(0,ie._6)(he,1/0),z=he;return z.length?1===z.length?(0,k.Xf)(z[0]):(0,d.J)(me)((0,pe.D)(z,le)):x.E}},5403:(ot,Ce,M)=>{M.d(Ce,{Q:()=>x,x:()=>k});var d=M(2961);function k(ie,pe,Ee,he,le){return new x(ie,pe,Ee,he,le)}class x extends d.Lv{constructor(pe,Ee,he,le,me,z){super(pe),this.onFinalize=me,this.shouldUnsubscribe=z,this._next=Ee?function(j){try{Ee(j)}catch(se){pe.error(se)}}:super._next,this._error=le?function(j){try{le(j)}catch(se){pe.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(j){pe.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},4004:(ot,Ce,M)=>{M.d(Ce,{U:()=>x});var d=M(4482),k=M(5403);function x(ie,pe){return(0,d.e)((Ee,he)=>{let le=0;Ee.subscribe((0,k.x)(he,me=>{he.next(ie.call(pe,me,le++))}))})}},8189:(ot,Ce,M)=>{M.d(Ce,{J:()=>x});var d=M(5577),k=M(4671);function x(ie=1/0){return(0,d.z)(k.y,ie)}},5577:(ot,Ce,M)=>{M.d(Ce,{z:()=>le});var d=M(4004),k=M(8421),x=M(4482),ie=M(9672),pe=M(5403),he=M(576);function le(me,z,j=1/0){return(0,he.m)(z)?le((se,He)=>(0,d.U)((Te,Be)=>z(se,Te,He,Be))((0,k.Xf)(me(se,He))),j):("number"==typeof z&&(j=z),(0,x.e)((se,He)=>function Ee(me,z,j,se,He,Te,Be,Ge){const ye=[];let be=0,et=0,We=!1;const Oe=()=>{We&&!ye.length&&!be&&z.complete()},Ne=Qe=>be<se?De(Qe):ye.push(Qe),De=Qe=>{Te&&z.next(Qe),be++;let J=!1;(0,k.Xf)(j(Qe,et++)).subscribe((0,pe.x)(z,fe=>{null==He||He(fe),Te?Ne(fe):z.next(fe)},()=>{J=!0},void 0,()=>{if(J)try{for(be--;ye.length&&be<se;){const fe=ye.shift();Be?(0,ie.f)(z,Be,()=>De(fe)):De(fe)}Oe()}catch(fe){z.error(fe)}}))};return me.subscribe((0,pe.x)(z,Ne,()=>{We=!0,Oe()})),()=>{null==Ge||Ge()}}(se,He,me,j)))}},5363:(ot,Ce,M)=>{M.d(Ce,{Q:()=>ie});var d=M(9672),k=M(4482),x=M(5403);function ie(pe,Ee=0){return(0,k.e)((he,le)=>{he.subscribe((0,x.x)(le,me=>(0,d.f)(le,pe,()=>le.next(me),Ee),()=>(0,d.f)(le,pe,()=>le.complete(),Ee),me=>(0,d.f)(le,pe,()=>le.error(me),Ee)))})}},3099:(ot,Ce,M)=>{M.d(Ce,{B:()=>Ee});var d=M(8996),k=M(5698),x=M(7579),ie=M(2961),pe=M(4482);function Ee(le={}){const{connector:me=(()=>new x.x),resetOnError:z=!0,resetOnComplete:j=!0,resetOnRefCountZero:se=!0}=le;return He=>{let Te=null,Be=null,Ge=null,ye=0,be=!1,et=!1;const We=()=>{null==Be||Be.unsubscribe(),Be=null},Oe=()=>{We(),Te=Ge=null,be=et=!1},Ne=()=>{const De=Te;Oe(),null==De||De.unsubscribe()};return(0,pe.e)((De,Qe)=>{ye++,!et&&!be&&We();const J=Ge=null!=Ge?Ge:me();Qe.add(()=>{ye--,0===ye&&!et&&!be&&(Be=he(Ne,se))}),J.subscribe(Qe),Te||(Te=new ie.Hp({next:fe=>J.next(fe),error:fe=>{et=!0,We(),Be=he(Oe,z,fe),J.error(fe)},complete:()=>{be=!0,We(),Be=he(Oe,j),J.complete()}}),(0,d.D)(De).subscribe(Te))})(He)}}function he(le,me,...z){return!0===me?(le(),null):!1===me?null:me(...z).pipe((0,k.q)(1)).subscribe(()=>le())}},9468:(ot,Ce,M)=>{M.d(Ce,{R:()=>k});var d=M(4482);function k(x,ie=0){return(0,d.e)((pe,Ee)=>{Ee.add(x.schedule(()=>pe.subscribe(Ee),ie))})}},5698:(ot,Ce,M)=>{M.d(Ce,{q:()=>ie});var d=M(515),k=M(4482),x=M(5403);function ie(pe){return pe<=0?()=>d.E:(0,k.e)((Ee,he)=>{let le=0;Ee.subscribe((0,x.x)(he,me=>{++le<=pe&&(he.next(me),pe<=le&&he.complete())}))})}},8505:(ot,Ce,M)=>{M.d(Ce,{b:()=>pe});var d=M(576),k=M(4482),x=M(5403),ie=M(4671);function pe(Ee,he,le){const me=(0,d.m)(Ee)||he||le?{next:Ee,error:he,complete:le}:Ee;return me?(0,k.e)((z,j)=>{var se;null===(se=me.subscribe)||void 0===se||se.call(me);let He=!0;z.subscribe((0,x.x)(j,Te=>{var Be;null===(Be=me.next)||void 0===Be||Be.call(me,Te),j.next(Te)},()=>{var Te;He=!1,null===(Te=me.complete)||void 0===Te||Te.call(me),j.complete()},Te=>{var Be;He=!1,null===(Be=me.error)||void 0===Be||Be.call(me,Te),j.error(Te)},()=>{var Te,Be;He&&(null===(Te=me.unsubscribe)||void 0===Te||Te.call(me)),null===(Be=me.finalize)||void 0===Be||Be.call(me)}))}):ie.y}},4408:(ot,Ce,M)=>{M.d(Ce,{o:()=>pe});var d=M(727);class k extends d.w0{constructor(he,le){super()}schedule(he,le=0){return this}}const x={setInterval(Ee,he,...le){const{delegate:me}=x;return(null==me?void 0:me.setInterval)?me.setInterval(Ee,he,...le):setInterval(Ee,he,...le)},clearInterval(Ee){const{delegate:he}=x;return((null==he?void 0:he.clearInterval)||clearInterval)(Ee)},delegate:void 0};var ie=M(8737);class pe extends k{constructor(he,le){super(he,le),this.scheduler=he,this.work=le,this.pending=!1}schedule(he,le=0){if(this.closed)return this;this.state=he;const me=this.id,z=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(z,me,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(z,this.id,le),this}requestAsyncId(he,le,me=0){return x.setInterval(he.flush.bind(he,this),me)}recycleAsyncId(he,le,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return le;x.clearInterval(le)}execute(he,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(he,le);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,le){let z,me=!1;try{this.work(he)}catch(j){me=!0,z=j||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:he,scheduler:le}=this,{actions:me}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(me,this),null!=he&&(this.id=this.recycleAsyncId(le,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Ce,M)=>{M.d(Ce,{v:()=>x});var d=M(6063);class k{constructor(pe,Ee=k.now){this.schedulerActionCtor=pe,this.now=Ee}schedule(pe,Ee=0,he){return new this.schedulerActionCtor(this,pe).schedule(he,Ee)}}k.now=d.l.now;class x extends k{constructor(pe,Ee=k.now){super(pe,Ee),this.actions=[],this._active=!1,this._scheduled=void 0}flush(pe){const{actions:Ee}=this;if(this._active)return void Ee.push(pe);let he;this._active=!0;do{if(he=pe.execute(pe.state,pe.delay))break}while(pe=Ee.shift());if(this._active=!1,he){for(;pe=Ee.shift();)pe.unsubscribe();throw he}}}},4986:(ot,Ce,M)=>{M.d(Ce,{z:()=>x});var d=M(4408);const x=new(M(7565).v)(d.o)},6063:(ot,Ce,M)=>{M.d(Ce,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ot,Ce,M)=>{M.d(Ce,{z:()=>d});const d={setTimeout(k,x,...ie){const{delegate:pe}=d;return(null==pe?void 0:pe.setTimeout)?pe.setTimeout(k,x,...ie):setTimeout(k,x,...ie)},clearTimeout(k){const{delegate:x}=d;return((null==x?void 0:x.clearTimeout)||clearTimeout)(k)},delegate:void 0}},2202:(ot,Ce,M)=>{M.d(Ce,{h:()=>k});const k=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Ce,M)=>{M.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Ce,M)=>{M.d(Ce,{_6:()=>Ee,jO:()=>ie,yG:()=>pe});var d=M(576);function x(he){return he[he.length-1]}function ie(he){return(0,d.m)(x(he))?he.pop():void 0}function pe(he){return function k(he){return he&&(0,d.m)(he.schedule)}(x(he))?he.pop():void 0}function Ee(he,le){return"number"==typeof x(he)?he.pop():le}},8737:(ot,Ce,M)=>{function d(k,x){if(k){const ie=k.indexOf(x);0<=ie&&k.splice(ie,1)}}M.d(Ce,{P:()=>d})},3888:(ot,Ce,M)=>{function d(k){const ie=k(pe=>{Error.call(pe),pe.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}M.d(Ce,{d:()=>d})},2806:(ot,Ce,M)=>{M.d(Ce,{O:()=>ie,x:()=>x});var d=M(2416);let k=null;function x(pe){if(d.v.useDeprecatedSynchronousErrorHandling){const Ee=!k;if(Ee&&(k={errorThrown:!1,error:null}),pe(),Ee){const{errorThrown:he,error:le}=k;if(k=null,he)throw le}}else pe()}function ie(pe){d.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=pe)}},9672:(ot,Ce,M)=>{function d(k,x,ie,pe=0,Ee=!1){const he=x.schedule(function(){ie(),Ee?k.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(k.add(he),!Ee)return he}M.d(Ce,{f:()=>d})},4671:(ot,Ce,M)=>{function d(k){return k}M.d(Ce,{y:()=>d})},1144:(ot,Ce,M)=>{M.d(Ce,{z:()=>d});const d=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(ot,Ce,M)=>{M.d(Ce,{D:()=>k});var d=M(576);function k(x){return Symbol.asyncIterator&&(0,d.m)(null==x?void 0:x[Symbol.asyncIterator])}},576:(ot,Ce,M)=>{function d(k){return"function"==typeof k}M.d(Ce,{m:()=>d})},3670:(ot,Ce,M)=>{M.d(Ce,{c:()=>x});var d=M(8822),k=M(576);function x(ie){return(0,k.m)(ie[d.L])}},6495:(ot,Ce,M)=>{M.d(Ce,{T:()=>x});var d=M(2202),k=M(576);function x(ie){return(0,k.m)(null==ie?void 0:ie[d.h])}},8239:(ot,Ce,M)=>{M.d(Ce,{t:()=>k});var d=M(576);function k(x){return(0,d.m)(null==x?void 0:x.then)}},3260:(ot,Ce,M)=>{M.d(Ce,{L:()=>ie,Q:()=>x});var d=M(655),k=M(576);function x(pe){return(0,d.FC)(this,arguments,function*(){const he=pe.getReader();try{for(;;){const{value:le,done:me}=yield(0,d.qq)(he.read());if(me)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(le)}}finally{he.releaseLock()}})}function ie(pe){return(0,k.m)(null==pe?void 0:pe.getReader)}},4482:(ot,Ce,M)=>{M.d(Ce,{A:()=>k,e:()=>x});var d=M(576);function k(ie){return(0,d.m)(null==ie?void 0:ie.lift)}function x(ie){return pe=>{if(k(pe))return pe.lift(function(Ee){try{return ie(Ee,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ot,Ce,M)=>{M.d(Ce,{h:()=>x});var d=M(2416),k=M(3410);function x(ie){k.z.setTimeout(()=>{const{onUnhandledError:pe}=d.v;if(!pe)throw ie;pe(ie)})}},4532:(ot,Ce,M)=>{function d(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(Ce,{z:()=>d})},655:(ot,Ce,M)=>{function ie(V,te){var ae={};for(var ce in V)Object.prototype.hasOwnProperty.call(V,ce)&&te.indexOf(ce)<0&&(ae[ce]=V[ce]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(ce=Object.getOwnPropertySymbols(V);Re<ce.length;Re++)te.indexOf(ce[Re])<0&&Object.prototype.propertyIsEnumerable.call(V,ce[Re])&&(ae[ce[Re]]=V[ce[Re]])}return ae}function le(V,te,ae,ce){return new(ae||(ae=Promise))(function(oe,vt){function At(dt){try{it(ce.next(dt))}catch(mn){vt(mn)}}function _n(dt){try{it(ce.throw(dt))}catch(mn){vt(mn)}}function it(dt){dt.done?oe(dt.value):function Re(oe){return oe instanceof ae?oe:new ae(function(vt){vt(oe)})}(dt.value).then(At,_n)}it((ce=ce.apply(V,te||[])).next())})}function ye(V){return this instanceof ye?(this.v=V,this):new ye(V)}function be(V,te,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,ce=ae.apply(V,te||[]),oe=[];return Re={},vt("next"),vt("throw"),vt("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function vt(un){ce[un]&&(Re[un]=function(pr){return new Promise(function(en,jt){oe.push([un,pr,en,jt])>1||At(un,pr)})})}function At(un,pr){try{!function _n(un){un.value instanceof ye?Promise.resolve(un.value.v).then(it,dt):mn(oe[0][2],un)}(ce[un](pr))}catch(en){mn(oe[0][3],en)}}function it(un){At("next",un)}function dt(un){At("throw",un)}function mn(un,pr){un(pr),oe.shift(),oe.length&&At(oe[0][0],oe[0][1])}}function We(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,te=V[Symbol.asyncIterator];return te?te.call(V):(V=function se(V){var te="function"==typeof Symbol&&Symbol.iterator,ae=te&&V[te],ce=0;if(ae)return ae.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&ce>=V.length&&(V=void 0),{value:V&&V[ce++],done:!V}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),ae={},ce("next"),ce("throw"),ce("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function ce(oe){ae[oe]=V[oe]&&function(vt){return new Promise(function(At,_n){!function Re(oe,vt,At,_n){Promise.resolve(_n).then(function(it){oe({value:it,done:At})},vt)}(At,_n,(vt=V[oe](vt)).done,vt.value)})}}}M.d(Ce,{FC:()=>be,KL:()=>We,_T:()=>ie,mG:()=>le,qq:()=>ye})},5e3:(ot,Ce,M)=>{M.d(Ce,{$8M:()=>iu,$Z:()=>nD,AFp:()=>La,ALo:()=>ph,AaK:()=>le,CHM:()=>Ni,CRH:()=>Rv,CZH:()=>zn,CqO:()=>l0,DdM:()=>_v,EJc:()=>dg,EpF:()=>sD,F4k:()=>oD,FYo:()=>Oa,FiY:()=>_i,G48:()=>AC,GfV:()=>Zp,Gpc:()=>j,JOm:()=>ms,LFG:()=>Yn,LSH:()=>_m,Lbi:()=>$o,NdJ:()=>c0,OlP:()=>Pn,Oqu:()=>Wy,PXZ:()=>$w,Q6J:()=>Ny,QGY:()=>Gd,Qsj:()=>mv,R0b:()=>es,RDi:()=>Ka,Rgc:()=>Eh,SBq:()=>nc,Sil:()=>Ow,Suo:()=>Fa,TTD:()=>xs,TgZ:()=>Gl,VKq:()=>Ou,VLi:()=>fg,X6Q:()=>TC,XFs:()=>_t,Xpm:()=>_e,Y36:()=>Hl,YKP:()=>nw,YNc:()=>pp,Yjl:()=>Ye,Yz7:()=>en,ZZ4:()=>vg,_Bn:()=>gv,_UZ:()=>Oy,_Vd:()=>ch,_c5:()=>Eg,_uU:()=>AD,aQg:()=>_g,c2e:()=>Pw,cJS:()=>St,cg1:()=>Yy,dDg:()=>Kr,deG:()=>wf,dqk:()=>Nt,eFA:()=>Nh,ekj:()=>Gy,g9A:()=>Nw,h0i:()=>Xs,hGG:()=>wg,hij:()=>Zy,iGM:()=>xv,ifc:()=>Rt,ip1:()=>jo,kL8:()=>Tp,lG2:()=>Se,lcZ:()=>mh,n5z:()=>Kc,oAB:()=>Q,oxw:()=>cD,q4F:()=>ka,qLn:()=>md,qOj:()=>Ae,qZA:()=>Py,sBO:()=>MC,sIi:()=>Ud,s_b:()=>wh,soG:()=>to,tBr:()=>js,tb:()=>cc,tp0:()=>ga,uIk:()=>fp,vHH:()=>Be,vpe:()=>eo,wAp:()=>yt,xp6:()=>X_,z2F:()=>Hu,zSh:()=>dy,zs3:()=>Es});var d=M(7579),k=M(727),x=M(8306),ie=M(6451),pe=M(3099);function Ee(i){for(let s in i)if(i[s]===Ee)return s;throw Error("Could not find renamed property on target object.")}function he(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function me(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const z=Ee({__forward_ref__:Ee});function j(i){return i.__forward_ref__=j,i.toString=function(){return le(this())},i}function se(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(z)&&i.__forward_ref__===j}class Be extends Error{constructor(s,a){super(function Ge(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}function Ne(i,s){const a=s?` in ${s}`:"";throw new Be(-201,`No provider for ${be(i)} found${a}`)}function it(i,s){null==i&&function dt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function St(i){return{providers:i.providers||[],imports:i.imports||[]}}function tn(i){return Tn(i,qn)||Tn(i,An)}function Tn(i,s){return i.hasOwnProperty(s)?i[s]:null}function xn(i){return i&&(i.hasOwnProperty(Xn)||i.hasOwnProperty(er))?i[Xn]:null}const qn=Ee({\u0275prov:Ee}),Xn=Ee({\u0275inj:Ee}),An=Ee({ngInjectableDef:Ee}),er=Ee({ngInjectorDef:Ee});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let Wn;function Zt(i){const s=Wn;return Wn=i,s}function Fn(i,s,a){const l=tn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&_t.Optional?null:void 0!==s?s:void Ne(le(i),"Injector")}function tr(i){return{toString:i}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),Rt=(()=>{return(i=Rt||(Rt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Rt;var i})();const ft="undefined"!=typeof globalThis&&globalThis,nt="undefined"!=typeof window&&window,wn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt=ft||"undefined"!=typeof global&&global||nt||wn,nn={},F=[],q=Ee({\u0275cmp:Ee}),Z=Ee({\u0275dir:Ee}),Ie=Ee({\u0275pipe:Ee}),U=Ee({\u0275mod:Ee}),X=Ee({\u0275fac:Ee}),B=Ee({__NG_ELEMENT_ID__:Ee});let ee=0;function _e(i){return tr(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||F,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Rt.Emulated,id:"c",styles:i.styles||F,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,y=i.pipes;return l.id+=ee++,l.inputs=L(i.inputs,a),l.outputs=L(i.outputs),f&&f.forEach(_=>_(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(qe):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(ze):null,l})}function qe(i){return at(i)||function It(i){return i[Z]||null}(i)}function ze(i){return function zt(i){return i[Ie]||null}(i)}const pt={};function Q(i){return tr(()=>{const s={type:i.type,bootstrap:i.bootstrap||F,declarations:i.declarations||F,imports:i.imports||F,exports:i.exports||F,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(pt[i.id]=i.type),s})}function L(i,s){if(null==i)return nn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const Se=_e;function Ye(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function at(i){return i[q]||null}function Pt(i,s){const a=i[U]||null;if(!a&&!0===s)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function Mr(i){return Array.isArray(i)&&"object"==typeof i[1]}function xr(i){return Array.isArray(i)&&!0===i[1]}function io(i){return 0!=(8&i.flags)}function so(i){return 2==(2&i.flags)}function rs(i){return 1==(1&i.flags)}function Gr(i){return null!==i.template}function Mc(i){return 0!=(512&i[2])}function ci(i,s){return i.hasOwnProperty(X)?i[X]:null}class lo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function xs(){return Yo}function Yo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Pc),tl}function tl(){const i=co(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===nn)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Pc(i,s,a,l){const c=co(i)||function Rs(i,s){return i[ss]=s}(i,{previous:nn,current:null}),f=c.current||(c.current={}),y=c.previous,_=this.declaredInputs[a],I=y[_];f[_]=new lo(I&&I.currentValue,s,y===nn),i[l]=s}xs.ngInherit=!0;const ss="__ngSimpleChanges__";function co(i){return i[ss]||null}let Xo;function Ka(i){Xo=i}function In(i){return!!i.listen}const ea={createRenderer:(i,s)=>function qi(){return void 0!==Xo?Xo:"undefined"!=typeof document?document:void 0}()};function vn(i){for(;Array.isArray(i);)i=i[0];return i}function na(i,s){return vn(s[i])}function yr(i,s){return vn(s[i.index])}function fo(i,s){return i.data[s]}function R(i,s){const a=s[i];return Mr(a)?a:a[0]}function N(i){return 4==(4&i[2])}function K(i){return 128==(128&i[2])}function $e(i,s){return null==s?null:i[s]}function Je(i){i[18]=0}function Tt(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ut={lFrame:ff(null),bindingsEnabled:!0};function di(){return ut.bindingsEnabled}function ke(){return ut.lFrame.lView}function Ft(){return ut.lFrame.tView}function Ni(i){return ut.lFrame.contextLView=i,i[8]}function Cn(){let i=uf();for(;null!==i&&64===i.type;)i=i.parent;return i}function uf(){return ut.lFrame.currentTNode}function Ki(i,s){const a=ut.lFrame;a.currentTNode=i,a.isParent=s}function Fc(){return ut.lFrame.isParent}function Ir(){const i=ut.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function sa(){return ut.lFrame.bindingIndex++}function Wg(i,s){const a=ut.lFrame;a.bindingIndex=a.bindingRootIndex=i,Vc(s)}function Vc(i){ut.lFrame.currentDirectiveIndex=i}function cf(){return ut.lFrame.currentQueryIndex}function df(i){ut.lFrame.currentQueryIndex=i}function hf(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ja(i,s,a){if(a&_t.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&_t.Host||(c=hf(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=ut.lFrame=po();return l.currentTNode=s,l.lView=i,!0}function ol(i){const s=po(),a=i[1];ut.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function po(){const i=ut.lFrame,s=null===i?null:i.child;return null===s?ff(i):s}function ff(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Zg(){const i=ut.lFrame;return ut.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Uc=Zg;function Oi(){const i=Zg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Rr(){return ut.lFrame.selectedIndex}function Ps(i){ut.lFrame.selectedIndex=i}function rr(){const i=ut.lFrame;return fo(i.tView,i.selectedIndex)}function us(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:_,ngAfterViewInit:I,ngAfterViewChecked:D,ngOnDestroy:T}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),_&&((i.contentHooks||(i.contentHooks=[])).push(a,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,_)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),D&&((i.viewHooks||(i.viewHooks=[])).push(a,D),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,D)),null!=T&&(i.destroyHooks||(i.destroyHooks=[])).push(a,T)}}function Xa(i,s,a){Qg(i,s,3,a)}function al(i,s,a,l){(3&i[2])===a&&Qg(i,s,a,l)}function gf(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Qg(i,s,a,l){const f=null!=l?l:-1,y=s.length-1;let _=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(_=s[I],null!=l&&_>=l)break}else s[I]<0&&(i[18]+=65536),(_<f||-1==f)&&(E_(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function E_(i,s,a,l){const c=a[l]<0,f=a[l+1],_=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(_)}finally{}}}else try{f.call(_)}finally{}}class oa{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function $c(i,s,a){const l=In(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const y=a[c++],_=a[c++],I=a[c++];l?i.setAttribute(s,_,I,y):s.setAttributeNS(y,_,I)}else{const y=f,_=a[++c];Hc(y)?l&&i.setProperty(s,y,_):l?i.setAttribute(s,y,_):s.setAttribute(y,_),c++}}return c}function ul(i){return 3===i||4===i||6===i}function Hc(i){return 64===i.charCodeAt(0)}function tu(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||aa(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function aa(i,s,a,l,c){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const _=i[f++];if("number"==typeof _){if(_===s){y=-1;break}if(_>s){y=f-1;break}}}for(;f<i.length;){const _=i[f];if("number"==typeof _)break;if(_===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function ua(i){return-1!==i}function pn(i){return 32767&i}function Ct(i,s){let a=function Nr(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Gc=!0;function la(i){const s=Gc;return Gc=i,s}let mf=0;function zr(i,s){const a=mo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,go(l.data,i),go(s,null),go(l.blueprint,null));const c=ll(i,s),f=i.injectorIndex;if(ua(c)){const y=pn(c),_=Ct(c,s),I=_[1].data;for(let D=0;D<8;D++)s[f+D]=_[y+D]|I[y+D]}return s[f+8]=c,f}function go(i,s){i.push(0,0,0,0,0,0,0,0,s)}function mo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ll(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const f=c[1],y=f.type;if(l=2===y?f.declTNode:1===y?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ca(i,s,a){!function Yi(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(B)&&(l=a[B]),null==l&&(l=a[B]=mf++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function ks(i,s,a){if(a&_t.Optional)return i;Ne(s,"NodeInjector")}function cs(i,s,a,l){if(a&_t.Optional&&void 0===l&&(l=null),0==(a&(_t.Self|_t.Host))){const c=i[9],f=Zt(void 0);try{return c?c.get(s,l,a&_t.Optional):Fn(s,l,a&_t.Optional)}finally{Zt(f)}}return ks(l,s,a)}function nu(i,s,a,l=_t.Default,c){if(null!==i){const f=function _f(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(B)?i[B]:void 0;return"number"==typeof s?s>=0?255&s:Fs:s}(a);if("function"==typeof f){if(!Ja(s,i,l))return l&_t.Host?ks(c,a,l):cs(s,a,l,c);try{const y=f(l);if(null!=y||l&_t.Optional)return y;Ne(a)}finally{Uc()}}else if("number"==typeof f){let y=null,_=mo(i,s),I=-1,D=l&_t.Host?s[16][6]:null;for((-1===_||l&_t.SkipSelf)&&(I=-1===_?ll(i,s):s[_+8],-1!==I&&Zc(l,!1)?(y=s[1],_=pn(I),s=Ct(I,s)):_=-1);-1!==_;){const T=s[1];if(Wc(f,_,T.data)){const O=em(_,s,a,y,l,D);if(O!==vr)return O}I=s[_+8],-1!==I&&Zc(l,s[1].data[_+8]===D)&&Wc(f,_,s)?(y=T,_=pn(I),s=Ct(I,s)):_=-1}}}return cs(s,a,l,c)}const vr={};function Fs(){return new ds(Cn(),ke())}function em(i,s,a,l,c,f){const y=s[1],_=y.data[i+8],T=vf(_,y,a,null==l?so(_)&&Gc:l!=y&&0!=(3&_.type),c&_t.Host&&f===_);return null!==T?yo(s,y,T,_):vr}function vf(i,s,a,l,c){const f=i.providerIndexes,y=s.data,_=1048575&f,I=i.directiveStart,T=f>>20,G=c?_+T:i.directiveEnd;for(let ne=l?_:_+T;ne<G;ne++){const Me=y[ne];if(ne<I&&a===Me||ne>=I&&Me.type===a)return ne}if(c){const ne=y[I];if(ne&&Gr(ne)&&ne.type===a)return I}return null}function yo(i,s,a,l){let c=i[a];const f=s.data;if(function w_(i){return i instanceof oa}(c)){const y=c;y.resolving&&function et(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Be(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(f[a]));const _=la(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Zt(y.injectImpl):null;Ja(i,l,_t.Default);try{c=i[a]=y.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function pf(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const y=Yo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Zt(I),la(_),y.resolving=!1,Uc()}}return c}function Wc(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Zc(i,s){return!(i&_t.Self||i&_t.Host&&s)}class ds{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return nu(this._tNode,this._lView,s,l,a)}}function Kc(i){return tr(()=>{const s=i.prototype.constructor,a=s[X]||ru(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[X]||ru(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function ru(i){return He(i)?()=>{const s=ru(se(i));return s&&s()}:ci(i)}function iu(i){return function yf(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(ul(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(Cn(),i)}const vo="__parameters__";function da(i,s,a){return tr(()=>{const l=function cl(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const y=new c(...f);return _.annotation=y,_;function _(I,D,T){const O=I.hasOwnProperty(vo)?I[vo]:Object.defineProperty(I,vo,{value:[]})[vo];for(;O.length<=T;)O.push(null);return(O[T]=O[T]||[]).push(y),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const wf=new Pn("AnalyzeForEntryComponents");function Jr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Jr(l,s)):s!==i&&s.push(l)}return s}function Xr(i,s){i.forEach(a=>Array.isArray(a)?Xr(a,s):s(a))}function su(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Vs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function hi(i,s,a){let l=au(i,s);return l>=0?i[1|l]=a:(l=~l,function sm(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Tf(i,s){const a=au(i,s);if(a>=0)return i[1|a]}function au(i,s){return function ed(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),y=i[f<<a];if(s===y)return f<<a;y>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const Xi={},lu="__NG_DI_FLAG__",fl="ngTempTokenPath",Sf=/\n/gm,Mf="__source",b_=Ee({provide:String,useValue:Ee});let _o;function sd(i){const s=_o;return _o=i,s}function D_(i,s=_t.Default){if(void 0===_o)throw new Be(203,"");return null===_o?Fn(i,void 0,s):_o.get(i,s&_t.Optional?null:void 0,s)}function Yn(i,s=_t.Default){return(function Jt(){return Wn}()||D_)(se(i),s)}const Rf=Yn;function Eo(i){const s=[];for(let a=0;a<i.length;a++){const l=se(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Be(900,"");let c,f=_t.Default;for(let y=0;y<l.length;y++){const _=l[y],I=Nf(_);"number"==typeof I?-1===I?c=_.token:f|=I:c=_}s.push(Yn(c,f))}else s.push(Yn(l))}return s}function wo(i,s){return i[lu]=s,i.prototype[lu]=s,i}function Nf(i){return i[lu]}const js=wo(da("Inject",i=>({token:i})),-1),_i=wo(da("Optional"),8),ga=wo(da("SkipSelf"),4);class va{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Hs(i){return i instanceof va?i.changingThisBreaksApplicationSecurity:i}const dd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,p=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var lr=(()=>((lr=lr||{})[lr.NONE=0]="NONE",lr[lr.HTML=1]="HTML",lr[lr.STYLE=2]="STYLE",lr[lr.SCRIPT=3]="SCRIPT",lr[lr.URL=4]="URL",lr[lr.RESOURCE_URL=5]="RESOURCE_URL",lr))();function _m(i){const s=function Dl(){const i=ke();return i&&i[12]}();return s?s.sanitize(lr.URL,i)||"":function Gs(i,s){const a=function hm(i){return i instanceof va&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Hs(i):function m(i){return(i=String(i)).match(dd)||i.match(p)?i:"unsafe:"+i}(ye(i))}const ti="__ngContext__";function qr(i,s){i[ti]=s}function So(i){const s=function Dt(i){return i[ti]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function bm(i){return i.ngOriginalError}function jI(i,...s){i.error(...s)}class md{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function BI(i){return i&&i.ngErrorLogger||jI}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&bm(s);for(;a&&bm(a);)a=bm(a);return a||null}}const HI=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function cr(i){return i instanceof Function?i():i}var ms=(()=>((ms=ms||{})[ms.Important=1]="Important",ms[ms.DashCase=2]="DashCase",ms))();function zf(i,s){return undefined(i,s)}function Wr(i){const s=i[3];return xr(s)?s[3]:s}function vd(i){return Sm(i[13])}function _u(i){return Sm(i[4])}function Sm(i){for(;null!==i&&!xr(i);)i=i[4];return i}function Cl(i,s,a,l,c){if(null!=l){let f,y=!1;xr(l)?f=l:Mr(l)&&(y=!0,l=l[0]);const _=vn(l);0===i&&null!==a?null==c?ys(s,a,_):Eu(s,a,_,c||null,!0):1===i&&null!==a?Eu(s,a,_,c||null,!0):2===i?function Vm(i,s,a){const l=_d(i,s);l&&function q_(i,s,a,l){In(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,_,y):3===i&&s.destroyNode(_),null!=f&&function wd(i,s,a,l,c){const f=a[7];f!==vn(a)&&Cl(s,i,l,f,c);for(let _=10;_<a.length;_++){const I=a[_];Ia(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function xm(i,s,a){if(In(i))return i.createElement(s,a);{const l=null!==a?function Jo(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function Rm(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Tt(c,-1)),a.splice(l,1)}function Yt(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&Rm(c,l),s>0&&(i[a-1][4]=l[4]);const f=Vs(i,10+s);!function U_(i,s){Ia(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function $_(i,s){if(!(256&s[2])){const a=s[11];In(a)&&a.destroyNode&&Ia(i,s,a,3,null,null),function ZI(i){let s=i[13];if(!s)return wa(i[1],i);for(;s;){let a=null;if(Mr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Mr(s)&&wa(s[1],s),s=s[3];null===s&&(s=i),Mr(s)&&wa(s[1],s),a=s&&s[4]}s=a}}(s)}}function wa(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Nm(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof oa)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const _=c[f[y]],I=f[y+1];try{I.call(_)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function H_(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],_="function"==typeof y?y(s):vn(s[y]),I=l[c=a[f+2]],D=a[f+3];"boolean"==typeof D?_.removeEventListener(a[f],I,D):D>=0?l[c=D]():l[c=-D].unsubscribe(),f+=2}else{const y=l[c=a[f+1]];a[f].call(y)}if(null!==l){for(let f=c+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&In(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&xr(s[3])){a!==s[3]&&Rm(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function G_(i,s,a){return function z_(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Rt.None||c===Rt.Emulated)return null}return yr(l,a)}(i,s.parent,a)}function Eu(i,s,a,l,c){In(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function ys(i,s,a){In(i)?i.appendChild(s,a):s.appendChild(a)}function Pm(i,s,a,l,c){null!==l?Eu(i,s,a,l,c):ys(i,s,a)}function _d(i,s){return In(i)?i.parentNode(s):s.parentNode}let W_=function vs(i,s,a){return 40&i.type?yr(i,a):null};function Ed(i,s,a,l){const c=G_(i,l,s),f=s[11],_=function Pr(i,s,a){return W_(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Pm(f,c,a[I],_,!1);else Pm(f,c,a,_,!1)}function qf(i,s){if(null!==s){const a=s.type;if(3&a)return yr(s,i);if(4&a)return Lm(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return qf(i,l);{const c=i[s.index];return xr(c)?Lm(-1,c):vn(c)}}if(32&a)return zf(s,i)()||vn(i[s.index]);{const l=Fm(i,s);return null!==l?Array.isArray(l)?l[0]:qf(Wr(i[16]),l):qf(i,s.next)}}return null}function Fm(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Lm(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return qf(l,c)}return s[7]}function Wf(i,s,a,l,c,f,y){for(;null!=a;){const _=l[a.index],I=a.type;if(y&&0===s&&(_&&qr(vn(_),l),a.flags|=4),64!=(64&a.flags))if(8&I)Wf(i,s,a.child,l,c,f,!1),Cl(s,i,c,_,f);else if(32&I){const D=zf(a,l);let T;for(;T=D();)Cl(s,i,c,T,f);Cl(s,i,c,_,f)}else 16&I?sn(i,s,l,a,c,f):Cl(s,i,c,_,f);a=y?a.projectionNext:a.next}}function Ia(i,s,a,l,c,f){Wf(a,l,i.firstChild,s,c,f,!1)}function sn(i,s,a,l,c,f){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let D=0;D<I.length;D++)Cl(s,i,c,I[D],f);else Wf(i,s,I,y[3],c,f,!0)}function ba(i,s,a){In(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Um(i,s,a){In(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Bm(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const Z_="ng-template";function Zf(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==Bm(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Tl(i){return 4===i.type&&i.value!==Z_}function K_(i,s,a){return s===(4!==i.type||a?i.value:Z_)}function Kf(i,s,a){let l=4;const c=i.attrs||[],f=function Q_(i){for(let s=0;s<i.length;s++)if(ul(i[s]))return s;return i.length}(c);let y=!1;for(let _=0;_<s.length;_++){const I=s[_];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!K_(i,I,a)||""===I&&1===s.length){if(_s(l))return!1;y=!0}}else{const D=8&l?I:s[++_];if(8&l&&null!==i.attrs){if(!Zf(i.attrs,D,a)){if(_s(l))return!1;y=!0}continue}const O=jm(8&l?"class":I,c,Tl(i),a);if(-1===O){if(_s(l))return!1;y=!0;continue}if(""!==D){let G;G=O>f?"":c[O+1].toLowerCase();const ne=8&l?G:null;if(ne&&-1!==Bm(ne,D,0)||2&l&&D!==G){if(_s(l))return!1;y=!0}}}}else{if(!y&&!_s(l)&&!_s(I))return!1;if(y&&_s(I))continue;y=!1,l=I|1&l}}return _s(l)||y}function _s(i){return 0==(1&i)}function jm(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)f=!0;else{if(1===y||2===y){let _=s[++c];for(;"string"==typeof _;)_=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=f?1:2}return-1}return function JI(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Id(i,s,a=!1){for(let l=0;l<s.length;l++)if(Kf(i,s[l],a))return!0;return!1}function J_(i,s){return i?":not("+s.trim()+")":s}function Yf(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const _=i[++a];c+="["+y+(_.length>0?'="'+_+'"':"")+"]"}else 8&l?c+="."+y:4&l&&(c+=" "+y);else""!==c&&!_s(y)&&(s+=J_(f,c),c=""),l=y,f=f||!_s(l);a++}return""!==c&&(s+=J_(f,c)),s}const Ut={};function X_(i){eE(Ft(),ke(),Rr()+i,!1)}function eE(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Xa(s,f,a)}else{const f=i.preOrderHooks;null!==f&&al(s,f,0,a)}Ps(a)}function Al(i,s){return i<<17|s<<2}function ki(i){return i>>17&32767}function Qf(i){return 2|i}function Zs(i){return(131068&i)>>2}function Hm(i,s){return-131069&i|s<<2}function Jf(i){return 1|i}function np(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const y=i.data[f];df(c),y.contentQueries(2,s[f],f)}}}function Nl(i,s,a,l,c,f,y,_,I,D){const T=s.blueprint.slice();return T[0]=c,T[2]=140|l,Je(T),T[3]=T[15]=i,T[8]=a,T[10]=y||i&&i[10],T[11]=_||i&&i[11],T[12]=I||i&&i[12]||null,T[9]=D||i&&i[9]||null,T[6]=f,T[16]=2==s.type?i[16]:T,T}function Pl(i,s,a,l,c){let f=i.data[s];if(null===f)f=function Ym(i,s,a,l,c){const f=uf(),y=Fc(),I=i.data[s]=function Pd(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function qg(){return ut.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const y=function Ns(){const i=ut.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ki(f,!0),f}function Aa(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function ri(i,s,a){ol(s);try{const l=i.viewQuery;null!==l&&uy(1,l,a);const c=i.template;null!==c&&xd(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&np(i,s),i.staticViewQueries&&uy(2,i.viewQuery,a);const f=i.components;null!==f&&function Km(i,s){for(let a=0;a<s.length;a++)sS(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Oi()}}function bu(i,s,a,l){const c=s[2];if(256!=(256&c)){ol(s);try{Je(s),function rl(i){return ut.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&xd(i,s,a,2,l);const y=3==(3&c);if(y){const D=i.preOrderCheckHooks;null!==D&&Xa(s,D,null)}else{const D=i.preOrderHooks;null!==D&&al(s,D,0,null),gf(s,0)}if(function Tb(i){for(let s=vd(i);null!==s;s=_u(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(1024&c[2])&&Tt(f,1),c[2]|=1024}}}(s),function Cb(i){for(let s=vd(i);null!==s;s=_u(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];K(l)&&bu(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&np(i,s),y){const D=i.contentCheckHooks;null!==D&&Xa(s,D)}else{const D=i.contentHooks;null!==D&&al(s,D,1),gf(s,1)}!function Md(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Ps(~c);else{const f=c,y=a[++l],_=a[++l];Wg(y,f),_(2,s[f])}}}finally{Ps(-1)}}(i,s);const _=i.components;null!==_&&function hb(i,s){for(let a=0;a<s.length;a++)Ab(i,s[a])}(s,_);const I=i.viewQuery;if(null!==I&&uy(2,I,l),y){const D=i.viewCheckHooks;null!==D&&Xa(s,D)}else{const D=i.viewHooks;null!==D&&al(s,D,2),gf(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Tt(s[3],-1))}finally{Oi()}}}function aE(i,s,a,l){const c=s[10],y=N(s);try{!y&&c.begin&&c.begin(),y&&ri(i,s,l),bu(i,s,a,l)}finally{!y&&c.end&&c.end()}}function xd(i,s,a,l,c){const f=Rr(),y=2&l;try{Ps(-1),y&&s.length>20&&eE(i,s,20,!1),a(l,c)}finally{Ps(f)}}function Qm(i,s,a){!di()||(function kd(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||zr(a,s),qr(l,s);const y=a.initialInputs;for(let _=c;_<f;_++){const I=i.data[_],D=Gr(I);D&&bb(s,a,I);const T=yo(s,i,_,a);qr(T,s),null!==y&&Db(0,_-c,T,I,0,y),D&&(R(a.index,s)[8]=T)}}(i,s,a,yr(a,s)),128==(128&a.flags)&&function Eb(i,s,a){const l=a.directiveStart,c=a.directiveEnd,y=a.index,_=function Lc(){return ut.lFrame.currentDirectiveIndex}();try{Ps(y);for(let I=l;I<c;I++){const D=i.data[I],T=s[I];Vc(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&cE(D,T)}}finally{Ps(-1),Vc(_)}}(i,s,a))}function Jm(i,s,a=yr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],_=-1===y?a(s,i):i[y];i[c++]=_}}}function uE(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=rp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function rp(i,s,a,l,c,f,y,_,I,D){const T=20+l,O=T+c,G=function ip(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ut);return a}(T,O),ne="function"==typeof D?D():D;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:_,declTNode:s,data:G.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function ey(i,s,a,l){const c=EE(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&wE(i).push(l,c.length-1))}function ty(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function iy(i,s,a,l){let c=!1;if(di()){const f=function Fd(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];Id(a,y.selectors,!1)&&(c||(c=[]),ca(zr(a,s),i,y.type),Gr(y)?(dE(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===l?null:{"":-1};if(null!==f){c=!0,hE(a,i.data.length,f.length);for(let T=0;T<f.length;T++){const O=f[T];O.providersResolver&&O.providersResolver(O)}let _=!1,I=!1,D=Aa(i,s,f.length,null);for(let T=0;T<f.length;T++){const O=f[T];a.mergedAttrs=tu(a.mergedAttrs,O.hostAttrs),fE(i,a,s,D,O),Ib(D,O,y),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const G=O.type.prototype;!_&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),D++}!function pb(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,y=[];let _=null,I=null;for(let D=s.directiveStart;D<l;D++){const T=c[D],O=T.inputs,G=null===f||Tl(s)?null:pE(O,f);y.push(G),_=ty(O,D,_),I=ty(T.outputs,D,I)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=_,s.outputs=I}(i,a)}y&&function wb(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Be(-301,!1);l.push(s[c],f)}}}(a,l,y)}return a.mergedAttrs=tu(a.mergedAttrs,a.attrs),c}function Od(i,s,a,l,c,f){const y=f.hostBindings;if(y){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const I=~s.index;(function _b(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(_)!=I&&_.push(I),_.push(l,c,y)}}function cE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function dE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Ib(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Gr(s)&&(a[""]=i)}}function hE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function fE(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=ci(c.type)),y=new oa(f,Gr(c),null);i.blueprint[l]=y,a[l]=y,Od(i,s,0,l,Aa(i,a,c.hostVars,Ut),c)}function bb(i,s,a){const l=yr(s,i),c=uE(a),f=i[10],y=Ld(i,Nl(i,c,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=y}function Ks(i,s,a,l,c,f){const y=yr(i,s);!function sy(i,s,a,l,c,f,y){if(null==f)In(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const _=null==y?ye(f):y(f,l||"",c);In(i)?i.setAttribute(s,c,_,a):a?s.setAttributeNS(a,c,_):s.setAttribute(c,_)}}(s[11],y,f,i.value,a,l,c)}function Db(i,s,a,l,c,f){const y=f[s];if(null!==y){const _=l.setInput;for(let I=0;I<y.length;){const D=y[I++],T=y[I++],O=y[I++];null!==_?l.setInput(a,O,D,T):a[T]=O}}}function pE(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function gE(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Ab(i,s){const a=R(s,i);if(K(a)){const l=a[1];80&a[2]?bu(l,a,l.template,a[8]):a[5]>0&&sp(a)}}function sp(i){for(let l=vd(i);null!==l;l=_u(l))for(let c=10;c<l.length;c++){const f=l[c];if(1024&f[2]){const y=f[1];bu(y,f,y.template,f[8])}else f[5]>0&&sp(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=R(a[l],i);K(c)&&c[5]>0&&sp(c)}}function sS(i,s){const a=R(s,i),l=a[1];(function mE(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),ri(l,a,a[8])}function Ld(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function op(i){for(;i;){i[2]|=64;const s=Wr(i);if(Mc(i)&&!s)return i;i=s}return null}function vE(i){!function oy(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=So(a),c=l[1];aE(c,l,c.template,a)}}(i[8])}function uy(i,s,a){df(0),s(i,a)}const Mb=(()=>Promise.resolve(null))();function EE(i){return i[7]||(i[7]=[])}function wE(i){return i.cleanup||(i.cleanup=[])}function ly(i,s){const a=i[9],l=a?a.get(md,null):null;l&&l.handleError(s)}function IE(i,s,a,l,c){for(let f=0;f<a.length;){const y=a[f++],_=a[f++],I=s[y],D=i.data[y];null!==D.setInput?D.setInput(I,c,l,_):I[_]=c}}function Ro(i,s,a){const l=na(s,i);!function V_(i,s,a){In(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function up(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const _=s[y];"number"==typeof _?f=_:1==f?c=me(c,_):2==f&&(l=me(l,_+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const cy=new Pn("INJECTOR",-1);class pi{get(s,a=Xi){if(a===Xi){const l=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw l.name="NullInjectorError",l}return a}}const dy=new Pn("Set Injector scope."),Ol={},hy={};let Du;function Cu(){return void 0===Du&&(Du=new pi),Du}function DE(i,s=null,a=null,l){const c=CE(i,s,a,l);return c._resolveInjectorDefTypes(),c}function CE(i,s=null,a=null,l){return new TE(i,a,s||Cu(),l)}class TE{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&Xr(a,_=>this.processProvider(_,s,a)),Xr([s],_=>this.processInjectorType(_,[],f)),this.records.set(cy,Vd(void 0,this));const y=this.records.get(dy);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof s?null:le(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Xi,l=_t.Default){this.assertNotDestroyed();const c=sd(this),f=Zt(void 0);try{if(!(l&_t.SkipSelf)){let _=this.records.get(s);if(void 0===_){const I=function Ob(i){return"function"==typeof i||"object"==typeof i&&i instanceof Pn}(s)&&tn(s);_=I&&this.injectableDefInScope(I)?Vd(fy(s),Ol):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(l&_t.Self?Cu():this.parent).get(s,a=l&_t.Optional&&a===Xi?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[fl]=y[fl]||[]).unshift(le(s)),c)throw y;return function cu(i,s,a,l){const c=i[fl];throw s[Mf]&&c.unshift(s[Mf]),i.message=function Io(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=le(s);if(Array.isArray(s))c=s.map(le).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let _=s[y];f.push(y+":"+("string"==typeof _?JSON.stringify(_):le(_)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(Sf,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[fl]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Zt(f),sd(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(le(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Be(205,!1)}processInjectorType(s,a,l){if(!(s=se(s)))return!1;let c=xn(s);const f=null==c&&s.ngModule||void 0,y=void 0===f?s:f,_=-1!==l.indexOf(y);if(void 0!==f&&(c=xn(f)),null==c)return!1;if(null!=c.imports&&!_){let T;l.push(y);try{Xr(c.imports,O=>{this.processInjectorType(O,a,l)&&(void 0===T&&(T=[]),T.push(O))})}finally{}if(void 0!==T)for(let O=0;O<T.length;O++){const{ngModule:G,providers:ne}=T[O];Xr(ne,Me=>this.processProvider(Me,G,ne||F))}}this.injectorDefTypes.add(y);const I=ci(y)||(()=>new y);this.records.set(y,Vd(I,Ol));const D=c.providers;if(null!=D&&!_){const T=s;Xr(D,O=>this.processProvider(O,T,D))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let c=kl(s=se(s))?s:se(s&&s.provide);const f=function SE(i,s,a){return Sa(i)?Vd(void 0,i.useValue):Vd(lp(i),Ol)}(s);if(kl(s)||!0!==s.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=Vd(void 0,Ol,!0),y.factory=()=>Eo(y.multi),this.records.set(c,y)),c=s,y.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===Ol&&(a.value=hy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Pb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=se(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function fy(i){const s=tn(i),a=null!==s?s.factory:ci(i);if(null!==a)return a;if(i instanceof Pn)throw new Be(204,!1);if(i instanceof Function)return function AE(i){const s=i.length;if(s>0)throw function Us(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Be(204,!1);const a=function Cr(i){const s=i&&(i[qn]||i[An]);if(s){const a=function hn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Be(204,!1)}function lp(i,s,a){let l;if(kl(i)){const c=se(i);return ci(c)||fy(c)}if(Sa(i))l=()=>se(i.useValue);else if(function Rb(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Eo(i.deps||[]));else if(function ME(i){return!(!i||!i.useExisting)}(i))l=()=>Yn(se(i.useExisting));else{const c=se(i&&(i.useClass||i.provide));if(!function Nb(i){return!!i.deps}(i))return ci(c)||fy(c);l=()=>new c(...Eo(i.deps))}return l}function Vd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Sa(i){return null!==i&&"object"==typeof i&&b_ in i}function kl(i){return"function"==typeof i}let Es=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return DE({name:""},l,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return DE({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=Xi,i.NULL=new pi,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>Yn(cy)}),i.__NG_ELEMENT_ID__=-1,i})();function dS(i,s){us(So(i)[1],Cn())}function Ae(i){let s=function Bb(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Gr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Be(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const y=i;y.inputs=Fl(i.inputs),y.declaredInputs=Fl(i.declaredInputs),y.outputs=Fl(i.outputs);const _=c.hostBindings;_&&BE(i,_);const I=c.viewQuery,D=c.contentQueries;if(I&&rn(i,I),D&&xa(i,D),he(i.inputs,c.inputs),he(i.declaredInputs,c.declaredInputs),he(i.outputs,c.outputs),Gr(c)&&c.data.animation){const T=i.data;T.animation=(T.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let y=0;y<f.length;y++){const _=f[y];_&&_.ngInherit&&_(i),_===Ae&&(a=!1)}}s=Object.getPrototypeOf(s)}!function No(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=tu(c.hostAttrs,a=tu(a,c.hostAttrs))}}(l)}function Fl(i){return i===nn?{}:i===F?[]:i}function rn(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function xa(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function BE(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Ii=null;function Po(){if(!Ii){const i=Nt.Symbol;if(i&&i.iterator)Ii=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ii=l)}}}return Ii}function Ud(i){return!!hp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Po()in i)}function hp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ys(i,s,a){return i[s]=a}function ii(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function fp(i,s,a,l){const c=ke();return ii(c,sa(),s)&&(Ft(),Ks(rr(),c,i,s,a,l)),fp}function pp(i,s,a,l,c,f,y,_){const I=ke(),D=Ft(),T=i+20,O=D.firstCreatePass?function qE(i,s,a,l,c,f,y,_,I){const D=s.consts,T=Pl(s,i,4,y||null,$e(D,_));iy(s,a,T,$e(D,I)),us(s,T);const O=T.tViews=rp(2,T,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,D);return null!==s.queries&&(s.queries.template(s,T),O.queries=s.queries.embeddedTView(T)),T}(T,D,I,s,a,l,c,f,y):D.data[T];Ki(O,!1);const G=I[11].createComment("");Ed(D,I,G,O),qr(G,I),Ld(I,I[T]=gE(G,I,G,O)),rs(O)&&Qm(D,I,O),null!=y&&Jm(I,O,_)}function Hl(i,s=_t.Default){const a=ke();return null===a?Yn(i,s):nu(Cn(),a,se(i),s)}function nD(){throw new Error("invalid")}function Ny(i,s,a){const l=ke();return ii(l,sa(),s)&&function Fi(i,s,a,l,c,f,y,_){const I=yr(s,a);let T,D=s.inputs;!_&&null!=D&&(T=D[l])?(IE(i,a,T,l,c),so(s)&&function mb(i,s){const a=R(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function gb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=y?y(c,s.value||"",l):c,In(f)?f.setProperty(I,l,c):Hc(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(Ft(),rr(),l,i,s,l[11],a,!1),Ny}function u0(i,s,a,l,c){const y=c?"class":"style";IE(i,a,s.inputs[y],y,l)}function Gl(i,s,a,l){const c=ke(),f=Ft(),y=20+i,_=c[11],I=c[y]=xm(_,s,function __(){return ut.lFrame.currentNamespace}()),D=f.firstCreatePass?function fS(i,s,a,l,c,f,y){const _=s.consts,D=Pl(s,i,2,c,$e(_,f));return iy(s,a,D,$e(_,y)),null!==D.attrs&&up(D,D.attrs,!1),null!==D.mergedAttrs&&up(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,f,c,0,s,a,l):f.data[y];Ki(D,!0);const T=D.mergedAttrs;null!==T&&$c(_,I,T);const O=D.classes;null!==O&&Um(_,I,O);const G=D.styles;return null!==G&&ba(_,I,G),64!=(64&D.flags)&&Ed(f,c,I,D),0===function Dn(){return ut.lFrame.elementDepthCount}()&&qr(I,c),function $t(){ut.lFrame.elementDepthCount++}(),rs(D)&&(Qm(f,c,D),function Rd(i,s,a){if(io(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,D,c)),null!==l&&Jm(c,D),Gl}function Py(){let i=Cn();Fc()?function Ya(){ut.lFrame.isParent=!1}():(i=i.parent,Ki(i,!1));const s=i;!function os(){ut.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(us(a,i),io(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function I_(i){return 0!=(16&i.flags)}(s)&&u0(a,s,ke(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function $n(i){return 0!=(32&i.flags)}(s)&&u0(a,s,ke(),s.stylesWithoutHost,!1),Py}function Oy(i,s,a,l){return Gl(i,s,a,l),Py(),Oy}function sD(){return ke()}function Gd(i){return!!i&&"function"==typeof i.then}function oD(i){return!!i&&"function"==typeof i.subscribe}const l0=oD;function c0(i,s,a,l){const c=ke(),f=Ft(),y=Cn();return function uD(i,s,a,l,c,f,y,_){const I=rs(l),T=i.firstCreatePass&&wE(i),O=s[8],G=EE(s);let ne=!0;if(3&l.type||_){const tt=yr(l,s),ct=_?_(tt):tt,Pe=G.length,Et=_?Qt=>_(vn(Qt[l.index])):l.index;if(In(a)){let Qt=null;if(!_&&I&&(Qt=function aD(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const y=c[f];if(y===a&&c[f+1]===l){const _=s[7],I=c[f+2];return _.length>I?_[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,c,l.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=f,Qt.__ngLastListenerFn__=f,ne=!1;else{f=ky(l,s,O,f,!1);const gn=a.listen(ct,c,f);G.push(f,gn),T&&T.push(c,Et,Pe,Pe+1)}}else f=ky(l,s,O,f,!0),ct.addEventListener(c,f,y),G.push(f),T&&T.push(c,Et,Pe,y)}else f=ky(l,s,O,f,!1);const Me=l.outputs;let xe;if(ne&&null!==Me&&(xe=Me[c])){const tt=xe.length;if(tt)for(let ct=0;ct<tt;ct+=2){const Ti=s[xe[ct]][xe[ct+1]].subscribe(f),$a=G.length;G.push(f,Ti),T&&T.push(c,l.index,$a,-($a+1))}}}(f,c,c[11],y,i,s,!!a,l),c0}function lD(i,s,a,l){try{return!1!==a(l)}catch(c){return ly(i,c),!1}}function ky(i,s,a,l,c){return function f(y){if(y===Function)return l;const _=2&i.flags?R(i.index,s):s;0==(32&s[2])&&op(_);let I=lD(s,0,l,y),D=f.__ngNextListenerFn__;for(;D;)I=lD(s,0,D,y)&&I,D=D.__ngNextListenerFn__;return c&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function cD(i=1){return function Kg(i){return(ut.lFrame.contextLView=function Yg(i,s){for(;i>0;)s=s[15],i--;return s}(i,ut.lFrame.contextLView))[8]}(i)}function Hy(i,s,a,l,c){const f=i[a+1],y=null===s;let _=l?ki(f):Zs(f),I=!1;for(;0!==_&&(!1===I||y);){const T=i[_+1];fD(i[_],s)&&(I=!0,i[_+1]=l?Jf(T):Qf(T)),_=l?ki(T):Zs(T)}I&&(i[a+1]=l?Qf(f):Jf(f))}function fD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&au(i,s)>=0}function Gy(i,s){return function bs(i,s,a,l){const c=ke(),f=Ft(),y=function Pi(i){const s=ut.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function y0(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[Rr()],y=function m0(i,s){return s>=i.expandoStartIndex}(i,a);(function TD(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!y&&(s=!1),s=function qd(i,s,a,l){const c=function sl(i){const s=ut.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Wd(a=zy(null,i,s,a,l),s.attrs,l),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=zy(c,i,s,a,l),null===f){let I=function v0(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Zs(l))return i[ki(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=zy(null,i,s,I[1],l),I=Wd(I,s.attrs,l),function IS(i,s,a,l){i[ki(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function ID(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=Wd(l,i[f].hostAttrs,a);return Wd(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function yS(i,s,a,l,c,f){let y=f?s.classBindings:s.styleBindings,_=ki(y),I=Zs(y);i[l]=a;let T,D=!1;if(Array.isArray(a)){const O=a;T=O[1],(null===T||au(O,T)>0)&&(D=!0)}else T=a;if(c)if(0!==I){const G=ki(i[_+1]);i[l+1]=Al(G,_),0!==G&&(i[G+1]=Hm(i[G+1],l)),i[_+1]=function Sl(i,s){return 131071&i|s<<17}(i[_+1],l)}else i[l+1]=Al(_,0),0!==_&&(i[_+1]=Hm(i[_+1],l)),_=l;else i[l+1]=Al(I,0),0===_?_=l:i[I+1]=Hm(i[I+1],l),I=l;D&&(i[l+1]=Qf(i[l+1])),Hy(i,T,l,!0),Hy(i,T,l,!1),function hD(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&au(f,s)>=0&&(a[l+1]=Jf(a[l+1]))}(s,T,i,l,f),y=Al(_,I),f?s.classBindings=y:s.styleBindings=y}(c,f,s,a,y,l)}}(f,i,y,l),s!==Ut&&ii(c,y,s)&&function DD(i,s,a,l,c,f,y,_){if(!(3&s.type))return;const I=i.data,D=I[_+1];Ip(function Iu(i){return 1==(1&i)}(D)?wp(I,s,a,c,Zs(D),y):void 0)||(Ip(f)||function Ws(i){return 2==(2&i)}(D)&&(f=wp(I,null,a,c,_,y)),function YI(i,s,a,l,c){const f=In(i);if(s)c?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:ms.DashCase;if(null==c)f?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const _="string"==typeof c&&c.endsWith("!important");_&&(c=c.slice(0,-10),y|=ms.Important),f?i.setStyle(a,l,c,y):a.style.setProperty(l,c,_?"important":"")}}}(l,y,na(Rr(),a),c,f))}(f,f.data[Rr()],c,c[11],i,c[y+1]=function CD(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=le(Hs(i)))),i}(s,a),l,y)}(i,s,null,!0),Gy}function zy(i,s,a,l,c){let f=null;const y=a.directiveEnd;let _=a.directiveStylingLast;for(-1===_?_=a.directiveStart:_++;_<y&&(f=s[_],l=Wd(l,f.hostAttrs,c),f!==i);)_++;return null!==i&&(a.directiveStylingLast=_),l}function Wd(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?c=y:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),hi(i,y,!!a||s[++f]))}return void 0===i?null:i}function wp(i,s,a,l,c,f){const y=null===s;let _;for(;c>0;){const I=i[c],D=Array.isArray(I),T=D?I[1]:I,O=null===T;let G=a[c+1];G===Ut&&(G=O?F:void 0);let ne=O?Tf(G,l):T===l?G:void 0;if(D&&!Ip(ne)&&(ne=Tf(I,l)),Ip(ne)&&(_=ne,y))return _;const Me=i[c+1];c=y?ki(Me):Zs(Me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(_=Tf(I,l))}return _}function Ip(i){return void 0!==i}function AD(i,s=""){const a=ke(),l=Ft(),c=i+20,f=l.firstCreatePass?Pl(l,c,1,s,null):l.data[c],y=a[c]=function Mm(i,s){return In(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ed(l,a,y,f),Ki(f,!1)}function Wy(i){return Zy("",i,""),Wy}function Zy(i,s,a){const l=ke(),c=function Ra(i,s,a,l){return ii(i,sa(),a)?s+ye(a)+l:Ut}(l,i,s,a);return c!==Ut&&Ro(l,Rr(),c),Zy}const bi=void 0;var VD=["en",[["a","p"],["AM","PM"],bi],[["AM","PM"],bi,bi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bi,"{1} 'at' {0}",bi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function LD(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Su={};function Yy(i){const s=function Qy(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Qd(s);if(a)return a;const l=s.split("-")[0];if(a=Qd(l),a)return a;if("en"===l)return VD;throw new Error(`Missing locale data for the locale "${i}".`)}function Tp(i){return Yy(i)[yt.PluralCase]}function Qd(i){return i in Su||(Su[i]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[i]),Su[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Jd="en-US";let F0=Jd;function jp(i,s,a,l,c){if(i=se(i),Array.isArray(i))for(let f=0;f<i.length;f++)jp(i[f],s,a,l,c);else{const f=Ft(),y=ke();let _=kl(i)?i:se(i.provide),I=lp(i);const D=Cn(),T=1048575&D.providerIndexes,O=D.directiveStart,G=D.providerIndexes>>20;if(kl(i)||!i.multi){const ne=new oa(I,c,Hl),Me=uh(_,s,c?T:T+G,O);-1===Me?(ca(zr(D,y),f,_),$p(f,i,s.length),s.push(_),D.directiveStart++,D.directiveEnd++,c&&(D.providerIndexes+=1048576),a.push(ne),y.push(ne)):(a[Me]=ne,y[Me]=ne)}else{const ne=uh(_,s,T+G,O),Me=uh(_,s,T,T+G),xe=ne>=0&&a[ne],tt=Me>=0&&a[Me];if(c&&!tt||!c&&!xe){ca(zr(D,y),f,_);const ct=function lh(i,s,a,l,c){const f=new oa(i,a,Hl);return f.multi=[],f.index=s,f.componentProviders=0,ec(f,c,l&&!a),f}(c?pv:fv,a.length,c,l,I);!c&&tt&&(a[Me].providerFactory=ct),$p(f,i,s.length,0),s.push(_),D.directiveStart++,D.directiveEnd++,c&&(D.providerIndexes+=1048576),a.push(ct),y.push(ct)}else $p(f,i,ne>-1?ne:Me,ec(a[c?Me:ne],I,!c&&l));!c&&l&&tt&&a[Me].componentProviders++}}}function $p(i,s,a,l){const c=kl(s),f=function xE(i){return!!i.useClass}(s);if(c||f){const I=(f?se(s.useClass):s).prototype.ngOnDestroy;if(I){const D=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const T=D.indexOf(a);-1===T?D.push(a,[l,I]):D[T+1].push(l,I)}else D.push(a,I)}}}function ec(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function uh(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function fv(i,s,a,l){return tc(this.multi,[])}function pv(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,_=yo(a,a[1],this.providerFactory.index,l);f=_.slice(0,y),tc(c,f);for(let I=y;I<_.length;I++)f.push(_[I])}else f=[],tc(c,f);return f}function tc(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function gv(i,s=[]){return a=>{a.providersResolver=(l,c)=>function hv(i,s,a){const l=Ft();if(l.firstCreatePass){const c=Gr(i);jp(a,l.data,l.blueprint,c,!0),jp(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Hp{}class ew{resolveComponentFactory(s){throw function Gp(i){const s=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let ch=(()=>{class i{}return i.NULL=new ew,i})();function sC(){return Js(Cn(),ke())}function Js(i,s){return new nc(yr(i,s))}let nc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=sC,i})();function qp(i){return i instanceof nc?i.nativeElement:i}class Oa{}let mv=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function yv(){const i=ke(),a=R(Cn().index,i);return function oC(i){return i[11]}(Mr(a)?a:i)}(),i})(),rc=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class Zp{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const ka=new Zp("13.3.8"),Kp={};function Yp(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(vn(f)),xr(f))for(let _=10;_<f.length;_++){const I=f[_],D=I[1].firstChild;null!==D&&Yp(I[1],I,D,l)}const y=a.type;if(8&y)Yp(i,s,a.child,l);else if(32&y){const _=zf(a,s);let I;for(;I=_();)l.push(I)}else if(16&y){const _=Fm(s,a);if(Array.isArray(_))l.push(..._);else{const I=Wr(s[16]);Yp(I[1],I,_,l,!0)}}a=c?a.projectionNext:a.next}return l}class Ds{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Yp(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(xr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Yt(s,l),Vs(a,l))}this._attachedToViewContainer=!1}$_(this._lView[1],this._lView)}onDestroy(s){ey(this._lView[1],this._lView,null,s)}markForCheck(){op(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function ay(i,s,a){const l=s[10];l.begin&&l.begin();try{bu(i,s,i.template,a)}catch(c){throw ly(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Be(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function WI(i,s){Ia(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Be(902,"");this._appRef=s}}class Vo extends Ds{constructor(s){super(s),this._view=s}detectChanges(){vE(this._view)}checkNoChanges(){}get context(){return null}}class dh extends ch{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=at(s);return new On(a,this.ngModule)}}function hh(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class On extends Hp{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function eb(i){return i.map(Yf).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return hh(this.componentDef.inputs)}get outputs(){return hh(this.componentDef.outputs)}create(s,a,l,c){const f=(c=c||this.ngModule)?function tw(i,s){return{get:(a,l,c)=>{const f=i.get(a,Kp,c);return f!==Kp||l===Kp?f:s.get(a,l,c)}}}(s,c.injector):s,y=f.get(Oa,ea),_=f.get(rc,null),I=y.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",T=l?function Nd(i,s,a){if(In(i))return i.selectRootElement(s,a===Rt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):xm(y.createRenderer(null,this.componentDef),D,function Qp(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(D)),O=this.componentDef.onPush?576:528,G=function UE(i,s){return{components:[],scheduler:i||HI,clean:Mb,playerHandler:s||null,flags:0}}(),ne=rp(0,null,null,1,0,null,null,null,null,null),Me=Nl(null,ne,G,O,null,null,y,I,_,f);let xe,tt;ol(Me);try{const ct=function Vb(i,s,a,l,c,f){const y=a[1];a[20]=i;const I=Pl(y,20,2,"#host",null),D=I.mergedAttrs=s.hostAttrs;null!==D&&(up(I,D,!0),null!==i&&($c(c,i,D),null!==I.classes&&Um(c,i,I.classes),null!==I.styles&&ba(c,i,I.styles)));const T=l.createRenderer(i,s),O=Nl(a,uE(s),null,s.onPush?64:16,a[20],I,l,T,f||null,null);return y.firstCreatePass&&(ca(zr(I,a),y,s.type),dE(y,I),hE(I,a.length,1)),Ld(a,O),a[20]=O}(T,this.componentDef,Me,y,I);if(T)if(l)$c(I,T,["ng-version",ka.full]);else{const{attrs:Pe,classes:Et}=function tb(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!_s(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Pe&&$c(I,T,Pe),Et&&Et.length>0&&Um(I,T,Et.join(" "))}if(tt=fo(ne,20),void 0!==a){const Pe=tt.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const Qt=a[Et];Pe.push(null!=Qt?Array.from(Qt):null)}}xe=function Ub(i,s,a,l,c){const f=a[1],y=function vb(i,s,a){const l=Cn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),fE(i,l,s,Aa(i,s,1,null),a));const c=yo(s,i,l.directiveStart,l);qr(c,s);const f=yr(l,s);return f&&qr(f,s),c}(f,a,s);if(l.components.push(y),i[8]=y,c&&c.forEach(I=>I(y,s)),s.contentQueries){const I=Cn();s.contentQueries(1,y,I.directiveStart)}const _=Cn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ps(_.index),Od(a[1],_,0,_.directiveStart,_.directiveEnd,s),cE(s,y)),y}(ct,this.componentDef,Me,G,[dS]),ri(ne,Me,null)}finally{Oi()}return new aC(this.componentType,xe,Js(tt,Me),Me,tt)}}class aC extends class rC{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Vo(c),this.componentType=s}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Xs{}class nw{}const Nu=new Map;class vv extends Xs{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new dh(this);const l=Pt(s);this._bootstrapComponents=cr(l.bootstrap),this._r3Injector=CE(s,a,[{provide:Xs,useValue:this},{provide:ch,useValue:this.componentFactoryResolver}],le(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Es.THROW_IF_NOT_FOUND,l=_t.Default){return s===Es||s===Xs||s===cy?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Xp extends nw{constructor(s){super(),this.moduleType=s,null!==Pt(s)&&function uC(i){const s=new Set;!function a(l){const c=Pt(l,!0),f=c.id;null!==f&&(function rw(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${le(s)} vs ${le(s.name)}`)}(f,Nu.get(f),l),Nu.set(f,l));const y=cr(c.imports);for(const _ of y)s.has(_)||(s.add(_),a(_))}(i)}(s)}create(s){return new vv(this.moduleType,s)}}function _v(i,s,a){const l=Ir()+i,c=ke();return c[l]===Ut?Ys(c,l,a?s.call(a):s()):function Bd(i,s){return i[s]}(c,l)}function Ou(i,s,a,l){return Iv(ke(),Ir(),i,s,a,l)}function Iv(i,s,a,l,c,f){const y=s+a;return ii(i,y,c)?Ys(i,y+1,f?l.call(f,c):l(c)):function sc(i,s){const a=i[s];return a===Ut?void 0:a}(i,y+1)}function ph(i,s){const a=Ft();let l;const c=i+20;a.firstCreatePass?(l=function gh(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const f=l.factory||(l.factory=ci(l.type)),y=Zt(Hl);try{const _=la(!1),I=f();return la(_),function WE(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,ke(),c,I),I}finally{Zt(y)}}function mh(i,s,a){const l=i+20,c=ke(),f=function Ri(i,s){return i[s]}(c,l);return function _h(i,s){return i[1].data[s].pure}(c,l)?Iv(c,Ir(),s,f.transform,a,f):f.transform(a)}function tg(i){return s=>{setTimeout(i,void 0,s)}}const eo=class Er extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,f,y;let _=s,I=a||(()=>null),D=l;if(s&&"object"==typeof s){const O=s;_=null===(c=O.next)||void 0===c?void 0:c.bind(O),I=null===(f=O.error)||void 0===f?void 0:f.bind(O),D=null===(y=O.complete)||void 0===y?void 0:y.bind(O)}this.__isAsync&&(I=tg(I),_&&(_=tg(_)),D&&(D=tg(D)));const T=super.subscribe({next:_,error:I,complete:D});return s instanceof k.w0&&s.add(T),T}};function hC(){return this._results[Po()]()}class Dv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Po(),l=Dv.prototype;l[a]||(l[a]=hC)}get changes(){return this._changes||(this._changes=new eo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Jr(s);(this._changesDetected=!function Cf(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Eh=(()=>{class i{}return i.__NG_ELEMENT_ID__=fw,i})();const dw=Eh,hw=class extends dw{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Nl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),ri(a,l,s),new Ds(l)}};function fw(){return ku(Cn(),ke())}function ku(i,s){return 4&i.type?new hw(s,i,Js(i,s)):null}let wh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Uo,i})();function Uo(){return Cv(Cn(),ke())}const pw=wh,gw=class extends pw{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Js(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){const s=ll(this._hostTNode,this._hostLView);if(ua(s)){const a=Ct(s,this._hostLView),l=pn(s);return new ds(a[1].data[l+8],a)}return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=ng(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,f){const y=s&&!function Kn(i){return"function"==typeof i}(s);let _;if(y)_=a;else{const O=a||{};_=O.index,l=O.injector,c=O.projectableNodes,f=O.ngModuleRef}const I=y?s:new On(at(s)),D=l||this.parentInjector;if(!f&&null==I.ngModule){const G=(y?D:this.parentInjector).get(Xs,null);G&&(f=G)}const T=I.create(D,c,void 0,f);return this.insert(T.hostView,_),T}insert(s,a){const l=s._lView,c=l[1];if(function ge(i){return xr(i[3])}(l)){const T=this.indexOf(s);if(-1!==T)this.detach(T);else{const O=l[3],G=new gw(O,O[6],O[3]);G.detach(G.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function KI(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],su(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function j_(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=128}(c,l,y,f);const _=Lm(f,y),I=l[11],D=_d(I,y[7]);return null!==D&&function B_(i,s,a,l,c,f){l[0]=c,l[6]=s,Ia(i,l,a,1,c,f)}(c,y[6],I,l,D,_),s.attachToViewContainerRef(),su(Fu(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=ng(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Yt(this._lContainer,a);l&&(Vs(Fu(this._lContainer),a),$_(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Yt(this._lContainer,a);return l&&null!=Vs(Fu(this._lContainer),a)?new Ds(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function ng(i){return i[8]}function Fu(i){return i[8]||(i[8]=[])}function Cv(i,s){let a;const l=s[i.index];if(xr(l))a=l;else{let c;if(8&i.type)c=vn(l);else{const f=s[11];c=f.createComment("");const y=yr(i,s);Eu(f,_d(f,y),c,function YA(i,s){return In(i)?i.nextSibling(s):s.nextSibling}(f,y),!1)}s[i.index]=a=gE(l,s,c,i),Ld(s,a)}return new gw(a,i,s)}class Ih{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ih(this.queryList)}setDirty(){this.queryList.setDirty()}}class oc{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);c.push(this.queries[y.indexInDeclarationView].clone())}return new oc(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Di(s,a).matches&&this.queries[a].setDirty()}}class mw{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class ig{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new ig(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Lu{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Lu(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,yw(a,f)),this.matchTNodeWithReadOption(s,a,vf(a,s,f,!1,!1))}else l===Eh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,vf(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===nc||c===wh||c===Eh&&4&a.type)this.addMatch(a.index,-2);else{const f=vf(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function yw(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Av(i,s,a,l){return-1===a?function vw(i,s){return 11&i.type?Js(i,s):4&i.type?ku(i,s):null}(s,i):-2===a?function Sv(i,s,a){return a===nc?Js(s,i):a===Eh?ku(s,i):a===wh?Cv(s,i):void 0}(i,s,l):yo(i,i[1],a,s)}function Mv(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,y=a.matches,_=[];for(let I=0;I<y.length;I+=2){const D=y[I];_.push(D<0?null:Av(s,f[D],y[I+1],a.metadata.read))}c.matches=_}return c.matches}function ac(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const y=Mv(i,s,c,a);for(let _=0;_<f.length;_+=2){const I=f[_];if(I>0)l.push(y[_/2]);else{const D=f[_+1],T=s[-I];for(let O=10;O<T.length;O++){const G=T[O];G[17]===G[3]&&ac(G[1],G,D,l)}if(null!==T[9]){const O=T[9];for(let G=0;G<O.length;G++){const ne=O[G];ac(ne[1],ne,D,l)}}}}}return l}function xv(i){const s=ke(),a=Ft(),l=cf();df(l+1);const c=Di(a,l);if(i.dirty&&N(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?ac(a,s,l,[]):Mv(a,s,c,l);i.reset(f,qp),i.notifyOnChanges()}return!0}return!1}function Fa(i,s,a,l){const c=Ft();if(c.firstCreatePass){const f=Cn();(function Pv(i,s,a){null===i.queries&&(i.queries=new ig),i.queries.track(new Lu(s,a))})(c,new mw(s,a,l),f.index),function sg(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Nv(i,s,a){const l=new Dv(4==(4&a));ey(i,s,l,l.destroy),null===s[19]&&(s[19]=new oc),s[19].queries.push(new Ih(l))}(c,ke(),a)}function Rv(){return function Ew(i,s){return i[19].queries[s].queryList}(ke(),cf())}function Di(i,s){return i.queries.getByIndex(s)}function sr(...i){}const jo=new Pn("Application Initializer");let zn=(()=>{class i{constructor(a){this.appInits=a,this.resolve=sr,this.reject=sr,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Gd(f))a.push(f);else if(l0(f)){const y=new Promise((_,I)=>{f.subscribe({complete:_,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Yn(jo,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const La=new Pn("AppId",{providedIn:"root",factory:function lg(){return`${Bu()}${Bu()}${Bu()}`}});function Bu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Nw=new Pn("Platform Initializer"),$o=new Pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cc=new Pn("appBootstrapListener");let Pw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const to=new Pn("LocaleId",{providedIn:"root",factory:()=>Rf(to,_t.Optional|_t.SkipSelf)||function rt(){return"undefined"!=typeof $localize&&$localize.locale||Jd}()}),dg=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Va{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Ow=(()=>{class i{compileModuleSync(a){return new Xp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=cr(Pt(a).declarations).reduce((y,_)=>{const I=at(_);return I&&y.push(new On(I)),y},[]);return new Va(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ju=(()=>Promise.resolve(0))();function Ah(i){"undefined"==typeof Zone?ju.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class es{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new eo(!1),this.onMicrotaskEmpty=new eo(!1),this.onStable=new eo(!1),this.onError=new eo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Sh(){let i=Nt.requestAnimationFrame,s=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Lw(i){const s=()=>{!function Mh(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Nt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Lv(i),i.isCheckStableRunning=!0,fc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Lv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,y,_)=>{try{return Vw(i),a.invokeTask(c,f,y,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Vv(i)}},onInvoke:(a,l,c,f,y,_,I)=>{try{return Vw(i),a.invoke(c,f,y,_,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Vv(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Lv(i),fc(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!es.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(es.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+c,s,Fw,sr,sr);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Fw={};function fc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Lv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Vw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Vv(i){i._nesting--,fc(i)}class Uw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new eo,this.onMicrotaskEmpty=new eo,this.onStable=new eo,this.onError=new eo}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Kr=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{es.assertNotInAngularZone(),Ah(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ah(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Yn(es))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),Bw=(()=>{class i{constructor(){this._applications=new Map,xh.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return xh.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Un{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function fg(i){xh=i}let xh=new Un,Ui=null;const Rh=new Pn("AllowMultipleToken"),pc=new Pn("PlatformOnDestroy");class $w{constructor(s,a){this.name=s,this.token=a}}function Nh(i,s,a=[]){const l=`Platform: ${s}`,c=new Pn(l);return(f=[])=>{let y=Ua();if(!y||y.injector.get(Rh,!1)){const _=[...a,...f,{provide:c,useValue:!0}];i?i(_):function fr(i){if(Ui&&!Ui.get(Rh,!1))throw new Be(400,"");Ui=i;const s=i.get(Hw),a=i.get(Nw,null);a&&a.forEach(l=>l())}(function kn(i=[],s){return Es.create({name:s,providers:[{provide:dy,useValue:"platform"},{provide:pc,useValue:()=>Ui=null},...i]})}(_,l))}return function Yr(i){const s=Ua();if(!s)throw new Be(401,"");return s}()}}function Ua(){var i;return null!==(i=null==Ui?void 0:Ui.get(Hw))&&void 0!==i?i:null}let Hw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const _=function Gw(i,s){let a;return a="noop"===i?new Uw:("zone.js"===i?void 0:i)||new es({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:es,useValue:_}];return _.run(()=>{const D=Es.create({providers:I,parent:this.injector,name:a.moduleType.name}),T=a.create(D),O=T.injector.get(md,null);if(!O)throw new Be(402,"");return _.runOutsideAngular(()=>{const G=_.onError.subscribe({next:ne=>{O.handleError(ne)}});T.onDestroy(()=>{gc(this._modules,T),G.unsubscribe()})}),function $u(i,s,a){try{const l=a();return Gd(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(O,_,()=>{const G=T.injector.get(zn);return G.runInitializers(),G.donePromise.then(()=>(function $D(i){it(i,"Expected localeId to be defined"),"string"==typeof i&&(F0=i.toLowerCase().replace(/_/g,"-"))}(T.injector.get(to,Jd)||Jd),this._moduleDoBootstrap(T),T))})})}bootstrapModule(a,l=[]){const c=zw({},l);return function jw(i,s,a){const l=new Xp(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(Hu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Be(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Be(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(pc,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Yn(Es))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function zw(i,s){return Array.isArray(s)?s.reduce(zw,i):Object.assign(Object.assign({},i),s)}let Hu=(()=>{class i{constructor(a,l,c,f){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new x.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new x.y(I=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{es.assertNotInAngularZone(),Ah(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{D.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(y,_.pipe((0,pe.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Be(405,"");let c;c=a instanceof Hp?a:this._injector.get(ch).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function Ts(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Xs),_=c.create(Es.NULL,[],l||c.selector,f),I=_.location.nativeElement,D=_.injector.get(Kr,null),T=D&&_.injector.get(Bw);return D&&T&&T.registerApplication(I,D),_.onDestroy(()=>{this.detachView(_.hostView),gc(this.components,_),T&&T.unregisterApplication(I)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Be(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;gc(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(cc,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Yn(es),Yn(Es),Yn(md),Yn(zn))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function gc(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Uv=!0,jr=!1;function TC(){return jr=!0,Uv}function AC(){if(jr)throw new Error("Cannot enable prod mode after platform setup.");Uv=!1}let MC=(()=>{class i{}return i.__NG_ELEMENT_ID__=xC,i})();function xC(i){return function RC(i,s,a){if(so(i)&&!a){const l=R(i.index,s);return new Ds(l,l)}return 47&i.type?new Ds(s[16],s):null}(Cn(),ke(),16==(16&i))}class Bv{constructor(){}supports(s){return Ud(s)}create(s){return new Qw(s)}}const Yw=(i,s)=>s;class Qw{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Yw}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<jv(l,c,f)?a:l,_=jv(y,c,f),I=y.currentIndex;if(y===l)c--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{f||(f=[]);const D=_-c,T=I-c;if(D!=T){for(let G=0;G<D;G++){const ne=G<f.length?f[G]:f[G]=0,Me=ne+G;T<=Me&&Me<D&&(f[G]=ne+1)}f[y.previousIndex]=T-D}}_!==I&&s(y,_,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ud(s))throw new Be(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)f=s[_],y=this._trackByFn(_,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,_)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,_),l=!0),a=a._next}else c=0,function Gb(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Po()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,_=>{y=this._trackByFn(c,_),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,_,y,c)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,y,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new yg(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Jw),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Jw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class yg{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Jw{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new LC,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jv(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class qu{constructor(){}supports(s){return s instanceof Map||hp(s)}create(){return new Wu}}class Wu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||hp(s)))throw new Be(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,y=c._next;return f&&(f._next=y),y&&(y._prev=f),c._next=null,c._prev=null,c}const l=new Xw(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Xw{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ja(){return new vg([new Bv])}let vg=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||ja()),deps:[[i,new ga,new _i]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Be(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:ja}),i})();function $v(){return new _g([new qu])}let _g=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$v()),deps:[[i,new ga,new _i]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Be(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:$v}),i})();const Eg=Nh(null,"core",[]);let wg=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Yn(Hu))},i.\u0275mod=Q({type:i}),i.\u0275inj=St({}),i})()},579:(ot,Ce,M)=>{M.d(Ce,{EI:()=>q,Gb:()=>Nt,Iv:()=>nn,Kz:()=>Z,Xd:()=>_t,lT:()=>yn,xP:()=>F});var d=M(5861),k=M(9681),x=M(1877),ie=M(2090),pe=M(4859);M(2833);const he="analytics",le="firebase_id",j="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",se="https://www.googletagmanager.com/gtag/js",He=new x.Yd("@firebase/analytics");function Te(B){return Promise.all(B.map(ee=>ee.catch(_e=>_e)))}function Be(B,ee){const _e=document.createElement("script");_e.src=`${se}?l=${B}&id=${ee}`,_e.async=!0,document.head.appendChild(_e)}function ye(B,ee,_e,Ue,qe,ze){return be.apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(B,ee,_e,Ue,qe,ze){const pt=Ue[qe];try{if(pt)yield ee[pt];else{const H=(yield Te(_e)).find(L=>L.measurementId===qe);H&&(yield ee[H.appId])}}catch(Q){He.error(Q)}B("config",qe,ze)})).apply(this,arguments)}function et(B,ee,_e,Ue,qe){return We.apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(B,ee,_e,Ue,qe){try{let ze=[];if(qe&&qe.send_to){let pt=qe.send_to;Array.isArray(pt)||(pt=[pt]);const Q=yield Te(_e);for(const H of pt){const L=Q.find(Ye=>Ye.measurementId===H),Se=L&&ee[L.appId];if(!Se){ze=[];break}ze.push(Se)}}0===ze.length&&(ze=Object.values(ee)),yield Promise.all(ze),B("event",Ue,qe||{})}catch(ze){He.error(ze)}})).apply(this,arguments)}function De(){const B=window.document.getElementsByTagName("script");for(const ee of Object.values(B))if(ee.src&&ee.src.includes(se))return ee;return null}const J=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ae=new class te{constructor(ee={},_e=1e3){this.throttleMetadata=ee,this.intervalMillis=_e}getThrottleMetadata(ee){return this.throttleMetadata[ee]}setThrottleMetadata(ee,_e){this.throttleMetadata[ee]=_e}deleteThrottleMetadata(ee){delete this.throttleMetadata[ee]}};function ce(B){return new Headers({Accept:"application/json","x-goog-api-key":B})}function Re(B){return oe.apply(this,arguments)}function oe(){return(oe=(0,d.Z)(function*(B){var ee;const{appId:_e,apiKey:Ue}=B,qe={method:"GET",headers:ce(Ue)},ze=j.replace("{app-id}",_e),pt=yield fetch(ze,qe);if(200!==pt.status&&304!==pt.status){let Q="";try{const H=yield pt.json();(null===(ee=H.error)||void 0===ee?void 0:ee.message)&&(Q=H.error.message)}catch(H){}throw J.create("config-fetch-failed",{httpStatus:pt.status,responseMessage:Q})}return pt.json()})).apply(this,arguments)}function vt(B){return At.apply(this,arguments)}function At(){return(At=(0,d.Z)(function*(B,ee=ae,_e){const{appId:Ue,apiKey:qe,measurementId:ze}=B.options;if(!Ue)throw J.create("no-app-id");if(!qe){if(ze)return{measurementId:ze,appId:Ue};throw J.create("no-api-key")}const pt=ee.getThrottleMetadata(Ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Q=new un;return setTimeout((0,d.Z)(function*(){Q.abort()}),void 0!==_e?_e:6e4),_n({appId:Ue,apiKey:qe,measurementId:ze},pt,Q,ee)})).apply(this,arguments)}function _n(B,ee,_e){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(B,{throttleEndTimeMillis:ee,backoffCount:_e},Ue,qe=ae){const{appId:ze,measurementId:pt}=B;try{yield dt(Ue,ee)}catch(Q){if(pt)return He.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Q.message}]`),{appId:ze,measurementId:pt};throw Q}try{const Q=yield Re(B);return qe.deleteThrottleMetadata(ze),Q}catch(Q){if(!mn(Q)){if(qe.deleteThrottleMetadata(ze),pt)return He.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Q.message}]`),{appId:ze,measurementId:pt};throw Q}const H=503===Number(Q.customData.httpStatus)?(0,ie.$s)(_e,qe.intervalMillis,30):(0,ie.$s)(_e,qe.intervalMillis),L={throttleEndTimeMillis:Date.now()+H,backoffCount:_e+1};return qe.setThrottleMetadata(ze,L),He.debug(`Calling attemptFetch again in ${H} millis`),_n(B,L,Ue,qe)}})).apply(this,arguments)}function dt(B,ee){return new Promise((_e,Ue)=>{const qe=Math.max(ee-Date.now(),0),ze=setTimeout(_e,qe);B.addEventListener(()=>{clearTimeout(ze),Ue(J.create("fetch-throttle",{throttleEndTimeMillis:ee}))})})}function mn(B){if(!(B instanceof ie.ZR&&B.customData))return!1;const ee=Number(B.customData.httpStatus);return 429===ee||500===ee||503===ee||504===ee}class un{constructor(){this.listeners=[]}addEventListener(ee){this.listeners.push(ee)}abort(){this.listeners.forEach(ee=>ee())}}function pr(){return en.apply(this,arguments)}function en(){return(en=(0,d.Z)(function*(){if(!(0,ie.hl)())return He.warn(J.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(B){return He.warn(J.create("indexeddb-unavailable",{errorInfo:B}).message),!1}return!0})).apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(B,ee,_e,Ue,qe,ze,pt){var Q;const H=vt(B);H.then(It=>{_e[It.measurementId]=It.appId,B.options.measurementId&&It.measurementId!==B.options.measurementId&&He.warn(`The measurement ID in the local Firebase config (${B.options.measurementId}) does not match the measurement ID fetched from the server (${It.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(It=>He.error(It)),ee.push(H);const L=pr().then(It=>{if(It)return Ue.getId()}),[Se,Ye]=yield Promise.all([H,L]);De()||Be(ze,Se.measurementId),qe("js",new Date);const at=null!==(Q=null==pt?void 0:pt.config)&&void 0!==Q?Q:{};return at.origin="firebase",at.update=!0,null!=Ye&&(at[le]=Ye),qe("config",Se.measurementId,at),Se.measurementId})).apply(this,arguments)}class tn{constructor(ee){this.app=ee}_delete(){return delete Tn[this.app.options.appId],Promise.resolve()}}let Tn={},Cr=[];const hn={};let Xn,An,xn="dataLayer",qn="gtag",er=!1;function _t(B){if(er)throw J.create("already-initialized");B.dataLayerName&&(xn=B.dataLayerName),B.gtagName&&(qn=B.gtagName)}function Jt(B,ee,_e){!function Wn(){const B=[];if((0,ie.ru)()&&B.push("This is a browser extension environment."),(0,ie.zI)()||B.push("Cookies are not available."),B.length>0){const ee=B.map((Ue,qe)=>`(${qe+1}) ${Ue}`).join(" "),_e=J.create("invalid-analytics-context",{errorInfo:ee});He.warn(_e.message)}}();const Ue=B.options.appId;if(!Ue)throw J.create("no-app-id");if(!B.options.apiKey){if(!B.options.measurementId)throw J.create("no-api-key");He.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${B.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Tn[Ue])throw J.create("already-exists",{id:Ue});if(!er){!function Ge(B){let ee=[];Array.isArray(window[B])?ee=window[B]:window[B]=ee}(xn);const{wrappedGtag:ze,gtagCore:pt}=function Ne(B,ee,_e,Ue,qe){let ze=function(...pt){window[Ue].push(arguments)};return window[qe]&&"function"==typeof window[qe]&&(ze=window[qe]),window[qe]=function Oe(B,ee,_e,Ue){function ze(){return(ze=(0,d.Z)(function*(pt,Q,H){try{"event"===pt?yield et(B,ee,_e,Q,H):"config"===pt?yield ye(B,ee,_e,Ue,Q,H):B("set",Q)}catch(L){He.error(L)}})).apply(this,arguments)}return function qe(pt,Q,H){return ze.apply(this,arguments)}}(ze,B,ee,_e),{gtagCore:ze,wrappedGtag:window[qe]}}(Tn,Cr,hn,xn,qn);An=ze,Xn=pt,er=!0}return Tn[Ue]=function jt(B,ee,_e,Ue,qe,ze,pt){return St.apply(this,arguments)}(B,Cr,hn,ee,Xn,xn,_e),new tn(B)}function Fn(){return(Fn=(0,d.Z)(function*(B,ee,_e,Ue,qe){if(qe&&qe.global)B("event",_e,Ue);else{const ze=yield ee;B("event",_e,Object.assign(Object.assign({},Ue),{send_to:ze}))}})).apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(B,ee,_e,Ue){if(Ue&&Ue.global)return B("set",{screen_name:_e}),Promise.resolve();B("config",yield ee,{update:!0,screen_name:_e})})).apply(this,arguments)}function Ln(){return(Ln=(0,d.Z)(function*(B,ee,_e,Ue){if(Ue&&Ue.global)return B("set",{user_id:_e}),Promise.resolve();B("config",yield ee,{update:!0,user_id:_e})})).apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(B,ee,_e,Ue){if(Ue&&Ue.global){const qe={};for(const ze of Object.keys(_e))qe[`user_properties.${ze}`]=_e[ze];return B("set",qe),Promise.resolve()}B("config",yield ee,{update:!0,user_properties:_e})})).apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(B,ee){const _e=yield B;window[`ga-disable-${_e}`]=!ee})).apply(this,arguments)}function Nt(){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(B){return!1}})).apply(this,arguments)}function yn(B,ee,_e){B=(0,ie.m9)(B),function Bn(B,ee,_e,Ue){return tr.apply(this,arguments)}(An,Tn[B.app.options.appId],ee,_e).catch(Ue=>He.error(Ue))}function nn(B,ee,_e){B=(0,ie.m9)(B),function fn(B,ee,_e,Ue){return Ln.apply(this,arguments)}(An,Tn[B.app.options.appId],ee,_e).catch(Ue=>He.error(Ue))}function F(B,ee,_e){B=(0,ie.m9)(B),function Tr(B,ee,_e,Ue){return Rt.apply(this,arguments)}(An,Tn[B.app.options.appId],ee,_e).catch(Ue=>He.error(Ue))}function q(B,ee){B=(0,ie.m9)(B),function ft(B,ee){return nt.apply(this,arguments)}(Tn[B.app.options.appId],ee).catch(_e=>He.error(_e))}function Z(B,ee,_e,Ue){B=(0,ie.m9)(B),function Zt(B,ee,_e,Ue,qe){return Fn.apply(this,arguments)}(An,Tn[B.app.options.appId],ee,_e,Ue).catch(qe=>He.error(qe))}const Ie="@firebase/analytics",U="0.7.9";!function X(){(0,k._registerComponent)(new pe.wA(he,(ee,{options:_e})=>Jt(ee.getProvider("app").getImmediate(),ee.getProvider("installations-internal").getImmediate(),_e),"PUBLIC")),(0,k._registerComponent)(new pe.wA("analytics-internal",function B(ee){try{const _e=ee.getProvider(he).getImmediate();return{logEvent:(Ue,qe,ze)=>Z(_e,Ue,qe,ze)}}catch(_e){throw J.create("interop-component-reg-failed",{reason:_e})}},"PRIVATE")),(0,k.registerVersion)(Ie,U),(0,k.registerVersion)(Ie,U,"esm2017")}()},3942:(ot,Ce,M)=>{M.d(Ce,{Z:()=>Be});var d=M(2090),k=M(4859),x=M(9681),ie=M(1877);class pe{constructor(ye,be){this._delegate=ye,this.firebase=be,(0,x._addComponent)(ye,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(ye,be=x._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(ye);return!We.isInitialized()&&"EXPLICIT"===(null===(et=We.getComponent())||void 0===et?void 0:et.instantiationMode)&&We.initialize(),We.getImmediate({identifier:be})}_removeServiceInstance(ye,be=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(be)}_addComponent(ye){(0,x._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,x._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function me(){const Ge=function le(Ge){const ye={},be={__esModule:!0,initializeApp:function Oe(J,fe={}){const V=x.initializeApp(J,fe);if((0,d.r3)(ye,V.name))return ye[V.name];const te=new Ge(V,be);return ye[V.name]=te,te},app:We,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function De(J){const fe=J.name,V=fe.replace("-compat","");if(x._registerComponent(J)&&"PUBLIC"===J.type){const te=(ae=We())=>{if("function"!=typeof ae[V])throw he.create("invalid-app-argument",{appName:fe});return ae[V]()};void 0!==J.serviceProps&&(0,d.ZB)(te,J.serviceProps),be[V]=te,Ge.prototype[V]=function(...ae){return this._getService.bind(this,fe).apply(this,J.multipleInstances?ae:[])}}return"PUBLIC"===J.type?be[V]:null},removeApp:function et(J){delete ye[J]},useAsService:function Qe(J,fe){return"serverAuth"===fe?null:fe},modularAPIs:x}};function We(J){if(!(0,d.r3)(ye,J=J||x._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:J});return ye[J]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ne(){return Object.keys(ye).map(J=>ye[J])}}),We.App=Ge,be}(pe);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ye(be){(0,d.ZB)(Ge,be)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ge}(),j=new ie.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Be=z;!function Te(Ge){(0,x.registerVersion)("@firebase/app-compat","0.1.25",Ge)}()},9681:(ot,Ce,M)=>{M.r(Ce),M.d(Ce,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>qn,_DEFAULT_ENTRY_NAME:()=>it,_addComponent:()=>pr,_addOrOverwriteComponent:()=>en,_apps:()=>mn,_clearComponents:()=>Tn,_components:()=>un,_getProvider:()=>St,_registerComponent:()=>jt,_removeServiceInstance:()=>tn,deleteApp:()=>_t,getApp:()=>An,getApps:()=>er,initializeApp:()=>Xn,onLog:()=>Zt,registerVersion:()=>Jt,setLogLevel:()=>Fn});var d=M(5861),k=M(4859),x=M(1877),ie=M(2090),pe=M(8766);class Ee{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(B=>{if(function he(U){const X=U.getComponent();return"VERSION"===(null==X?void 0:X.type)}(B)){const ee=B.getImmediate();return`${ee.library}/${ee.version}`}return null}).filter(B=>B).join(" ")}}const le="@firebase/app",z=new x.Yd("@firebase/app"),it="[DEFAULT]",dt={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,un=new Map;function pr(U,X){try{U.container.addComponent(X)}catch(B){z.debug(`Component ${X.name} failed to register with FirebaseApp ${U.name}`,B)}}function en(U,X){U.container.addOrOverwriteComponent(X)}function jt(U){const X=U.name;if(un.has(X))return z.debug(`There were multiple attempts to register component ${X}.`),!1;un.set(X,U);for(const B of mn.values())pr(B,U);return!0}function St(U,X){const B=U.container.getProvider("heartbeat").getImmediate({optional:!0});return B&&B.triggerHeartbeat(),U.container.getProvider(X)}function tn(U,X,B=it){St(U,X).clearInstance(B)}function Tn(){un.clear()}const hn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class xn{constructor(X,B,ee){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},B),this._name=B.name,this._automaticDataCollectionEnabled=B.automaticDataCollectionEnabled,this._container=ee,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const qn="9.8.1";function Xn(U,X={}){"object"!=typeof X&&(X={name:X});const B=Object.assign({name:it,automaticDataCollectionEnabled:!1},X),ee=B.name;if("string"!=typeof ee||!ee)throw hn.create("bad-app-name",{appName:String(ee)});const _e=mn.get(ee);if(_e){if((0,ie.vZ)(U,_e.options)&&(0,ie.vZ)(B,_e.config))return _e;throw hn.create("duplicate-app",{appName:ee})}const Ue=new k.H0(ee);for(const ze of un.values())Ue.addComponent(ze);const qe=new xn(U,B,Ue);return mn.set(ee,qe),qe}function An(U=it){const X=mn.get(U);if(!X)throw hn.create("no-app",{appName:U});return X}function er(){return Array.from(mn.values())}function _t(U){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(U){const X=U.name;mn.has(X)&&(mn.delete(X),yield Promise.all(U.container.getProviders().map(B=>B.delete())),U.isDeleted=!0)})).apply(this,arguments)}function Jt(U,X,B){var ee;let _e=null!==(ee=dt[U])&&void 0!==ee?ee:U;B&&(_e+=`-${B}`);const Ue=_e.match(/\s|\//),qe=X.match(/\s|\//);if(Ue||qe){const ze=[`Unable to register library "${_e}" with version "${X}":`];return Ue&&ze.push(`library name "${_e}" contains illegal characters (whitespace or "/")`),Ue&&qe&&ze.push("and"),qe&&ze.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void z.warn(ze.join(" "))}jt(new k.wA(`${_e}-version`,()=>({library:_e,version:X}),"VERSION"))}function Zt(U,X){if(null!==U&&"function"!=typeof U)throw hn.create("invalid-log-argument");(0,x.Am)(U,X)}function Fn(U){(0,x.Ub)(U)}const fn="firebase-heartbeat-store";let Ln=null;function Tr(){return Ln||(Ln=(0,pe.X3)("firebase-heartbeat-database",1,{upgrade:(U,X)=>{0===X&&U.createObjectStore(fn)}}).catch(U=>{throw hn.create("storage-open",{originalErrorMessage:U.message})})),Ln}function ft(){return(ft=(0,d.Z)(function*(U){try{return(yield Tr()).transaction(fn).objectStore(fn).get(Ar(U))}catch(X){throw hn.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function nt(U,X){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(U,X){try{const ee=(yield Tr()).transaction(fn,"readwrite");return yield ee.objectStore(fn).put(X,Ar(U)),ee.done}catch(B){throw hn.create("storage-set",{originalErrorMessage:B.message})}})).apply(this,arguments)}function Ar(U){return`${U.name}!${U.options.appId}`}class yn{constructor(X){this.container=X,this._heartbeatsCache=null;const B=this.container.getProvider("app").getImmediate();this._storage=new q(B),this._heartbeatsCachePromise=this._storage.read().then(ee=>(this._heartbeatsCache=ee,ee))}triggerHeartbeat(){var X=this;return(0,d.Z)(function*(){const ee=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_e=nn();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==_e&&!X._heartbeatsCache.heartbeats.some(Ue=>Ue.date===_e))return X._heartbeatsCache.heartbeats.push({date:_e,agent:ee}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Ue=>{const qe=new Date(Ue.date).valueOf();return Date.now()-qe<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,d.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const B=nn(),{heartbeatsToSend:ee,unsentEntries:_e}=function F(U,X=1024){const B=[];let ee=U.slice();for(const _e of U){const Ue=B.find(qe=>qe.agent===_e.agent);if(Ue){if(Ue.dates.push(_e.date),Z(B)>X){Ue.dates.pop();break}}else if(B.push({agent:_e.agent,dates:[_e.date]}),Z(B)>X){B.pop();break}ee=ee.slice(1)}return{heartbeatsToSend:B,unsentEntries:ee}}(X._heartbeatsCache.heartbeats),Ue=(0,ie.L)(JSON.stringify({version:2,heartbeats:ee}));return X._heartbeatsCache.lastSentHeartbeatDate=B,_e.length>0?(X._heartbeatsCache.heartbeats=_e,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Ue})()}}function nn(){return(new Date).toISOString().substring(0,10)}class q{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,d.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function Rt(U){return ft.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var B=this;return(0,d.Z)(function*(){var ee;if(yield B._canUseIndexedDBPromise){const Ue=yield B.read();return nt(B.app,{lastSentHeartbeatDate:null!==(ee=X.lastSentHeartbeatDate)&&void 0!==ee?ee:Ue.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var B=this;return(0,d.Z)(function*(){var ee;if(yield B._canUseIndexedDBPromise){const Ue=yield B.read();return nt(B.app,{lastSentHeartbeatDate:null!==(ee=X.lastSentHeartbeatDate)&&void 0!==ee?ee:Ue.lastSentHeartbeatDate,heartbeats:[...Ue.heartbeats,...X.heartbeats]})}})()}}function Z(U){return(0,ie.L)(JSON.stringify({version:2,heartbeats:U})).length}!function Ie(U){jt(new k.wA("platform-logger",X=>new Ee(X),"PRIVATE")),jt(new k.wA("heartbeat",X=>new yn(X),"PRIVATE")),Jt(le,"0.7.24",U),Jt(le,"0.7.24","esm2017"),Jt("fire-js","")}("")},4859:(ot,Ce,M)=>{M.d(Ce,{H0:()=>le,wA:()=>x});var d=M(5861),k=M(2090);class x{constructor(z,j,se){this.name=z,this.instanceFactory=j,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ie="[DEFAULT]";class pe{constructor(z,j){this.name=z,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const j=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(j)){const se=new k.BH;if(this.instancesDeferred.set(j,se),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&se.resolve(He)}catch(He){}}return this.instancesDeferred.get(j).promise}getImmediate(z){var j;const se=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),He=null!==(j=null==z?void 0:z.optional)&&void 0!==j&&j;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function he(me){return"EAGER"===me.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(j){}for(const[j,se]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:He});se.resolve(Te)}catch(Te){}}}}clearInstance(z=ie){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,d.Z)(function*(){const j=Array.from(z.instances.values());yield Promise.all([...j.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...j.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ie){return this.instances.has(z)}getOptions(z=ie){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:j={}}=z,se=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:se,options:j});for(const[Te,Be]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Te)&&Be.resolve(He);return He}onInit(z,j){var se;const He=this.normalizeInstanceIdentifier(j),Te=null!==(se=this.onInitCallbacks.get(He))&&void 0!==se?se:new Set;Te.add(z),this.onInitCallbacks.set(He,Te);const Be=this.instances.get(He);return Be&&z(Be,He),()=>{Te.delete(z)}}invokeOnInitCallbacks(z,j){const se=this.onInitCallbacks.get(j);if(se)for(const He of se)try{He(z,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:z,options:j={}}){let se=this.instances.get(z);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(me=z,me===ie?void 0:me),options:j}),this.instances.set(z,se),this.instancesOptions.set(z,j),this.invokeOnInitCallbacks(se,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,se)}catch(He){}var me;return se||null}normalizeInstanceIdentifier(z=ie){return this.component?this.component.multipleInstances?z:ie:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const j=this.getProvider(z.name);if(j.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);j.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const j=new pe(z,this);return this.providers.set(z,j),j}getProviders(){return Array.from(this.providers.values())}}},2833:(ot,Ce,M)=>{var d=M(5861),k=M(9681),x=M(4859),ie=M(2090),pe=M(8766);const Ee="@firebase/installations",me="w:0.5.9",z="FIS_v2",Ge=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ye(W){return W instanceof ie.ZR&&W.code.includes("request-failed")}function be({projectId:W}){return`https://firebaseinstallations.googleapis.com/v1/projects/${W}/installations`}function et(W){return{token:W.token,requestStatus:2,expiresIn:fe(W.expiresIn),creationTime:Date.now()}}function We(W,de){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(W,de){const gt=(yield de.json()).error;return Ge.create("request-failed",{requestName:W,serverCode:gt.code,serverMessage:gt.message,serverStatus:gt.status})})).apply(this,arguments)}function Ne({apiKey:W}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":W})}function De(W,{refreshToken:de}){const Le=Ne(W);return Le.append("Authorization",function V(W){return`${z} ${W}`}(de)),Le}function Qe(W){return J.apply(this,arguments)}function J(){return(J=(0,d.Z)(function*(W){const de=yield W();return de.status>=500&&de.status<600?W():de})).apply(this,arguments)}function fe(W){return Number(W.replace("s","000"))}function te(W,de){return ae.apply(this,arguments)}function ae(){return(ae=(0,d.Z)(function*({appConfig:W,heartbeatServiceProvider:de},{fid:Le}){const gt=be(W),kt=Ne(W),Kt=de.getImmediate({optional:!0});if(Kt){const bt=yield Kt.getHeartbeatsHeader();bt&&kt.append("x-firebase-client",bt)}const Rn={method:"POST",headers:kt,body:JSON.stringify({fid:Le,authVersion:z,appId:W.appId,sdkVersion:me})},gr=yield Qe(()=>fetch(gt,Rn));if(gr.ok){const bt=yield gr.json();return{fid:bt.fid||Le,registrationStatus:2,refreshToken:bt.refreshToken,authToken:et(bt.authToken)}}throw yield We("Create Installation",gr)})).apply(this,arguments)}function ce(W){return new Promise(de=>{setTimeout(de,W)})}const oe=/^[cdef][\w-]{21}$/;function At(){try{const W=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(W),W[0]=112+W[0]%16;const Le=function _n(W){return function Re(W){return btoa(String.fromCharCode(...W)).replace(/\+/g,"-").replace(/\//g,"_")}(W).substr(0,22)}(W);return oe.test(Le)?Le:""}catch(W){return""}}function it(W){return`${W.appName}!${W.appId}`}const dt=new Map;function mn(W,de){const Le=it(W);en(Le,de),function jt(W,de){const Le=function tn(){return!St&&"BroadcastChannel"in self&&(St=new BroadcastChannel("[Firebase] FID Change"),St.onmessage=W=>{en(W.data.key,W.data.fid)}),St}();Le&&Le.postMessage({key:W,fid:de}),function Tn(){0===dt.size&&St&&(St.close(),St=null)}()}(Le,de)}function en(W,de){const Le=dt.get(W);if(Le)for(const gt of Le)gt(de)}let St=null;const xn="firebase-installations-store";let qn=null;function Xn(){return qn||(qn=(0,pe.X3)("firebase-installations-database",1,{upgrade:(W,de)=>{0===de&&W.createObjectStore(xn)}})),qn}function An(W,de){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(W,de){const Le=it(W),kt=(yield Xn()).transaction(xn,"readwrite"),Kt=kt.objectStore(xn),Ot=yield Kt.get(Le);return yield Kt.put(de,Le),yield kt.done,(!Ot||Ot.fid!==de.fid)&&mn(W,de.fid),de})).apply(this,arguments)}function _t(W){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(W){const de=it(W),gt=(yield Xn()).transaction(xn,"readwrite");yield gt.objectStore(xn).delete(de),yield gt.done})).apply(this,arguments)}function Jt(W,de){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(W,de){const Le=it(W),kt=(yield Xn()).transaction(xn,"readwrite"),Kt=kt.objectStore(xn),Ot=yield Kt.get(Le),Rn=de(Ot);return void 0===Rn?yield Kt.delete(Le):yield Kt.put(Rn,Le),yield kt.done,Rn&&(!Ot||Ot.fid!==Rn.fid)&&mn(W,Rn.fid),Rn})).apply(this,arguments)}function Fn(W){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(W){let de;const Le=yield Jt(W.appConfig,gt=>{const kt=tr(gt),Kt=fn(W,kt);return de=Kt.registrationPromise,Kt.installationEntry});return""===Le.fid?{installationEntry:yield de}:{installationEntry:Le,registrationPromise:de}})).apply(this,arguments)}function tr(W){return wn(W||{fid:At(),registrationStatus:0})}function fn(W,de){if(0===de.registrationStatus){if(!navigator.onLine)return{installationEntry:de,registrationPromise:Promise.reject(Ge.create("app-offline"))};const Le={fid:de.fid,registrationStatus:1,registrationTime:Date.now()},gt=function Ln(W,de){return Tr.apply(this,arguments)}(W,Le);return{installationEntry:Le,registrationPromise:gt}}return 1===de.registrationStatus?{installationEntry:de,registrationPromise:Rt(W)}:{installationEntry:de}}function Tr(){return(Tr=(0,d.Z)(function*(W,de){try{const Le=yield te(W,de);return An(W.appConfig,Le)}catch(Le){throw ye(Le)&&409===Le.customData.serverCode?yield _t(W.appConfig):yield An(W.appConfig,{fid:de.fid,registrationStatus:0}),Le}})).apply(this,arguments)}function Rt(W){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(W){let de=yield nt(W.appConfig);for(;1===de.registrationStatus;)yield ce(100),de=yield nt(W.appConfig);if(0===de.registrationStatus){const{installationEntry:Le,registrationPromise:gt}=yield Fn(W);return gt||Le}return de})).apply(this,arguments)}function nt(W){return Jt(W,de=>{if(!de)throw Ge.create("installation-not-found");return wn(de)})}function wn(W){return function Ar(W){return 1===W.registrationStatus&&W.registrationTime+1e4<Date.now()}(W)?{fid:W.fid,registrationStatus:0}:W}function Nt(W,de){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*({appConfig:W,heartbeatServiceProvider:de},Le){const gt=yn(W,Le),kt=De(W,Le),Kt=de.getImmediate({optional:!0});if(Kt){const bt=yield Kt.getHeartbeatsHeader();bt&&kt.append("x-firebase-client",bt)}const Rn={method:"POST",headers:kt,body:JSON.stringify({installation:{sdkVersion:me,appId:W.appId}})},gr=yield Qe(()=>fetch(gt,Rn));if(gr.ok)return et(yield gr.json());throw yield We("Generate Auth Token",gr)})).apply(this,arguments)}function yn(W,{fid:de}){return`${be(W)}/${de}/authTokens:generate`}function nn(W){return F.apply(this,arguments)}function F(){return(F=(0,d.Z)(function*(W,de=!1){let Le;const gt=yield Jt(W.appConfig,Kt=>{if(!B(Kt))throw Ge.create("not-registered");const Ot=Kt.authToken;if(!de&&ee(Ot))return Kt;if(1===Ot.requestStatus)return Le=q(W,de),Kt;{if(!navigator.onLine)throw Ge.create("app-offline");const Rn=Ue(Kt);return Le=U(W,Rn),Rn}});return Le?yield Le:gt.authToken})).apply(this,arguments)}function q(W,de){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(W,de){let Le=yield Ie(W.appConfig);for(;1===Le.authToken.requestStatus;)yield ce(100),Le=yield Ie(W.appConfig);const gt=Le.authToken;return 0===gt.requestStatus?nn(W,de):gt})).apply(this,arguments)}function Ie(W){return Jt(W,de=>{if(!B(de))throw Ge.create("not-registered");return function qe(W){return 1===W.requestStatus&&W.requestTime+1e4<Date.now()}(de.authToken)?Object.assign(Object.assign({},de),{authToken:{requestStatus:0}}):de})}function U(W,de){return X.apply(this,arguments)}function X(){return(X=(0,d.Z)(function*(W,de){try{const Le=yield Nt(W,de),gt=Object.assign(Object.assign({},de),{authToken:Le});return yield An(W.appConfig,gt),Le}catch(Le){if(!ye(Le)||401!==Le.customData.serverCode&&404!==Le.customData.serverCode){const gt=Object.assign(Object.assign({},de),{authToken:{requestStatus:0}});yield An(W.appConfig,gt)}else yield _t(W.appConfig);throw Le}})).apply(this,arguments)}function B(W){return void 0!==W&&2===W.registrationStatus}function ee(W){return 2===W.requestStatus&&!function _e(W){const de=Date.now();return de<W.creationTime||W.creationTime+W.expiresIn<de+36e5}(W)}function Ue(W){const de={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},W),{authToken:de})}function pt(){return(pt=(0,d.Z)(function*(W){const de=W,{installationEntry:Le,registrationPromise:gt}=yield Fn(de);return gt?gt.catch(console.error):nn(de).catch(console.error),Le.fid})).apply(this,arguments)}function H(){return(H=(0,d.Z)(function*(W,de=!1){const Le=W;return yield L(Le),(yield nn(Le,de)).token})).apply(this,arguments)}function L(W){return Se.apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(W){const{registrationPromise:de}=yield Fn(W);de&&(yield de)})).apply(this,arguments)}function Vn(W){return Ge.create("missing-app-config-values",{valueName:W})}const Sr="installations",ns=W=>{const de=W.getProvider("app").getImmediate(),Le=function Vt(W){if(!W||!W.options)throw Vn("App Configuration");if(!W.name)throw Vn("App Name");const de=["projectId","apiKey","appId"];for(const Le of de)if(!W.options[Le])throw Vn(Le);return{appName:W.name,projectId:W.options.projectId,apiKey:W.options.apiKey,appId:W.options.appId}}(de);return{app:de,appConfig:Le,heartbeatServiceProvider:(0,k._getProvider)(de,"heartbeat"),_delete:()=>Promise.resolve()}},wr=W=>{const de=W.getProvider("app").getImmediate(),Le=(0,k._getProvider)(de,Sr).getImmediate();return{getId:()=>function ze(W){return pt.apply(this,arguments)}(Le),getToken:kt=>function Q(W){return H.apply(this,arguments)}(Le,kt)}};(function Ze(){(0,k._registerComponent)(new x.wA(Sr,ns,"PUBLIC")),(0,k._registerComponent)(new x.wA("installations-internal",wr,"PRIVATE"))})(),(0,k.registerVersion)(Ee,"0.5.9"),(0,k.registerVersion)(Ee,"0.5.9","esm2017")},1877:(ot,Ce,M)=>{M.d(Ce,{Am:()=>me,Ub:()=>le,Yd:()=>he,in:()=>k});const d=[];var k=(()=>{return(z=k||(k={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",k;var z})();const x={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},ie=k.INFO,pe={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},Ee=(z,j,...se)=>{if(j<z.logLevel)return;const He=(new Date).toISOString(),Te=pe[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${He}]  ${z.name}:`,...se)};class he{constructor(j){this.name=j,this._logLevel=ie,this._logHandler=Ee,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in k))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?x[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...j),this._logHandler(this,k.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...j),this._logHandler(this,k.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,k.INFO,...j),this._logHandler(this,k.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,k.WARN,...j),this._logHandler(this,k.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...j),this._logHandler(this,k.ERROR,...j)}}function le(z){d.forEach(j=>{j.setLogLevel(z)})}function me(z,j){for(const se of d){let He=null;j&&j.level&&(He=x[j.level]),se.userLogHandler=null===z?null:(Te,Be,...Ge)=>{const ye=Ge.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(et){return null}}).filter(be=>be).join(" ");Be>=(null!=He?He:Te.logLevel)&&z({level:k[Be].toLowerCase(),message:ye,args:Ge,type:Te.name})}}}},8766:(ot,Ce,M)=>{M.d(Ce,{Lj:()=>Oe,X3:()=>We});var d=M(5861);let x,ie;const he=new WeakMap,le=new WeakMap,me=new WeakMap,z=new WeakMap,j=new WeakMap;let Te={get(fe,V,te){if(fe instanceof IDBTransaction){if("done"===V)return le.get(fe);if("objectStoreNames"===V)return fe.objectStoreNames||me.get(fe);if("store"===V)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return be(fe[V])},set:(fe,V,te)=>(fe[V]=te,!0),has:(fe,V)=>fe instanceof IDBTransaction&&("done"===V||"store"===V)||V in fe};function ye(fe){return"function"==typeof fe?function Ge(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...V){return fe.apply(et(this),V),be(he.get(this))}:function(...V){return be(fe.apply(et(this),V))}:function(V,...te){const ae=fe.call(et(this),V,...te);return me.set(ae,V.sort?V.sort():[V]),be(ae)}}(fe):(fe instanceof IDBTransaction&&function He(fe){if(le.has(fe))return;const V=new Promise((te,ae)=>{const ce=()=>{fe.removeEventListener("complete",Re),fe.removeEventListener("error",oe),fe.removeEventListener("abort",oe)},Re=()=>{te(),ce()},oe=()=>{ae(fe.error||new DOMException("AbortError","AbortError")),ce()};fe.addEventListener("complete",Re),fe.addEventListener("error",oe),fe.addEventListener("abort",oe)});le.set(fe,V)}(fe),((fe,V)=>V.some(te=>fe instanceof te))(fe,function pe(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Te):fe)}function be(fe){if(fe instanceof IDBRequest)return function se(fe){const V=new Promise((te,ae)=>{const ce=()=>{fe.removeEventListener("success",Re),fe.removeEventListener("error",oe)},Re=()=>{te(be(fe.result)),ce()},oe=()=>{ae(fe.error),ce()};fe.addEventListener("success",Re),fe.addEventListener("error",oe)});return V.then(te=>{te instanceof IDBCursor&&he.set(te,fe)}).catch(()=>{}),j.set(V,fe),V}(fe);if(z.has(fe))return z.get(fe);const V=ye(fe);return V!==fe&&(z.set(fe,V),j.set(V,fe)),V}const et=fe=>j.get(fe);function We(fe,V,{blocked:te,upgrade:ae,blocking:ce,terminated:Re}={}){const oe=indexedDB.open(fe,V),vt=be(oe);return ae&&oe.addEventListener("upgradeneeded",At=>{ae(be(oe.result),At.oldVersion,At.newVersion,be(oe.transaction))}),te&&oe.addEventListener("blocked",()=>te()),vt.then(At=>{Re&&At.addEventListener("close",()=>Re()),ce&&At.addEventListener("versionchange",()=>ce())}).catch(()=>{}),vt}function Oe(fe,{blocked:V}={}){const te=indexedDB.deleteDatabase(fe);return V&&te.addEventListener("blocked",()=>V()),be(te).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Qe=new Map;function J(fe,V){if(!(fe instanceof IDBDatabase)||V in fe||"string"!=typeof V)return;if(Qe.get(V))return Qe.get(V);const te=V.replace(/FromIndex$/,""),ae=V!==te,ce=De.includes(te);if(!(te in(ae?IDBIndex:IDBObjectStore).prototype)||!ce&&!Ne.includes(te))return;const Re=function(){var oe=(0,d.Z)(function*(vt,...At){const _n=this.transaction(vt,ce?"readwrite":"readonly");let it=_n.store;return ae&&(it=it.index(At.shift())),(yield Promise.all([it[te](...At),ce&&_n.done]))[0]});return function(At){return oe.apply(this,arguments)}}();return Qe.set(V,Re),Re}!function Be(fe){Te=fe(Te)}(fe=>vR(yR({},fe),{get:(V,te,ae)=>J(V,te)||fe.get(V,te,ae),has:(V,te)=>!!J(V,te)||fe.has(V,te)}))},5861:(ot,Ce,M)=>{function d(x,ie,pe,Ee,he,le,me){try{var z=x[le](me),j=z.value}catch(se){return void pe(se)}z.done?ie(j):Promise.resolve(j).then(Ee,he)}function k(x){return function(){var ie=this,pe=arguments;return new Promise(function(Ee,he){var le=x.apply(ie,pe);function me(j){d(le,Ee,he,me,z,"next",j)}function z(j){d(le,Ee,he,me,z,"throw",j)}me(void 0)})}}M.d(Ce,{Z:()=>k})}},ot=>{ot(ot.s=5718)}]);